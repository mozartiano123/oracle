select a.SUM_DMLS, a.owner, a.table_name, a.last_analyzed, i.index_name, v.statistic_name, v.value ios#
from (
                select * from (
                                select distinct sum(m.inserts+m.updates+m.deletes) as SUM_DMLS, t.owner, t.table_name--, t.partitioned, t.last_analyzed
                                from mon_mods_all$ h, dba_tables j, dba_objects k
                                where t.owner not 
                                in ('SYS','XDB','DATAPOINT','SYSMAN','SQLTXPLAIN','EXFSYS','SYSTEM','DBSNMP','DBA_MAINTENANCE','DATAPOINT_AUDIT','STRATEGY_DBA_MONITOR'
                                  ,'PERFSTAT')
                                and m.OBJ#=o.object_id and o.object_name=t.table_name
                                group by t.owner, t.table_name
                                order by 1 desc
                                                                  ) t
where rownum<=20
                ) a
--inner join dba_tables t on (a.owner=t.owner and a.table_name=t.table_name)
inner join dba_indexes i on (a.owner=i.table_owner and a.table_name=i.table_name)
inner join v$segment_statistics v on (i.owner=v.owner and i.index_name=v.object_name)
WHERE v.Statistic_Name in ('logical reads','physical reads','physical writes')
/
-- 1st step: create the tablespace
CREATE TABLESPACE "DBA_MAINTENANCE_TBS" DATAFILE
  SIZE 1G
  LOGGING ONLINE PERMANENT BLOCKSIZE 8192
  EXTENT MANAGEMENT LOCAL AUTOALLOCATE DEFAULT
 NOCOMPRESS  SEGMENT SPACE MANAGEMENT AUTO;
-- 2nd step: create the schema
CREATE USER "DBTUNE" IDENTIFIED BY "Sprint4YOU!"
      DEFAULT TABLESPACE "USERS"
      TEMPORARY TABLESPACE "TEMP_01"
      PROFILE "SPRINT_APP_PROFILE"
	  quota unlimited on USERS;
Grant create session to dbtune;
grant create database link to dbtune;
grant create table to dbtune;
grant create procedure to dbtune;
grant SELECT on SYS.DBA_DATA_FILES to DBTUNE ;
grant SELECT on SYS.DBA_FREE_SPACE to DBTUNE ;
grant SELECT on SYS.DBA_HIST_SNAPSHOT to DBTUNE ;
grant SELECT on SYS.DBA_HIST_SQLSTAT to DBTUNE ;
grant SELECT on SYS.DBA_HIST_SQLTEXT to DBTUNE ;
grant SELECT on SYS.DBA_HIST_SQL_PLAN to DBTUNE ;
grant SELECT on SYS.DBA_INDEXES to DBTUNE ;
grant SELECT on SYS.DBA_SEGMENTS to DBTUNE ;
grant SELECT on SYS.DBA_TABLES to DBTUNE ;
grant SELECT on SYS.DBA_TABLESPACES to DBTUNE ;
grant SELECT on SYS.DBA_USERS to DBTUNE ;
grant SELECT on SYS.DBA_PART_INDEXES to DBTUNE ;
grant SELECT on SYS.GV_$SESSION to DBTUNE ;
grant SELECT on SYS.V_$ASM_DISKGROUP to DBTUNE ;
grant SELECT on SYS.GV_$segment_statistics to DBTUNE;
grant SELECT on SYS.obj$ to DBTUNE;
grant SELECT on SYS.tab$ to DBTUNE;
grant SELECT on SYS.ind$ to DBTUNE;
grant SELECT on SYS.user$ to DBTUNE;
grant SELECT on SYS.mon_mods_all$ to DBTUNE;
grant SELECT on SYS.gv_$database to DBTUNE;
--3rd step create view
create or replace view dbtune.index_usage as
select a.SUM_DMLS, a.oid oid, a.owner table_owner , a.table_name table_name, a.analyzed, i.idx_name, i.statistic_name ,i.value io#
from (
                select * from (
                                select distinct inserts+updates+deletes as SUM_DMLS,o.name TABLE_NAME, u.name OWNER, tb.analyzetime ANALYZED,  o.OBJ# oid
                                from sys.mon_mods_all$ m
                                join sys.obj$ o on (m.obj#=o.obj#)
                                join sys.tab$ tb on (o.obj#=tb.obj#)
                                join
                                (select user#, name from sys.user$
                                	where name not in ('SYS','XDB','DATAPOINT','SYSMAN','SQLTXPLAIN','EXFSYS','SYSTEM','DBSNMP'
                                    ,'DBA_MAINTENANCE','DATAPOINT_AUDIT','STRATEGY_DBA_MONITOR','PERFSTAT')
                                	) u
                                on (u.user#=o.owner#)
                                order by 1 desc
                                                                  ) t
where rownum<21
                ) a
join (
                                select ob.obj# objid, ob.name idx_name, id.bo# parid, v.statistic_name,v.value
                                from sys.obj$ ob join sys.ind$ id on (ob.obj# = id.obj#)
								join gv$segment_statistics v on (id.obj#=v.obj#)
								WHERE v.Statistic_Name in ('logical reads','physical reads','physical writes')
) i on (a.oid=i.parid)
/
--4th run the query
select * from (
select * from dbtune.index_usage
)
pivot
(
sum (IO#) for STATISTIC_NAME in ('logical reads' as LogicalReads,'physical reads' as PhysicalReads,'physical writes' as PhysicalWrites)
)
order by 1 desc
/
col table_name for a50
col index_name for a50
select /*+parallel(8)*/ t.table_name, count(index_name)
from dba_tables t
join dba_indexes i on (t.table_name=i.table_name and t.owner=i.table_owner)
join (select *
	from gv$segment_statistics where Statistic_Name in ('logical reads','physical reads','physical writes')
	and object_type like 'INDEX%') v
	on (i.owner=v.owner and i.index_name=v.object_name)
where t.owner='SUPER_CONF'
and v.Statistic_Name in ('logical reads','physical reads','physical writes')
group by t.table_name
order by 1
/
selectto_char(min(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as mindate, to_char(max(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as maxdate
from dba_indexes i
join gv$segment_statistics v on (i.owner=v.owner and i.index_name=v.object_name)
where i.owner='SUPER_CONF'
/
selectto_char(min(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as mindate, to_char(max(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as maxdate
from dba_tables
where owner='SUPER_CONF'
/
select hlt.sdmls, hlt.owner, hlt.tname, t.last_analyzed, t.partitioned
,i.owner, i.index_name
--,v.statistic_name, v.value ios#
from dbtune.hl_tables hlt join dba_tables t on (hlt.owner=t.owner and hlt.tname=t.table_name)
join dba_indexes i on (hlt.owner=i.table_owner and hlt.tname=i.table_name)
where hlt.tname='OP'
--join ( select * from v$segment_statistics
--WHERE statistic_Name in ('logical reads','physical reads','physical writes')
--) v on (i.owner=v.owner and i.index_name=v.object_name)
/
create table dbtune.hl_tables (
 eid varchar2(20)
,owner varchar2(30)
,tname varchar2(30)
,sdmls varchar2(15))
/
insert into dbtune.hl_tables (eid, owner, tname, sdmls)
 select to_char(sysdate,'YYYYMMDD HHMISS'), owner, table_name, sum_dmls from (
                                select distinct t.owner, t.table_name, sum(m.inserts+m.updates+m.deletes) as SUM_DMLS --, t.partitioned, t.last_analyzed
                                --from mon_mods_all$ m, dba_tables t, dba_objects o
                                from mon_mods_all$ m join dba_objects o on (m.obj#=o.object_id)
                                join dba_tables t on (o.object_name = t.table_name and o.owner=t.owner)
                                where o.owner not in ('SYS','XDB','DATAPOINT','SYSMAN','SQLTXPLAIN','EXFSYS','SYSTEM','DBSNMP','DBA_MAINTENANCE','DATAPOINT_AUDIT','STRATEGY_DBA_MONITOR','PERFSTAT')
                                --and m.obj#=o.object_id and o.object_name=t.table_name
                                group by t.owner, t.table_name
                                order by 3 desc
                                                                  ) ts
where rownum<=20
/
exec dbms_stats.gather_index_stats(ownname=>'SUPER_CONF',indname=>'IDX_CFD_SBA_ENTITY_OLD',estimate_percent=>1);
/
selectto_char(min(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as mindate, to_char(max(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as maxdatefrom v$segment_statistics where object_name='AK1_OP';
  SELECT /*+parallel(8)*/ t.owner, t.table_name, nvl(t.num_rows,0) as num_rows
  ,lr.object_type,lr.tablespace_name, coalesce(lr.subobject_name,pr.subobject_name) as subobject, lr.obj#, lr.value+pr.value AS total_reads
  ,s.bytes*s.BLOCKS/1024/1024
  FROM (SELECT owner,object_name,value,subobject_name,tablespace_name,object_type,obj# FROM gv$segment_statistics
        WHERE statistic_name='logical reads') lr,
       (SELECT owner,object_name,value,subobject_name,tablespace_name,object_type,obj#  FROM gv$segment_statistics
        WHERE statistic_name='physical reads') pr,
  dba_tables t join dba_segments s on (t.table_name=s.segment_name and t.owner=s.owner)
  WHERE lr.owner=pr.owner AND lr.object_name=pr.object_name
    AND lr.owner=t.owner AND lr.object_name=t.table_name
    and t.owner not in ('SYS','XDB','DATAPOINT','SYSMAN','SQLTXPLAIN','EXFSYS','SYSTEM','DBSNMP','DBA_MAINTENANCE','DATAPOINT_AUDIT','STRATEGY_DBA_MONITOR','PERFSTAT')
  ORDER BY total_reads;
col OBJECT_NAME for a30
col SUBOBJECT_NAME for a30
col OWNER for a15
col TOTAL_READS for 999,999,999,999
col mb for 9,999,999
compute sum of mb on report
break on report
   select * from (SELECT distinct ss.owner,ss.object_name,ss.subobject_name,ss.tablespace_name,ss.object_type,ss.obj#, a.total_reads,trunc(s.bytes/1024/1024) as mb
   from gv$segment_statistics ss
   join
        (SELECT sum(value) as total_reads, obj# FROM gv$segment_statistics
         WHERE statistic_name in ('logical reads','physical reads')
         group by obj#) a
   on (a.obj#=ss.obj#)
   join dba_segments s on (ss.owner=s.owner and ss.object_name=s.segment_name )
   where ss.owner not in ('SYS','XDB','DATAPOINT','SYSMAN','SQLTXPLAIN','EXFSYS','SYSTEM','DBSNMP','DBA_MAINTENANCE','DATAPOINT_AUDIT','STRATEGY_DBA_MONITOR','PERFSTAT')
   and ss.object_type in ('TABLE','TABLE PARTITION')
   order by total_reads desc)
   where rownum <=100
   /
compute sum of mb on report
break on report
   select * from    (SELECT distinct ss.owner,ss.object_name,ss.subobject_name,ss.tablespace_name,ss.object_type,ss.obj#, a.total_reads,trunc(s.bytes/1024/1024) as mb
   from gv$segment_statistics ss
   join
        (SELECT sum(value) as total_reads, obj# FROM gv$segment_statistics
         WHERE statistic_name in ('logical reads','physical reads')
         group by obj#) a
   on (a.obj#=ss.obj#)
   join dba_segments s on (ss.owner=s.owner and ss.object_name=s.segment_name)
   where ss.owner not in ('SYS','XDB','DATAPOINT','SYSMAN','SQLTXPLAIN','EXFSYS','SYSTEM','DBSNMP','DBA_MAINTENANCE','DATAPOINT_AUDIT','STRATEGY_DBA_MONITOR','PERFSTAT')
   and ss.object_type in ('INDEX','INDEX PARTITION')
   order by total_reads desc)
  where rownum <=100
   /
  select owner, table_name, partitioned, TEMPORARY, INITIAL_EXTENT, MAX_EXTENTS from dba_tables where last_analyzed is null
  and owner not in ('SYS','XDB','DATAPOINT','SYSMAN','SQLTXPLAIN','EXFSYS','SYSTEM','DBSNMP','DBA_MAINTENANCE','DATAPOINT_AUDIT','STRATEGY_DBA_MONITOR','PERFSTAT')
  and temporary='N';
  select owner, index_name, partitioned, , tablespace_name from dba_indexes where last_analyzed is null
  and owner not in ('SYS','XDB','DATAPOINT','SYSMAN','SQLTXPLAIN','EXFSYS','SYSTEM','DBSNMP','DBA_MAINTENANCE','DATAPOINT_AUDIT','STRATEGY_DBA_MONITOR','PERFSTAT');
col owner for a16
col segment_name for a30
col file_name for a60
col partition_name for a30
col tablespace_name for a16
select /*+parallel(4)*/ distinct e.owner, e.segment_name, nvl(e.partition_name,'N/A'), e.tablespace_name--,
--substr(file_name,2,instr(d.file_name,'/')-1) as dg
from dba_extents e join dba_data_files d on (e.file_id=d.file_id)
where --e.segment_type in ('TABLE','TABLE PARTITION')
e.tablespace_name in ('SPRINT_USAGE_DATA','SPRINT_MODEL_DATA')
and e.owner not in ('SYS','XDB','DATAPOINT','SYSMAN','SQLTXPLAIN','EXFSYS','SYSTEM','DBSNMP','DBA_MAINTENANCE','DATAPOINT_AUDIT','STRATEGY_DBA_MONITOR','PERFSTAT')
order by SEGMENT_NAME
/
col owner for a16
col segment_name for a30
col file_name for a60
col partition_name for a30
col tablespace_name for a16
col dg for a20
select /*+parallel(8)*/ distinct e.owner, e.segment_name, nvl(e.partition_name,'N/A'), e.tablespace_name,
substr(file_name,2,instr(d.file_name,'/')-1) as dg
from dba_extents e join dba_data_files d on (e.file_id=d.file_id)
where e.segment_type in ('INDEX','INDEX PARTITION')
and e.owner not in ('SYS','XDB','DATAPOINT','SYSMAN','SQLTXPLAIN','EXFSYS','SYSTEM','DBSNMP','DBA_MAINTENANCE','DATAPOINT_AUDIT','STRATEGY_DBA_MONITOR','PERFSTAT')
order by SEGMENT_NAME
/
15:46:27,038 WARN  [org.hibernate.util.JDBCExceptionReporter] (ajp-/10.229.52.31:8109-26) SQL Error: 28817, SQLState: 99999
15:46:27,038 ERROR [org.hibernate.util.JDBCExceptionReporter] (ajp-/10.229.52.31:8109-26) ORA-28817: PL/SQL function returned an error.
ORA-06512: at "SYS.DBMS_CRYPTO_FFI", line 67
ORA-06512: at "SYS.DBMS_CRYPTO", line 44
ORA-06512: at "PCIADM.PCI_PKG", line 62
-- TOKENIZATION
select /*+ no_mergeb) */ decode(cl1,NULL,'NOTTOKENIZED','TOKENIZED'),count(*) from (
select /*+ parallel(a,6) */
translate( pci_pkg.d_cc(EXP_DATE,654916320742196284 ) , '_01234 56789-',' ') cl1
from CLCSADM.CLCS_CREDIT_CARD  a where
EXP_DATE is not null
) b
group by decode(cl1,NULL,'NOTTOKENIZED','TOKENIZED');
set lines 200
set pages 9999
col OWNER for a20
col TABLE_NAME for a30
col INDEX_NAME for a30
col INDEX_TYPE for a15
col PARTITIONED for a12
set numwidth 5
select i.owner, i.table_name, i.index_name, i.index_type, i.partitioned, gv.val
from dba_indexes i join
    (select OWNER, OBJECT_NAME,
    sum(VALUE ) as val
    from gv$segment_statistics where STATISTIC_NAME in ('logical reads','physical reads')
    and OBJECT_TYPE in ('INDEX','INDEX PARTITION')
    and owner not in ('SYS','XDB','DATAPOINT','SYSMAN','SQLTXPLAIN','EXFSYS','SYSTEM','DBSNMP','DBA_MAINTENANCE','DATAPOINT_AUDIT','STRATEGY_DBA_MONITOR','PERFSTAT')
    group by OWNER,OBJECT_NAME
    having sum(value)=0) gv
on (i.owner=gv.owner and i.index_name=gv.object_name)
where i.temporary = 'N'
order by i.owner, i.table_name, i.index_name
/
select distinct STATISTIC_NAME from gv$segment_statistics
grant select on gv$segment_statistics to dbtune;
grant select on dba_indexes to dbtune;
grant select on dba_tables to dbtune;
create view dbtune.unused_indexes
  as
  select i.owner owner, i.table_name table_name, i.index_name idx_name, i.index_type idx_type, i.partitioned is_partitioned, gv.val total_reads
  from dba_indexes i join
     (select OWNER, OBJECT_NAME,
      sum(VALUE ) as val
      from gv$segment_statistics where STATISTIC_NAME in ('logical reads','physical reads')
      and OBJECT_TYPE in ('INDEX','INDEX PARTITION')
      and owner not in ('SYS','XDB','DATAPOINT','SYSMAN','SQLTXPLAIN','EXFSYS','SYSTEM','DBSNMP','DBA_MAINTENANCE','DATAPOINT_AUDIT','STRATEGY_DBA_MONITOR','PERFSTAT')
      group by OWNER,OBJECT_NAME
      having sum(value)=0) gv
  on (i.owner=gv.owner and i.index_name=gv.object_name)
  where i.temporary = 'N'
  order by i.owner, i.table_name, i.index_name
/
create table dbtune.unused_indexes_tab
  (DTID varchar2(10)
  ,OWNER varchar2(20)
  ,TABLE_NAME varchar2(30)
  ,IDX_NAME varchar2(30)
  ,IDX_TYPE varchar2(15)
  ,IS_PARTITIONED varchar2(15)
  ,TOTAL_READS number(5,0)
  )
  /
  CREATE or REPLACE PROCEDURE dbtune.load_unused_ind_tab (rpt in char default 'N', trn in char default 'N')
    as
    cursor unused_idx is
      select OWNER, IDX_NAME,sum(TOTAL_READS)
      from dbtune.unused_indexes_tab
      group by OWNER, IDX_NAME
      having sum(TOTAL_READS)=0;
    l_unused  unused_idx%ROWTYPE;
  BEGIN
      INSERT INTO dbtune.unused_indexes_tab
      SELECT TO_CHAR(SYSDATE,'YYYY-MM-DD'),OWNER,TABLE_NAME,IDX_NAME,IDX_TYPE,IS_PARTITIONED,TOTAL_READS
      from dbtune.unused_indexes;
      commit;
      IF rpt = 'Y' THEN
        -- Send report
           -- Create a cursor to query dbtune.unused_indexes_tab
           -- Create the HTML file and its header.
           -- Open cursor and creates the table containing the data.
           -- close html tag
           -- write to file system or send through UTL_SMTP
        IF trn = 'Y' then
          -- truncate the table
          execute immediate 'TRUNCATE TABLE dbtune.unused_indexes_tab';
        END IF;
      END IF;
  END;
  /
select OWNER, IDX_NAME,sum(TOTAL_READS)
from dbtune.unused_indexes_tab
group by OWNER, IDX_NAME
having sum(TOTAL_READS)=0;
set lines 200
set pages 9999
col OWNER for a20
col TABLE_NAME for a30
col IDX_NAME for a30
col IDX_TYPE for a15
col IS_PARTITIONED for a15
set numwidth 5
select * from dbtune.unused_indexes;
undefine iowner
undefine iname
  select /*+ parallel (a,6) parallel (sn,6) */ trunc(sn.end_interval_time) sql_snapshot_date,a.sql_id,
         p.owner, p.name, t.num_rows,t.last_analyzed,p.operation,p.options,a.parsing_schema_name,a.sql_profile,a.plan_hash_value,p.id plan_step_id,sn.INSTANCE_NUMBER,a.module,u.username PARSING_USER_NAME,
                                a.executions_total, buffer_gets_delta,executions_delta, disk_reads_delta,elapsed_time_delta,max(a.snap_id) max_snap_id
    from dba_indexes t, dba_hist_sqlstat a, dba_hist_snapshot sn, dba_users u,
       (select /*+ no_merge(pi1) */ distinct pl.sql_id,pl.PLAN_HASH_VALUE,object_owner owner, object_name name,operation,options,pl.id
          from  dba_hist_sql_plan pl
          where object_owner  in ('&iowner') and object_name='&iname'
            and operation = 'INDEX'
          ) p
    where a.snap_id = sn.snap_id
      and a.instance_number=sn.instance_number
      and a.sql_id = p.sql_id
                  and a.plan_hash_value=p.plan_hash_value
      and t.index_name = p.name
      and t.owner = p.owner
                  and a.PARSING_USER_ID=u.user_id
      and t.owner not in ('SYS','SYSTEM')
      and sn.BEGIN_INTERVAL_TIME>=sysdate-7
                  and a.snap_id>0
   group by trunc(sn.end_interval_time),a.sql_id,p.owner, p.name, t.num_rows,t.last_analyzed,p.operation,p.options,
            a.parsing_schema_name,a.SQL_PROFILE,a.plan_hash_value,p.id,sn.INSTANCE_NUMBER,a.MODULE,a.PARSING_SCHEMA_NAME,u.username,
                                                a.executions_total, buffer_gets_delta,executions_delta, disk_reads_delta,elapsed_time_delta;
tables=BRITEBILL.DOCUMENTMETADATA,BRITEBILL.HISTORICUSAGE,BRITEBILL.DOCUMENT_FACT,
BRITEBILL.DOCUMENTDATASTOREITEM,BRITEBILL.DOCUMENT,BRITEBILL.HISTORICCHARGES,BRITEBILL.BILL
select segment_name, sum(bytes)/1024/1024 as mb
from dba_segments
where owner='BRITEBILL'
and segment_name in ('DOCUMENTMETADATA','HISTORICUSAGE','DOCUMENT_FACT','DOCUMENTDATASTOREITEM','DOCUMENT','HISTORICCHARGES','BILL')
group by segment_name;
SEGMENT_NAME                                                                              MB
--------------------------------------------------------------------------------- ----------
HISTORICUSAGE                                                                         171481
DOCUMENTMETADATA                                                                      150035
BILL                                                                                    7749
DOCUMENT_FACT                                                                          96442
DOCUMENTDATASTOREITEM                                                                  20509
DOCUMENT                                                                               11416
HISTORICCHARGES                                                                        44915
set lines 200 pages 999
set heading off
set feedback off
set term off
spool /home/oracle/get_ddl.sql
select 'set long 50000' from dual;
select 'set lines 200 pages 50000' from dual;
select 'set heading off' from dual;
select 'set term off' from dual;
select 'spool /home/oracle/recreate_idx.sql' from dual;
select 'select dbms_metadata.get_ddl(''INDEX'',''' || index_name || ''','''|| owner || ''') from dual;' as new_ddl
from dba_indexes
where owner='BRITEBILL'
and table_name in ('DOCUMENTMETADATA','HISTORICUSAGE','DOCUMENT_FACT','DOCUMENTDATASTOREITEM','DOCUMENT','HISTORICCHARGES','BILL')
order by table_name;
select 'spool off' from dual;
spool off
T522042
Overview:
Export and rebuild 6 main tables/indexes with only 6 months of data to conserve space and improve performance.
Details:
TABLE PARTITION COLUMN  VALUE TO CUT
DOCUMENTMETADATA  DOCUMENT  >13068991928
DOCUMENT_FACT DOCUMENT_ID >13068991928
HISTORICUSAGE DOCUMENTID  >13068991928
HISTORICCHARGES DOCUMENTID  >13068991928
DOCUMENTDATASTOREITEM DOCUMENT_ID >13068991928
DOCUMENT  ID  >13068991928
BILL  ID  >13068991928
1.) 03-23-2017 16:00 – Block new app ingest processing (effectively blocks changes to DB)
2.) 03-23-2017 22:00 – Export data for listed tables
3.) 03-23-2017 22:00 – Get the DDL for listed tables’ indexes
4.) 03-24-2017 00:00 – Drop application
5.) 03-24-2017 00:10 – Drop the listed tables from the database
6.) 03-24-2017 00:20 – Check for fragmented segments at the of the datafiles and move them to the beginning of the datafiles
7.) 03-24-2017 01:00 – Import the data using a WHERE clause to filter only the needed rows and exclude the indexes (they are using wrong tablespace)
8.) 03-24-2017 02:00 – Create the indexes manually after the end of the import process assigning the right tablespace for them
9.) 03-24-2017 03:00 – Check logs and for invalid Indexes/Objects
10.)  03-24-2017 03:30 – Bring DB fully online
11.)  03-24-2017 03:45 – Bring up application
** App needs to be online no later than 06:00 to match web.
With this approach, we won’t use partitions at this time and app shouldn’t change its behavior.
set lines 200 pages 999
set echo on
set serveroutput on
DECLARE
cursor c1 is
  select 'select dbms_metadata.get_ddl(''INDEX'',''' || index_name || ''','''|| owner || ''') from dual;' as new_ddl
  from dba_indexes
  where owner='BRITEBILL'
  and table_name in ('DOCUMENTMETADATA','HISTORICUSAGE','DOCUMENT_FACT','DOCUMENTDATASTOREITEM','DOCUMENT','HISTORICCHARGES','BILL');
l_c1 c1%ROWTYPE;
exec_sql varchar2(4000);
BEGIN
  FOR l_c1 in c1 LOOP
  UTL_FILE.PUTF(f_utl_file,l_c1.new_ddl);
  exec_sql := l_c1.new_ddl;
  execute immediate exec_sql;
  END LOOP;
END;
/
---------------------------
connect htrsserv/pwd@p1trs01
$ORACLE_BIN/sqlplus  htrsserv@p1trs01 @one.sql trxc_PROD.sql
--------------------------------------------
-- RECREATE INDEXES ON TABLE DOCUMENTMETADATA
CREATE UNIQUE INDEX "BRITEBILL"."DOCUMENTMETADATA_PK" ON "BRITEBILL"."DOCUMENTMETADATA" ("ID")
PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
TABLESPACE "BB_INDX"
compute statistics
/
CREATE INDEX "BRITEBILL"."DOCUMENT_IDX" ON "BRITEBILL"."DOCUMENTMETADATA" ("DOCUMENT")
PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
TABLESPACE "USERS"
compute statistics
/
-- ALTER INDEXES
ALTER INDEX BRITEBILL.DOCUMENTMETADATA_PK NOPARALLEL LOGGING
/
ALTER INDEX BRITEBILL.DOCUMENT_IDX NOPARALLEL LOGGING
/
@$ORACLE_HOME/rdbms/admin/awrrpt.sql
25191
25195
/
2dl
archadm.archive_master - main table - one row per each app that needs to archive_master
source = from
target = to
business rule is the where clause
row_count_limit - program will end after this is reached
archadm.archive_key_value_stg -
archadm.archive_process_error - show the errors
 select /*+ parallel (trans, 8)*/
    to_char(trans.datetime,'MM/DD/YYYY') as Trans_DateTime,
    to_char(trans.datetime,'RRRRMM') as YYYYMM,
    trans.TRANSACTION_ID,
    trans.consumer_brand,
    trans.consumer_sub_brand,
    trans.ban,
    trans.transaction_status,
    trans.transaction_type_code,
    trans.tax_transaction_id,
    trans.transaction_amount,
    trans.transaction_for,
    trans.tax_amount,
    trans.settled_amount,
    trans.posting_amount,
    to_char(trans.date_posted,'MM/DD/YYYY') as NDW_Date_Posted
  from
    eppadm.trans_activity_history trans
  where
    trans.transaction_status = 'SUCCESS' And
    trans.transaction_type_code In ('PAYCAP', 'REFCAP', 'CBCAP') And
    trans.datetime between add_months(&oracle_date1, -1) and &oracle_date2  And
    trans.consumer_brand = 'Prepaid'
/
'01-FEB-17'
'28-FEB-17'
Execution Plan
----------------------------------------------------------
Plan hash value: 3021058560
-----------------------------------------------------------------------------------------------------------------------------
| Id  | Operation             | Name                   | Rows  | Bytes | Cost  | Pstart| Pstop |    TQ  |IN-OUT| PQ Distrib |
-----------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT      |                        |  8028K|  2733M|   115K|       |       |        |      |            |
|*  1 |  PX COORDINATOR       |                        |       |       |       |       |       |        |      |            |
|   2 |   PX SEND QC (RANDOM) | :TQ10000               |  8028K|  2733M|   115K|       |       |  Q1,00 | P->S | QC (RAND)  |
|*  3 |    FILTER             |                        |       |       |       |       |       |  Q1,00 | PCWC |            |
|   4 |     PX BLOCK ITERATOR |                        |  8028K|  2733M|   115K|     1 |    26 |  Q1,00 | PCWC |            |
|*  5 |      TABLE ACCESS FULL| TRANS_ACTIVITY_HISTORY |  8028K|  2733M|   115K|     1 |    26 |  Q1,00 | PCWP |            |
-----------------------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
   1 - filter(ADD_MONTHS('01-FEB-17',-1)<=TO_TIMESTAMP('28-FEB-17'))
   3 - filter(ADD_MONTHS('01-FEB-17',-1)<=TO_TIMESTAMP('28-FEB-17'))
   5 - filter("TRANS"."TRANSACTION_STATUS"='SUCCESS' AND ("TRANS"."TRANSACTION_TYPE_CODE"='CBCAP' OR
              "TRANS"."TRANSACTION_TYPE_CODE"='PAYCAP' OR "TRANS"."TRANSACTION_TYPE_CODE"='REFCAP') AND
              "TRANS"."DATETIME">=ADD_MONTHS('01-FEB-17',-1) AND "TRANS"."DATETIME"<=TO_TIMESTAMP('28-FEB-17') AND
              "TRANS"."CONSUMER_BRAND"='Prepaid')
  NUM_ROWS LAST_ANAL
---------- ---------
 522227967 21-OCT-16
INDEX_OWNER                    INDEX_NAME           TABLE_OWNE TABLE_NAME                COLUMN_NAME          COLUMN_POSITION COLUMN_LENGTH CHAR_LENGTH DESC
------------------------------ -------------------- ---------- ------------------------- -------------------- --------------- ------------- ----------- ----
EPPADM                         IDX_TRANS_HIST_01    EPPADM     TRANS_ACTIVITY_HISTORY    BAN                                1            36          36 ASC
EPPADM                         IDX_TRANS_HIST_02    EPPADM     TRANS_ACTIVITY_HISTORY    PAN_TOKEN                          1           255         255 ASC
find /goldengate/ggsoracle -type f -name "*.prm" | xargs -I {} grep -l -i "TRANS_ACTIVITY_HISTORY" "{}"
SQL> select min(datetime), max(datetime) from eppadm.trans_activity_history;
MIN(DATETIME)                                                               MAX(DATETIME)
--------------------------------------------------------------------------- ---------------------------------------------------------------------------
20-APR-15 01.51.52.000000 PM                                                28-MAR-17 04.59.59.362000 AM
SELECT vs.username,
 vs.osuser,
 vh.sid locking_sid,
 vs.status status,
 vs.module module,
 vs.program program_holding,
 jrh.job_name,
 vsw.username,
 vsw.osuser,
 vw.sid waiter_sid,
 vsw.program program_waiting,
 jrw.job_name--,
-- 'alter system kill session ' || ''''|| vh.sid || ',' || vs.serial# || ''';'  "Kill_Command"
FROM v$lock vh,
 v$lock vw,
 v$session vs,
 v$session vsw,
 dba_scheduler_running_jobs jrh,
 dba_scheduler_running_jobs jrw
WHERE     (vh.id1, vh.id2) IN (SELECT id1, id2
 FROM v$lock
 WHERE request = 0
 INTERSECT
 SELECT id1, id2
 FROM v$lock
 WHERE lmode = 0)
 AND vh.id1 = vw.id1
 AND vh.id2 = vw.id2
 AND vh.request = 0
 AND vw.lmode = 0
 AND vh.sid = vs.sid
 AND vw.sid = vsw.sid
 AND vh.sid = jrh.session_id(+)
 AND vw.sid = jrw.session_id(+);
SELECT * FROM TABLE(dbms_xplan.display_awr('4s4mn2mzgqkxn'));
select ds.owner, ds.segment_name, sum(ds.bytes)/1024/1024 as MB, (dt.num_rows*dt.avg_row_len)/1024/1024 as Real_Size from dba_segments ds, dba_tables dt
where ds.owner = 'SPRINT_USAGE' and segment_name = 'DS_BOOST_INTER_RATED_NEW'
and ds.owner = dt.owner and ds.segment_name = dt.table_name
group by ds.owner, ds.segment_name, num_rows, avg_row_len
order by 3,2;
select   substr(a.os_user_name,1,8)    "OS User"
, e.sid,e.serial#,e.status
 , substr(a.oracle_username,1,8) "DB User"
       , substr(b.owner,1,8)  "Schema"
 , substr(b.object_name,1,20)    "Object Name"
    , substr(b.object_type,1,10)    "Type"
       , substr(c.segment_name,1,5)  "RBS"
       , substr(d.used_urec,1,12)      "# of Records"
from v$locked_object      a
     , dba_objects b
     , dba_rollback_segs  c
     , v$transaction      d
 , v$session e
where   a.object_id =  b.object_id
set time on timing on echo on
alter session set workarea_size_policy='MANUAL';
alter session set sort_area_size=800000000;
alter session enable parallel dml;
alter session enable parallel ddl;
CREATE UNIQUE INDEX britebill.section_idx ON britebill.documentdatastoreitem(section_id)
PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
PARALLEL 12
NOLOGGING
TABLESPACE "BB_INDX"
NOPARALLEL LOGGING
#!/bin/ksh
ORACLE_HOME=/oracle/g01/software/rdbms/11.2.0.4
export ORACLE_HOME
PATH=$ORACLE_HOME/bin:$PATH
export PATH
ORACLE_SID=ICEP1011
export ORACLE_SID
SQLPATH=/home/oracle
export SQLPATH
sqlplus -s "/ as sysdba" << EOF
spool /home/oracle/createidx.lst
@createidx.sql
exit;
EOF
ALTER TABLE britebill.documentdatastoreitem logging ADD CONSTRAINT docdatastoreitem_secid UNIQUE (section_id) index(SECTION_IDX);
select documentda0_.id as id1_22_,
documentda0_.checksum as checksum2_22_,
documentda0_.compressed as compressed3_22_,
documentda0_.datastore as datastore4_22_,
documentda0_.document_id as document_id11_22_,
documentda0_.encrypted as encrypted5_22_,
documentda0_."name" as name6_22_,
documentda0_.path as path7_22_,
documentda0_.section_id as section_id8_22_,
documentda0_."size" as size9_22_, documentda0_."type" as type10_22_
from documentdatastoreitem documentda0_ where documentda0_.section_id=1000;
select * from table(dbms_xplan.display_cursor(sql_id => '8k9fh1f888m1x', format => '+ALLSTATS'));
select inst_id, SID, OPNAME, TARGET_DESC, SOFAR, TOTALWORK, (sofar/totalwork)*100 as percent, SQL_ID, TIME_REMAINING
from gv$session_longops where sofar <> totalwork and sql_id='ckrpj2dfr3qvm';
spool log to
run{
  allocate channel c1 device type disk format '/oracle/g01/bkup01/MMPP101/backup/%d_TS_%T_%s_%p';
  allocate channel c2 device type disk format '/oracle/g01/bkup01/MMPP101/backup/%d_TS_%T_%s_%p';
  allocate channel c3 device type disk format '/oracle/g01/bkup01/MMPP101/backup/%d_TS_%T_%s_%p';
  allocate channel c4 device type disk format '/oracle/g01/bkup01/MMPP101/backup/%d_TS_%T_%s_%p';
  allocate channel c5 device type disk format '/oracle/g01/bkup01/MMPP101/backup/%d_TS_%T_%s_%p';
  allocate channel c6 device type disk format '/oracle/g01/bkup01/MMPP101/backup/%d_TS_%T_%s_%p';
  allocate channel c7 device type disk format '/oracle/g01/bkup01/MMPP101/backup/%d_TS_%T_%s_%p';
  allocate channel c8 device type disk format '/oracle/g01/bkup01/MMPP101/backup/%d_TS_%T_%s_%p';
  backup section size 1024M database;
  sql 'alter system archive log current';
  sql 'alter system archive log current';
  backup archivelog all format '${host_name}_%d_ARC_%T_%s_%p';
  backup current controlfile format '${host_name}_%d_CF_%T_%s_%p.ctl';
  release channel c1;
  release channel c2;
  release channel c3;
  release channel c4;
  release channel c5;
  release channel c6;
  release channel c7;
  release channel c8;
}
/oracle/g01/bkup01/MMPP101/backup
db chache size 21g
shared pool size 8g
pga aggregate target 8g
sga target 45g
unsert memory target
fs.aio-max-nr
SPRINT_USAGE MV_AC6_ELA
/
DS_AC6_ELA
                    MLOG$_DS_AC6_ELA1
COMMAND RUNNING NOW:
/* MV_REFRESH (INS) */INSERT /*+ BYPASS_RECURSIVE_CHECK APPEND SKIP_UNQ_UNUSABLE_IDX */ INTO "SPRINT_USAGE"."MV_AC6_ELA"
("REPORT_DATE","FID","FID_ID","FILEID","NETWORK_ELEMENT","EVENT_TYPE","SERVICE","CYCLE_CODE","CYCLE_MONTH","CYCLE_YEAR","MONEY","VOLUME",
  "IN_RECORDS","NUM_OF_SUCCESS","NUM_OF_DROP","NUM_OF_DUPSUC","NUM_OF_DUPREJ","NUM_OF_THROTTLE","NUM_OF_REJECT","NUM_OF_MISSING",
  "NUM_OF_TIMEOUT","NUM_OF_PERSIST")
SELECT "DS_AC6_ELA"."REPORT_DATE","DS_AC6_ELA"."FID","DS_AC6_ELA"."FID_ID","DS_AC6_ELA"."FILEID","DS_AC6_ELA"."NETWORK_ELEMENT","DS_AC6_ELA"."EVENT_TYPE",
"DS_AC6_ELA"."SERVICE","DS_AC6_ELA"."CYCLE_CODE","DS_AC6_ELA"."CYCLE_MONTH","DS_AC6_ELA"."CYCLE_YEAR",SUM("DS_AC6_ELA"."MONEY"),SUM("DS_AC6_ELA"."VOLUME"),
SUM("DS_AC6_ELA"."IN_RECORDS"),SUM("DS_AC6_ELA"."NUM_OF_SUCCESS"),SUM("DS_AC6_ELA"."NUM_OF_DROP"),SUM("DS_AC6_ELA"."NUM_OF_DUPSUC"),
SUM("DS_AC6_ELA"."NUM_OF_DUPREJ"),SUM("DS_AC6_ELA"."NUM_OF_THROTTLE"),SUM("DS_AC6_ELA"."NUM_OF_REJECT"),SUM("DS_AC6_ELA"."NUM_OF_MISSING"),
SUM("DS_AC6_ELA"."NUM_OF_TIMEOUT"),SUM("DS_AC6_ELA"."NUM_OF_PERSIST")
FROM "DS_AC6_ELA" "DS_AC6_ELA"
GROUP BY "DS_AC6_ELA"."REPORT_DATE","DS_AC6_ELA"."FID","DS_AC6_ELA"."FID_ID","DS_AC6_ELA"."FILEID","DS_AC6_ELA"."NETWORK_ELEMENT","DS_AC6_ELA"."SERVICE",
"DS_AC6_ELA"."EVENT_TYPE","DS_AC6_ELA"."CYCLE_CODE","DS_AC6_ELA"."CYCLE_MONTH","DS_AC6_ELA"."CYCLE_YEAR"
MVIEW QUERY:
SELECT report_date, fid, fid_id, fileid, network_element, event_type, service, cycle_code, cycle_month, cycle_year, sum(money) money, sum(volume) volume,
sum(in_records) in_records,sum(num_of_success) num_of_success, sum(num_of_drop) num_of_drop, sum(num_of_dupsuc) num_of_dupsuc,
sum(num_of_duprej) num_of_duprej, sum(num_of_throttle) num_of_throttle, sum(num_of_reject) num_of_reject, sum(num_of_missing) num_of_missing,
sum(num_of_timeout) num_of_timeout, sum(num_of_persist) num_of_persist
FROM SPRINT_USAGE.ds_ac6_ela
GROUP BY report_date, fid, fid_id,
fileid,network_element, service, event_type, cycle_code, cycle_month, cycle_year
Plan hash value: 4211437406
----------------------------------------------------------------------------------------------------------
| Id  | Operation           | Name       | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     | Pstart| Pstop |
----------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT    |            |    10G|  1304G|       |   350M  (1)|999:59:59 |       |       |
|   1 |  PARTITION RANGE ALL|            |    10G|  1304G|       |   350M  (1)|999:59:59 |     1 |1048575|
|   2 |   HASH GROUP BY     |            |    10G|  1304G|  1811G|   350M  (1)|999:59:59 |       |       |
|   3 |    TABLE ACCESS FULL| DS_AC6_ELA |    10G|  1304G|       |    37M  (2)|126:36:26 |     1 |1048575|
*** look at the size of the TEMP data.
Table:
SQL> select num_Rows , last_Analyzed from dbA_tables where table_name='DS_AC6_ELA';
       NUM_ROWS LAST_ANAL
--------------- ---------
    10449151433 02-APR-17
MVIEW_LOG
SQL> select /*+ parallel(a,6) */to_char(min(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as mindate, to_char(max(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as maxdatefrom SPRINT_USAGE.MLOG$_DS_AC6_ELA1 a;
  to_char(min(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as mindate, to_char(max(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as maxdate)
----------
 334731495
MVIEW:
SQL> select /*+ parallel(a,6) */to_char(min(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as mindate, to_char(max(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as maxdatefrom SPRINT_USAGE.MV_AC6_ELA;
  to_char(min(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as mindate, to_char(max(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as maxdate)
----------
         0
OBJ SIZES:
SQL> select segment_name, sum(bytes)/1048576 as MB from dba_segments where segment_name in ('DS_AC6_ELA','MLOG$_DS_AC6_ELA1','MV_AC6_ELA') group by segment_name;
SEGMENT_NAME                                                                                   MB
--------------------------------------------------------------------------------- ---------------
MLOG$_DS_AC6_ELA1                                                                           67431
MV_AC6_ELA                                                                                   4459
DS_AC6_ELA                                                                            1741298.875
  CREATE MATERIALIZED VIEW "SPRINT_USAGE"."MV_AC6_ELA" ("REPORT_DATE", "FID", "FID_ID", "FILEID", "NETWORK_ELEMENT", "EVENT_TYPE", "SERVICE", "CYCLE_CODE",
  "CYCLE_MONTH", "CYCLE_YEAR", "MONEY", "VOLUME", "IN_RECORDS", "NUM_OF_SUCCESS", "NUM_OF_DROP", "NUM_OF_DUPSUC", "NUM_OF_DUPREJ", "NUM_OF_THROTTLE", "NUM_OF_REJECT", "NUM_OF_MISSING", "NUM_OF_TIMEOUT", "NUM_OF_PERSIST")
  ORGANIZATION HEAP PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255  NOCOMPRESS NOLOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SPS_DATA"
  BUILD IMMEDIATE
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255
  REFRESH FAST ON DEMAND
  USING DEFAULT LOCAL ROLLBACK SEGMENT
  USING ENFORCED CONSTRAINTS disable novalidate QUERY REWRITE
  AS SELECT report_date, fid, fid_id, fileid, network_element, event_type, service, cycle_code, cycle_month, cycle_year, sum(money) money, sum(volume) volume,
  sum(in_records) in_records,sum(num_of_success) num_of_success, sum(num_of_drop) num_of_drop, sum(num_of_dupsuc) num_of_dupsuc, sum(num_of_duprej) num_of_duprej
      ,sum(num_of_throttle) num_of_throttle, sum(num_of_reject) num_of_reject, sum(num_of_missing) num_of_missing ,sum(num_of_timeout) num_of_timeout,
      sum(num_of_persist) num_of_persist
  FROM ds_ac6_ela
  GROUP BY report_date, fid, fid_id, fileid,network_element, service, event_type,cycle_code, cycle_month, cycle_year
*.control_files='+data/bwq/controlfile/ctlfile01.ctl','+arch/bwq/controlfile/ctlfile02.ctl'
set time on
set timing on
set echo on
set serveroutput on
alter session set sort_area_size=800000000;
alter session enable parallel dml;
alter session enable parallel ddl;
CREATE INDEX SPRINT_USAGE.IDX_NDW_WDR_USAGE_FILEID on  SPRINT_USAGE.DS_NDW_WDR_USAGE (FILEID)
LOCAL
NOLOGGING
PARALLEL 8
TABLESPACE SPRINT_USAGE_IDX
/
alter index SPRINT_USAGE.IDX_NDW_WDR_USAGE_FILEID nonparallel logging
/
CREATE INDEX SPRINT_USAGE.IDX_BOOST_INTER_RATED_FILEID on  SPRINT_USAGE.DS_BOOST_INTER_RATED_NEW (FILEID)
LOCAL
NOLOGGING
PARALLEL 8
TABLESPACE SPRINT_USAGE_IDX
/
alter index SPRINT_USAGE.IDX_BOOST_INTER_RATED_FILEID nonparallel logging
/
CREATE INDEX SPRINT_USAGE.IDX_AMS_WDR_USAGE_FILEID on  SPRINT_USAGE.DS_AMS_WDR_USAGE (FILEID)
LOCAL
NOLOGGING
PARALLEL 8
TABLESPACE SPRINT_USAGE_IDX
/
alter index SPRINT_USAGE.IDX_AMS_WDR_USAGE_FILEID  nonparallel logging
/
/oracle/dbtools/datapoint/scripts/cfg_parms MMPP101
/iris/data4
/iris/data1/archives/
trunc((A.datetime - (5/24))) between '12-MAR-17' and '31-MAR-17'
a.datetime between '12-MAR-17 00:00:00' and '31-MAR-17 23:59:00'
select sum(bytes)/1048576 as MB, tablespace_name from dba_segments group by tablespace_name having tablespace_name <> 'SPS_DATA'  order by 1;
select max(to_char(completion_time,'DD-MON-YY HH24:MI')), file#
from v$backup_datafile
where file# in
(select file# from v$datafile where ts# in
(select ts# from v$tablespace where name in
('SPS_DATA',
'SPRINT_USAGE_IDX',
'SPRINT_MODEL_DATA',
'SPRINT_MODEL_IDX',
'SPRINT_PMART_DATA',
'SPRINT_PMART_IDX',
'LOB_DATA',
'SPS_DATA',
'SU_BILLING01',
'SU_BILLING02',
'SU_TRAFFIC01',
'SU_TRAFFIC02')
)
)
group by file#
INSERT INTO AC6_BUILD_COMPARE_TC_RAW(RESELLER_ID, SENSOR_ID, FID_ID, TRANSMIT TAL_NUM, SERVICE_TYPE, TRANSMIT_DATE, AUDIT_ID,LSN_IN, LSN_IN_VOL,
0 0 * * 0 /production/data1/archives/dump_SPRINT_MODEL/expdp_SPRINT_MODEL.sh > /production/data1/archives/dump_SPRINT_MODEL/expdp_SPRINT_MODEL.out 2>&1
/production/data1/archives/dump_SPRINT_MODEL
L2EIS1-BDT.corp.sprint.com:/ifs/TEP_LS1/VAULT/PRODUCTION_DATA1 /production/data1/ nfs bg,defaults,intr,nfsvers=3 1 2
06:41:56
select s.SNAP_ID, to_char(s.startup_time) as stime, ss.SQL_ID, ss.OPTIMIZER_COST,
ss.ROWS_PROCESSED_DELTA, ss.ELAPSED_TIME_DELTA/1000000/60 elapsed_min_delta, ss.ELAPSED_TIME_TOTAL/1000000/60 elapsed_min, ss.PHYSICAL_READ_REQUESTS_DELTA
from dba_hist_sqlstat ss join dba_hist_snapshot s on (s.snap_id=ss.snap_id)
where sql_id='9gv5m69w8v0us'
order by 2;
select 'grant ' || PRIVILEGE || ' on ' || OWNER || '.' || TABLE_NAME || ' to ' || GRANTEE || ' ;'
from dba_tab_privs
where table_name in ('DMCASEINFO','ZZAG_RTPGWSMG','ZZAG_RTPGWALU')
and owner='FRANK';
create table alex as select segment_name,sum(bytes)/1024/1024 MB from dba_segments where TABLESPACE_NAME = 'U8EL_DATA' group by segment_name;
  13156839
  /bin/sh /oracle/g01/bkup01/ICEP1011/backup/daily_health_check.sh ICEP1011
select datetime, datetime1, datetime2, date_posted, date_posted1
from
(Select /*+PARALLEL(A,12)*/     datetime,
     to_char(trunc((A.datetime - (6/24))),'dd-mon-yy') as datetime1,
     to_char(trunc((A.datetime - (5/24))),'dd-mon-yy') as datetime2,
     to_char(trunc(A.date_posted),'dd-mon-yy') as date_posted,
     trunc(A.date_posted) as date_posted1 from EPPADM.TRANS_ACTIVITY_HISTORY A
     where trunc((A.datetime - (5/24))) between to_date('17-APR-17','YY-MON-DD') and to_date('17-APR-19','YY-MON-DD')
     and (A.TRANSACTION_TYPE_CODE='PAYCAP' or A.TRANSACTION_TYPE_CODE='REFCAP')
     and A.TRANSACTION_STATUS = 'SUCCESS'
     and A.PAYMENT_SUB_METHOD is not null) b
where rownum < 10
/
825324 rows selected.
809018
Select /*+PARALLEL(A,12)*/
   to_char(min(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as mindate, to_char(max(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as maxdate)
     from EPPADM.TRANS_ACTIVITY_HISTORY A
     where trunc((A.datetime - (6/24))) between to_date('17-APR-17','YY-MON-DD') and to_date('17-APR-19','YY-MON-DD')
     and (A.TRANSACTION_TYPE_CODE='PAYCAP' or A.TRANSACTION_TYPE_CODE='REFCAP')
     and A.TRANSACTION_STATUS = 'SUCCESS'
     and A.PAYMENT_SUB_METHOD is not null
select /* parallel(6) */to_char(min(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as mindate, to_char(max(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as maxdate from  CLCSADM.CLCS_CREDIT_CARD  b ;
select /* parallel(6) */to_char(min(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as mindate, to_char(max(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as maxdatefrom  CLCSADM.CLCS_CREDIT_CARD  b where EXP_DATE is not null;
select decode(cl1,NULL,'NOTTOKENIZED','TOKENIZED'),to_char(min(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as mindate,
to_char(max(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as maxdate from (
select
translate( pci_pkg.d_cc(CC_NUMBER,654916320742196284 ) , '_01234 56789-',' ') cl1
from OEMADM.ORDER_PAYMENTS  a
where CC_NUMBER is not null
) b
group by decode(cl1,NULL,'NOTTOKENIZED','TOKENIZED');
select /* parallel(6) */  pci_pkg.d_cc(CC_NUMBER,654916320742196284 ) from OEMADM.ORDER_PAYMENTS  a where
CC_NUMBER is not null;
select  /* parallel(6) */ ORDER_KEY, ORDER_PAYMENT_ID, CC_TYPE_CD from OEMADM.ORDER_PAYMENTS   where CC_NUMBER is not null;
select * from dba_cons_columns where owner='OEMADM' and table_name='ORDER_PAYMENTS';
4522832
select TABLE_OWNER, TABLE_NAME, PARTITION_NAME, (selectto_char(min(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as mindate, to_char(max(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as maxdatefrom DPLI_OWNER.BAN_JOURNAL_STG PARTITION (partition_name))
from dba_tab_partitions
where table_name='BAN_JOURNAL_STG' order by 4
select 'select /* parallel(8) */to_char(min(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as mindate, to_char(max(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as maxdate from DPLI_OWNER.BAN_JOURNAL_STG PARTITION (' || PARTITION_NAME || ');'
from dba_tab_partitions
where table_name='BAN_JOURNAL_STG' order by PARTITION_POSITION;
select * from (
select /* parallel(8) */ CC_SECURITY_ID, translate(CC_SECURITY_ID , '_abcdef0123456789%',' ') CC_SECURITY_ID2 from OEMARCH.ORDER_PAYMENTS where CC_SECURITY_ID is not null)
where CC_SECURITY_ID is not null;
to_char(min(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as mindate, to_char(max(DBJ_SYS_CREATION_DATE),'DD-MON-YYYY') as maxdate
begin
  DBMS_WORKLOAD_REPOSITORY.create_baseline(
    start_time    => TO_DATE('22-APR-2017 01:00', 'DD-MON-YYYY HH24:MI'),
    end_time      => TO_DATE('24-APR-2017 22:00', 'DD-MON-YYYY HH24:MI'),
    baseline_name => 'awr_baseline_apr_bkp',
    expiration    => NULL);
  end;
  /
  select /* parallel(8) */ count(*) FROM stormadm.subscriber_dim@ndwprd;
 NDWP101 = (DESCRIPTION =
      (ADDRESS_LIST =
      (LOAD_BALANCE=YES)
         (ADDRESS = (PROTOCOL = TCP)(HOST = poc0086.corp.sprint.com) (PORT = 1535))
      )
      (CONNECT_DATA =
         (SERVICE_NAME = NDWPRD_NODE3.corp.sprint.com)
         (FAILOVER_MODE = (TYPE = SELECT) (METHOD = BASIC) (RETRIES = 180) (DELAY = 5))

CREATE DATABASE LINK "NDWPRD"
CONNECT TO "GOLDREAD"
IDENTIFIED BY VALUES '06935C7A9A45F15D5A80E7FB86DBD69D97BCFBF905EABE7535E9B39D4974452F68C025DA535914B425598AEC316FF4136B0D5B6CF53EE366C2F313B11173E3E8AE5210CF915819DD9C110847A8B9728A909AE22AB5C0C78DAAFF545DE760563E2CECA04528D3763949E0C29B18171C20988B77D3E5EA1811B61507392EBED959'
USING 'NDWP101';


select dbms_metadata.get_ddl('DB_LINK', db_link, owner) as ddl from dba_db_links where DB_LINK='NDWPRD.WORLD';
INSERT /*+ append */
INTO test_dim_subs
select /*parallel(8) */ *
FROM stormadm.subscriber_dim@ndwprd;
DROP INDEX "SPRINT_USAGE"."DIM_SUBSCRIBER_INDEX1"
/
CREATE INDEX "SPRINT_USAGE"."DIM_SUBSCRIBER_INDEX1" ON "SPRINT_USAGE"."DIM_SUB
SCRIBER" ("SUBSCRIBER_NO", "PHONE_NUMBER", "LTE_IMSI")
PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
TABLESPACE "SPS_DATA"
NOLOGGING
PARALLEL 2
/
ALTER INDEX "SPRINT_USAGE"."DIM_SUBSCRIBER_INDEX1" LOGGING NOPARALLEL
/
  select metadatait0_.document as document5_19_0_,
  metadatait0_.id as id1_23_0_,
  metadatait0_.id as id1_23_1_,
  metadatait0_.classifier as classifier2_23_1_,
  metadatait0_.document as document5_23_1_,
  metadatait0_.meta_key as meta_key3_23_1_,
  metadatait0_.meta_value as meta_value4_23_1_
  from documentmetadata metadatait0_ where metadatait0_.document=:1
DBA_HIST_SEG_STAT
119324
119324
119324
119325
119325
119325
119326
119326
119326
119327
119327
119327
119328
119328
119328
119329
119329
119329
  select t.name, u.name, o.name, PHYSICAL_WRITES_TOTAL, PHYSICAL_WRITES_DELTA, SPACE_USED_TOTAL, SPACE_USED_DELTA
  from dba_hist_seg_stat h
  join v$tablespace t using (ts#)
  join sys.obj$ o using (obj#)
  join sys.user$ u on (u.user#=o.owner#)
  where SNAP_ID in (119327,119328) and t.name='NDW_DATA01'
  order by PHYSICAL_WRITES_DELTA
  /
NDW03=
(DESCRIPTION =
  (ADDRESS = (PROTOCOL = TCP)(HOST = poc0086.corp.sprint.com)(PORT = 1535))
  (LOAD_BALANCE = YES)
  (CONNECT_DATA =
   (SERVER = DEDICATED)
   (SERVICE_NAME = ndwprd_node3.corp.sprint.com)
   (FAILOVER_MODE =
   (TYPE = SELECT)(METHOD = BASIC)(RETRIES = 180)(DELAY = 5)
   )
  )
)
DS_AMS_LTE_M2M_USAGE
DS_AMS_M2M_USAGE
DS_AMS_XDR_USAGE
DS_BILL_DISC_ADJ
DS_BILL_DISC_GRN
DS_BOOST_INTER_EVENT_PART
DS_GTP_PREPAID
DS_PREPAID_EVENT_DATA
DS_WDR_HA_UDR
select 'select dbms_metadata.get_ddl(''INDEX'',''' || index_name || ''',''SPRINT_USAGE'') from dual;'
from dba_indexes i
where index_name in
('IDX_AMS_M2M_USAGE_FILEID',
'IDX_DS_AMS_TDR_USAGE_FILEID',
'IDX_AMS_WDR_USAGE_FILEID',
'IDX_BOOST_INTER_RATED_FILEID',
'IDX_DS_MAF_FILEID',
'IDX_DS_WDR_HA_UDR_FILEID')
/
DS_ACT_CDMA_CIBER22
DS_AMS_LTE_M2M_USAGE
DS_AMS_LTE_USAGE
DS_AMS_XDR_USAGE
DS_BILLED_CHARGES
DS_BILL_DISC_GRN
DS_BOOST_INTER_EVENT_PART
DS_GTP_PREPAID
DS_NDW_EVENT_USAGE
DS_PREPAID_EVENT_DATA
CREATE UNIQUE INDEX "SAPIENSPRD"."CP_E301MCR" ON "SAPIENSPRD"."E301MCR" ("CODEMP", "CODFIL", "NUMTIT", "CODTPT", "SEQMOV")
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SAPIENSPRD"
/
jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=POC0273.corp.sprint.com)(PORT=1527))(CONNECT_DATA=(SERVICE_NAME=NOR2PRD_USR)(FAILOVER_MODE=(TYPE=SELECT)(METHOD=BASIC)(RETRIES=180)(DELAY=5))))
ALTER TABLE "SPRINT_USAGE"."DS_BOOST_DRC" disable novalidate CONSTRAINT  NOTNULL_BST_MRC
/
ALTER TABLE "SPRINT_USAGE"."DIM_FILE_PATTERNS" ADD CONSTRAINT  CHECK_RELOAD CHECK (reload_status in ('I','B')) disable novalidate
/
select dbms_metadata.get_ddl('INDEX','E140IDE','SAPIENSPRD') from dual;
  CREATE TABLE "SPRINT_USAGE"."DS_BOOST_INTER_RATED_NEW"
   (    "FILEID" NUMBER(*,0) NOT NULL ENABLE,
        "FID" NUMBER,
        "EVENT_ID" NUMBER NOT NULL ENABLE,
        "NETWORK_START_TIME" TIMESTAMP (6) NOT NULL ENABLE
   )
    TABLESPACE "SPS_DATA"
    PARTITION BY RANGE ("NETWORK_START_TIME")
    (
      PARTITION "2017_03_31"  VALUES LESS THAN (TIMESTAMP' 2017-04-01 00:00:00') SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 204800 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SPS_DATA" ,
 PARTITION "2017_04_01"  VALUES LESS THAN (TIMESTAMP' 2017-04-02 00:00:00') SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 204800 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SPS_DATA" ,
 PARTITION "2017_04_02"  VALUES LESS THAN (TIMESTAMP' 2017-04-03 00:00:00') SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 204800 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SPS_DATA" ,
 PARTITION "2017_04_03"  VALUES LESS THAN (TIMESTAMP' 2017-04-04 00:00:00') SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 204800 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SPS_DATA" ,
 PARTITION "2017_04_04"  VALUES LESS THAN (TIMESTAMP' 2017-04-05 00:00:00') SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 204800 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SPS_DATA"
      )
  /
alter table "SPRINT_USAGE"."DS_BOOST_INTER_RATED_NEW" add partition "2017_05_05" VALUES LESS THAN (TIMESTAMP' 2017-05-06 00:00:00') tablespace "SPS_DATA"
/
 create index SPRINT_USAGE.IDX_BOOST_INTER_RATED_FILEID on "SPRINT_USAGE"."DS_BOOST_INTER_RATED_NEW"(fileid)
  LOCAL
  tablespace "SPS_DATA"
  /
alter index SPRINT_USAGE.IDX_BOOST_INTER_RATED_FILEID
rebuild partition "2017_05_05" online
TABLESPACE "INQUIRA_DATA"
/
set serveroutput on
set echo on
set timing on
DECLARE
i number(7);
a number(7);
b number(7);
c number(2);
res number(7);
begin
a := 1;
b := 100000;
c := 1;
while  c <= 10
loop
  for i in a..b
  loop
  insert into "SPRINT_USAGE"."DS_BOOST_INTER_RATED_NEW" (FILEID,FID,EVENT_ID,NETWORK_START_TIME) values (i,2,3,systimestamp);
  end loop;
a := a + 100000;
b := b + 100000;
c := c + 1;
select count(*) into res from "SPRINT_USAGE"."DS_BOOST_INTER_RATED_NEW" partition ("2017_05_05");
UTL_FILE.PUTF(f_utl_file,res);
dbms_lock.sleep(60);
end loop;
end;
/
select count(*) from "SPRINT_USAGE"."DS_BOOST_INTER_RATED_NEW" partition ("2017_05_05");
/
select index_name, table_name
from dba_indexes
where index_name in
('DS_ACT_CDMA_CIBER22',
'DS_AMS_LTE_M2M_USAGE',
'DS_AMS_LTE_USAGE',
'DS_AMS_XDR_USAGE',
'DS_BILLED_CHARGES',
'DS_BILL_DISC_GRN',
'DS_BOOST_INTER_EVENT_PART',
'DS_GTP_PREPAID',
'DS_NDW_EVENT_USAGE',
'DS_PREPAID_EVENT_DATA')
order by 2
/
SEGMENT_NAME                                                                      SUM(BYTES)/1048576
--------------------------------------------------------------------------------- ------------------
DS_GTP_PREPAID                                                                                   161
DS_PREPAID_EVENT_DATA                                                                            175
DS_BILL_DISC_GRN                                                                                 525
DS_BILLED_CHARGES                                                                                946
DS_AMS_LTE_M2M_USAGE                                                                          973.25
DS_NDW_EVENT_USAGE                                                                             18290
DS_ACT_CDMA_CIBER22                                                                       18898.8125
select distinct object_name, owner , object_type
from dba_objects
where object_name in
('DS_AMS_LTE_USAGE',
'DS_AMS_XDR_USAGE',
'DS_BOOST_INTER_EVENT_PART')
/
SPRINT_USAGE.DS_BILLED_CHARGES ** NO COLUMN FILEID
SPRINT_USAGE.DS_BILL_DISC_GRN ** NO COLUMN FILEID
backup filesperset 1 database format '${host_name}_%d_TS_%T_%s_%p';
delete noprompt archivelog until time 'sysdate-30/1440' backed up 1 times to device type sbt_tape;


SELECT component, oper_type, oper_mode, parameter,
initial_size/1024/1024 init_MB,
target_size/1024/1024 target_MB,
final_size/1024/1024 final_MB,
status, start_time, end_time
FROM V$SGA_RESIZE_OPS;



col disk_group for a20
col segment_name for a40
col total_MB for 99,999,999.00



select /* +Parallel(6) */ distinct s.owner,
e.segment_name,
s.segment_type,
--a.file_id,
REPLACE(SUBSTR(d.file_name, 1 ,INSTR(d.file_name, '/', 1, 1)-1),'+') disk_group,
sum(e.bytes)/1048576 total_MB
from dba_extents e join dba_data_files d using(file_id)
join dba_segments s on (e.segment_name=s.segment_name)
where e.segment_name in
(select segment_name from dba_segments where tablespace_name='WDATA13')
group by e.segment_name, REPLACE(SUBSTR(d.file_name, 1 ,INSTR(d.file_name, '/', 1, 1)-1),'+')
order by e.segment_name
/
select a.segment_name,a.file_id,REPLACE(SUBSTR(b.file_name, 1 ,INSTR(b.file_name, '/', 1, 1)-1),'+') disk_group from dba_extents a,dba_data_files b where a.file_id=b.file_id and a.segment_name = 'CLCS_LNK_STORE_PRESEL_ACCRY'
/
SELECT group by REPLACE(SUBSTR(file_name, 1 ,INSTR(file_name, '/', 1, 1)-1),'+')
FROM dba_data_files;
set lines 200 pages 49999
compute sum of total_mb on report
compute sum of total_data_files on report
col disk_group for a15
col segment_name for a30
col tablespace_name for a15
col total_mb for 99,999,999.99
break on report
select e.owner owner,
e.segment_name segment_name,
s.segment_type segment_type,
f.tablespace_name tablespace_name,
REPLACE(SUBSTR(f.file_name,1,INSTR(f.file_name,'/',1,1)-1),'+') disk_group,
sum(e.bytes)/1048576 total_mb,
count (file_id) total_data_files
from dba_extents e join dba_data_files f using (file_id)
join dba_segments s on (e.segment_name=s.segment_name and e.owner=s.owner)
--where s.tablespace_name in
--(
--   select TABLESPACE_NAME
--   from dba_tablespaces
--   where EXTENT_MANAGEMENT='DICTIONARY'
--   and TABLESPACE_NAME not in ('SYSTEM','AUDIT_DATA')
--)
group by e.owner,e.segment_name, f.tablespace_name,REPLACE(SUBSTR(f.file_name,1,INSTR(f.file_name,'/',1,1)-1),'+'), s.segment_type
order by owner, segment_name, tablespace_name, disk_group
/
set feedback off
spool /oracle/g01/bkup01/WDMP101/wdm_tables_dgs.txt
spool off
select e.owner owner,
e.segment_name segment_name,
s.segment_type segment_type,
f.tablespace_name tablespace_name,
REPLACE(SUBSTR(f.file_name,1,INSTR(f.file_name,'/',1,1)-1),'+') disk_group,
sum(e.bytes)/1048576 total_mb,
count (file_id) total_data_files
from dba_extents e join dba_data_files f using (file_id)
join dba_segments s on (e.segment_name=s.segment_name and e.owner=s.owner)
where e.segment_name in
('PAYMENT_ACTIVITY')
group by e.owner,e.segment_name, f.tablespace_name,REPLACE(SUBSTR(f.file_name,1,INSTR(f.file_name,'/',1,1)-1),'+'), s.segment_type
order by owner, segment_name, tablespace_name, disk_group
/
select owner, segment_name, segment_type, sum(bytes)/1048576 total_mb
from dba_segments
where owner in ('NXTAPPO','NXTREFWAIT','NXTSECO')
and segment_type in ('TABLE','TABLE PARTITION','TABLE SUBPARTITION')
group by owner, segment_name, segment_type
order by total_mb;
find /goldengate/ggsoracle -type f -name "*.prm" | xargs -I {} grep -l -i "PAYMENT" "{}"
impdp ${DNA_USER}/${DNA_PSSW} tables=UATREFO2.PV9_SWTABLE_LOOKUP directory=IMP_DNA
remap_schema=UATREFO2:NXTREFWAITSNP remap_table=UATREFO2.PV9_SWTABLE_LOOKUP:SWTABLE_LOOKUP_AAM
content=data_only parallel=6 dumpfile=PV9_SWTABLE_LOOKUP.dmp logfile=PV9_SWTABLE_LOOKUP.log
directory=IMP_DNA
dumpfile=PV9_SWTABLE_LOOKUP.dmp
logfile=PV9_SWTABLE_LOOKUP.log
tables=UATREFO2.PV9_SWTABLE_LOOKUP
remap_table=PV9_SWTABLE_LOOKUP:SWTABLE_LOOKUP_AAM
remap_schema=UATREFO2:NXTREFWAITSNP
content=data_only
/oracle/g01/admin/common/sqlnet/sqlnet.ora
oin Skype Meeting
https://meet.ad.sprint.com/rpm017/UUCCBHYI
Join by Phone
Number: 913-315-1921
Conference ID: 2494939
select count(*) from (
SELECT /*+ parallel (os,4) parallel(c_addr,4) */ trunc(sysdate) - trunc(om.order_status_create_dt)
   ||'|'||mc.FIRST_NM
   ||'|'||mc.LAST_NM
   ||'|'||mc.PTN
   ||'|'||mc.EMAIL_ADDR
   ||'|'||addr.ADDRESS
   ||'|'||addr.CITY
   ||'|'||addr.STATE
   ||'|'||addr.zip
   ||'|'||dev.DEVICE_SERIAL_NBR
   ||'|'||om.created_dt
   ||'|'||om.order_status_create_dt
   ||'|'||om.order_key
FROM NGS.MANAGE_CART mc,
  NGS.CUSTOMER_ADDRESS c_addr,
  NGS.DEVICE_LIST dev,
  oemadm.order_master om,
  oemadm.order_shipping os,
  oemadm.ident_address_info addr
WHERE om.order_key             = os.order_key
AND os.SHIPPING_ADDR_INFO_ID   = addr.IDENT_ADDR_INFO_ID
AND addr.first_name            = mc.FIRST_NM
AND addr.last_name             = mc.LAST_NM
AND addr.EMAIL                 = mc.EMAIL_ADDR
AND addr.city                  = c_addr.CITY_NM
AND addr.state                 = c_addr.STATE_CD
AND c_addr.CART_SEQ_NBR        = mc.CART_SEQ_NBR
AND mc.CART_SEQ_NBR            = dev.CART_SEQ_NBR
AND om.ORDER_ACCESSORY_ONLY_YN = 'Y'
AND TRUNC(mc.create_dt)        = TRUNC(om.CREATED_DT)
AND om.order_status_cd         = 'CLOSED'
AND trunc(sysdate) - trunc(om.order_status_create_dt) in (4,6,10)
AND mc.application_id IN ('FE8', 'T8S')
AND NOT EXISTS
  (SELECT pc.order_key
  FROM OEMADM.PHONE_CONFIG PC,
       OEMADM.ORDER_MASTER OM1
  WHERE PC.MEID                                = SPLIB.ESNHexToDec(dev.DEVICE_SERIAL_NBR)
  AND PC.ORDER_KEY                 = OM1.ORDER_KEY
  AND OM1.ORDER_ACCESSORY_ONLY_YN != 'Y'
  AND OM1.ORDER_STATUS_CD          = 'CLOSED'
  )
  );
Execution Plan
----------------------------------------------------------
Plan hash value: 3092308631
-------------------------------------------------------------------------------------------------------------
| Id  | Operation                              | Name               | Rows  | Bytes | Cost  | Pstart| Pstop |
-------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                       |                    |     1 |   340 | 86658 |       |       |
|*  1 |  FILTER                                |                    |       |       |       |       |       |
|   2 |   NESTED LOOPS                         |                    |     1 |   340 | 86646 |       |       |
|   3 |    NESTED LOOPS                        |                    |     2 |   340 | 86646 |       |       |
|   4 |     NESTED LOOPS                       |                    |     1 |   315 | 86620 |       |       |
|*  5 |      HASH JOIN                         |                    |    10 |  1680 | 86620 |       |       |
|   6 |       NESTED LOOPS                     |                    |  7141 |   878K| 86537 |       |       |
|   7 |        NESTED LOOPS                    |                    |  7141 |   878K| 86537 |       |       |
|*  8 |         HASH JOIN                      |                    |  7141 |   481K| 65114 |       |       |
|*  9 |          TABLE ACCESS BY INDEX ROWID   | ORDER_MASTER       |  7141 |   306K| 54483 |       |       |
|* 10 |           INDEX RANGE SCAN             | ORD_MSTR_ORD_STSCD |   480K|       |  3392 |       |       |
|  11 |          TABLE ACCESS FULL             | ORDER_SHIPPING     |  5108K|   121M| 10466 |       |       |
|* 12 |         INDEX UNIQUE SCAN              | IDNT_ADDR_PK       |     1 |       |     2 |       |       |
|* 13 |        TABLE ACCESS BY INDEX ROWID     | IDENT_ADDRESS_INFO |     1 |    57 |     3 |       |       |
|  14 |       PARTITION RANGE ALL              |                    | 38159 |  1565K|    71 |     1 |     4 |
|* 15 |        TABLE ACCESS FULL               | CUSTOMER_ADDRESS   | 38159 |  1565K|    71 |     1 |     4 |
|* 16 |      TABLE ACCESS BY GLOBAL INDEX ROWID| MANAGE_CART        |     1 |   147 |       | ROWID | ROWID |
|* 17 |       INDEX UNIQUE SCAN                | PK_MANAGE_CART     |     1 |       |       |       |       |
|* 18 |     INDEX RANGE SCAN                   | PK_DEVICE_LIST     |     2 |       |     1 |       |       |
|  19 |    TABLE ACCESS BY GLOBAL INDEX ROWID  | DEVICE_LIST        |     1 |    25 |    26 | ROWID | ROWID |
|  20 |   NESTED LOOPS                         |                    |     2 |   112 |    12 |       |       |
|  21 |    NESTED LOOPS                        |                    |     2 |   112 |    12 |       |       |
|  22 |     TABLE ACCESS BY INDEX ROWID        | PHONE_CONFIG       |     2 |    56 |     6 |       |       |
|* 23 |      INDEX RANGE SCAN                  | XIE4PHONE_CFG_MEID |     1 |       |     4 |       |       |
|* 24 |     INDEX UNIQUE SCAN                  | ORDER_MASTER_PK    |     1 |       |     2 |       |       |
|* 25 |    TABLE ACCESS BY INDEX ROWID         | ORDER_MASTER       |     1 |    28 |     3 |       |       |
-------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
   1 - filter( NOT EXISTS (SELECT 0 FROM "OEMADM"."ORDER_MASTER" "OM1","OEMADM"."PHONE_CONFIG" "PC"
              WHERE "PC"."MEID"="SPLIB"."ESNHEXTODEC"(:B1) AND "PC"."ORDER_KEY"="OM1"."ORDER_KEY" AND
              "OM1"."ORDER_ACCESSORY_ONLY_YN"<>'Y' AND "OM1"."ORDER_STATUS_CD"='CLOSED'))
   5 - access("ADDR"."CITY"="C_ADDR"."CITY_NM" AND "ADDR"."STATE"="C_ADDR"."STATE_CD")
   8 - access("OM"."ORDER_KEY"="OS"."ORDER_KEY")
   9 - filter("OM"."ORDER_ACCESSORY_ONLY_YN"='Y' AND
              (TRUNC(SYSDATE@!)-TRUNC(INTERNAL_FUNCTION("OM"."ORDER_STATUS_CREATE_DT"))=4 OR
              TRUNC(SYSDATE@!)-TRUNC(INTERNAL_FUNCTION("OM"."ORDER_STATUS_CREATE_DT"))=6 OR
              TRUNC(SYSDATE@!)-TRUNC(INTERNAL_FUNCTION("OM"."ORDER_STATUS_CREATE_DT"))=10))
  10 - access("OM"."ORDER_STATUS_CD"='CLOSED')
  12 - access("OS"."SHIPPING_ADDR_INFO_ID"="ADDR"."IDENT_ADDR_INFO_ID")
  13 - filter("ADDR"."FIRST_NAME" IS NOT NULL AND "ADDR"."LAST_NAME" IS NOT NULL AND "ADDR"."EMAIL"
              IS NOT NULL AND "ADDR"."CITY" IS NOT NULL AND "ADDR"."STATE" IS NOT NULL)
  15 - filter("C_ADDR"."CITY_NM" IS NOT NULL AND "C_ADDR"."STATE_CD" IS NOT NULL)
  16 - filter("ADDR"."FIRST_NAME"="MC"."FIRST_NM" AND "MC"."FIRST_NM" IS NOT NULL AND
              "ADDR"."LAST_NAME"="MC"."LAST_NM" AND "MC"."LAST_NM" IS NOT NULL AND
              "ADDR"."EMAIL"="MC"."EMAIL_ADDR" AND "MC"."EMAIL_ADDR" IS NOT NULL AND
              TRUNC(INTERNAL_FUNCTION("MC"."CREATE_DT"))=TRUNC(INTERNAL_FUNCTION("OM"."CREATED_DT")) AND
              ("MC"."APPLICATION_ID"='FE8' OR "MC"."APPLICATION_ID"='T8S'))
  17 - access("C_ADDR"."CART_SEQ_NBR"="MC"."CART_SEQ_NBR")
  18 - access("MC"."CART_SEQ_NBR"="DEV"."CART_SEQ_NBR")
  23 - access("PC"."MEID"="SPLIB"."ESNHEXTODEC"(:B1))
  24 - access("PC"."ORDER_KEY"="OM1"."ORDER_KEY")
  25 - filter("OM1"."ORDER_ACCESSORY_ONLY_YN"<>'Y' AND "OM1"."ORDER_STATUS_CD"='CLOSED')
Note
-----
   - cpu costing is off (consider enabling it)
   - dynamic sampling used for this statement (level=2)
   select sum(bytes)/1048576, segment_name from dba_segments where owner='NGS'
   and segment_name
   in ('ORDER_MASTER','CUSTOMER_ADDRESS','ORDER_SHIPPING','ORD_MSTR_ORD_STSCD','IDNT_ADDR_PK','PK_MANAGE_CART','PK_DEVICE_LIST','ORDER_MASTER_PK')
   group by segment_name order by 1;
select count(*) from NGS.MANAGE_CART mc where mc.application_id IN ('FE8','T8S');
select count(*) from oemadm.order_master om where om.ORDER_ACCESSORY_ONLY_YN = 'Y'
AND om.order_status_cd  = 'CLOSED'
AND trunc(sysdate) - trunc(om.order_status_create_dt) in (4,6,10);
select count(*) from(
SELECT trunc(sysdate) - trunc(om.order_status_create_dt)
   ||'|'||mc.FIRST_NM
   ||'|'||mc.LAST_NM
   ||'|'||mc.PTN
   ||'|'||mc.EMAIL_ADDR
   ||'|'||addr.ADDRESS
   ||'|'||addr.CITY
   ||'|'||addr.STATE
   ||'|'||addr.zip
   ||'|'||dev.DEVICE_SERIAL_NBR
   ||'|'||om.created_dt
   ||'|'||om.order_status_create_dt
   ||'|'||om.order_key
FROM NGS.MANAGE_CART mc,
  NGS.CUSTOMER_ADDRESS c_addr,
  NGS.DEVICE_LIST dev,
  oemadm.order_master om,
  oemadm.order_shipping os,
  oemadm.ident_address_info addr
WHERE om.order_key             = os.order_key
AND os.SHIPPING_ADDR_INFO_ID   = addr.IDENT_ADDR_INFO_ID
AND upper(addr.first_name)     = upper(mc.FIRST_NM)
AND upper(addr.last_name)      = upper(mc.LAST_NM)
AND upper(addr.EMAIL)          = upper(mc.EMAIL_ADDR)
AND addr.city                  = c_addr.CITY_NM
AND addr.state                 = c_addr.STATE_CD
AND c_addr.CART_SEQ_NBR        = mc.CART_SEQ_NBR
AND mc.CART_SEQ_NBR            = dev.CART_SEQ_NBR
AND om.ORDER_ACCESSORY_ONLY_YN = 'Y'
AND TRUNC(mc.create_dt)        = TRUNC(om.CREATED_DT)
AND om.order_status_cd         = 'CLOSED'
AND trunc(sysdate) - trunc(om.order_status_create_dt) in (4,6,10)
AND mc.application_id IN ('FE8', 'T8S')
AND NOT EXISTS
  (SELECT /*+ full(pc) parallel(pc,8) full(OM1) parallel(OM1,8) */ pc.order_key
  FROM OEMADM.PHONE_CONFIG PC,
       OEMADM.ORDER_MASTER OM1
  WHERE PC.MEID                                = SPLIB.ESNHexToDec(dev.DEVICE_SERIAL_NBR)
  AND PC.ORDER_KEY                 = OM1.ORDER_KEY
  AND OM1.ORDER_ACCESSORY_ONLY_YN != 'Y'
  AND OM1.ORDER_STATUS_CD          = 'CLOSED'
  )
  )
;
create table NXTREFWAITSNP.ctas_SWTABLE_LOOKUP_AAM as select * from NXTREFWAITSNP.SWTABLE_LOOKUP_AAM tablespace dna_data;
/oracle/g01/bkup01/application_import/import_dna_data.sh
/oracle/g01/bkup01/application_import
SELECT trunc(sample_time, 'hh24') + trunc ( to_char ( sample_time,'MI') / 15 ) * 15 / 1440 begin_time, inst_id, session_state, count(1) 
FROM gv$active_session_history 
where sample_time >= to_date('06-13-17 10:00','mm-dd-yy hh24:mi')
and sample_time <= to_date('06-13-17 12:30','mm-dd-yy hh24:mi')
group by trunc(sample_time, 'hh24') + trunc ( to_char ( sample_time,'MI') / 15 ) * 15 / 1440, inst_id, session_state
order by 1,2,3;

-- por evenot
select sample_time, event, count(*)
from gv$active_session_history
where sample_time >= to_date('01-06-21 13:50','mm-dd-yy hh24:mi')
and sample_time < to_date('01-06-21 14:20','mm-dd-yy hh24:mi')
group by sample_time, event
order by 3;

agora do awr
--If you plan to increase the retention policy or interval, you may use the below sql file provided by oracle below. It will show:
--1) what is the current size of awr snapshots.
--2) what is the size of each components.
--3) Also we can estimate future growth for awr and other components.
SQL> @$ORACLE_HOME/rdbms/admin/utlsyxsz.sql
--This can help you keep track of the AWR repository sizing. 
$ORACLE_HOME/rdbms/admin/awrinfo.sql
--change retention and interval settings for interval 15 minutes and retention to 8 days (11520 minutes)
execute dbms_workload_repository.modify_snapshot_settings (
   interval => 15,
   retention => 11520);
alter user sys identified by "June15062017_sp";
alter user system identified by "Sp_June15062017";
alter user WMSYS identified by "June1517_SpRint";
alter user PERFSTAT identified by "June1517_SpRint";
alter user OUTLN identified by "June1517_SpRint";
alter user ORDSYS identified by "June1517_SpRint";
alter user ORDPLUGINS identified by "June1517_SpRint";
alter user MDSYS identified by "June1517_SpRint";
alter user SYSMAN identified by "June1517_SpRint";
alter user DBSNMP identified by "June1517_SpRint";
select SEGMENT_NAME, PARTITION_NAME, sum(bytes)/1048576 as total_mb
from dba_segments
where segment_name in
(--'BOOST_REPLENISH_SUCCESS',
--'BOOST_DAILY_ADJUST',
--'BOOST_DAILY_USAGE',
--'BOOST_BALANCE_REPORT_MAST',
--'BOOST_REPLENISH_SUCCESS_STG',
--'BOOST_EVENT_DATA',
--'BOOST_EVENT_DATA_HIST',
--'DATA_BCS_MAST',
--'BOOST_ALLOWANCE_PI',
--'BOOST_BALANCE_REPORT_ANNIV',
--'PPD_INTL_EVENT_USG_DLY_DTL',
--'TSP_PINS_DAIR',
--'ZACT_DATAUSAGE',
--'ZACT_MESSAGE_USAGE',
'BCGI_NRE_EXTRACT'--,
--'BOOST_VOUCHER_LIFECYCLE',
--'TSP_WKLY_SPARTAN_TRX_FAILURE'
)
and partition_name in (
  'P012205',
  'P021307',
  'P032907',
  'P070206'
)
group by SEGMENT_NAME, PARTITION_NAME
order by SEGMENT_NAME, PARTITION_NAME
/
select inst_id, machine, status, count(*) from gv$session
where type <>'BACKGROUND' and username not in ('SYS','DBSNMP','DATAPOINT')
group by machine, inst_id, status order by 3,2;
/
select inst_id, status, username, count(*) from gv$session
where type <>'BACKGROUND' and username not in ('SYS','DBSNMP','DATAPOINT')
group by inst_id, status, username order by 3,2;
/
select inst_id, status, count(*) from gv$session where type <>'BACKGROUND' group by inst_id, status
order by 1
/
select /*+ parallel(a,4) */ count(*)
from core_b.spr_ms_user_attr a
where last_modified_date >= sysdate-1/1440
/
while true
do
ps -ef | grep "scp /u02"
sleep 60
done;
/
while true
do
date; echo "select inst_id, status, count(*) from gv\$session where username is not null group by inst_id, status order by 1,2;"| sqlplus -s / as sysdba
echo "select event, count(*) from gv\$session where status='ACTIVE' and username is not null group by event order by 2;"| sqlplus -s / as sysdba
sleep 30
done;
/
sqlplus -s / as sysdba << EOF
spool $HOME_DIR/weeklog.lst append
select systimestamp from dual;
exec dbtune.load_unused_ind_tab(rpt => 'Y', trn => 'Y');
exit;
EOF
col owner for a16
col segment_name for a30
col tablespace_name for a30
select s.owner, s.segment_name, s.segment_type, s.tablespace_name, sum(bytes)/1048576 as total_mb
from dba_segments s
where s.tablespace_name in ('SPRINT_USAGE_DATA','SPRINT_MODEL_DATA')
and s.owner not in ('SYS','XDB','DATAPOINT','SYSMAN','SQLTXPLAIN','EXFSYS','SYSTEM','DBSNMP','DBA_MAINTENANCE','DATAPOINT_AUDIT','STRATEGY_DBA_MONITOR','PERFSTAT')
group by s.owner, s.segment_name, s.segment_type, s.tablespace_name
order by s.tablespace_name, total_mb desc
/
select i.owner, i.index_name, i.table_name, i.PARTITIONING_TYPE,i.locality,ic.column_name, s.total_mb
from dba_part_indexes i join dba_ind_columns ic on (i.owner=ic.index_owner and i.index_name=ic.index_name)
join (select owner, segment_name, sum(bytes)/1048576 as total_mb
      from dba_segments
      group by owner, segment_name) s on (i.owner=s.owner and i.index_name=s.segment_name)
where i.table_name in ('DS_WDR_HA_UDR_BAK','DIM_SUBSCRIBER_COPY','ACCOUNT_DIM','DIM_SUBSCRIBER','DIM_SUBSCRIBER_POSTPAID')
order by i.table_name, i.index_name;
DS_AC6_ELA
 STORAGE(
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SPRINT_USAGE_LARGE_DATA"
  PARTITION BY RANGE ("EVENT_START_TIME")
select segment_name, partition_name, tablespace_name, bytes/1048576 as total_mb
from dba_segments
where segment_name='DS_AC6_ELA'
order by 2;
 CREATE TABLE "SPRINT_USAGE"."DS_WDR_HA_UDR"
   (    "FILEID" NUMBER NOT NULL ENABLE,
        "FID_ID" NUMBER NOT NULL ENABLE,
        "FID" NUMBER NOT NULL ENABLE,
        "RECORD_TYPE" VARCHAR2(4 CHAR),
        "RECORD_SUB_TYPE" VARCHAR2(4 CHAR),
        "NAI" VARCHAR2(64 CHAR),
        "EVENT_START_TIME" DATE,
        "EVENT_STOP_TIME" DATE,
        "USAGE_QTY" NUMBER,
        "RECORD_ID" NUMBER,
        "MARKET_CODE" VARCHAR2(3 CHAR),
        "TRANSACTION_TYPE" CHAR(1 CHAR),
        "PROCESS_DATE" DATE,
        "CALL_DIRECTION_CODE" CHAR(1 CHAR),
        "SERVICE_ID" VARCHAR2(20 CHAR),
        "IN_OUT_INDIC" VARCHAR2(20 CHAR),
        "MSID" VARCHAR2(20 CHAR),
        "SOURCE_IP" VARCHAR2(50 CHAR),
        "SERVING_PCF_IP" VARCHAR2(50 CHAR),
        "BS_MSC_ID" VARCHAR2(50 CHAR),
        "USER_ZONE" NUMBER,
        "IP_TECHNOLOGY" VARCHAR2(50 CHAR),
        "COMPULSORY_TUNNEL_IND" NUMBER,
        "RELEASE_IND" VARCHAR2(50 CHAR),
        "ACTIVE_TIME" NUMBER,
        "BOBO_INDICATOR" VARCHAR2(10 CHAR),
        "CONTENT_NAME" VARCHAR2(100 CHAR),
        "PRICE_TAG" NUMBER,
        "CONTENT_PARTNER_NAME" VARCHAR2(50 CHAR),
        "CONTENT_PARTNER_ID" VARCHAR2(50 CHAR),
        "DEVICE_TYPE" VARCHAR2(50 CHAR),
        "BOBO_SOC" VARCHAR2(50 CHAR),
        "CONTENT_SETTLEMENT_ID" VARCHAR2(50 CHAR),
        "GMT_OFFSET" VARCHAR2(50 CHAR),
        "CARRIER_ID" CHAR(3 CHAR),
        "ZONE_NAME" VARCHAR2(50 CHAR),
        "MDN" VARCHAR2(50 CHAR),
        "LIST_PRICE" NUMBER,
        "SHORT_CODE" VARCHAR2(50 CHAR),
        "PRODUCT_CATEGORY" CHAR(3 CHAR),
        "THIRD_PARTY_SPONSOR_ID" CHAR(5 CHAR),
        "CAMPAIGN_ID" VARCHAR2(50 CHAR),
        "DISCOUNT_SPONSORSHIP_TYPE" CHAR(3 CHAR),
        "RESELLER_ID" CHAR(3 CHAR),
        "SERVICE_OPTION" NUMBER,
        "CALL_ID" NUMBER,
        "NUMBEROF_BILLABLE_PARTICIPANTS" NUMBER,
        "TOTAL_NUMBER_OF_PARTICIPANTS" NUMBER,
        "PARTICIPANT_START_TIME" DATE,
        "PARTICIPANT_END_TIME" DATE,
        "CITY" VARCHAR2(50 CHAR),
        "STATE" VARCHAR2(2 CHAR),
        "CLIENT_ADDRESS" VARCHAR2(64 CHAR),
        "BILLING_SYSTEM_INDICATOR" VARCHAR2(50 CHAR),
        "INTSTATE_INTRSTATE_IND" VARCHAR2(6 CHAR),
        "ADDED_BY_ADDRESS" VARCHAR2(64 CHAR)
   ) PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255
 COMPRESS BASIC
  STORAGE(
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SPRINT_USAGE_LARGE_DATA"
  PARTITION BY RANGE ("EVENT_START_TIME")
(PARTITION "2016_06_27"  VALUES LESS THAN (TO_DATE(' 2016-06-28 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) SEGMENT CREATION DEFERRED
 PCTFREE 0 PCTUSED 40 INITRANS 1 MAXTRANS 255  COMPRESS BASIC LOGGING   STORAGE( INITIAL 204800 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
 TABLESPACE "SPRINT_USAGE_LARGE_DATA");
select dbms_metadata.get_ddl('TABLE','DS_WDR_HA_UDR','SPRINT_USAGE') from dual;
SELECT A.table_name,A.partition_name,purge_partition,hv, nt, ' set INTERVAL('||b.INTERVAL||')' intrvl
                FROM (
                    SELECT table_name,partition_name,purge_partition,hv,row_number() OVER (PARTITION BY table_name ORDER BY table_name,hv ) nt
                 FROM (SELECT A.table_name, partition_name,keep_part,purge_partition,
                         (get_high_value_as_date(A.table_name, partition_name)) hv,
                          row_number() OVER (PARTITION BY
                         A.table_name ORDER BY A.table_name,get_high_value_as_date(A.table_name, partition_name) DESC) pt
                      FROM dim_tep_tables A, all_tab_partitions b
                      WHERE A.table_name = b.table_name
                      --AND A.key_column_name != 'MONTH_YEAR'
                      AND A.key_column_name NOT IN ( 'MONTH_YEAR', 'TIME_KEY')
                      AND   A.table_name = nvl('',A.table_name)
                      AND  purge_partition =  CASE
                                         WHEN  '' IS NULL
                                         THEN  'Y'
                                         ELSE  purge_partition
                                         END
                      AND col_data_type IS NOT NULL)
                WHERE pt > keep_part) A, all_part_tables b
                WHERE A.table_name = b.table_name;
                TABLE_NAME                     PARTITION_NAME                 PURGE_PART         HV         NT INTRVL
------------------------------ ------------------------------ ---------- ---------- ---------- --------------------------------------------------
DS_AC6_AC_BALANCES_TC          SYS_P8372                      Y            20151201          1  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_AC6_AC_BALANCES_TC          SYS_P9716                      Y            20160101          2  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_AC6_AC_BALANCES_TC          SYS_P10773                     Y            20160201          3  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_AC6_AC_BALANCES_TC          SYS_P12089                     Y            20160301          4  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_AC6_AC_BALANCES_TC          SYS_P21155                     Y            20161001          5  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_AC6_AC_BALANCES_TC          SYS_P22227                     Y            20161101          6  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_AC6_AC_BALANCES_TC          SYS_P23132                     Y            20161201          7  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_AC6_AC_BALANCES_TC          SYS_P24153                     Y            20170101          8  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_AC6_ELA                     DS_AC6_ELA_LOG2014             Y            20140601          1  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_AC6_ELA                     SYS_P21412                     Y            20160801          2  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_AC6_ELA                     SYS_P21249                     Y            20160901          3  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_AC6_ELA                     SYS_P21280                     Y            20161001          4  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_AC6_ELA                     SYS_P22297                     Y            20161101          5  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_AC6_ELA                     SYS_P23195                     Y            20161201          6  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_AC6_ELA                     SYS_P24216                     Y            20170101          7  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_M2M_SMS                     SYS_P29853                     Y            20170423          1  set INTERVAL(NUMTODSINTERVAL(1,'DAY'))
DS_M2M_VOICE                   SYS_P29852                     Y            20170423          1  set INTERVAL(NUMTODSINTERVAL(1,'DAY'))
DS_WS_AC6_AC_BALANCES_TC       PART_WS_AC6ACBAL_201503        Y            20150401          1  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_WS_AC6_AC_BALANCES_TC       SYS_P8371                      Y            20151201          2  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_WS_AC6_AC_BALANCES_TC       SYS_P9717                      Y            20160101          3  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_WS_AC6_AC_BALANCES_TC       SYS_P10797                     Y            20160201          4  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_WS_AC6_AC_BALANCES_TC       SYS_P12125                     Y            20160301          5  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_WS_AC6_AC_BALANCES_TC       SYS_P21266                     Y            20161001          6  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_WS_AC6_AC_BALANCES_TC       SYS_P22224                     Y            20161101          7  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_WS_AC6_AC_BALANCES_TC       SYS_P23121                     Y            20161201          8  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
DS_WS_AC6_AC_BALANCES_TC       SYS_P24141                     Y            20170101          9  set INTERVAL(NUMTOYMINTERVAL(1,'MONTH'))
select round(avg(growth_rate)*30,0) as "Growth Rate (MB)", db_name as "Database" from (
select to_number(su.attr_value_txt)/1024/1024 - lag(to_number(su.attr_value_txt)/1024/1024) over (order by su.chng_date) growth_rate,
        su.db_name ,
        to_char(su.chng_date, 'yyyy-mm-dd HH24:MI:SS') "Hist Date",
        round(to_number(su.attr_value_txt)/1024/1024,2) "Space Used (MB)"
    from db_attr_val_hist su
    where su.db_name = upper('MMPP101')
      and su.srvr_name = upper('PLSLA871')
      and su.attr_name = 'METRIC_SPACE_USED'
      and su.chng_date >= sysdate - 30
    order by su.chng_date
) where nvl(growth_rate, 0)<>0 group by db_name
/
select su.db_name ,
       to_char (chng_date, 'yyyy-mm') "Month",
       trunc(max(to_number(su.attr_value_txt)/1024/1024/1024)) db_size_gb
from db_attr_val_hist su
where su.db_name = upper('MMPP101')
  and su.srvr_name = upper('PLSLA871')
  and su.attr_name = 'METRIC_SPACE_USED'
group by su.db_name, to_char (chng_date, 'yyyy-mm')
order by 1, 2
/
e mais esse também:
SELECT /*+Parallel(4)*/b.tsname tablespace_name, MAX(b.used_size_mb) cur_used_size_mb, round(AVG(inc_used_size_mb),2)avg_increas_mb
  FROM (SELECT a.days, a.tsname, used_size_mb, used_size_mb - LAG (used_size_mb,1)  OVER ( PARTITION BY a.tsname ORDER BY a.tsname,a.days) inc_used_size_mb
          FROM (SELECT TO_CHAR(sp.begin_interval_time,'MM-DD-YYYY') days,ts.tsname,
                       MAX(round((tsu.tablespace_usedsize* dt.block_size )/(1024*1024),2)) used_size_mb
                   FROM DBA_HIST_TBSPC_SPACE_USAGE tsu, DBA_HIST_TABLESPACE_STAT ts, DBA_HIST_SNAPSHOT sp, DBA_TABLESPACES dt
                   WHERE tsu.tablespace_id= ts.ts#
                     AND tsu.dbid=ts.dbid
                     AND tsu.snap_id = sp.snap_id
                     AND ts.instance_number=sp.instance_number
                     AND ts.tsname = dt.tablespace_name
                     AND sp.begin_interval_time > sysdate-7
                   GROUP BY TO_CHAR(sp.begin_interval_time,'MM-DD-YYYY'), ts.tsname
                   ORDER BY ts.tsname, days
               ) A
       ) b
  GROUP BY b.tsname ORDER BY b.tsname;
  select index_name, index_type from dba_indexes where index_name in ('DS_AC6_ELA_TOKEN_ID_IDX','I_DS_AC6_ELA_BAN_IDX','I_DS_AC6_ELA_RP_DT');
asm_diskgroups='DATA','FRA_01'
processes=300
remote_login_passwordfile='exclusive'
audit_file_dest='/oracle/g01/admin/+ASM/adump'
core_dump_dest='/oracle/g01/admin/+ASM/cdump'
diagnostic_dest='/oracle/g01/admin/+ASM/diag'
ASM_DISKSTRING = '/dev/ora-*'
asm_diskgroups='DATA','FRA_01'
After Cluster failover to plsab162, database will not mount because of missing control file. Then perform next steps:
1- On server plsab162 (current active location)
sqlplus / as sysdba
create pfile='/oracle/g01/admin/EGSPRDDB/pfile/initEGSPRDDB.ora_bkp' from spfile;
alter system set control_files='+DATA/EGSPRDDB/CONTROLFILE/control01.ctl','+FRA_01/EGSPRDDB/CONTROLFILE/control02.ctl' scope=spfile;
shutdown immediate;
startup nomount;
set lines 200
show parameter control_files
-- This should show that controlfiles will now be in ASM disks DATA and FRA_01.
exit;
cd /oracle/g01/admin/EGSPRDDB/pfile
scp oracle@plsab161:/oracle/g01/admin/EGSPRDDB/pfile/control01.ctl .
2-
rman target /
restore controlfile from '/oracle/g01/admin/EGSPRDDB/pfile/control01.ctl';
alter database mount;
--Database should mount normally.
alter database open;
--Database should open normally.
3- On server plsab161 (current failover location)
cd /oracle/g01/admin/common/sqlnet
mv listener.ora listener.ora_oldfile
mv listener.ora_new listener.ora
#This is to correct listener start and stop script and should be done only once and only when listener is down on node plsab161.
Ask SA to failback to plsab161 and repreat the failover test, correcting the other possible errors found along the way.
---------------------------------------------------------------------------------------------------------------------------------
USERID="/ as sysdba"
directory=DATAPUMP
dumpfile=EXP_KSYS_EMIND_20210703_%u.dmp
logfile=EXP_KSYS_EMIND_20210703.log
schemas=EMIND,KSYS
filesize=10G

create table sprint_usage.documents
  (id number,
   nome varchar2(10)
    )
  PARTITION BY RANGE (ID)
  INTERVAL (10)
  (PARTITION P_DOCUMENT_0 VALUES LESS THAN (10));
  SQL> declare
declare
i number(2);
begin
for i in 1..99
loop
insert into sprint_usage.documents (id,nome) values (i,'TESTE '||i);
end loop;
end;
/
Sun Jul 02 12:20:37 2017
System State dumped to trace file /oracle/g01/admin/+ASM/diag/diag/asm/+asm/+ASM/trace/+ASM_ora_4673.trc
Errors in file /oracle/g01/admin/+ASM/diag/diag/asm/+asm/+ASM/trace/+ASM_ora_4673.trc:
Sun Jul 02 12:29:59 2017
System State dumped to trace file /oracle/g01/admin/+ASM/diag/diag/asm/+asm/+ASM/trace/+ASM_ora_10632.trc
Errors in file /oracle/g01/admin/+ASM/diag/diag/asm/+asm/+ASM/trace/+ASM_ora_10632.trc:
Sun Jul 02 12:46:58 2017
System State dumped to trace file /oracle/g01/admin/+ASM/diag/diag/asm/+asm/+ASM/trace/+ASM_ora_3905.trc
Errors in file /oracle/g01/admin/+ASM/diag/diag/asm/+asm/+ASM/trace/+ASM_ora_3905.trc:
Sun Jul 02 13:57:10 2017
System State dumped to trace file /oracle/g01/admin/+ASM/diag/diag/asm/+asm/+ASM/trace/+ASM_ora_12611.trc
Errors in file /oracle/g01/admin/+ASM/diag/diag/asm/+asm/+ASM/trace/+ASM_ora_12611.trc:
Sun Jul 02 14:02:16 2017
WARNING: client [MMPP101:MMPP101] not responsive for 194s; state=0x1. killing pid 3368
Sun Jul 02 14:02:22 2017
NOTE: ASM did COD rollback recovery for group 4/0xcd08ec37 (FRA_01)
Sun Jul 02 14:02:51 2017
NOTE: client MMPP101:MMPP101 registered, osid 10201, mbr 0x0
select i.owner, i.table_name, i.index_name, ic.column_name, i.status, i.visibility, ic.column_position, s.total_mb
from dba_indexes i join dba_ind_columns ic on (i.owner=ic.index_owner and i.index_name=ic.index_name)
join (select owner, segment_name, sum(bytes)/1048576 as total_mb
      from dba_segments
      group by owner, segment_name) s on (i.owner=s.owner and i.index_name=s.segment_name)
where i.table_name in (
'DOCUMENTMETADATA',
'DOCUMENT_FACT',
'HISTORICUSAGE',
'HISTORICCHARGES',
'DOCUMENTDATASTOREITEM',
'DOCUMENT',
'BILL'
)
order by i.table_name, i.index_name;
Please enable the following MERCDBP1 indexes on plss4968:
Indexes:
MERCDBA.UKAPLO_PART_MFGR_PART_NUM
MERCDBA.UK_INBOUND_EQUIP_BUNDLE_MODEL
MERCDBA.UK_INBOUND_EQUIP_BUNDLE_PART
MERCDBA.UK_IN_EQ_TRANS_GROUP_MODEL
MERCDBA.UK_IN_EQ_PART_TRANS_MODEL
--run below steps
--rebuild the function-based indexes
alter index MERCDBA.UK_IN_EQ_PART_TRANS_MODEL rebuild;
alter index MERCDBA.UK_IN_EQ_TRANS_GROUP_MODEL rebuild;
alter index MERCDBA.UK_INBOUND_EQUIP_BUNDLE_PART rebuild;
alter index MERCDBA.UK_INBOUND_EQUIP_BUNDLE_MODEL rebuild;
alter index MERCDBA.UK_APLO_PART_MFGR_PART_NUM rebuild;
--enabled function-based indexes
alter index MERCDBA.UK_IN_EQ_PART_TRANS_MODEL enable;
alter index MERCDBA.UK_IN_EQ_TRANS_GROUP_MODEL enable;
alter index MERCDBA.UK_INBOUND_EQUIP_BUNDLE_PART enable;
alter index MERCDBA.UK_INBOUND_EQUIP_BUNDLE_MODEL enable;
alter index MERCDBA.UK_APLO_PART_MFGR_PART_NUM enable;
--check is status is valid and enable
select owner, index_name, index_type, table_owner, table_name, status, partitioned, funcidx_status
from dba_indexes
where INDEX_NAME IN (
'UK_APLO_PART_MFGR_PART_NUM',
'UK_INBOUND_EQUIP_BUNDLE_MODEL',
'UK_INBOUND_EQUIP_BUNDLE_PART',
'UK_IN_EQ_TRANS_GROUP_MODEL',
'UK_IN_EQ_PART_TRANS_MODEL'
);
select segment_name, sum(bytes)/1048576 from dba_segments
where segment_name in (
'UK_IN_EQ_PART_TRANS_MODEL',
'UK_IN_EQ_TRANS_GROUP_MODEL',
'UK_INBOUND_EQUIP_BUNDLE_PAR',
'UK_INBOUND_EQUIP_BUNDLE_MOD',
'UK_APLO_PART_MFGR_PART_NUM')
group by segment_name;
select index_name from dba_indexes where table_name in
(
'ZZUAG_AAA_VS_NDW_RTL_WDR_B to the new tablespace',
'DS_WS_AC6_AC_BALANCES_TC to the new tablespace',
'TMPTBL0 to the new tablespace',
'ZZUAG_AAA_VS_NDW_WLS_WDR_B to the new tablespace',
'ZZUAG_HA_VS_NDW_RTL_WDR_A to the new tablespace',
'DS_AMS_COMPARE_TC_3G_WS to the new tablespace',
'ZZUAG_AAA_VS_NDW_WLS_WDR_BNA to the new tablespace',
'DS_MF9CON_AUDIT to the new tablespace',
'DS_AC_BALANCES to the new tablespace',
'ZZUAG_AAA_VS_NDW_RTL_WDR_A to the new tablespace',
'ZZUAG_AAA_VS_NDW_WLS_WDR_A to the new tablespace',
'DS_AC6_AC_BALANCES_TC to the new tablespace',
'DS_GTP_POSTPAID to the new tablespace',
'DS_AMS_OUT to the new tablespace',
'TMPTBL4 to the new tablespace',
'DS_AC6_FLATNER to the new tablespace',
'ZZUAG_PGWVNDW_RTLWDR_LTE_B to the new tablespace',
'TMPTBL2 to the new tablespace',
'TMPTBL1 to the new tablespace',
'TMPTBL3 to the new tablespace',
'DS_AC6_TRACING to the new tablespace',
'ZZUAG_M2M_DATA_BNA to the new tablespace',
'DS_AC6_ELA_SUMMARY_RNM to the new tablespace',
'DS_MRC_TREND to the new tablespace',
'DS_EMS_LVL to the new tablespace',
'ZZUAG_BOOSTINTERVOICEBA_BNA to the new tablespace')
;
select segment_name, partition_name, tablespace_name, BYTES/1048576
from dba_segments
where segment_name in ('ZZUAG_HA_VS_NDW_RTL_WDR_A')
order by 1,2;
#!/bin/sh
#Script to get a list of tables to update the tablespace attribute.
export ORACLE_HOME=/oracle/g01/software/rdbms/11.2.0.4
export ORACLE_SID=INQQ101
export PATH=$ORACLE_HOME/bin:$PATH
export SQLPATH=/oracle/g01/admin/common/T5xxxxxx
cd $SQLPATH
echo "" > DS_NDW_WDR_USAGE_movepartitions.sql
sqlplus -s "/ as sysdba" << !!
set pages 999 lin 200
set feedback off
set heading off
set echo off
spool /oracle/g01/admin/common/T5xxxxxx/DS_NDW_WDR_USAGE_movepartitions.sql
select 'set echo on' from dual;
select 'set time on' from dual;
select 'set timing on' from dual;
select 'spool /oracle/g01/admin/common/T5xxxxxx/DS_NDW_WDR_USAGE_movepartitions.lst' from dual;
select 'alter table SPRINT_USAGE.DS_NDW_WDR_USAGE move partition "' || partition_name ||
'" tablespace SPRINT_USAGE_DATA parallel 4 nologging;'
from dba_tab_partitions
where table_name='DS_NDW_WDR_USAGE'
and tablespace_name='SPRINT_USAGE_DATA'
order by partition_name
/
select 'alter table SPRINT_USAGE.DS_NDW_WDR_USAGE modify partition "' || partition_name ||
'" logging;'
from dba_tab_partitions
where table_name='DS_NDW_WDR_USAGE'
and tablespace_name='SPRINT_USAGE_DATA'
order by partition_name
/
select 'spool off' from dual;
spool off;
exit;
col object_name for a30
select o.OBJECT_ID, o.OBJECT_NAME, s.partition_name, s.tablespace_name, o.OBJECT_TYPE, o.CREATED
from dba_objects o join dba_segments s on (s.owner=o.owner and o.object_name=s.segment_name)
where o.created > '12-JUL-2017 06:00:00'
and o.object_type in ('INDEX PARTITION','TABLE PARTITION')
and o.owner = 'SPRINT_USAGE'
and s.tablespace_name='SPRINT_USAGE_DATA'
/
select table_name, partition_name , tablespace_name from dba_tab_partitions
where table_name='ZZUAG_AMS_2_EVENT_TDR_PP_ANB'
order by partition_name
/
select 'alter table SPRINT_USAGE.' || table_name || ' move partition ' || partition_name || ' tablespace SPRINT_USAGE_DATA;'
from dba_tab_partitions
where partition_name='DUMMY'
and tablespace_name='SPRINT_USAGE_DATA'
and table_owner = 'SPRINT_USAGE';
Some indexes or index [sub]partitions of table SPRINT_USAGE.DS_NDW_EVENT_USAGE have been marked unusable
Mon Jul 17 00:09:24 2017
Some indexes or index [sub]partitions of table SPRINT_MODEL.DMAGG_DS_NDW_EVENT_USAGE have been marked unusable
/oracle/g01/admin/MMPP101/diag/rdbms/mmpp101/MMPP101/trace/MMPP101_dw02_19340.trc
RUN {
ALLOCATE CHANNEL C1 TYPE SBT_TAPE PARMS
'SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.3/lib/libddobk.so';
send 'set username boost1745no_rep password n02R3pLS# servername L2ED1745.corp.sprint.com';
RELEASE CHANNEL C1;
}
host_name=`hostname | cut -f1 -d'.'`
RUN {
ALLOCATE CHANNEL dd1 type sbt_tape TRACE 5 PARMS
'BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.3/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1745no_rep,BACKUP_HOST=L2ED1745.corp.sprint.com)';
backup archivelog logseq 111339 thread 1 format 'plsla871_%d_ARC_%T_%s_%p';
RELEASE CHANNEL dd1;
}
L2ED1745.corp.sprint.com
User= boost1745no_rep
SU=oracle1745no_rep
n02R3pLS#
ORA-31693: Table data object "SPRINT_MODEL"."DMAGG_DS_NDW_EVENT_USAGE":"2016_07_17" failed to load/unload and is being skipped due to error:
ORA-02354: error in exporting/importing data
ORA-02149: Specified partition does not exist
ORA-39043: Object type INDEX is not supported for "SPRINT_MODEL"."IXTEMPCASE_RBARPNEWTAG".
ORA-31693: Table data object "SPRINT_MODEL"."DMAGG_DS_BOOST_INTER_RATED":"2016_07_17" failed to load/unload and is being skipped due to error:
ORA-02354: error in exporting/importing data
ORA-02149: Specified partition does not exist
ORA-31693: Table data object "SPRINT_MODEL"."DMAGG_DS_AMS_WDR_USAGE":"2016_07_17" failed to load/unload and is being skipped due to error:
ORA-02354: error in exporting/importing data
ORA-02149: Specified partition does not exist
ORA-31693: Table data object "SPRINT_MODEL"."DMAGG_DS_MAF":"2016_07_17" failed to load/unload and is being skipped due to error:
ORA-02354: error in exporting/importing data
ORA-02149: Specified partition does not exist
ORA-31693: Table data object "SPRINT_MODEL"."DMAGG_DS_BOOST_INTER_EVENT":"2016_07_17" failed to load/unload and is being skipped due to error:
ORA-02354: error in exporting/importing data
ORA-02149: Specified partition does not exist
ORA-31693: Table data object "SPRINT_MODEL"."DMAGG_DS_AMS_TDR_USAGE":"2016_07_17" failed to load/unload and is being skipped due to error:
ORA-02354: error in exporting/importing data
ORA-02149: Specified partition does not exist
ORA-31693: Table data object "SPRINT_MODEL"."DMAGG_BILLED_CHARGES":"2016_07_17" failed to load/unload and is being skipped due to error:
ORA-02354: error in exporting/importing data
ORA-02149: Specified partition does not exist
ORA-31693: Table data object "SPRINT_MODEL"."DMAGG_BILLED_DISCOUNTS_ADJUSTS":"2016_07_17" failed to load/unload and is being skipped due to error:
ORA-02354: error in exporting/importing data
ORA-02149: Specified partition does not exist
ORA-31693: Table data object "SPRINT_MODEL"."DMAGG_BILLING_DISCOUNT_GRANTED":"2016_07_17" failed to load/unload and is being skipped due to error:
ORA-02354: error in exporting/importing data
ORA-02149: Specified partition does not exist
ORA-31693: Table data object "SPRINT_MODEL"."DMAGG_DS_DTF_3G":"2016_07_17" failed to load/unload and is being skipped due to error:
ORA-02354: error in exporting/importing data
ORA-02149: Specified partition does not exist
ORA-31693: Table data object "SPRINT_MODEL"."DMAGG_DS_PREPAID_TDR":"2016_07_17" failed to load/unload and is being skipped due to error:
ORA-02354: error in exporting/importing data
ORA-02149: Specified partition does not exist
'ZZUAG_AAA_VS_NDW_RTL_WDR_BNA','ZZUAG_HA_VS_NDW_RTL_WDR_BNA','ZZUAG_HA_VS_NDW_RTL_WDR_B','DS_WDR_HA_UDR','DS_AMS_M2M_USAGE'
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
select sum(bytes)/1048576 as total_mb_to_move from dba_segments where segment_name
in
('ZZUAG_AAA_VS_NDW_RTL_WDR_BNA','ZZUAG_HA_VS_NDW_RTL_WDR_BNA','ZZUAG_HA_VS_NDW_RTL_WDR_B',
  'ZZUAG_AAA_VS_NDW_RTL_WDR_B','ZZUAG_AAA_VS_NDW_WLS_WDR_B','ZZUAG_HA_VS_NDW_RTL_WDR_A','ZZUAG_AAA_VS_NDW_WLS_WDR_BNA',
  'ZZUAG_AAA_VS_NDW_RTL_WDR_A','ZZUAG_AAA_VS_NDW_WLS_WDR_A')
/
select OWNER, SEGMENT_NAME,SEGMENT_TYPE, sum(bytes)/1048576 as TOTAL_MB
from dba_segments
where owner='SPRINT_USAGE' and tablespace_name='SPRINT_USAGE_DATA'
group by OWNER, SEGMENT_NAME, SEGMENT_TYPE
order by total_mb desc
/
select sum(bytes)/1048576
from dba_segments
where segment_name in ('ZZUAG_AAA_VS_NDW_RTL_WDR_BNA','ZZUAG_HA_VS_NDW_RTL_WDR_BNA','ZZUAG_HA_VS_NDW_RTL_WDR_B',
  'ZZUAG_AAA_VS_NDW_RTL_WDR_B','ZZUAG_AAA_VS_NDW_WLS_WDR_B','ZZUAG_HA_VS_NDW_RTL_WDR_A','ZZUAG_AAA_VS_NDW_WLS_WDR_BNA',
  'ZZUAG_AAA_VS_NDW_RTL_WDR_A','ZZUAG_AAA_VS_NDW_WLS_WDR_A')
and tablespace_name='SPRINT_USAGE_DATA'
/
with p as
(select table_name, logging, count(*) ct
from dba_tab_partitions
where table_name in
('DH_MAF_RTL_FILES','DS_AAA_AUDIT_CLIENT','DS_AC6_AC_BALANCES_TC','DS_AC6_AC_BALANCES_TC_ARCH','DS_AC6_BALREP_SUMMARY','DS_AC6_CHARGES','DS_AC6_DAILY_PREPAID','DS_AC6_ELA_ARCH',
'DS_AC6_FLATNER','DS_AC6_TRACING','DS_ACCESSBILL','DS_ACISION_MMS','DS_ACT_CDMA_CIBER','DS_ACT_LOG_ARCH','DS_ACT_LOG_RESEARCH','DS_AC_BALANCES','DS_AEPONA_WAST',
'DS_AIR_SUMMARY','DS_AMS_CLR','DS_AMS_COMPARE_TC_3G_WS','DS_AMS_COMPARE_TC_3G_WSARCHRNM','DS_AMS_IN','DS_AMS_LTE_M2M_USAGE','DS_AMS_OUT','DS_APRM_MRC',
'DS_APRM_PYM','DS_APRM_TMS','DS_BILLING_SOC_LIST','DS_BILL_DISC_GRN','DS_BOOST_DRC','DS_BOOST_INTER_RATED_TEMP','DS_BOOST_MRC','DS_BOOST_NGPP_EVENTS',
'DS_BOOST_NGPP_EVENTS_DAY','DS_CASS','DS_CHARD_431','DS_CHARD_431_IRTM','DS_CHARD_435','DS_CHARGES_REPORT_RC_HIST','DS_CIBER_CREATE_ERRORS','DS_CIBER_OUTCOLLECTS',
'DS_DAILY_ADJUSTMENTS','DS_DAILY_ADJ_BY_APP','DS_DAILY_OTC_CSV','DS_DAILY_USAGE_SUMMARY','DS_DMD_KPI','DS_DTF_3G','DS_EMS_ADM_ORG','DS_EMS_AIRFREE_2G','DS_EMS_BAL',
'DS_EMS_CANCELLED','DS_EMS_CAUSING_CONDS','DS_EMS_COUNT','DS_EMS_ERRORS','DS_EMS_INPUTS','DS_EMS_LVL','DS_EMS_OUTPUTS','DS_EMS_USER','DS_EMS_USER_GROUPS',
'DS_FW_3G','DS_GOOGLE_DTF','DS_IFC_SCDR_OUTPUT','DS_INCOMPLETE_FLOW','DS_LMCE','DS_LTE_COLLECTION_REP','DS_MAF_CRS_RTL','DS_MAF_RTL_FILES','DS_MAF_SCF_RTL',
'DS_MDR_EVDO','DS_MF9CON_AUDIT','DS_MOVED_MESSAGES_2G','DS_MOVED_MESSAGES_3G','DS_MO_MT_REV_SUM','DS_MRC_TREND','DS_MRC_TREND_CNT','DS_MTS_REV_SHARE',
'DS_NGPP_CSM','DS_NNU_DAILY_ACTIVATIONS','DS_NNU_DAILY_DEACTS','DS_NRSBTATRANSSUM_BKP','DS_NRS_DAILY_STATS','DS_NRS_REJECTED_TRANS','DS_NRS_VALID_TRANS',
'DS_OPENET2G','DS_OPENET2G_AIRAVE','DS_OPENET_AEPONA','DS_OPENET_LMCE','DS_PDSN_AUDIT_CLIENT','DS_PREPAID_DROPS','DS_PRMS_TDR','DS_RC_SUMMARY','DS_RC_ZERO_SUMMARY',
'DS_REJECTED_EVENTS','DS_ROAMING_MEXICO_VOICE_USAGE','DS_SOC_SUMMARY','DS_SPDE','DS_SPRINT_ONEUP_RMS','DS_SYN_INTNL_SMS','DS_VMU_CDR_DRS','DS_VMU_CDR_SCDR_DUMP',
'DS_WEB_CYCLE_RECON_RPT2','DS_WEB_TAX_AUDIT_WLS','DS_WS_AC6_AC_BALANCES_TC','DS_WS_AC6_AC_BALANCES_TC_ARCH','DS_WS_AC6_ERR_DUP','DS_WS_MAF_SCF_RSL',
'DS_WS_TAX','DS_WS_USAGE_EXTRACT_DETAILS','DS_XQS_GOOGLE_TRAN_LOG','DS_XQS_TRAN_LOG','LOGS','RNM_DS_USAGE_EXTRACT_DETAILS','TMPTBL0','TMPTBL1','TMPTBL2','TMPTBL3',
'TMPTBL4','VMU_DW_SCDR_OUTPUT','DS_AC6_ELA')
group by table_name, logging
order by table_name, logging
)
select table_name from p where logging='YES' and ct <= 1
/
select t.table_name, t.def_tablespace_name, e.tablespace_name,e.ct, e.total_mb
from dba_part_tables t
join
(select segment_name, tablespace_name, count(*) as ct, sum(bytes)/1048576 as total_mb
  from dba_segments
  where segment_type='TABLE PARTITION'
  and owner='SPRINT_USAGE'
  and segment_name <> 'DS_AC6_ELA'
  group by segment_name,  tablespace_name) e
on (t.table_name=e.segment_name)
where def_tablespace_name='SPRINT_USAGE_DATA'
order by 1 , 3
;
I - Partition provision_session_cache table. Include all the details listed below on the DBA team task:
  1.Backup the table (provision_session_cache) on before making any changes (DBA team)
  2.Implement daily partition on the provision_session_cache table (DBA team)
  3.Drop and recreate indexes for PROVISION_SESSION_CACHE table as being LOCAL
  4.The partitions would be by range on the create_date column. (DBA team)
  5.The partitions would be rolling such that we only keep 60 days-worth of data on provision_session_cache table (DBA team)
II – Set PROVISION_SERVICE_REQUEST , PROVISION_DEVICE_REQUEST  and PROVISION_ASSIGNED_ATTRIBUTES  to interval partitioning
Check the last 2016 partition and try to drop it
III – Add Hash partitions and shrink jobs to Processing_service_request, Processing_service_trx and Related_hold_queue tables.
IV - Reducing data retention period from 90 to 60 days EXCLUDING THE DNA_AUDIT_LOG & DNA_AUDIT_LOG_PARAM TABLES
SELECT *
FROM
  (SELECT q.*,
          rownum AS rn
   FROM
     (SELECT errtrx.*,
             psr.create_date AS svc_create_date
      FROM
        (SELECT DISTINCT per.trx_id AS trx_id,
                         NULL AS tracking_id,
                         per.request_id,
                         per.handle_attempt,
                         per.request_type,
                         rt.request_type_desc,
                         per.phd_id,
                         per.error_cd,
                         err.dna_error_desc,
                         per.nw_elem_error_code,
                         per.req_nw_elem_error_desc,
                         per.handled_by_user_id,
                         per.status,
                         st.status_desc,
                         per.create_date,
                         per.complete_date,
                         per.user_id
         FROM provision_error_request per
         LEFT JOIN dna_error err ON per.error_cd = err.dna_error_cd
         LEFT JOIN dna_status st ON per.status = st.status
         LEFT JOIN dna_request_type rt ON per.request_type = rt.request_type
         UNION SELECT DISTINCT PSE.TRX_ID AS trx_id,
                               pse.tracking_id,
                               0 AS request_id,
                               0 AS handle_attempt,
                               NULL AS request_type,
                               NULL AS request_type_desc,
                               NULL AS phd_id,
                               pse.error_cd,
                               err.dna_error_desc,
                               NULL AS nw_elem_error_code,
                               NULL AS req_nw_elem_error_desc,
                               NULL AS handled_by_user_id,
                               pse.status,
                               st.status_desc,
                               pse.create_date,
                               pse.complete_date,
                               pse.user_id
         FROM provision_service_error pse
         LEFT JOIN dna_error err ON pse.error_cd = err.dna_error_cd
         LEFT JOIN dna_status st ON pse.status = st.status) errtrx
      LEFT JOIN provision_service_request psr ON psr.trx_id = errtrx.trx_id
      WHERE 1 = 1
        AND errtrx.create_date >= to_date('13-jul-2017 07:18','dd-mon-yyyy hh24:mi')
      ORDER BY errtrx.CREATE_DATE) q)
WHERE rn > 0
  AND rownum <= 100
  alter table SPRINT_USAGE.DS_KODIAK_RAR modify default attributes tablespace "SPRINT_USAGE_DATA";
  alter index SPRINT_USAGE.I_DS_MAFC_SBC_IDX modify default attributes tablespace "SPRINT_USAGE_DATA";
  OWNER                          SEGMENT_NAME                                                                      SEGMENT_TYPE       SUM(BYTES)/1048576
------------------------------ --------------------------------------------------------------------------------- ------------------ ------------------
SPRINT_USAGE                   I_KODIAK_RAR_FL_ID                                                                INDEX PARTITION                 .5625
SPRINT_USAGE                   DS_2G_DATE_HOUR                                                                   TABLE PARTITION                    64
SPRINT_USAGE                   I_DS_MAFC_SBC_IDX                                                                 INDEX PARTITION                    .5
SPRINT_USAGE                   I_KODIAK_RAR_RPT_DT                                                               INDEX PARTITION                    53
SPRINT_USAGE                   DS_KODIAK_RAR                                                                     TABLE PARTITION                   392
SPRINT_USAGE                   I_DS_2G_DATE_HOUR_IDX                                                             INDEX PARTITION                    .5
SPRINT_USAGE                   DS_TDR_PURCHASES                                                                  TABLE PARTITION                   696
 alter table sprint_usage.DS_AC6_ELA enable CONSTRAINT "AC6_ELA_FLID_FK";
  alter table sprint_usage.DS_AC6_ELA enable CONSTRAINT "DS_AC6_ELA_FIDID_FK" ;
channel dd2: finished piece 1 at 23-JUL-2017 23:30:37
piece handle=plsla871_MMPP101_TS_20170723_255891_1 tag=TAG20170723T083926 comment=API Version 2.0,MMS Version 2.1.0.1
channel dd2: backup set complete, elapsed time: 14:51:08
channel dd1: finished piece 1 at 24-JUL-2017 05:34:20
piece handle=plsla871_MMPP101_TS_20170723_255890_1 tag=TAG20170723T083926 comment=API Version 2.0,MMS Version 2.1.0.1
channel dd1: backup set complete, elapsed time: 20:54:52
Finished backup at 24-JUL-2017 05:34:21
select grantee
from dba_sys_privs where privilege ='CREATE SESSION'
and grantee not in ('SYS','APPQOSSYS','XDB','EXP_FULL_DATABASE','DBA','CONNECT','IMP_FULL_DATABASE','ANONYMOUS','SECURITY_AUDIT_ROLE','DATAPUMP_EXP_FULL_DATABASE','DATAPUMP_IMP_FULL_DATABASE','OUTLN','OEM_MONITOR','DBAMONITOR')
create table ds_ac6_ela1
tablespace SPRINT_USAGE_DATA
partition BY RANGE (report_date) interval (numtoyminterval(1, 'MONTH') )
  (
    PARTITION ds_ac6_ela_may2017 VALUES LESS THAN ( to_date('01-MAY-2017','dd-mon-yyyy') )
  ) nologging
as select * from testei
where report_date > to_date('31-MAY-2017','DD-MON-YYYY');
select index_name from(
select index_name, logging, count(*) ct
from dba_ind_partitions
where index_name in
('DS_AC6_TCWSACBAL_OG_ID_IDX','DS_AC6_TCWSACBAL_IDEN_IDX','DS_WS_AC6_AC_BAL_TC_FILEID_IDX','TCAMSCOMP3GWS_AMSSENTDT_IDX','DS_AC6_TRACING_FILEID_IDX','AC6_FLAT_AD_ID_IDX',
'TCAMSCOMP3GWS_AMSPDT_IDX','DS_AMS_OUTPUTS_IDX','I_DS_AC6_ELA_BAN_IDX','DS_AC6_ELA_SUMM_TK_RNM','I_DS_NGPP_PPD_RP_DT','I_DS_NGPP_PPD_FP_DT','CYCLE_DATE_AC6_FLAT_IDX',
'DS_AC6_ELA_SUMM_CY_RNM','DS_AC6_ELA_SUMM_CM_RNM','DS_AC6_ELA_SUMM_CC_RNM','I_DS_BCS_UT_RP_DT','I_DS_BCS_T_RP_DT','DS_WS_MAF_COMP2G_PRCSENTDT_IDX','DS_WS_MAF_COMP2G_PDATE_IDX',
'I_DS_MAF_RP_DT','EMS_CASE_REPORT_DT_IDX','I_DS_ONL_REJ_EVENTS_TKEY','EMS_CASE_FILEID_IDX','I_DS_ONL_REJ_EVENTS_FID','I_DS_CISCO_OM_TM_STMP','I_DS_CISCO_OM_RP_DT','DS_AC6_ELA_SUMM_TK',
'I_DS_CIBER_INC_RP_DT','DS_AC6_ELA_SUMM_CY','DS_AC6_ELA_SUMM_CC','DS_AC6_ELA_SUMM_CM','TCAMSCOMP3G_AMSSENTDT_IDX','AMS_COMPARETC_3G_PDATE_IDX','DS_MAFC_2G_MDATE_SDATE_IDX',
'DS_MAFC_MAF_PROC_DATE_IDX','I_DS_R_PR_DT_RP_DT','I_DS_R_PHY_LOG_RP_DT','I_DS_R_PR_SM_RP_DT','DLY_TREND_FROM_DT_IDX','MF9CON_AUDIT_IDX','I_DS_SAMSUNG_OM_RP_DT','I_DS_SMSNG_OM_OM_STMP',
'DS_AC6ELAS_FLID_IDX_RNM','DLY_OC_SUBMKT_IDX','I_DS_INTRA_RM_RP_DT','I_DS_SAMSUNG_OCST_OM_DT','I_DS_NGPP_PPD_FILEID_IDX','I_AC6_TELECORDIA','I_DS_MV_MAF_FID_ID_IDX','I_DS_BCS_T_BAN_IDX',
'I_DS_SMSNG_SAEGW_OM_STMP','I_DS_BCS_UT_BAN_IDX','I_DS_SAMSUNG_SAEGW_RP_DT','I_DS_MAF_FILEID_IDX','I_CISCO_OM_IDX','DAILY_OC_FILEID_IDX','I_DS_ALU_GY_OM_STMP','DS_AC6ELAS_FLID_IDX',
'I_DS_CIBER_INC_FILEID_IDX','I_PHY_LOG_FID_ID_IDX','I_RAT_PROC_DTL_SUBMKT_IDX','I_DS_ALU_MSM_RP_DT','I_DS_R_PR_DT_FILEID_IDX','I_RAT_PROC_SUM_SUBMKT_IDX','I_DS_R_PR_SM_FILEID_IDX',
'I_DS_PHY_LOG_FILEID_IDX','MF9CON_REPORT_IDX','I_DS_ALU_SWITCH_RA_RP_DT','I_DS_SAMSUNG_OM_IDX','I_DS_SAMSUNG_OCS_T_IDX','DLY_USG_FILEID_IDX','I_ALU_OM_OM_TM_STMP','I_DS_INTER_RM_RP_DT',
'I_DS_ALU_GY_BAN_IDX','DS_TAS_OM_TM_STMP_IDX','DS_QCHAT_P_DT_IDX','I_DS_ALU_GY_MSM_IDX','I_DS_DS_SAMSUNG_SAEGW_IDX','DS_TAS_FILEID_IDX','I_DS_INTRA_RM_FILEID_IDX','DS_CHARD_415_FL_INDX',
'DS_CHARD_415_RP_INDX','INTER_RM_SERVSUBCODE_IDX','INTER_RM_HOMSUBCODE_IDX','I_DS_INTER_RM_FILEID_IDX','I_DS_OPENET2G_TAS_BAN_IDX','I_DS_PREPAID_VOUCHERS_RP_DT','I_DS_OPENET2G_TAS_RP_DT',
'I_DS_PRPD_E_VCHRS_FID_IDX','I_DS_PRPD_VCHRS_FID_IDX','I_DS_CLR_DLY_TNGE_RP_DT','I_DS_DAILY_USG_REPL_RP_DT','I_DS_DAILY_USG_REPL_FILEID_IDX','I_DS_PREPAID_E_VOUCHERS_RP_DT',
'I_DS_AC6_TELECORDIA_IDX','I_ALU_OM_FLIEID','I_ALU_OM_RP_DATE','I_DS_CLR_DLY_TNGE_FILEID_IDX','I_DS_TNS_INTNL_PR_DT','I_DS_TNS_INTNL_FID_IDX','I_DS_TNS_INTNL_RP_DT','I_DS_MOVED_MESSAGES_FRM_DT',
'I_DS_MOVED_MESSAGES_TO_DT','I_DS_MOVED_MESSAGES_RP_DT','IDX_XURA_DMD_KPI','I_TELCRD_SUMRY_FILEID_IDX','I_TELOLC_UNAVAILABLE_RP_DT','I_TELOLC_UNAVAI_FILEID_IDX','I_TELCRD_SUMRY_RP_DT',
'I_DS_ALU_SWITCH_RA_FID_IDX','DS_APRM_ADJ_FILEID_IDX','I_DS_APRM_ADJ','DS_WS_AC6BAL_FID_IDX','I_DS_MOVED_MESSAGES_FID_IDX','DS_WS_AC6BAL_FILEID_IDX','DS_BLBC_NU_TM_KEY','DS_BLBC_NU_FLID',
'I_DS_MAF_IN_ROAM_RP_DT','LTE_DIM_ROAMER_F_IDIDX','DIM_ROAMER_RP_DT_IDX','I_DS_DS_MAF_IN_ROAM_FID_IDX')
group by index_name, logging)
where ct > 1 and logging = 'YES'
order by index_name;
/oracle/g01/software/grid/11.2.0.4/log/plsaa522/cssd/ocssd.log
/oracle/g01/software/grid/11.2.0.4/log/plsaa522/agent/crsd/oraagent_oracle/oraagent_oracle.log
alter tablespace SPRINT_USAGE_DATA add datafile '+DATA_02' size 32767M;
select owner, segment_name, segment_type, sum(bytes)/1048576 as total_mb
from dba_segments
where tablespace_name='SPRINT_USAGE_DATA'
and segment_type='INDEX PARTITION'
group by owner, segment_name, segment_type
order by total_mb;
HDWSRV-AIX
We are experiencing severe slowness when writing DB backups to the mount point.
As a first step in resolving this, the filesystem should be unmounted then remounted in the operating system.
Server:
PLSAA971
MountPoint:
L2EIS1-BDT.corp.sprint.com:/ifs/UYV_LS1/VAULT/ORACLE_G01_BKUP02    2048.00   1414.95    633.05      70% /oracle/g01/bkup02
ICEP1011:oracle@plsaa971>time dd if=/dev/zero of=/oracle/g01/bkup02/test3 bs=10M count=1
1+0 records in.
1+0 records out.
real    4m28.70s
user    0m0.02s
sys     0m0.04s
 494 resize 15g;
1- Create directory :
/oracle/g01/admin/DeepDive/FULL_SCAN
2- Create sh and sql scripts:
fullscan_sql.log
fullscan_sql.sh
csv_output.sql
3- Run scripts
4- Schedule it to run in crontab:
00 4 * * 6 /oracle/g01/admin/DeepDive/FULL_SCAN/fullscan_sql.sh > /dev/null 2<&1
SQL> exec move_qt_pkg.move_queue_table( 'SPRINT_USAGE' ,'BA_BATCH_QTABLE1' ,'SPRINT_USAGE_DATA','SPRINT_USAGE_DATA') ;
BEGIN move_qt_pkg.move_queue_table( 'SPRINT_USAGE' ,'BA_BATCH_QTABLE1' ,'SPRINT_USAGE_DATA','SPRINT_USAGE_DATA') ; END;
*
ERROR at line 1:
ORA-00907: missing right parenthesis
ORA-06512: at "AQMOVE.MOVE_QT_PKG", line 105
ORA-06512: at line 1
alter session set events '955 trace name errorstack off';
alter session set events '10046 trace name context OFF';
CREATE TABLE "SPRINT_USAGE"."QT_INT"
   (   "Q_NAME" VARCHAR2(30 CHAR),
       "MSGID" RAW(16),
       "CORRID" VARCHAR2(128 CHAR),
       "PRIORITY" NUMBER,
       "STATE" NUMBER,
       "DELAY" TIMESTAMP (6),
       "EXPIRATION" NUMBER,
       "TIME_MANAGER_INFO" TIMESTAMP (6),
       "LOCAL_ORDER_NO" NUMBER,
       "CHAIN_NO" NUMBER,
       "CSCN" NUMBER,
       "DSCN" NUMBER,
       "ENQ_TIME" TIMESTAMP (6),
       "ENQ_UID" VARCHAR2(30 CHAR),
       "ENQ_TID" VARCHAR2(30 CHAR),
       "DEQ_TIME" TIMESTAMP (6),
       "DEQ_UID" VARCHAR2(30 CHAR),
       "DEQ_TID" VARCHAR2(30 CHAR),
       "RETRY_COUNT" NUMBER,
       "EXCEPTION_QSCHEMA" VARCHAR2(30 CHAR),
       "EXCEPTION_QUEUE" VARCHAR2(30 CHAR),
       "STEP_NO" NUMBER,
       "RECIPIENT_KEY" NUMBER,
       "DEQUEUE_MSGID" RAW(16),
       "SENDER_NAME" VARCHAR2(30 CHAR),
       "SENDER_ADDRESS" VARCHAR2(1024 CHAR),
       "SENDER_PROTOCOL" NUMBER,
       "USER_DATA" "SPRINT_USAGE"."MESSAGE_TYPE" ,
       "USER_PROP" "SYS"."ANYDATA" ,
        PRIMARY KEY ("MSGID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SPRINT_USAGE_DATA"
  ALTER INDEX "SPRINT_USAGE"."SYS_C004813529"  UNUSABLE ENABLE
   )  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SPRINT_USAGE_DATA"
 OPAQUE TYPE "USER_PROP" STORE AS SECUREFILE LOB (
  ENABLE STORAGE IN ROW CHUNK 8192
  CACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT))
SELECT /*+ parallel(wi,4) */ WI.QUEUE_NAME,
    DECODE(WI.ORDER_CHANNEL,'','XX',WI.O RDER_CHANNEL) AS CHANNEL_ID,
    DECODE(WI.PARTNER_MARKET_YN,'Y','Y','N') AS PARTNER _MARKET_YN,
    DECODE(WI.ORDER_ACCESSORY_ONLY_YN,'Y','Y','N') AS ORDER_ACCESSORY_ON LY_YN,
    WI.ORDER_TYPE_CD,
    COUNT(*) AS QUEUE_COUNT,
    DECODE(WI.DCM_YN,'Y','Y','N') AS DCM_YN,
    DECODE(WI.BILLING_SYSTEM_IND,'P','P','E') AS BILLING_SYSTEM_IND,
    DECO DE(WI.WAREHOUSE_CODE,'OMIM','OMIM','ASI','ASI','BSS','BSS','NA') AS WAREHOUSE_CO DE
FROM WORK_ITEM WI
GROUP BY WI.QUEUE_NAME,
    WI.ORDER_CHANNEL,
    DECODE(WI.PARTNER _MARKET_YN,'Y','Y','N'),
    DECODE(WI.ORDER_ACCESSORY_ONLY_YN,'Y','Y','N'),
    DECODE(WI.DCM_YN,'Y','Y','N'),
    DECODE(WI.BILLING_SYSTEM_IND,'P','P','E'),
    WI.ORDER_TYPE _CD,
    DECODE(WI.WAREHOUSE_CODE,'OMIM','OMIM','ASI','ASI','BSS','BSS', 'NA')
userid="/ as sysdba"
directory=TASKS
dumpfile=mmpp101_aqfororacle.dmp
logfile=mmpp101_aqfororacle.log
schemas=SPRINT_USAGE
include=TABLE:"in('AQ$_BA_BATCH_QTABLE1_L','AQ$_BA_BATCH_QTABLE1_S','BA_BATCH_QTABLE1','SYS_IOT_OVER_6338969')"
include=INDEX:"in('SYS_IOT_TOP_6338964','SYS_IOT_TOP_6338966','SYS_IOT_TOP_6338969','SYS_IOT_TOP_6338972')"
select 'grant select on CSTADM.EIB_CONTRACT_HISTORY2 to ' || grantee || ';' from dba_tab_privs where table_name=upper('eib_scanned_contracts');
*.asm_diskstring='/dev/ora-1024000*','/dev/ora-2048000*'
*.asm_diskgroups='DATA','FRA_01'
*.audit_file_dest='/oracle/g01/admin/+ASM/adump'
*.core_dump_dest='/oracle/g01/admin/+ASM/cdump'
*.diagnostic_dest='/oracle/g01/admin/+ASM'
*.processes=300
*.remote_login_passwordfile='exclusive'
srvctl add database -d LABX701 -o /oracle/g01/software/rdbms/11.2.0.2 -p /oracle/g01/admin/LABX701/pfile/spfileLABX701.ora -a "DATA,FRA_01"
srvctl add listener -l lsnr_g01 -o /oracle/g01/software/rdbms/11.2.0.4 -p "TCP:1525"
*.audit_file_dest='/oracle/g01/admin/RRSP102/adump'
*.background_dump_dest='/oracle/g01/admin/RRSP102/diag/rdbms/rrsp102/RRSP102/trace'#Deprecate parameter
*.cluster_database=FALSE
*.control_file_record_keep_time=45
*.control_files='+DATA/rrsp102/controlfile/current.256.924452383','+DATA/rrsp102/controlfile/current.257.924452383','+DATA/rrsp102/controlfile/current.258.924452383'
*.core_dump_dest='/oracle/g01/admin/RRSP102/cdump'
*.db_block_size=8192
*.db_create_file_dest='+DATA'
*.db_create_online_log_destCC"=t_1='+DATA'
*.db_create_online_log_dest_2='+DATA'
*.db_create_online_log_dest_3='+DATA'
*.db_file_multiblock_read_count=16
*.db_files=200
*.db_name='RRSP102'
*.db_recovery_file_dest='+DATA'
*.db_recovery_file_dest_size=8G
*.db_securefile='ALWAYS'
*.db_unique_name='RRSP102'
*.diagnostic_dest='/oracle/g01/admin/RRSP102'
*.event='10298 trace name context forever, level 32'
*.instance_name='RRSP102'
*.instance_number=1
*.job_queue_processes=2
*.local_listener=' (ADDRESS=(PROTOCC"dGCOL=TCP)(HOST=144.229.217.173)(PORT=1525))'
*.log_archive_dest_1='LOCATION=+FRA_01  MANDATORY reopen=60'
*.log_archive_dest_state_1='enable'
*.log_archive_format='RRSP102.arch_%t_%r_%s.dbf'
*.log_buffer=3489792# log buffer update
*.log_checkpoints_to_alert=TRUE
*.max_dump_file_size='10M'
*.memory_max_target=80G
*.memory_target=80G
*.open_cursors=500
*.optimizer_dynamic_sampling=2
*.optimizer_mode='ALL_ROWS'
*.pga_aggregate_target=8G
*.plsql_warnings='disable novalidate:ALL'# PL/SQL warnings at CC"Y!init.ora
*.processes=1200
*.query_rewrite_enabled='TRUE'
*.recyclebin='off'
*.remote_login_passwordfile='EXCLUSIVE'
*.result_cache_max_size=335552K
*.session_cached_cursors=100
*.sga_target=64G
*.skip_unusable_indexes=TRUE
*.timed_statistics=TRUE
*.undo_management='AUTO'
*.undo_retention=3600
*.undo_tablespace='UNDO_01'
*.user_dump_dest='/oracle/g01/admin/RRSP102/diag/rdbms/rrsp102/RRSP102/trace'#Deprecate parameter
*.workarea_size_policy='AUTO'
allocate channel dd1 type 'sbt_tape'  parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.4/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle8985no_rep,BACKUP_HOST=L2ED8985.corp.sprint.com)';
report obsolete;
delete noprompt obsolete;
report obsolete;
allocate channel for maintenance type 'sbt_tape'
parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.4/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle8985no_rep,BACKUP_HOST=L2ED8985.corp.sprint.com)';
catalog backuppiece /data/col1/oracle8985no_rep
STATS REPLICAT RG7104C2 , TOTAL, HOURLY, REPORTRATE SEC
run{
allocate channel dd1 device type 'sbt_tape' parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.3/lib/libddobk.so,
ENV=(STORAGE_UNIT=oracle1745no_rep,BACKUP_HOST=L2ED1745.corp.sprint.com)';
recover datafile 190;
}
alter system set local_listener = '(ADDRESS=(PROTOCOL=TCP)(HOST=10.123.172.72)(PORT=2542))';
0624
068133
L2ED8985   /data/col1/oracle8985no_rep   plsa7837  QOSP101   266679.25   34
02:41:56 SQL> GRANT SELECT, INSERT,METER  TO APP_9NN_RW ;
GRANT SELECT, INSERT,METER  TO APP_9NN_RW
              *
ERROR at line 1:
ORA-01919: role 'INSERT' does not exist
GRANT SELECT, INSERT, UPDATE, DELETE  ON  OVMADM.OVM_ORDER_AISLE_PARAMETER TO APP_9NN_RW ;
02:41:56 SQL> CREATE UNIQUE INDEX OVMARCH.UX01_OVM_ORDER_AISLE_PARAMETER ON OVMARCH.OVM_ORDER_AISLE_PARAMETER
02:41:56   2  (O
02:41:56   3  GRANT SELECT ON  OVMARCH.OVM_ORDER_AISLE_PARAMETER TO APP_FAST_R ;
GRANT SELECT ON  OVMARCH.OVM_ORDER_AISLE_PARAMETER TO APP_FAST_R
*
ERROR at line 3:
ORA-00907: missing right parenthesis
02:41:56 SQL> GRANT SELECT ON  OVMARCH.OVM_ORDER_AISLE_PARAMETER TO APP_FAST_RW;
02:41:56   2  GRANT SELECT, INSERT ON  OVMARCH.OVM_ORDER_AISLE_PARAMETER  TO ARCH_USER ;
GRANT SELECT, INSERT ON  OVMARCH.OVM_ORDER_AISLE_PARAMETER  TO ARCH_USER
*
ERROR at line 2:
ORA-00933: SQL command not properly ended
GRANT SELECT, INSERT, on OVMARCH.OVM_ORDER_AISLE_PARAMETER TO APP_9NN_RW ;
select TABLE_NAME, PARTITIONING_TYPE, interval from dba_part_tables
where table_name in (
'ACTIVITY',
'ACTIVITY_HIST',
'DETAIL',
'DETAIL_HIST',
'REFERENCE',
'REFERENCE_HIST',
'REFERENCE_HIST',
'EGS_FILE_XREF',
'EGS_FILE_XREF',
'EGS_FILE_XREF_HIST',
'EGS_FILE_XREF_HIST',
'DETAIL_HIST',
'ACTIVITY_HIST'
)
alter system disconnect session '1789,41215' immediate;
CREATE TABLE temp_confretention AS
SELECT ID,
       upper(SOURCE) SOURCE,
                     sourceid from
  (SELECT A.ID,
          a.source,
          a.sourceid,
          closedate,
     (SELECT retentiondays from dmconfigrules B
      WHERE upper(A.SOURCE) = 'ZZAG_' || upper(b.rulename)
        AND ROW num = 1) retentiondays
   FROM DMCASEINFO A
   WHERE closedate IS NOT NULL and lifecyclestatus IN ('Closed',
                                                        'Not discrepancy',
                                                        'Manually Closed')) DRV
WHERE closedate < (sysdate - nvl(retentiondays,365))
-- parâmetros ocultos asm
col Value for a70
col parameter for a70
select
   a.ksppinm "Parameter",
   c.ksppstvl "Value"
from
   x$ksppi a,
   x$ksppcv b,
   x$ksppsv c
where
   a.indx = b.indx
and
   a.indx = c.indx
and
   ksppinm like '%asm%'
order by
   a.ksppinm;
U1_GRAPH_SHAPE_COORDINATES
alter session set nls_date_format='dd-mon-rr hh24:mi';
col INACT_SESS for a15
col ACT_SESS for a15
col cpu_idle for a10
col DIAG_DEST_USED for a15
col DPHOME_USED for a15
col OHOME_USED for a15
col HOME_USED for a15
col swap for a30
col memory for a30
select TIME, ARCH_USED, OHOME_USED, DPHOME_USED, DIAG_DEST_USED, HOME_USED, ACT_SESS, INACT_SESS, CPU_IDLE, MEMORY, SWAP
from healthcheck_dba.health_check
order by time;
select TABLE_OWNER, TABLE_NAME, PARTITION_NAME, PARTITION_POSITION
from dba_tab_partitions
where table_owner='NGS'
order by 2,4
/
select d.username, u.password, d.profile
from user$ u join dba_users d on u.user#=d.user_id
where d.username in ('OEMADM','OEMARCH','OEMARCH_STG','SYSTEM');
test EECD635D51DE8203
alter user OEMARCH_STG profile DEFAULT;
alter user OEMADM identified by "T608776";
alter user OEMARCH identified by "T608776";
alter user OEMARCH_STG identified by "T608776";
conn SYSTEM@qawdm01
alter user system identified by "Spr!nt4you";
alter user system identified by values 'D84B78569E5F6387';
alter user system identified by values '581F3647A72B1A3E';
alter user system profile SPRINT_APP_PROFILE;
alter user CLCSADM identified by values '4EC0A154223EBC36';
alter user OEMADM identified by values '59809082AD6F40A6';
alter user OEMARCH identified by values 'A0094F410089AF6B';
alter user OEMARCH_STG identified by values 'D2AF7948C159DEC3';
-- DBTUNE SVIP101 201
alter user dbtune identified by "Dbtune_n3w_9ijiji";
alter user DBTUNE identified by values 'F586221745A8991B';
alter user OEMARCH_STG profile SPRINT_USER_PROFILE;
alter user NGS profile DEFAULT;
alter user OVMADM profile DEFAULT;
alter user OVMARCH profile DEFAULT;
alter user NGS identified by "T608784";
alter user OVMADM identified by "T608784";
alter user OVMARCH identified by "T608784";
alter user NGS identified by values '95EF1A3D9229929C';
alter user OVMADM identified by values '4724FB26230C5FE5';
alter user OVMARCH identified by values 'E3B18E566D8A0097';
alter user NGS profile SPRINT_APP_PROFILE;
alter user OVMADM profile SPRINT_USER_PROFILE;
alter user OVMARCH profile SPRINT_USER_PROFILE;
pldsa633
zip cdmp_20170928070449.zip cdmp_20170928070449/*
zip cdmp_20170928070813.zip cdmp_20170928070813/*
zip cdmp_20170928073120.zip cdmp_20170928073120/*
zip cdmp_20170928073624.zip cdmp_20170928073624/*
zip cdmp_20170928080248.zip cdmp_20170928080248/*
zip cdmp_20170928080602.zip cdmp_20170928080602/*
zip cdmp_20170928080841.zip cdmp_20170928080841/*
zip cdmp_20170928081140.zip cdmp_20170928081140/*
INSERT /*+ SYS_DL_CURSOR */ INTO "SPWSCDRADM"."EVENT_USAGE" ("EVENT_ENTITY_NAME",
  "CYCLE_CODE",
  "CYCLE_MONTH",
  "CYCLE_YEAR",
  "EVENT_TYPE_ID",
  "EVENT_ID","NETWORK_STA RT_TIME","SERVICE_FILTER","START_TIME","SUBSCRIBER_ID","CUSTOMER_ID","TARGET_CYC LE_CODE","SOURCE_ID","BILLING_ARRANGEMENT","GUIDING_RESOURCE_ID","GUIDING_RESOUR CE_TYPE","ACCOUNT","PAY_CHANNEL",
  "CHARGE_AMOUNT","DISCOUNT_AMOUNT","CHARGE_INCL_ FREE_ALLOWANCE","ADDITIONAL_CHARGE","OFFER_ID","PP_OFFER_ID","PRICING_ITEM_ID"," START_PERIOD_CODE","GMT_TIME","ORIG_CHARGE_AMOUNT","SERVICE_TYPE","EXT_SUBSCRIBE R_ID","OFFER_EFF_DATE",
  "EVENT_STATE","IS_IN_RERATE_PROCESS","FIRST_PROCESS_DATE" ,"PAYMENT_CATEGORY",
  "TARGET_CUSTOMER_ID",
  "PREV_CHARGE_AMOUNT",
  "RECYCLE_COUNTER",
  "AUTO_RECYCLE_COUNTER",
  "RECORD_TYPE",
  "ERROR_FILE_ID",
  "SUBMARKET_CODE","CALL_DIRE CTION","ROAMING_IND","CALL_TYPE","CHARGE_CODE","COUNTRY_CODE","CALL_TERM_CODE"," TOTAL_VOLUME","ROUNDED_VOLUME","FREE_ALLOWED_VOLUME","FREE_INCL_ALLOWED_VOLUME",
"CHARGED_VOLUME","CARRIER_ID","ZONE_NAME","ZONE_ID","CONTENT_TYPE_CODE","PCF_ID" ,"ROAMING_TYPE",
"ORIG_FILE_ID","SERVICE_OPTION","USAGE_TYPE","MSC_ID","MDN","DEV ICE_TYPE","PROCESS_DATE","IP_TECH","COMP_TUNNEL_IND","RELEASE_IND","USER_ZONE"," GMT_OFFSET","SOURCE_IP","RECORD_ID","MOBILE_STATION_ID","NETWORK_ACCESS_ID",
"NET WORK_ELEMENT_ID","RPDR_SERVICE_CODE","NETWORK_OWNER","RESELLER_ID","RPDR_USAGE_T YPE_CODE","SERVING_NETWORK","RATING_TYPE","ZERO_RATED_USAGE","FILE_NAME","CREATI ON_DATETIME","PARTITION_NO","SUB_PARTITION_NO")
VALUES (NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,
        NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,
        TO_DATE('20170926021229', 'YYYYMMDDHH24MISS'),NULL,NULL)
long running
--by sql id
col opname format a25
col target format a25
col username format a15
SELECT sid, opname,
target, sofar, totalwork,
--ROUND( ( sofar / decode(totalwork,0,1) ), 4 ) * 100 Percentage_Complete,
start_time,
CEIL( time_remaining / 60 ) Max_Time_Remaining_In_Min,
FLOOR( elapsed_seconds / 60 ) Time_Spent_In_Min
FROM gv$session_longops L
where
sofar <> totalwork
and
L.sql_id = 'g270ccdvyhrc6'
--l.sid='1229'
/
pra ver o plano
SELECT t.plan_table_output
FROM gv$sql v, gv$session s,
TABLE(DBMS_XPLAN.DISPLAY('gv$sql_plan_statistics_all', NULL, 'ADVANCED ALLSTATS LAST', 'inst_id ='||v.inst_id||'
AND sql_id = '''||v.sql_id||''' AND child_number = '||v.child_number)) t
WHERE v.sql_id = '48b0ra6ty3p8h'
and v.sql_id = s.sql_id
and v.inst_id = s.inst_id
and v.CHILD_NUMBER = s.SQL_CHILD_NUMBER
and s.sid=186
and s.serial#=6643
AND v.loaded_versions > 0;
--check sessions using undo segment
select
s.username,
s.sid,
s.serial#,
s.logon_time,
t.xidusn, t.ubafil,
t.ubablk,
t.used_ublk,
t.start_date, t.status, case when bitand (t.flag,power (2,7)) > 0 then 'RBK' else 'Not RBK' end as "Trans Status"
from
gv$session s,
gv$transaction t
where s.saddr = t.ses_addr
and s.inst_id = t.inst_id
and s.username = 'NDWLEASEADM'
and s.sql_id='9a1xx952hhxr9'
order by t.used_ublk;
select s.inst_id, s.sid, s.serial#,
--p.spid,
s.osuser, s.sql_id, s.username, s.status, s.event, s.last_call_et/60/60, machine from gv$session s join gv$process p on (p.ADDR=s.PADDR)
where
s.machine in ('W4363695')
/
--p.SPID=31812
--osuser='kkumar04'
/
   INST_ID        SID    SERIAL# OSUSER     SQL_ID        USERNAME        STATUS   EVENT                          LAST_CALL_ET/60/60
---------- ---------- ---------- ---------- ------------- --------------- -------- ------------------------------ ------------------
         3       1229       1005 ufa6122    4avrcuq11n6ah NDW_PAYOPS      ACTIVE   db file sequential read                .000555556
         1       1229       1057 ndwadm     5k0ynnfbz9n0f NDWLEASEADM     ACTIVE   PX Deq: Table Q Normal                        .05
 select inst_id, sql_id, SESSION_ID, SESSION_SERIAL#, SQL_EXEC_START from gv$active_session_history
 where SESSION_ID='1229'
 and SQL_EXEC_START between to_date('29-sep-17 17:20','dd-mon-yy hh24:mi') and to_date('29-sep-17 17:40','dd-mon-yy hh24:mi')
 order by SQL_EXEC_START;
select sql_fulltext from gv$sql where sql_id='bwtx57x7ddvsv';
NORSNAPADM.CHARGE_HISTORY_ARC
RJP SDPP1011  PNBAA965  66.1.219.147
zy773554
BJM8b2p!
/oracle/g01/bkup01/T565554/SDP_MAINT_CHANGE_14_08152017.sql
select BEGIN_TIME, END_TIME, METRIC_NAME, trunc(AVERAGE)
from DBA_HIST_SYSMETRIC_SUMMARY
where
BEGIN_TIME between to_date('03-oct-17 22:00','dd-mon-yy hh24:mi')
and to_date('04-oct-17 08:00','dd-mon-yy hh24:mi')
and
METRIC_NAME in ('Session Count')
--,'Average Active Sessions','Current Logons Count')
order by BEGIN_TIME, METRIC_NAME;
select INSTANCE_NUMBER, SAMPLE_TIME, count(*)
from dba_hist_active_sess_history
where SAMPLE_TIME between to_date('04-oct-17 00:00','dd-mon-yy hh24:mi')
and to_date('04-oct-17 01:00','dd-mon-yy hh24:mi')
and SESSION_TYPE <> 'BACKGROUND'
group by INSTANCE_NUMBER, SAMPLE_TIME
order by instance_number;
select distinct sql_id from (
col event for a50
col sample_time for a30
select event ,SAMPLE_TIME,  count(*)
from dba_hist_active_sess_history
where SAMPLE_TIME between to_date('16-dec-20 19:10','dd-mon-yy hh24:mi')
and to_date('16-dec-20 19:20','dd-mon-yy hh24:mi')
and SESSION_TYPE <> 'BACKGROUND'
--and event like '% lock%'
group by EVENT, SAMPLE_TIME
order by sample_time, count(*);
/
order by event, sample_time;
 SNAP_ID                                                                                   NOT NULL NUMBER
 DBID                                                                                      NOT NULL NUMBER
 INSTANCE_NUMBER                                                                           NOT NULL NUMBER
 SAMPLE_ID                                                                                 NOT NULL NUMBER
 SAMPLE_TIME                                                                               NOT NULL TIMESTAMP(3)
 SESSION_ID                                                                                NOT NULL NUMBER
 SESSION_SERIAL#                                                                                    NUMBER
 SESSION_TYPE                                                                                       VARCHAR2(10)
 FLAGS                                                                                              NUMBER
 USER_ID                                                                                            NUMBER
 SQL_ID                                                                                             VARCHAR2(13)
 IS_SQLID_CURRENT                                                                                   VARCHAR2(1)
 SQL_CHILD_NUMBER                                                                                   NUMBER
 SQL_OPCODE                                                                                         NUMBER
 SQL_OPNAME                                                                                         VARCHAR2(64)
 FORCE_MATCHING_SIGNATURE                                                                           NUMBER
 TOP_LEVEL_SQL_ID                                                                                   VARCHAR2(13)
 TOP_LEVEL_SQL_OPCODE                                                                               NUMBER
 SQL_PLAN_HASH_VALUE                                                                                NUMBER
 SQL_PLAN_LINE_ID                                                                                   NUMBER
 SQL_PLAN_OPERATION                                                                                 VARCHAR2(64)
 SQL_PLAN_OPTIONS                                                                                   VARCHAR2(64)
 SQL_EXEC_ID                                                                                        NUMBER
 SQL_EXEC_START                                                                                     DATE
 PLSQL_ENTRY_OBJECT_ID                                                                              NUMBER
 PLSQL_ENTRY_SUBPROGRAM_ID                                                                          NUMBER
 PLSQL_OBJECT_ID                                                                                    NUMBER
 PLSQL_SUBPROGRAM_ID                                                                                NUMBER
 QC_INSTANCE_ID                                                                                     NUMBER
 QC_SESSION_ID                                                                                      NUMBER
 QC_SESSION_SERIAL#                                                                                 NUMBER
 PX_FLAGS                                                                                           NUMBER
 EVENT                                                                                              VARCHAR2(64)
 EVENT_ID                                                                                           NUMBER
 SEQ#                                                                                               NUMBER
 P1TEXT                                                                                             VARCHAR2(64)
 P1                                                                                                 NUMBER
 P2TEXT                                                                                             VARCHAR2(64)
 P2                                                                                                 NUMBER
 P3TEXT                                                                                             VARCHAR2(64)
 P3                                                                                                 NUMBER
 WAIT_CLASS                                                                                         VARCHAR2(64)
 WAIT_CLASS_ID                                                                                      NUMBER
 WAIT_TIME                                                                                          NUMBER
 SESSION_STATE                                                                                      VARCHAR2(7)
 TIME_WAITED                                                                                        NUMBER
 BLOCKING_SESSION_STATUS                                                                            VARCHAR2(11)
 BLOCKING_SESSION                                                                                   NUMBER
 BLOCKING_SESSION_SERIAL#                                                                           NUMBER
 BLOCKING_INST_ID                                                                                   NUMBER
 BLOCKING_HANGCHAIN_INFO                                                                            VARCHAR2(1)
 CURRENT_OBJ#                                                                                       NUMBER
 CURRENT_FILE#                                                                                      NUMBER
 CURRENT_BLOCK#                                                                                     NUMBER
 CURRENT_ROW#                                                                                       NUMBER
 TOP_LEVEL_CALL#                                                                                    NUMBER
 TOP_LEVEL_CALL_NAME                                                                                VARCHAR2(64)
 CONSUMER_GROUP_ID                                                                                  NUMBER
 XID                                                                                                RAW(8)
 REMOTE_INSTANCE#                                                                                   NUMBER
 TIME_MODEL                                                                                         NUMBER
 IN_CONNECTION_MGMT                                                                                 VARCHAR2(1)
 IN_PARSE                                                                                           VARCHAR2(1)
 IN_HARD_PARSE                                                                                      VARCHAR2(1)
 IN_SQL_EXECUTION                                                                                   VARCHAR2(1)
 IN_PLSQL_EXECUTION                                                                                 VARCHAR2(1)
 IN_PLSQL_RPC                                                                                       VARCHAR2(1)
 IN_PLSQL_COMPILATION                                                                               VARCHAR2(1)
 IN_JAVA_EXECUTION                                                                                  VARCHAR2(1)
 IN_BIND                                                                                            VARCHAR2(1)
 IN_CURSOR_CLOSE                                                                                    VARCHAR2(1)
 IN_SEQUENCE_LOAD                                                                                   VARCHAR2(1)
 CAPTURE_OVERHEAD                                                                                   VARCHAR2(1)
 REPLAY_OVERHEAD                                                                                    VARCHAR2(1)
 IS_CAPTURED                                                                                        VARCHAR2(1)
 IS_REPLAYED                                                                                        VARCHAR2(1)
 SERVICE_HASH                                                                                       NUMBER
 PROGRAM                                                                                            VARCHAR2(64)
 MODULE                                                                                             VARCHAR2(64)
 ACTION                                                                                             VARCHAR2(64)
 CLIENT_ID                                                                                          VARCHAR2(64)
 MACHINE                                                                                            VARCHAR2(64)
 PORT                                                                                               NUMBER
 ECID                                                                                               VARCHAR2(64)
 DBREPLAY_FILE_ID                                                                                   NUMBER
 DBREPLAY_CALL_COUNTER                                                                              NUMBER
 TM_DELTA_TIME                                                                                      NUMBER
 TM_DELTA_CPU_TIME                                                                                  NUMBER
 TM_DELTA_DB_TIME                                                                                   NUMBER
 DELTA_TIME                                                                                         NUMBER
 DELTA_READ_IO_REQUESTS                                                                             NUMBER
 DELTA_WRITE_IO_REQUESTS                                                                            NUMBER
 DELTA_READ_IO_BYTES                                                                                NUMBER
 DELTA_WRITE_IO_BYTES                                                                               NUMBER
 DELTA_INTERCONNECT_IO_BYTES                                                                        NUMBER
 PGA_ALLOCATED                                                                                      NUMBER
 TEMP_SPACE_ALLOCATED
alter sequence EVPADM.SERVICE_SEQ_NO MAX_VALUE 1000000000;
100000000
12p prenrmodbld02
6pl prenrmrdbld01
    prenrmrdbld02
PRENRMRDBLD01 Monday22
PRENRMRDBLD02 Monday22
PRENRMODBLD02 Monday22
select owner, DB_LINK from dba_db_links;
1.  DB link Synonyms must be present to get connectivity with sprint vision view in EAI.
2.  Details  to use synonyms are :
Name :  NIMSR_SVDB_NRMDV
User :  NIMSR_READ
Password:
SQL> select * from dba_db_links;
no rows selected
SQL> select name from v$database;
NAME
---------
NIVP101
SQL> select instance_name from v$instance;
INSTANCE_NAME
----------------
NIVP1013
User added with password: Monday22
Requesting 3000 - dba, Database Administrators/IRM Access to the indicated servers
User ID Type: ADID
This Access Request for User ID: ek923426
Details of all User ID(s) entered:
ADID : AD ID : Full Name
ek923426 : ek923426 : BUFALOL, ALEXANDER D.
---Production Servers---
PRDCLEAMSAPP17
PRDCLEAMSAPP14
PRDCLEAMSAPP12
PRDCLEAMSDB09
PRDCLEAMSDB08
PRDCLEAMSDB07
PRDCLEAMSDB06
PRDCLEAMSDB05
PRDCLEAMSDB04
PRDCLEAMSDB03
PRDCLEAMSDB02
PRDCLEAMSDB01
PLXSLEAMSDB08
PLXSLEAMSDB07
PLXSLEAMSDB06
PLXSLEAMSDB05
PLXSLEAMSDB04
PLXSLEAMSDB03
PLXSLEAMSDB02
PLXSLEAMSDB01
select table_name, index_name, column_name from dba_ind_columns
where table_owner='OEMADM' and table_name in ('WORK_ITEM','ORDER_MASTER','ORDER_LINE_DETAILS','ORDER_DISCOUNT_QA')
order by 1,2,column_position;
select distinct sql_id, sql_text from gv$sql where upper(sql_fulltext)
like upper('%select  /*+ FIRST_ROWS INDEX ( wi WRK_ITM_QUE_NM_IDX ) */ wi.PROCESS_ID,wi.ORDER_KEY, wi.CUSTOMER_NAME, wi.MARKET, wi.ORDER_TOTAL_HANDSETS,%WHERE wi.QUEUE_NAME =%OR wi.BILLING_SYSTEM_IND IS NULL OR wi.BILLING_SYSTEM_IND =%ORDER BY wi.QUEUE_ENTERED_DT%')
order by 1;
sap333porto
#Healthcheck diario
00 08 * * * /home/oracle/scripts/send_healthcheck.sh ECP1 > /dev/null 2>&1
SELECT  /*+ FIRST_ROWS ordered USE_NL(om)  */ DISTINCT OM.order_key, to_char(OM.created_dt, 'YYYY.MM.DD hh24:mi:ss') Created_DT,  OM.order_status_cd, OM.Process_Id, ID.First_Name, ID.Last_Name, OM.Market, OM.Order_Total_Handsets, OC.Cust_type_CD, OM.Account_ID,OM.P2K_ACCOUNT_NUMBER,OM.BILLING_SYSTEM_IND,OM.Order_Split_YN, OM.order_channel
from  order_master OM, Ident_Address_Info ID, Order_Credit_Check_Info OC, extr_ordr_chnl_info EO
where OM.order_key like 'or-bynr-103325387%'
  and  OM.ORDER_TYPE_CD in ('AAC','AAL','ADD','MOT','NAC','AFO','NEW','RAC','RPL','UAC','UPG','SVC','DEA','BAC','BMR','SAE','FAC','AWS','APS','EQP','RET','EXR','RIS','RMA','RTN','PUR','MRP')
  and  OM.Order_Status_CD != 'CREATED'  and ((OM.ORDER_CHANNEL = 'BM' and OM.PROGRAM_CODE = 'BC') or (OM.ORDER_CHANNEL = 'BM' and OM.PROGRAM_CODE = 'BR') or (OM.ORDER_CHANNEL = 'BM' and OM.PROGRAM_CODE = 'BW') or (OM.ORDER_CHANNEL = 'BM' and OM.PROGRAM_CODE = 'BO') or (OM.ORDER_CHANNEL = 'BM' and OM.PROGRAM_CODE = 'IV') or (OM.ORDER_CHANNEL = 'BM' and OM.PROGRAM_CODE = 'BT') or (OM.ORDER_CHANNEL = 'BM' and OM.PROGRAM_CODE = 'BS') or (OM.ORDER_CHANNEL = 'BP' and OM.PROGRAM_CODE = 'AM') or (OM.ORDER_CHANNEL = 'BP' and OM.PROGRAM_CODE = 'BF') or (OM.ORDER_CHANNEL = 'BP' and OM.PROGRAM_CODE = 'FW') or (OM.ORDER_CHANNEL = 'BP' and OM.PROGRAM_CODE = 'MM') or (OM.ORDER_CHANNEL = 'BP' and OM.PROGRAM_CODE = 'OV') or (OM.ORDER_CHANNEL = 'BP' and OM.PROGRAM_CODE = 'PS') or (OM.ORDER_CHANNEL = 'BP' and OM.PROGRAM_CODE = 'TG') or (OM.ORDER_CHANNEL = 'BP' and OM.PROGRAM_CODE = 'TU') or (OM.ORDER_CHANNEL = 'BP' and OM.PROGRAM_CODE = 'VI') or (OM.ORDER_CHANNEL = 'BP' and OM.PROGRAM_CODE = 'VW') or (OM.ORDER_CHANNEL = 'BP' and OM.PROGRAM_CODE = 'WN') or (OM.ORDER_CHANNEL = 'BL' and OM.PROGRAM_CODE = 'AJ') or (OM.ORDER_CHANNEL = 'BL' and OM.PROGRAM_CODE = 'BD') or (OM.ORDER_CHANNEL = 'BL' and OM.PROGRAM_CODE = 'SE') or (OM.ORDER_CHANNEL = 'AI' and OM.PROGRAM_CODE = 'AF') or (OM.ORDER_CHANNEL = 'AI' and OM.PROGRAM_CODE = 'AB') or (OM.ORDER_CHANNEL = 'AI' and OM.PROGRAM_CODE = 'CP') or (OM.ORDER_CHANNEL = 'AI' and OM.PROGRAM_CODE = 'EP') or (OM.ORDER_CHANNEL = 'AI' and OM.PROGRAM_CODE = 'EA') or (OM.ORDER_CHANNEL = 'AI' and OM.PROGRAM_CODE = 'GV') or (OM.ORDER_CHANNEL = 'AI' and OM.PROGRAM_CODE = 'LR') or (OM.ORDER_CHANNEL = 'AI' and OM.PROGRAM_CODE = 'PC') or (OM.ORDER_CHANNEL = 'ES' and OM.PROGRAM_CODE = 'HZ') or (OM.ORDER_CHANNEL = 'ES' and OM.PROGRAM_CODE = 'HU') or (OM.ORDER_CHANNEL = 'ES' and OM.PROGRAM_CODE = 'WF') or (OM.ORDER_CHANNEL = 'GN' and OM.PROGRAM_CODE = 'DS') or (OM.ORDER_CHANNEL = 'GN' and OM.PROGRAM_CODE = 'IP') or (OM.ORDER_CHANNEL = 'GN' and OM.PROGRAM_CODE = 'QU') or (OM.ORDER_CHANNEL = 'GA' and OM.PROGRAM_CODE = 'SC') or (OM.ORDER_CHANNEL = 'GA' and OM.PROGRAM_CODE = 'DT') or (OM.ORDER_CHANNEL = 'GA' and OM.PROGRAM_CODE = 'IC') or (OM.ORDER_CHANNEL = 'GO' and OM.PROGRAM_CODE = 'NW') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'AA') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'AE') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'AP') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'BY') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'CO') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'V1') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'MA') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'MS') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'MO') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'MT') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'NF') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'NV') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'PM') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'PF') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'RS') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'SA') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'SG') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'SW') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'SY') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'TC') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'TD') or (OM.ORDER_CHANNEL = 'NR' and OM.PROGRAM_CODE = 'W2') or (OM.ORDER_CHANNEL = 'OA' and OM.PROGRAM_CODE = 'AY') or (OM.ORDER_CHANNEL = 'OA' and OM.PROGRAM_CODE = 'BK') or (OM.ORDER_CHANNEL = 'OA' and OM.PROGRAM_CODE = 'LT') or (OM.ORDER_CHANNEL = 'OA' and OM.PROGRAM_CODE = 'AL') or (OM.ORDER_CHANNEL = 'OA' and OM.PROGRAM_CODE = 'IN') or (OM.ORDER_CHANNEL = 'OA' and OM.PROGRAM_CODE = 'TZ') or (OM.ORDER_CHANNEL = 'PM' and OM.PROGRAM_CODE = 'P1') or (OM.ORDER_CHANNEL = 'PM' and OM.PROGRAM_CODE = 'PD') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'CB') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'BE') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'BA') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'SQ') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'SZ') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'VE') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'VB') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'RV') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'VP') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'ST') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'WG') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'WZ') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'PI') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'WU') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'SX') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'TO') or (OM.ORDER_CHANNEL = 'PP' and OM.PROGRAM_CODE = 'TE') or (OM.ORDER_CHANNEL = 'RM' and OM.PROGRAM_CODE = 'RR') or (OM.ORDER_CHANNEL = 'RM' and OM.PROGRAM_CODE = 'LD') or (OM.ORDER_CHANNEL = 'RM' and OM.PROGRAM_CODE = 'GD') or (OM.ORDER_CHANNEL = 'RM' and OM.PROGRAM_CODE = 'GS') or (OM.ORDER_CHANNEL = 'RM' and OM.PROGRAM_CODE = 'GR') or (OM.ORDER_CHANNEL = 'RM' and OM.PROGRAM_CODE = 'RA') or (OM.ORDER_CHANNEL = 'RM' and OM.PROGRAM_CODE = 'RM') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'CI') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'IE') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'MG') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'MI') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'MZ') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'MU') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'MF') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'ME') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'MX') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'MW') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'A1') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'A2') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'MH') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'M2') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'MR') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'SH') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'BG') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'BI') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'S2') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'EZ') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'EU') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'EF') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'EE') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'EX') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'EW') or (OM.ORDER_CHANNEL = 'SO' and OM.PROGRAM_CODE = 'SR') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'CX') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'CT') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'CS') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'DM') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'DR') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'ED') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'EM') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'EN') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'ND') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'SP') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'OB') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'PT') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'PR') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'RG') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'TY') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'SS') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'TS') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'T2') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'TR') or (OM.ORDER_CHANNEL = 'TM' and OM.PROGRAM_CODE = 'WE') or (OM.ORDER_CHANNEL = 'WI' ) or (OM.ORDER_CHANNEL = 'WS' )) AND ( OM.BILLING_SYSTEM_IND = 'E' or OM.BILLING_SYSTEM_IND is null )   AND OM.ORDER_KEY = EO.ORDER_KEY(+)    and  OM.Order_key = OC.Order_Key(+)  and OM.Contact_addr_info_id = ID.Ident_addr_Info_Id (+) ;
DECLARE
  my_task_name VARCHAR2(30);
  my_sqltext   CLOB;
BEGIN
  my_sqltext := 'SELECT /*+ ORDERED */ * '                      ||
                'FROM employees e, locations l, departments d ' ||
                'WHERE e.department_id = d.department_id AND '  ||
                      'l.location_id = d.location_id AND '      ||
                      'e.employee_id < :bnd';
  my_task_name := DBMS_SQLTUNE.CREATE_TUNING_TASK (
          sql_text    => my_sqltext
,         bind_list   => sql_binds(anydata.ConvertNumber(100))
,         user_name   => 'HR'
,         scope       => 'COMPREHENSIVE'
,         time_limit  => 60
,         task_name   => 'STA_SPECIFIC_EMP_TASK'
,         description => 'Task to tune a query on a specified employee'
);
END;
/
DECLARE
  my_task_name VARCHAR2(30);
  my_sqltext   CLOB;
BEGIN
  my_sqltext := 'SELECT DISTINCT WI.ORDER_KEY  '                                        ||
'FROM WORK_ITEM WI, ORDER_MASTER OM,  ORDER_LINE_DETAILS OL, ORDER_DISCOUNT_QA QA  '    ||
'WHERE WI.ORDER_KEY = OM.ORDER_KEY AND '                                                ||
  'WI.ORDER_KEY = OL.ORDER_KEY AND '                                                    ||
  'WI.ORDER_KEY = QA.ORDER_KEY AND  '                                                   ||
  '( OM.DISCOUNT_QA_SAVED_YN IS NULL OR OM.DISCOUNT_QA_SAVED_YN = ''N'' ) AND '         ||
  'OL.ORDER_LINE_STATUS_CD = ''CLOSED'' AND '                                           ||
  'OL.ORDER_LINE_ITEM_TYPE = ''P'' AND '                                                ||
  'WI.QUEUE_NAME = ''Closed'' '                                                         ||
  'AND WI.activity_name!=''TAPASDummyActivity'' AND WI.owner!=''TAPAS'' '               ||
  'MINUS '                                                                              ||
'SELECT DISTINCT WI.ORDER_KEY '                                                         ||
'FROM WORK_ITEM WI, ORDER_MASTER OM,  ORDER_LINE_DETAILS OL, ORDER_DISCOUNT_QA QA '     ||
'WHERE WI.ORDER_KEY = OM.ORDER_KEY AND '                                                ||
  'WI.ORDER_KEY = OL.ORDER_KEY AND  '                                                   ||
  'WI.ORDER_KEY = QA.ORDER_KEY AND  '                                                   ||
  '( OM.DISCOUNT_QA_SAVED_YN IS NULL OR OM.DISCOUNT_QA_SAVED_YN = ''N'' ) AND '           ||
  'OL.ORDER_LINE_STATUS_CD NOT IN (''CLOSED'', ''CANCELLED'', ''CANCEL_PENDING'') AND ' ||
  'OL.ORDER_LINE_ITEM_TYPE = ''P''  '                                                   ||
  'AND WI.activity_name!=''TAPASDummyActivity'' AND WI.owner!=''TAPAS''';
 my_task_name := DBMS_SQLTUNE.CREATE_TUNING_TASK (
          sql_text    => my_sqltext
--,         bind_list   => sql_binds(anydata.ConvertNumber(100))
,         user_name   => 'OEMADM'
,         scope       => 'COMPREHENSIVE'
,         time_limit  => 60
,         task_name   => 'SQL_TUN_02'
,         description => 'trying to tune a query for oemadm'
);
END;
/
BEGIN
  DBMS_SQLTUNE.EXECUTE_TUNING_TASK(task_name=>'SQL_TUN_02');
END;
/
SET LONG 1000
SET LONGCHUNKSIZE 1000
SET LINESIZE 100
SELECT DBMS_SQLTUNE.REPORT_TUNING_TASK( 'SQL_TUN_02' )
FROM   DUAL;
COL TASK_ID FORMAT 999999
COL TASK_NAME FORMAT a25
COL STATUS_MESSAGE FORMAT a33
SELECT TASK_ID, TASK_NAME, STATUS, STATUS_MESSAGE
FROM   USER_ADVISOR_LOG where task_name like 'SQL_TUN%';
Plan hash value: 143673333
------------------------------------------------------------------------------------------
| Id  | Operation                         | Name                 | Rows  | Bytes | Cost  |
------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                  |                      |       |       |    27M|
|   1 |  MINUS                            |                      |       |       |       |
|   2 |   SORT UNIQUE NOSORT              |                      |   407K|    34M|    14M|
|   3 |    NESTED LOOPS                   |                      |   612K|    52M|    14M|
|   4 |     NESTED LOOPS                  |                      |   612K|    52M|    14M|
|   5 |      NESTED LOOPS                 |                      |  1220K|    74M|  8020K|
|   6 |       NESTED LOOPS                |                      |  1220K|    51M|  4358K|
|   7 |        INDEX FULL SCAN            | PK_ORDER_DISCOUNT_QA |  1439K|    24M| 18841 |
|*  8 |        TABLE ACCESS BY INDEX ROWID| WORK_ITEM            |     1 |    26 |     5 |
|*  9 |         INDEX RANGE SCAN          | WORK_ITEM_REF1       |     1 |       |     3 |
|* 10 |       TABLE ACCESS BY INDEX ROWID | ORDER_MASTER         |     1 |    20 |     3 |
|* 11 |        INDEX UNIQUE SCAN          | ORDER_MASTER_PK      |     1 |       |     2 |
|* 12 |      INDEX RANGE SCAN             | I_LINE_DET_ORD_KEY   |     1 |       |     3 |
|* 13 |     TABLE ACCESS BY INDEX ROWID   | ORDER_LINE_DETAILS   |     1 |    26 |     5 |
|  14 |   SORT UNIQUE NOSORT              |                      |   480K|    37M|    13M|
|  15 |    NESTED LOOPS                   |                      |  1547K|   121M|    13M|
|  16 |     NESTED LOOPS                  |                      |  1547K|   121M|    13M|
|  17 |      NESTED LOOPS                 |                      |  1472K|    78M|  5895K|
|  18 |       NESTED LOOPS                |                      |  1472K|    50M|  1479K|
|  19 |        INDEX FULL SCAN            | PK_ORDER_DISCOUNT_QA |  1439K|    24M| 18841 |
|* 20 |        INDEX RANGE SCAN           | WORK_ITEM_REF1       |     1 |    18 |     3 |
|* 21 |       TABLE ACCESS BY INDEX ROWID | ORDER_MASTER         |     1 |    20 |     3 |
|* 22 |        INDEX UNIQUE SCAN          | ORDER_MASTER_PK      |     1 |       |     2 |
|* 23 |      INDEX RANGE SCAN             | I_LINE_DET_ORD_KEY   |     1 |       |     3 |
|* 24 |     TABLE ACCESS BY INDEX ROWID   | ORDER_LINE_DETAILS   |     1 |    26 |     5 |
------------------------------------------------------------------------------------------
SELECT DISTINCT WI.ORDER_KEY
FROM WORK_ITEM WI, ORDER_MASTER OM,  ORDER_LINE_DETAILS OL, ORDER_DISCOUNT_QA QA
WHERE WI.ORDER_KEY = OM.ORDER_KEY AND
  WI.ORDER_KEY = OL.ORDER_KEY AND
  WI.ORDER_KEY = QA.ORDER_KEY AND
  ( OM.DISCOUNT_QA_SAVED_YN IS NULL OR OM.DISCOUNT_QA_SAVED_YN = 'N' ) AND
  OL.ORDER_LINE_STATUS_CD = 'CLOSED' AND
  OL.ORDER_LINE_ITEM_TYPE = 'P' AND
  WI.QUEUE_NAME = 'Closed'
  MINUS
SELECT DISTINCT WI.ORDER_KEY
FROM WORK_ITEM WI, ORDER_MASTER OM,  ORDER_LINE_DETAILS OL, ORDER_DISCOUNT_QA QA
WHERE WI.ORDER_KEY = OM.ORDER_KEY AND
  WI.ORDER_KEY = OL.ORDER_KEY AND
  WI.ORDER_KEY = QA.ORDER_KEY AND
  ( OM.DISCOUNT_QA_SAVED_YN IS NULL OR OM.DISCOUNT_QA_SAVED_YN = 'N' ) AND
  OL.ORDER_LINE_STATUS_CD NOT IN ('CLOSED', 'CANCELLED', 'CANCEL_PENDING') AND
  OL.ORDER_LINE_ITEM_TYPE = 'P';
col tim for a15
col event for a40
col machine for a30
select
inst_id, sid, serial#, username, machine, program, status, last_call_et, event
sql_id
from gv$session
--where type <> 'BACKGROUND'
where
upper(machine) like '%PLSAB408%'
/
  select /*+parallel(8)*/ sql_id, sql_text from dba_hist_sqltext where
  lower(sql_text) like lower('%SELECT * FROM NRTADM.LOAN%');
rownum is 1
laon_number = 'COS-L-74184892'
btj4h7kmwjf80
7byjfrmczfga4
adzq2wdcdqucy
fq87n8x90zvpz
set lines 200
col opname for a30
select inst_id, SID, OPNAME,
--TARGET_DESC,
SOFAR, TOTALWORK,
--(sofar/totalwork)*100 as percent,
SQL_ID, TIME_REMAINING
from gv$session_longops
where sofar <> totalwork
and sql_id in ('btj4h7kmwjf80','7byjfrmczfga4','adzq2wdcdqucy','fq87n8x90zvpz')
select SESSION_ID, SESSION_SERIAL#, PROGRAM, machine, USER_ID, SAMPLE_TIME from gv$active_session_history where machine='pvmka528.corp.sprint.com'
order by sample_time;
aug 16 q3 out of sync
nxtarco
DDL amdocs sent last friday
column changes, new tables
tomorrow 9AM 17.11 11th to 12th 2 o'clock (stop goldengate) till 6 O'clock.
mv8pdibill
10/23/17 10:35:00
Executing
mv8pdibill
10/24/17 12:11:20
Executing
('3tb9w4xaq18h9','f41qran07xvpa')
select /*+parallel(8)*/ machine, SAMPLE_TIME, SESSION_ID, TIME_WAITED, WAIT_CLASS, MODULE from dba_hist_active_sess_history where SQL_ID = '3kk50t5f9z5n7';
select SESSION_ID, SESSION_SERIAL#, PROGRAM, machine, USER_ID, SAMPLE_TIME, sql_id from gv$active_session_history where machine='pvmka528.corp.sprint.com'
order by sample_time;
select sid, SERIAL#, PROGRAM, machine, username, sql_id from gv$session where machine='pvmka528.corp.sprint.com';
order by sample_time;
select SAMPLE_TIME, count(*) from gv$active_session_history where machine='pvmka528.corp.sprint.com' and sql_id='3kk50t5f9z5n7'
group by sample_time
order by sample_time;
/oracle/g01/bkup01/ggtrail_C4
col username for a12
col module for a10 trunc
col state for a20
col "QC SID" for A6
col SID for a10
col "QC/Slave" for A10
col "ReqDOP" for 999
col "ActDOP" for 999
col "slave set" for  A10
col event for a25 trunc
col action for a20 trunc
col p1text for a20 trunc
col secwait for 99999
col state for a10 trunc
col object for a25 trunc
col command for a15 trunc
set pages 300  lines 300
select
     s.inst_id,
     decode(px.qcinst_id,NULL,s.username,
           ' - '||lower(substr(s.program,length(s.program)-4,4) ) ) "Username",
     decode(px.qcinst_id,NULL, 'QC', '(Slave)') "QC/Slave" ,
     to_char( px.server_set) "Slave Set",
   s.machine,
     to_char(s.sid) "SID",
     decode(px.qcinst_id, NULL ,to_char(s.sid) ,px.qcsid) "QC SID",
     px.req_degree "Requested DOP",
    px.degree "Actual DOP",s.module,s.sql_id,s.event,s.status
  from
    gv$px_session px,
    gv$session s
  where
    px.sid=s.sid (+) and
    px.serial#=s.serial# and
    px.inst_id = s.inst_id
    and s.inst_id=3
 order by "Actual DOP" ;
  select s.sid, s.serial#, s.username, s.sql_id
  from v$session s
  where
  s.sid in
  (select sid from v$px_session where qcsid in (
    '588',
   '3643',
   '3036',
   '3533',
   '1742',
   '2604',
   '1844',
   '15' ))
  order by s.sid
  /
  set lines 200
col opname for a30
select SID, OPNAME,
--TARGET_DESC,
SOFAR, TOTALWORK,
--(sofar/totalwork)*100 as percent,
SQL_ID, TIME_REMAINING
from v$session_longops
where sofar <> totalwork
and sql_id in ('80map6fmc5y2g','g9qp4u47gb01k','8dmh1u6f5xdzj','bbxcc0p87uuh7')
-- and sid=1104
/
 CLW_P01_EPM.AUDIT_LOG_TLITE AL
        JOIN CLW_P01_EPM.WP_TASKS WT ON (WT.WP_TASK_ID = AL.PK)
        JOIN CLW_P01_EPM.WP_WORKPLAN WP
select TABLE_NAME, LAST_ANALYZED, SAMPLE_SIZE, NUM_ROWS, STALE_STATS from dba_tab_statistics
where owner='DCSDBA' and table_name in ('PRE_ADVICE_HEADER_ARCHIVE')
/
SD4651742
eberte01
tm187704
gl830453
bc156942
select dbms_metadata.get_ddl('PROCEDURE','GG_SDF_CHECK_TAB_PR','DBTUNE') from dual;
select 'alter index ' || index_owner || '.' || INDEX_NAME || ' rebuild partition ' || '"' || PARTITION_NAME || '";' from dba_ind_partitions
where index_name='IDX_NDW_WDR_USAGE_FILEID' and STATUS='UNUSABLE' order by partition_position;
explain plan for
SELECT * FROM
(SELECT s.customer_id ban, s.subscriber_no subId, s.init_activation_date activationDate, sr.ptn mdn,
  s.sub_status subscriberAccountStatus, nd.first_name studentFirstName, nd.control_name controlName,
  nd.last_business_name studentLastName, c.birth_date studentBirthDate,  c.comm_email studentEmail,
  pd.unit_esn esn, sii.item_id itemId,   s.SUB_STATUS_RSN_CODE subChangeReasonCD
  FROM customer c, physical_device pd, serial_item_inv sii, subscriber s, subscriber_rsource sr,
  name_data nd, address_name_link anl
  WHERE s.customer_id = c.customer_id AND c.customer_id = anl.ban AND anl.ban = pd.customer_id
  AND pd.EFFECTIVE_DATE <= sysdate AND anl.name_id = nd.name_id AND anl.link_type = 'B'
  AND ( anl.expiration_date IS NULL OR anl.expiration_date > TRUNC(SYSDATE) )
  AND s.sub_status IN ('A','S','C') AND sr.ban = s.customer_id AND sr.subscriber_no = s.subscriber_no
  AND s.subscriber_no = pd.subscriber_no AND pd.unit_esn = sii.serial_number AND sii.serial_type ='E'  ) s
RIGHT JOIN
(SELECT /*+INDEX(sc IX02_STUDENT_CNTCT)*/ sc.STUDENT_CNTCT_ID StudentSequenceNumber,sc.ORDR_ID orderId, sc.ORDR_KEY_ID orderKey,
  sc.student_id studentId, sc.SBSCR_ID subId, sc.STUDENT_GRADE_NBR studentGrade, sc.ACCESSIBLE_COMPLIANT_CD accComplntCD,
  sc.PRNT_CNSNT_CD parentConsentInd, sc.XPIRN_DT studentExpirationDate, sc.PGM_STUS_NME programStatus, sc.STUDENT_AGE_NBR studentAge,
  sc.CREATE_DT createdDt, sc.UPDT_DT UpdatedDt, sc.SCHOOL_ID schoolId, sc.SCHOOL_NME schoolName, sc.SCHOOL_CNTCT_NME schoolSPOC,
  sc.PRNT_FRST_NME parentFN, sc.PRNT_LST_NME parentLN, sc.PRNT_EMAIL_ADR parentEmail, sc.PRNT_ADR_STREET1_NME parentAddr1,
  sc.PRNT_ADR_STREET2_NME parentAddr2, sc.PRNT_ADR_CITY_NME parentCity, sc.PRNT_ADR_STATE_CD parentState, sc.PRNT_ADR_ZIP_CD parentZip,
  sc.PRNT_ADR_ZIP_EXT_CD parentExtZip, sc.STUDENT_FRST_NME scstudentFirstName, sc.STUDENT_LST_NME scstudentLastName
  FROM STUDENT_CNTCT sc
  WHERE sc.SCHOOL_ID = 41405)
sc ON s.subId = sc.subId
/
SELECT PLAN_TABLE_OUTPUT FROM TABLE(DBMS_XPLAN.DISPLAY_CURSOR());
Rationale of request: Support Release Testing
Source: PLSSA594,PLSSA595,PLSSA596
Schemas: EMTADM and CLCSADM from Production WDM DB (8PS)
Destination: DVMK8071 /data/appdba/T568208
Method: SEN using EXPDP command for the data dump
Time: 10/12 12 AM to 10/12 1 AM
Compressed size of transport: 622 MB
Uncompressed size of import: 8.1 GB
Additional Instructions....
No outage or bounce is needed for this task.
1. Get dump of structure and data from Production EMTADM and CLCSADM schemas.
Please use EXPDP when getting the dump.
2. Please mask the following tables in CLCSADM using the script sent by Prashant Lamba
a. CLCS_ADDRESS
b. CLCS_STORE_LOGIN
c. CLCS_CONTACT
d. CLCS_CREDIT_CARD
e. CLCS_LINE_ITEM
f.  CLCS_LINE_ITEM
g. CLCS_EQUIPMENT_ORDER_DETAILS
h. CLCS_ORDER
i.  CLCS_ORDER_EQUIP_DYNFIELDS
j.  CLCS_LNK_ORDER_DYNAMIC_FIELD
k. CLCS_ORDER_HISTORY
l.  CLCS_STORE_SECURITY_ANSWER
m. CLCS_CORP_ID_NAME_REQUESTS
n. clcs_config_props
o. CLCS_STORE
3. Please place the dumps in the extftp.nextel.com (atlhpft1.nextel.com) server under the /PUB/appdba/Txxxxxx
4. Please send an email to CLCS_DEVTEAM, SFWDBS-IBM-DM-DEV-ATLANTA-DBA & SFWDBS-IBM-TEST-NX-DBA PDL with the information.
PJ022215 ICEP move.
NXTCU01_dbschema_16_1.def
col tim for a15
col event for a40
col machine for a30
col program for a30
col username for a20
select
inst_id,
SID,
serial#,
username,
--osuser,
machine,
program,
--blocking_session as bl,
to_char(LOGON_TIME, 'DDMM - HH24:MI') as tim,
LAST_CALL_ET,
--BLOCKING_SESSION,
EVENT,
WAIT_TIME,
--SECONDS_IN_WAIT,
status,
sql_id
from gv$session
--where machine in ('plsh0657','pvmka528')
where type <> 'BACKGROUND'
and status='ACTIVE'
and username='CXPREPADM_CMDS'
--where --username='SYS'
--and sql_id in ('3tb9w4xaq18h9','f41qran07xvpa')
--and sid in ('1643')
--and machine in ('W4363695')
--and type <> 'BACKGROUND'
--and sql_id='95a0h2910ngdh'
--and username='U8EL_ADM'
--or sid='792'
order by program, tim
/
set lines 200
col opname for a30
select inst_id, SID, OPNAME,
SOFAR, TOTALWORK,
SQL_ID, TIME_REMAINING
from gv$session_longops
--where sql_id='9v97ppdhxw62q'
/
select HASH_VALUE, SQL_ID, PLAN_HASH_VALUE, TIMESTAMP from v$sql_plan where sql_id='8rcn1cfwvkfbx' order by TIMESTAMP;
select plan_table_output from table(dbms_xplan.display_cursor('7cxccd1k3wbqa',null,'basic'));
SELECT /*+ parallel(a,12)parallel(b,12) parallel(c,12) full(a) full(b) full(c) */
a.PTN,
b.ACC_PASSWORD,
Decode(c.ACCOUNT_SUB_TYPE, 'C', 'BST', 'U', 'VMU', 'K', 'ASW', 'M', 'SPP') brand
FROM nrtadm_hs.subscriber_rsource a,
     nrtadm_hs.customer b,
     nrtadm_hs.billing_account c
WHERE a.BAN = b.CUSTOMER_ID
  AND a.BAN = c.BAN
  AND a.PTN_STATUS IN ('A',
                       'S')
  AND c.ACCOUNT_TYPE = 'I'
  AND c.ACCOUNT_SUB_TYPE IN ('C',
                             'U',
                             'K',
                             'M')
/
select sql_id, sql_fulltext from gv$sql where sql_fulltext like 'INSERT%INTO%CXP_INTERACTION_FACT_SUM_1%fs%';
set pages 999 lines 194
COLUMN sid FORMAT 99999
COLUMN serial# FORMAT 9999999
COLUMN machine FORMAT A18
COLUMN progress_pct FORMAT 99999999.00
COLUMN elapsed FORMAT A10
COLUMN remaining FORMAT A10
COLUMN osuser FORMAT A25
COLUMN event FORMAT A28
COLUMN username FORMAT A17
SELECT s.username,
s.osuser,
s.sid,
s.serial#,
s.machine,
s.sql_id, s.event, s.status,
ROUND(sl.elapsed_seconds) || ':' || MOD(sl.elapsed_seconds,60) elapsed,
ROUND(sl.time_remaining) || ':' || MOD(sl.time_remaining,60) remaining
FROM gv$session s,
gv$session_longops sl
WHERE s.sid = sl.sid
and s.sql_id ='8qman17pk081n'
and s.status = 'ACTIVE'
and elapsed_seconds > 0 ;
set lines 160
col username for a12
col target for a40
col opname for a30
col done for a5
col inst for 99
col sid for 99999
col ser# for 99999
compute sum of sofar on report
compute sum of totalwork on report
break on report
select a.inst_id inst,a.sid, a.serial# ser#, a.username, a.SOFAR, a.TOTALWORK, units,
  round(( a.sofar/a.totalwork )*100)||'%' Done, a.TARGET, time_remaining/60 minut, a.OPNAME, b.sql_id
  from gv$session_longops a, gv$session b
 where a.sofar <> a.totalwork
   and a.sid=b.sid
      and a.serial#=b.serial#
         and a.inst_id=b.inst_id
            and a.totalwork<>0
              and b.sql_id='9yrg0nq423q45';
Plan hash value: 2944932545
---------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                    | Name                        | Rows  | Bytes |TempSpc| Cost  |    TQ  |IN-OUT| PQ Distrib |
---------------------------------------------------------------------------------------------------------------------------------
|   0 | INSERT STATEMENT             |                             |       |       |       |   244K|        |      |            |
|   1 |  PX COORDINATOR              |                             |       |       |       |       |        |      |            |
|   2 |   PX SEND QC (RANDOM)        | :TQ10006                    |   768M|   156G|       |   244K|  Q1,06 | P->S | QC (RAND)  |
|   3 |    LOAD AS SELECT            |                             |       |       |       |       |  Q1,06 | PCWP |            |
|   4 |     HASH JOIN                |                             |   768M|   156G|       |   244K|  Q1,06 | PCWP |            |
|   5 |      PX RECEIVE              |                             |  1384K|    88M|       |   233 |  Q1,06 | PCWP |            |
|   6 |       PX SEND BROADCAST      | :TQ10003                    |  1384K|    88M|       |   233 |  Q1,03 | P->P | BROADCAST  |
|   7 |        PX BLOCK ITERATOR     |                             |  1384K|    88M|       |   233 |  Q1,03 | PCWC |            |
|   8 |         TABLE ACCESS FULL    | CXP_DEALER_DIM_1            |  1384K|    88M|       |   233 |  Q1,03 | PCWP |            |
|   9 |      HASH JOIN               |                             |   795M|   111G|       |   244K|  Q1,06 | PCWP |            |
|  10 |       BUFFER SORT            |                             |       |       |       |       |  Q1,06 | PCWC |            |
|  11 |        PX RECEIVE            |                             | 17260 |   943K|       |     6 |  Q1,06 | PCWP |            |
|  12 |         PX SEND BROADCAST    | :TQ10000                    | 17260 |   943K|       |     6 |        | S->P | BROADCAST  |
|  13 |          TABLE ACCESS FULL   | CXP_TOPIC_DIM_1             | 17260 |   943K|       |     6 |        |      |            |
|  14 |       HASH JOIN              |                             |   795M|    70G|       |   244K|  Q1,06 | PCWP |            |
|  15 |        BUFFER SORT           |                             |       |       |       |       |  Q1,06 | PCWC |            |
|  16 |         PX RECEIVE           |                             | 12825 |   187K|       |     6 |  Q1,06 | PCWP |            |
|  17 |          PX SEND BROADCAST   | :TQ10001                    | 12825 |   187K|       |     6 |        | S->P | BROADCAST  |
|  18 |           TABLE ACCESS FULL  | CXP_DATE_DIM_1              | 12825 |   187K|       |     6 |        |      |            |
|  19 |        HASH JOIN             |                             |   795M|    59G|       |   244K|  Q1,06 | PCWP |            |
|  20 |         BUFFER SORT          |                             |       |       |       |       |  Q1,06 | PCWC |            |
|  21 |          PX RECEIVE          |                             |    52 |   884 |       |     3 |  Q1,06 | PCWP |            |
|  22 |           PX SEND BROADCAST  | :TQ10002                    |    52 |   884 |       |     3 |        | S->P | BROADCAST  |
|  23 |            TABLE ACCESS FULL | CXP_INTRXN_TOUCHPOINT_DIM_1 |    52 |   884 |       |     3 |        |      |            |
|  24 |         HASH JOIN            |                             |   795M|    46G|   789M|   244K|  Q1,06 | PCWP |            |
|  25 |          PX RECEIVE          |                             |    94M|  2075M|       |  8963 |  Q1,06 | PCWP |            |
|  26 |           PX SEND HASH       | :TQ10004                    |    94M|  2075M|       |  8963 |  Q1,04 | P->P | HASH       |
|  27 |            PX BLOCK ITERATOR |                             |    94M|  2075M|       |  8963 |  Q1,04 | PCWC |            |
|  28 |             TABLE ACCESS FULL| CXP_BAN_DIM_1               |    94M|  2075M|       |  8963 |  Q1,04 | PCWP |            |
|  29 |          PX RECEIVE          |                             |   795M|    29G|       | 65974 |  Q1,06 | PCWP |            |
|  30 |           PX SEND HASH       | :TQ10005                    |   795M|    29G|       | 65974 |  Q1,05 | P->P | HASH       |
|  31 |            PX BLOCK ITERATOR |                             |   795M|    29G|       | 65974 |  Q1,05 | PCWC |            |
|  32 |             TABLE ACCESS FULL| CXP_INTERACTION_FACT_1      |   795M|    29G|       | 65974 |  Q1,05 | PCWP |            |
---------------------------------------------------------------------------------------------------------------------------------
Plan hash value: 625635721
-------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                          | Name                        | Rows  | Bytes | Cost  |    TQ  |IN-OUT| PQ Distrib |
-------------------------------------------------------------------------------------------------------------------------------
|   0 | INSERT STATEMENT                   |                             |       |       | 73182 |        |      |            |
|   1 |  PX COORDINATOR                    |                             |       |       |       |        |      |            |
|   2 |   PX SEND QC (RANDOM)              | :TQ10006                    |     1 |   216 | 73182 |  Q1,06 | P->S | QC (RAND)  |
|   3 |    LOAD AS SELECT                  |                             |       |       |       |  Q1,06 | PCWP |            |
|   4 |     HASH JOIN                      |                             |     1 |   216 | 73182 |  Q1,06 | PCWP |            |
|   5 |      PX RECEIVE                    |                             |     1 |   193 | 63870 |  Q1,06 | PCWP |            |
|   6 |       PX SEND BROADCAST            | :TQ10005                    |     1 |   193 | 63870 |  Q1,05 | P->P | BROADCAST  |
|   7 |        HASH JOIN                   |                             |     1 |   193 | 63870 |  Q1,05 | PCWP |            |
|   8 |         PX RECEIVE                 |                             |     1 |   126 | 63637 |  Q1,05 | PCWP |            |
|   9 |          PX SEND BROADCAST         | :TQ10004                    |     1 |   126 | 63637 |  Q1,04 | P->P | BROADCAST  |
|  10 |           HASH JOIN                |                             |     1 |   126 | 63637 |  Q1,04 | PCWP |            |
|  11 |            PX RECEIVE              |                             |     1 |    72 | 63629 |  Q1,04 | PCWP |            |
|  12 |             PX SEND HASH           | :TQ10003                    |     1 |    72 | 63629 |  Q1,03 | P->P | HASH       |
|  13 |              HASH JOIN             |                             |     1 |    72 | 63629 |  Q1,03 | PCWP |            |
|  14 |               BUFFER SORT          |                             |       |       |       |  Q1,03 | PCWC |            |
|  15 |                PX RECEIVE          |                             | 12671 |   185K|     6 |  Q1,03 | PCWP |            |
|  16 |                 PX SEND BROADCAST  | :TQ10000                    | 12671 |   185K|     6 |        | S->P | BROADCAST  |
|  17 |                  TABLE ACCESS FULL | CXP_DATE_DIM_1              | 12671 |   185K|     6 |        |      |            |
|  18 |               HASH JOIN            |                             |   762M|    40G| 63623 |  Q1,03 | PCWP |            |
|  19 |                BUFFER SORT         |                             |       |       |       |  Q1,03 | PCWC |            |
|  20 |                 PX RECEIVE         |                             |    52 |   884 |     3 |  Q1,03 | PCWP |            |
|  21 |                  PX SEND BROADCAST | :TQ10001                    |    52 |   884 |     3 |        | S->P | BROADCAST  |
|  22 |                   TABLE ACCESS FULL| CXP_INTRXN_TOUCHPOINT_DIM_1 |    52 |   884 |     3 |        |      |            |
|  23 |                PX BLOCK ITERATOR   |                             |   762M|    28G| 63620 |  Q1,03 | PCWC |            |
|  24 |                 TABLE ACCESS FULL  | CXP_INTERACTION_FACT_1      |   762M|    28G| 63620 |  Q1,03 | PCWP |            |
|  25 |            BUFFER SORT             |                             |       |       |       |  Q1,04 | PCWC |            |
|  26 |             PX RECEIVE             |                             | 17990 |   948K|     8 |  Q1,04 | PCWP |            |
|  27 |              PX SEND HASH          | :TQ10002                    | 17990 |   948K|     8 |        | S->P | HASH       |
|  28 |               TABLE ACCESS FULL    | CXP_TOPIC_DIM_1             | 17990 |   948K|     8 |        |      |            |
|  29 |         PX BLOCK ITERATOR          |                             |  1322K|    84M|   233 |  Q1,05 | PCWC |            |
|  30 |          TABLE ACCESS FULL         | CXP_DEALER_DIM_1            |  1322K|    84M|   233 |  Q1,05 | PCWP |            |
|  31 |      PX BLOCK ITERATOR             |                             |    96M|  2106M|  9312 |  Q1,06 | PCWC |            |
|  32 |       TABLE ACCESS FULL            | CXP_BAN_DIM_1               |    96M|  2106M|  9312 |  Q1,06 | PCWP |            |
-------------------------------------------------------------------------------------------------------------------------------
select last_analyzed, num_rows, table_name, owner
from dba_tables
where
table_name
in ('CXP_DEALER_DIM_1','CXP_TOPIC_DIM_1','CXP_DATE_DIM_1','CXP_INTRXN_TOUCHPOINT_DIM_1','CXP_BAN_DIM_1','CXP_INTERACTION_FACT_1');
CXP_INTRXN_TOUCHPOINT_DIM_1 (52),
    CXP_INTERACTION_FACT_1 (760364092),
        CXP_DATE_DIM_1 (12671) ,
            CXP_TOPIC_DIM_1 (19370),
                CXP_DEALER_DIM_1 (1332746) ,
                      CXP_BAN_DIM_1 (97540454)
CXP_INTERACTION_FACT_1 (760364092),
    CXP_BAN_DIM_1 (97540454),
          CXP_INTRXN_TOUCHPOINT_DIM_1 (52),
                CXP_DATE_DIM_1 (12671),
                      CXP_TOPIC_DIM_1 (19370),
                            CXP_DEALER_DIM_1 (1332746)
select SQL_HANDLE,PLAN_NAME,CREATOR,ORIGIN,LAST_MODIFIED,LAST_EXECUTED,LAST_VERIFIED,ENABLED,ACCEPTED,FIXED,AUTOPURGE,sql_text
from dba_sql_plan_baselines
ATG
goldgate@plsa7844.corp.sprint.com
NOR
goldgate - GENERIC <goldgate@plssa510.corp.sprint.com>
goldgate - GENERIC <goldgate@pnbsa579.corp.sprint.com>
WDMP
goldgate - GENERIC <goldgate@plssa594.corp.sprint.com>
 IPH_UNLOCK
select
 atb.BAN,
 atb.ent_seq_no,
 atb.AR_WO_IND,
 atb.ACTV_DATE,
 atb.ACTV_TYPE,
 atb.AGE_BCKT_1MNTH,
 atb.AGE_BCKT_2MNTH,
 atb.AGE_BCKT_3MNTH,
 atb.AGE_BCKT_4MNTH,
 atb.AGE_BCKT_5MNTH
FROM NORSNAPADM.ATB_HISTORY_ACTV_&MONTHS atb
where ACTV_TYPE in ('PYM','ADJ','ADJR','WO','WOR','BCK','FNTT','FNTF')
 AND actv_date = to_date(&cur_act , 'YYYYMMDD')
select sql_id, sql_fulltext from gv$sql
where upper(sql_fulltext) like '%SELECT%TEMP_UPGRADE_STG1%X.BAN%X.SUBSCRIBER_NO%X.LOAN_SEQ_NO%X.DEVICE_ACCESSORY_IND%X.CONTRACT_TYPE%DFS_UPG_DAYS%';
9yrg0nq423q45
3s2cz83vqx0yj
2k3208vxqjfm8
xvgrpnfa =
  (DESCRIPTION =
      (ADDRESS = (PROTOCOL = TCP)(HOST = pxd1-scan.corp.sprint.com)(PORT = 1521))
      (CONNECT_DATA =
         (SERVICE_NAME = xvgrpnfa)
         (FAILOVER_MODE = (TYPE = SELECT)(METHOD = BASIC)(RETRIES = 200)(DELAY = 5))
      )
)
Regarding ticket# SD4671681
NIVP101
create user kw944117 identified by Sprint#47s Bhadauria, Pratibha
create user cn358633 identified by Sprint#48i Bhowmik, Shubhashish
create user pu495150 identified by Sprint#49r Verma, Rakesh
create user if173498 identified by Sprint#41s Kumar, Aman
create user zf951487 identified by Sprint#42q Gopal, Arora
create user el774098 identified by Sprint#43p Purohit, Swati
create user bg240431 identified by Sprint#44f Goel, Abhinav
create user st504183 identified by Sprint#45n Singh, Amit
create user vt788479 identified by Sprint#46x Lakshmi, B S
create user qz046722 identified by Sprint#34y Jyothsna, Ananthula
MACHINE                                                          STATUS     COUNT(*)
---------------------------------------------------------------- -------- ----------
AD\PVMXB926                                                      INACTIVE          1
NOAD\PLNWVCDDWAPP01                                              INACTIVE          1
NOAD\PREWPD35                                                    ACTIVE            2
NOAD\PREWPD35                                                    INACTIVE          3
SA01                                                             INACTIVE          1
SYSV                                                             INACTIVE         14
SYSW                                                             INACTIVE          1
W4366238                                                         INACTIVE          1
W4429395                                                         INACTIVE          2
lnxcdmadrdb01                                                    INACTIVE          2
lnxitp01.nmcc.sprintspectrum.com                                 INACTIVE          5
nickel                                                           INACTIVE          2
plsaa920                                                         INACTIVE         79
plsaa921                                                         INACTIVE         93
plsaa927                                                         INACTIVE          1
plsaa928                                                         INACTIVE          2
plsaa934                                                         INACTIVE          1
plsaa938                                                         INACTIVE          1
plsab013                                                         INACTIVE        104
plsab077.corp.sprint.com                                         ACTIVE            2
plsab411                                                         ACTIVE            1
plsab411                                                         INACTIVE         29
plss4307                                                         INACTIVE         30
pnblf207.corp.sprint.com                                         INACTIVE          1
pnblf238.corp.sprint.com                                         ACTIVE            1
pnblf240.corp.sprint.com                                         ACTIVE            1
prenrmappld01                                                    ACTIVE            1
prenrmappld01                                                    INACTIVE         10
prenrmappld02                                                    INACTIVE         15
prenrmappld03                                                    INACTIVE         15
prenrmappld04                                                    INACTIVE         10
prenrmrdbld01                                                    ACTIVE          101
prenrmrdbld01                                                    INACTIVE          2
pvmkf939.corp.sprint.com                                         INACTIVE         29
pvmkf940.corp.sprint.com                                         ACTIVE            1
pvmkf940.corp.sprint.com                                         INACTIVE         28
pvmkf941.corp.sprint.com                                         ACTIVE            1
pvmkf941.corp.sprint.com                                         INACTIVE         16
pvmkg570.corp.sprint.com                                         INACTIVE         18
resitp01                                                         INACTIVE          5
vulture                                                          INACTIVE          1
3 BOACCESSADM          81mu6raabr1vy TEMP_01              SORT      2017-11-16 11:00:01     579091 0                                    2495317886
3 BOACCESSADM          97hsqtvhvz175 TEMP_01              SORT      2017-11-16 11:00:01     203426 0                                    3787424997
g1b8ya719u121
371xpnajp4yam
99spdwxtchsv3
csx5w8aw2n529
 col elapsed_per_exec format 999999999.00
  col startup_time for a30
  col ELAPSED_TIME_TOTAL format 99999999999
  col snap_end_time for a27
  col snap_start_time for a27
  set pages 999 lines 194
  select --a.DBID,
         a.instance_number as inst_id, --c.STARTUP_TIME,
         c.BEGIN_INTERVAL_TIME as snap_start_time, c.END_INTERVAL_TIME as snap_end_time,
         a.sql_id, a.PLAN_HASH_VALUE,
         a.executions_total, (a.ELAPSED_TIME_TOTAL/1000000)/360 total_min --, b.executions_total, b.ELAPSED_TIME_TOTAL
         , (((a.ELAPSED_TIME_TOTAL - nvl (b.ELAPSED_TIME_TOTAL,0))/1000000)/(a.executions_total - nvl(b.executions_total, 0)))/360 elapsed_per_exec_min
  from dba_hist_sqlstat a,
       dba_hist_sqlstat b,
     DBA_HIST_SNAPSHOT C
       where a.sql_id = 'csx5w8aw2n529'
  and a.DBID = b.dbid (+)
  and a.instance_number = b.instance_number (+)
  and a.snap_id = b.snap_id (+) - 1
  and a.sql_id = b.sql_id (+)
  and a.PLAN_HASH_VALUE = b.PLAN_HASH_VALUE (+)
  and a.executions_total - nvl (b.executions_total,0) > 0
  AND A.SNAP_ID = C.SNAP_ID (+) - 1
  AND a.DBID = c.dbid (+)
  AND a.instance_number = c.instance_number (+)
  order by snap_start_time;
Plan hash value: 1016715592
---------------------------------------------------------------------------------------------------------------------
| Id  | Operation                          | Name              | Rows  | Bytes | Cost  |    TQ  |IN-OUT| PQ Distrib |
---------------------------------------------------------------------------------------------------------------------
|   0 | CREATE TABLE STATEMENT             |                   |       |       |  3955 |        |      |            |
|   1 |  LOAD AS SELECT                    |                   |       |       |       |        |      |            |
|   2 |   PX COORDINATOR                   |                   |       |       |       |        |      |            |
|   3 |    PX SEND QC (RANDOM)             | :TQ10004          |     1 |   173 |  3954 |  Q1,04 | P->S | QC (RAND)  |
|   4 |     WINDOW NOSORT                  |                   |     1 |   173 |  3954 |  Q1,04 | PCWP |            |
|   5 |      FILTER                        |                   |       |       |       |  Q1,04 | PCWC |            |
|   6 |       SORT GROUP BY                |                   |     1 |   173 |  3954 |  Q1,04 | PCWP |            |
|   7 |        PX RECEIVE                  |                   |     1 |   173 |  3954 |  Q1,04 | PCWP |            |
|   8 |         PX SEND HASH               | :TQ10003          |     1 |   173 |  3954 |  Q1,03 | P->P | HASH       |
|   9 |          SORT GROUP BY             |                   |     1 |   173 |  3954 |  Q1,03 | PCWP |            |
|  10 |           HASH JOIN                |                   |     1 |   173 |  3950 |  Q1,03 | PCWP |            |
|  11 |            PX RECEIVE              |                   | 33370 |  4171K|  2036 |  Q1,03 | PCWP |            |
|  12 |             PX SEND BROADCAST      | :TQ10002          | 33370 |  4171K|  2036 |  Q1,02 | P->P | BROADCAST  |
|  13 |              HASH JOIN BUFFERED    |                   | 33370 |  4171K|  2036 |  Q1,02 | PCWP |            |
|  14 |               JOIN FILTER CREATE   | :BF0001           |   667K|    63M|    16 |  Q1,02 | PCWP |            |
|  15 |                PX RECEIVE          |                   |   667K|    63M|    16 |  Q1,02 | PCWP |            |
|  16 |                 PX SEND HASH       | :TQ10000          |   667K|    63M|    16 |  Q1,00 | P->P | HASH       |
|  17 |                  PX BLOCK ITERATOR |                   |   667K|    63M|    16 |  Q1,00 | PCWC |            |
|  18 |                   TABLE ACCESS FULL| TEMP_UPGRADE_STG1 |   667K|    63M|    16 |  Q1,00 | PCWP |            |
|  19 |               PX RECEIVE           |                   |    41M|  1140M|  1904 |  Q1,02 | PCWP |            |
|  20 |                PX SEND HASH        | :TQ10001          |    41M|  1140M|  1904 |  Q1,01 | P->P | HASH       |
|  21 |                 JOIN FILTER USE    | :BF0001           |    41M|  1140M|  1904 |  Q1,01 | PCWP |            |
|  22 |                  PX BLOCK ITERATOR |                   |    41M|  1140M|  1904 |  Q1,01 | PCWC |            |
|  23 |                   TABLE ACCESS FULL| LOAN              |    41M|  1140M|  1904 |  Q1,01 | PCWP |            |
|  24 |            PX BLOCK ITERATOR       |                   |    41M|  1759M|  1904 |  Q1,03 | PCWC |            |
|  25 |             TABLE ACCESS FULL      | LOAN              |    41M|  1759M|  1904 |  Q1,03 | PCWP |            |
|  26 |            TABLE ACCESS FULL       | DFS_UPG_DAYS      |     1 |    13 |     2 |        |      |            |
---------------------------------------------------------------------------------------------------------------------
Plan hash value: 96446460
--------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                       | Name              | Rows  | Bytes |TempSpc| Cost  |    TQ  |IN-OUT| PQ Distrib |
--------------------------------------------------------------------------------------------------------------------------
|   0 | CREATE TABLE STATEMENT          |                   |       |       |       |  6666K|        |      |            |
|   1 |  LOAD AS SELECT                 |                   |       |       |       |       |        |      |            |
|   2 |   WINDOW SORT                   |                   |     1 |   120 |    99M|  6666K|        |      |            |
|   3 |    FILTER                       |                   |       |       |       |       |        |      |            |
|   4 |     PX COORDINATOR              |                   |       |       |       |       |        |      |            |
|   5 |      PX SEND QC (RANDOM)        | :TQ10002          |   776K|    88M|       |  2052 |  Q1,02 | P->S | QC (RAND)  |
|   6 |       HASH JOIN BUFFERED        |                   |   776K|    88M|       |  2052 |  Q1,02 | PCWP |            |
|   7 |        JOIN FILTER CREATE       | :BF0000           |   776K|    64M|       |    19 |  Q1,02 | PCWP |            |
|   8 |         PX RECEIVE              |                   |   776K|    64M|       |    19 |  Q1,02 | PCWP |            |
|   9 |          PX SEND HASH           | :TQ10000          |   776K|    64M|       |    19 |  Q1,00 | P->P | HASH       |
|  10 |           PX BLOCK ITERATOR     |                   |   776K|    64M|       |    19 |  Q1,00 | PCWC |            |
|  11 |            TABLE ACCESS FULL    | TEMP_UPGRADE_STG1 |   776K|    64M|       |    19 |  Q1,00 | PCWP |            |
|  12 |        PX RECEIVE               |                   |    41M|  1290M|       |  1904 |  Q1,02 | PCWP |            |
|  13 |         PX SEND HASH            | :TQ10001          |    41M|  1290M|       |  1904 |  Q1,01 | P->P | HASH       |
|  14 |          JOIN FILTER USE        | :BF0000           |    41M|  1290M|       |  1904 |  Q1,01 | PCWP |            |
|  15 |           PX BLOCK ITERATOR     |                   |    41M|  1290M|       |  1904 |  Q1,01 | PCWC |            |
|  16 |            TABLE ACCESS FULL    | LOAN              |    41M|  1290M|       |  1904 |  Q1,01 | PCWP |            |
|  17 |     SORT AGGREGATE              |                   |     1 |    37 |       |       |        |      |            |
|  18 |      TABLE ACCESS BY INDEX ROWID| LOAN              |     1 |    37 |       |     4 |        |      |            |
|  19 |       INDEX RANGE SCAN          | LOAN_PK           |     1 |       |       |     3 |        |      |            |
|  20 |       TABLE ACCESS FULL         | DFS_UPG_DAYS      |     1 |    13 |       |     3 |        |      |            |
--------------------------------------------------------------------------------------------------------------------------
 CREATE TABLE TEMP_UPGRADE_BILL_STG2 NOLOGGING AS
                 SELECT /*+ NO_INDEX(L LOAN_PK) FULL (T) FULL (L) PARALLEL (T, 16) PARALLEL (L,16) */
  CREATE TABLE TEMP_UPGRADE_BILL_STG2 NOLOGGING AS
  explain plan for
   with CTE as ( SELECT /*+ FULL (X) PARALLEL (X, 16)*/ MIN(LOAN_SEQ_NO) MIN_LOAN
                          FROM LOAN X
                          WHERE X.BAN=L.BAN AND
                                X.SUBSCRIBER_NO=T.SUBSCRIBER_NO  AND
                                X.LOAN_SEQ_NO > T.LOAN_SEQ_NO    AND
                                X.DEVICE_ACCESSORY_IND = 'D'     AND
                                X.CONTRACT_TYPE=T.CONTRACT_TYPE  AND
                                ABS (TRUNC(X.SYS_CREATION_DATE) - TRUNC(T.LOAN_STATUS_DATE)) <= (SELECT NUM_OF_DAYS FROM DFS_UPG_DAYS )
                                )
   SELECT /*+ NO_INDEX(L LOAN_PK) FULL (T) FULL (L) PARALLEL (T, 16) PARALLEL (L,16) */
   L.BAN,
   L.LOAN_SEQ_NO,
   L.SUBSCRIBER_NO,
   L.SYS_CREATION_DATE,
   T.LOAN_STATUS_DATE,
   'UPG' AS LINK_REASON_CODE,
   T.LOAN_SEQ_NO AS LOAN_SEQ_LINK_NBR,
   T.ORIG_LOAN_TERM,
   T.ESN         AS OLD_ESN,
   T.SKU         AS OLD_SKU,
   ABS (TRUNC (L.SYS_CREATION_DATE) - TRUNC(T.LOAN_STATUS_DATE)) AS DATE_DIFF,
   RANK () OVER (PARTITION BY L.BAN ORDER BY L.LOAN_SEQ_NO) RANK_NUM,
   TRUNC (SYSDATE) AS LAST_UPDATE_DATE
   FROM   TEMP_UPGRADE_STG1 T,
          LOAN L
   WHERE L.BAN=T.BAN AND
         L.SUBSCRIBER_NO = T.SUBSCRIBER_NO AND
         L.LOAN_SEQ_NO = CTE.MIN_LOAN
         /
CREATE TABLE TEMP_UPGRADE_STG2 NOLOGGING AS
   SELECT /*+ FULL (T) FULL (L) PARALLEL (T, 16) PARALLEL (L,16) */
   L.BAN,
   L.LOAN_SEQ_NO,
   L.SUBSCRIBER_NO,
   L.SYS_CREATION_DATE,
   T.LOAN_STATUS_DATE,
   'UPG' AS LINK_REASON_CODE,
   T.LOAN_SEQ_NO AS LOAN_SEQ_LINK_NBR,
   T.ORIG_LOAN_TERM,
   T.ESN         AS OLD_ESN,
   T.SKU         AS OLD_SKU,
   ABS (TRUNC (L.SYS_CREATION_DATE) - TRUNC(T.LOAN_STATUS_DATE)) AS DATE_DIFF,
   RANK () OVER (PARTITION BY L.BAN ORDER BY L.LOAN_SEQ_NO) RANK_NUM,
   TRUNC (SYSDATE) AS LAST_UPDATE_DATE
   FROM   TEMP_UPGRADE_STG1 T,
          LOAN L
   WHERE L.BAN=T.BAN AND
         L.SUBSCRIBER_NO = T.SUBSCRIBER_NO AND
         L.LOAN_SEQ_NO =( SELECT /*+ NO_INDEX (X LOAN_PK )PARALLEL (X, 16)*/ MIN(LOAN_SEQ_NO)
                          FROM LOAN X
                          WHERE X.BAN=L.BAN AND
                                X.SUBSCRIBER_NO=T.SUBSCRIBER_NO AND
                                X.LOAN_SEQ_NO > T.LOAN_SEQ_NO    AND
                                X.DEVICE_ACCESSORY_IND = 'D'     AND
                                X.CONTRACT_TYPE=T.CONTRACT_TYPE) AND
                                ABS (TRUNC(L.SYS_CREATION_DATE) - TRUNC(T.LOAN_STATUS_DATE)) <= (SELECT NUM_OF_DAYS FROM DFS_UPG_DAYS))
ALTER SESSION FORCE PARALLEL DML;
ALTER SESSION ENABLE PARALLEL DML;
ALTER SESSION SET DB_FILE_MULTIBLOCK_READ_COUNT=120;
DROP TABLE TEMP_UPGRADE_STG10;
WHENEVER SQLERROR EXIT SQL.SQLCODE;
ALTER SESSION SET PARALLEL_MIN_PERCENT = 100;
CREATE TABLE TEMP_UPGRADE_STG10 NOLOGGING AS SELECT /*+ FULL (DFS) FULL (L) PARALLEL (DFS, 16) PARALLEL (L,16) */
        L.BAN,
        L.SUBSCRIBER_NO,
        L.LOAN_SEQ_NO,
        L.LOAN_TERM,
        L.LOAN_STATUS_DATE,
        L.SYS_CREATION_DATE,
        L.SYS_UPDATE_DATE,
        L.LOAN_ORIG_DATE,
        L.CONTRACT_TYPE,
        L.LOAN_STATUS_RSN,
        DFS.DEVICE_NUMBER AS ESN,
        DFS.ITEM_ID       AS SKU,
        (NVL (DFS.UNBILLED_NO, 0) + NVL (DFS.INSTALL_CANCEL_CNT, 0)) AS ORIG_LOAN_TERM
FROM NDWLEASEADM.DFS_MASTER_TABLE DFS
LEFT JOIN LOAN L ON (L.BAN=DFS.BAN AND L.LOAN_SEQ_NO=DFS.LOAN_SEQ_NO)
WHERE ( DFS.DEVICE_TYPE_IND = 'D'   AND
        ( L.CONTRACT_TYPE='I'       AND
          L.LOAN_STATUS_RSN in (
                                 'ERUPGB',
                                 'GBKRMR',
                                 'GBKRMA',
                                 'IBCLPY',
                                 'IBILPY',
                                 'PYOFER'
                                )
        )
        OR
        (
          L.CONTRACT_TYPE='L'       AND
          L.LOAN_STATUS_RSN in (
                                 'ELDPPE',
                                 'PPERRT',
                                 'ELBPPE',
                                 'PPERMR',
                                 'PPERMA',
                                 'ELPCDS',
                                 'ELUPDS',
                                 'ELUCDS',
                                 'ELPPDS',
                                 'ELRRMA',
                                 'ELURMR',
                                 'ERUPLS',
                                 'POERPR',
                                 'POERRT',
                                 'POPRDV'
                               )
        )
      )                              AND
      L.LOAN_STATUS_DATE IS NOT NULL AND
      L.DEVICE_ACCESSORY_IND = 'D'   AND
      L.SUBSCRIBER_NO IS NOT NULL    AND
      NOT EXISTS (SELECT /*+ PARALLEL (DCU, 16) */ 1 FROM NDWLEASEADM.DFS_CONTRACT_UPGRADES DCU WHERE DCU.BAN=L.BAN AND DCU.LOAN_SEQ_LINK_NBR=L.LOAN_SEQ_NO)
ORDER BY L.BAN, L.SUBSCRIBER_NO, L.LOAN_SEQ_NO, L.SYS_CREATION_DATE, L.LOAN_STATUS_DATE ;
---------- DAQUI PRA BAIXO é ONDE DÁ PROBLEMA
     SELECT /*+ FULL (T) FULL (L) PARALLEL (T, 16) PARALLEL (L,16) */
     L.BAN,
     L.LOAN_SEQ_NO,
     L.SUBSCRIBER_NO,
     L.SYS_CREATION_DATE,
     T.LOAN_STATUS_DATE,
     'UPG' AS LINK_REASON_CODE,
     T.LOAN_SEQ_NO AS LOAN_SEQ_LINK_NBR,
     T.ORIG_LOAN_TERM,
     T.ESN         AS OLD_ESN,
     T.SKU         AS OLD_SKU,
     ABS (TRUNC (L.SYS_CREATION_DATE) - TRUNC(T.LOAN_STATUS_DATE)) AS DATE_DIFF,
     RANK () OVER (PARTITION BY L.BAN ORDER BY L.LOAN_SEQ_NO) RANK_NUM,
     TRUNC (SYSDATE) AS LAST_UPDATE_DATE
     FROM   TEMP_UPGRADE_STG10 T,
            NDWLEASEADM.LOAN L
     WHERE L.BAN=T.BAN AND
           L.SUBSCRIBER_NO = T.SUBSCRIBER_NO
           AND L.LOAN_SEQ_NO  ( SELECT /*+ FULL (X) PARALLEL (X, 16)*/ MIN(X.LOAN_SEQ_NO) MIN_LOAN
                              FROM NDWLEASEADM.LOAN X
                              WHERE X.BAN=L.BAN AND
                                  X.SUBSCRIBER_NO=T.SUBSCRIBER_NO  AND
                                  X.LOAN_SEQ_NO > T.LOAN_SEQ_NO    AND
                                  X.DEVICE_ACCESSORY_IND = 'D'     AND
                                  X.CONTRACT_TYPE=T.CONTRACT_TYPE  AND
                                  ABS (TRUNC(X.SYS_CREATION_DATE) - TRUNC(T.LOAN_STATUS_DATE)) <= (SELECT NUM_OF_DAYS FROM NDWLEASEADM.DFS_UPG_DAYS)
                                  )
  /
  /
create or replace view TEMP_UPGRADE_STG11 as SELECT  /*+ PARALLEL (X, 16)*/ T.BAN, MIN(X.LOAN_SEQ_NO) MIN_LOAN FROM NDWLEASEADM.LOAN X, TEMP_UPGRADE_STG10 T
  WHERE X.SUBSCRIBER_NO=T.SUBSCRIBER_NO  AND X.LOAN_SEQ_NO > T.LOAN_SEQ_NO AND X.DEVICE_ACCESSORY_IND = 'D'
  AND X.CONTRACT_TYPE=T.CONTRACT_TYPE AND
  ABS(TRUNC(X.SYS_CREATION_DATE) - TRUNC(T.LOAN_STATUS_DATE)) <= (SELECT NUM_OF_DAYS FROM NDWLEASEADM.DFS_UPG_DAYS)
  group by T.ban
  /
  PJ021563
select sql_id, sql_fulltext from gv$sql where sql_fulltext like '%select distinct ''Y''  from boostadm.boost_amdocs_data_load_log%' order by 1;
col sample_time for a30
col machine for a20
select sample_time, session_id, machine, sql_id
from dba_hist_active_sess_history
where
sql_id in ('4bbsv17dz5rg1');
/oracle/g01/admin/diag/rdbms/cxpp101/CXPP1011/trace/CXPP1011_lms0_11910.trc
/oracle/g01/admin/diag/rdbms/cxpp101/CXPP1011/incident/incdir_239885/CXPP1011_lms0_11910_i239885.trc
Select /*+ parallel(16) */
ACTV_AMT,
ACTV_CODE,
ACTV_DATE,
ACTV_REASON_CODE,
BAN,
CHARGE_TYPE,
CHG_CREATION_DATE,
CHG_ENT_SEQ_NO,
CHG_INV_DUE_DATE,
FEATURE_CODE,
INV_SEQ_NO,
LEASE_NUMBER,
LEASE_SEQ_NO,
LOAN_NUMBER,
LOAN_SEQ_NO,
Min(SYS_CREATION_DATE),
Min(SYS_UPDATE_DATE),
TAX_CITY_CUST_AMT,
TAX_COUNTY_CUST_AMT,
TAX_FEDERAL_AMT,
TAX_MIS1_CUST_AMT,
TAX_MIS2_CUST_AMT,
TAX_ROAMING_AMT,
TAX_STATE_CUST_AMT
From NDWLEASEADM.CHARGE_AND_HISTORY_COMBINED;
EO415280;
WS_EN_PI_DATA_P19_11
select count(*) from SPWSHISTO.WS_EN_PI_DATA_TMP ;
SELECT xid, logon_user
FROM flashback_transaction_query
WHERE xid IN (
  SELECT versions_xid FROM Spwshisto.Ws_En_Pi_Data VERSIONS BETWEEN TIMESTAMP
  TO_TIMESTAMP('2017-NOV-24 15:05:00', 'YYYY-MON-DD HH24:MI:SS') AND
  TO_TIMESTAMP('2017-NOV-24 15:15:00', 'YYYY-MON-DD HH24:MI:SS')
);
create table TMP_SPWSHISTO.Cycle_ten_one as
SELECT * FROM Spwshisto.Ws_En_Pi_Data partition (WS_EN_PI_DATA_P01_10)
AS OF TIMESTAMP
TO_TIMESTAMP('2017-NOV-24 15:00:00', 'YYYY-MON-DD HH24:MI:SS');
select /*+parallel(8)*/ distinct CYCLE_CODE, CYCLE_RUN_MONTH, CYCLE_RUN_YEAR from TMP_SPWSHISTO.Cycle_ten_one order by 3;
select /*+parallel(8)*/ count(*) from TMP_SPWSHISTO.Cycle_ten_one ;
select /*+parallel(4)*/ count(*), CYCLE_RUN_YEAR from Spwshisto.Ws_En_Pi_Data partition (WS_EN_PI_DATA_P01_10) group by CYCLE_RUN_YEAR;
SQL> select /*+parallel(8)*/ count(*), CYCLE_RUN_YEAR from TMP_SPWSHISTO.Cycle_ten_one group by CYCLE_RUN_YEAR;
  COUNT(*) CYCLE_RUN_YEAR
---------- --------------
   2674387           2016
   4652756           2017
   3094841           2015
   3692795           2014
  17184404           2013
   4274588           2009
  COUNT(*) CYCLE_RUN_YEAR
---------- --------------
   2674387           2016
   2326378           2017
   4274588           2009
  17184404           2013
   3692795           2014
   3094841           2015
   delete /* parallel (4) */ from Spwshisto.Ws_En_Pi_Data where CYCLE_RUN_YEAR=2017 and CYCLE_RUN_MONTH=10 and cycle_code=1;
insert /*+parallel(4)*/ into Spwshisto.Ws_En_Pi_Data
  select /*+parallel(8)*/ * from TMP_SPWSHISTO.Cycle_ten_one where CYCLE_RUN_YEAR=2017 and CYCLE_RUN_MONTH=10 and cycle_code=1;
SQL> select /*+parallel(4)*/ count(*), CYCLE_RUN_YEAR from Spwshisto.Ws_En_Pi_Data partition (WS_EN_PI_DATA_P01_10) group by CYCLE_RUN_YEAR;
  COUNT(*) CYCLE_RUN_YEAR
---------- --------------
   3692795           2014
   4274588           2009
   2674387           2016
  17184404           2013
   3094841           2015
delete from PPARGLO.AR9_GL_FLOW_CONTROL where PERIOD_KEY=3 and SYS_CREATION_DATE > sysdate-4;
find /tmp/* -type f -exec fuser -u "{}" \;
select sql_fulltext from gv$sql where sql_id='c4t82vfw02ytd';
select sql_fulltext from gv$sql where sql_id='6bftfqjr4undz';
c4t82vfw02ytd
6bftfqjr4undz
nov 27 1am
633
Select /*+ parallel (k,12) */
Min(To_Char(Sys_Creation_Date, 'DD-MON-YYYY HH24:MI:SS') ) ,
max(to_char(sys_creation_date,'DD-MON-YYYY HH24:MI:SS')),
Count(*),Sum(Tax_Amount)
From Pparglo.Ar9_Gl_Tax_Data k
where period_key =3;
select owner, OBJECT_NAME, SUBOBJECT_NAME, last_ddl_time from dba_objects where OBJECT_NAME='AR9_GL_TAX_DATA' order by subobject_name ;
alter table AR9_GL_TAX_DATA truncate partition PR031_P3_R1;
alter table AR9_GL_TAX_DATA truncate partition PR032_P3_R2;
alter table AR9_GL_TAX_DATA truncate partition PR033_P3_R3;
alter table AR9_GL_TAX_DATA truncate partition PR034_P3_R4;
alter table AR9_GL_TAX_DATA truncate partition PR035_P3_R5;
alter table AR9_GL_TAX_DATA truncate partition PR036_P3_R6;
alter table AR9_GL_TAX_DATA truncate partition PR037_P3_R7;
alter table AR9_GL_TAX_DATA truncate partition PR038_P3_R8;
alter table AR9_GL_TAX_DATA truncate partition PR039_P3_R9;
alter table AR9_GL_TAX_DATA truncate partition PR040_P3_R10;
sqlplus datapoint/dmm0n1t0r@//plssa594:1532/PAL_APP_SRV
sqlplus datapoint@plssa594:1532/PAL_APP_SRV
crsctl status res -t
select inst_id, count(*) from gv$session where type <> 'BACKGROUND' group by inst_id order by 1;
/oracle/g01/software/grid/11.2.0.4/bin/crsctl stop crs
/oracle/g01/software/grid/11.2.0.4/bin/crsctl start crs
/oracle/g01/software/grid/11.2.0.4/bin/crsctl start cluster
netstat -an | grep LIST | grep 7900
crs_stop plss5006-app-vip1
crs_start plss5006-app-vip1 -c plss5006
Emailing ALERT-MON_LATE_JOB: PLSAA105/LMEP101: Corrupt block found in diskgroup '+FRA'
select sql_id, first_load_time, last_load_time, elapsed_time, cpu_time
from   gv$sql
where  sql_id in (
select distinct to_char(sql_id) from gv$session where username <> 'SYSTEM'
)
and to_date(last_load_time,'yyyy-mm-dd/hh24:mi:ss') > to_date(sysdate - 24,'yyyy-mm-dd/hh24:mi:ss');
select S.USERNAME, s.sid, s.osuser, t.sql_id, sql_text
from v$sqltext_with_newlines t,V$SESSION s
where t.address =s.sql_address
and t.hash_value = s.sql_hash_value
and s.status = 'ACTIVE'
and s.username <> 'SYSTEM'
order by s.sid,t.piece
/
WDMP1011@plssa594 [/oracle/g01/bkup01/T578334]
MID17_12_1_WDM_01_PJ021529_4BN_Change_01_10262017_ddl.sql
MID17_12_1_WDM_03_PJ020949_4BN_Change_01_11082017_ddl.sql
MID17_12_1_WDM_05_PJ021977_4BN_Change_01_11172017_ddl.sql
MID17_12_1_WDM_02_PJ021529_6ZN_Change_01_10262017_ddl.sql
MID17_12_1_WDM_04_PJ020949_6ZN_Change_01_11082017_ddl.sql
MID17_12_1_WDM_06_PJ021977_6ZN_Change_01_11172017_ddl.sql
NBAMEXTERNAL.BAN_IH_SMRY
select segment_name, tablespace_name, sum(bytes)/1048576 as total_mb, count(*) as "#partitions"
from dba_segments
where segment_name in(
'SUBSCRIBER_PK',
'CUSTOMER_PK',
'SUBSCRIBER_RSOURCE_PK',
'PHYSICAL_DEVICE_PK',
'ADDRESS_NAMNE_LINK_5IX',
'SERIAL_ITEM_INV_PK',
'NAME_DATA_PK'
)
and owner='NXTAPPONRT'
group by segment_name, tablespace_name
/
select segment_name, tablespace_name, sum(bytes)/1048576 as total_mb, count(*) as "#partitions"
from dba_segments
where segment_name in(
'SUBSCRIBER_PK',
'CUSTOMER_PK',
'SUBSCRIBER_RSOURCE_PK',
'PHYSICAL_DEVICE_PK',
'ADDRESS_NAMNE_LINK_5IX',
'SERIAL_ITEM_INV_PK',
'NAME_DATA_PK'
 )
 and owner='NXTAPPONRT'
 group by segment_name, tablespace_name
 /
SELECT SYSDATE, A.* FROM TABLE(SVDMADM.PKG_GET_USER_GROUP_DATA.F_GET_USER_GROUP_DATA(:B1))A
1- 8w84ayntcf1ky
...
last - 1kncrtmhvvf53
col tim for a15
col event for a40
col machine for a15
col program for a30
col username for a20
select
inst_id,
SID,
serial#,
username,
--osuser,
machine,
program,
--blocking_session as bl,
to_char(LOGON_TIME, 'DDMM - HH24:MI') as tim,
LAST_CALL_ET,
--BLOCKING_SESSION,
EVENT,
WAIT_TIME,
--SECONDS_IN_WAIT,
status,
sql_id
from gv$session
--where machine in ('plsh0657','pvmka528')
where type <> 'BACKGROUND'
and status='ACTIVE'
and username='GGSADM'
--and sql_id in ('9yrg0nq423q45','f41qran07xvpa')
--and sid in ('21414')
--and upper(machine) like '%PLSAB40%'
--and type <> 'BACKGROUND'
--and sql_id='95a0h2910ngdh'
--and username='U8EL_ADM'
--or sid='792'
order by tim
/
select sql_fulltext from gv$sql where sql_id='0au9q4hhq31br';
select sql_id from gv$sql where sql_id like '%SA_CMDS.TABLE_SESSION%FROM%TABLE%TOPIC%' ;
SELECT  s.sid, w.state, w.event, s.sql_id, s.sql_child_number,
        w.seq#, w.seconds_in_wait, w.p1text||'=  '||w.p1 p1,
        w.p2text||'= '||w.p2 p2, w.p3text||'=  '||w.p3 p3
FROM  v$session s, v$session_wait w
WHERE  w.sid = s.sid AND w.sid = 653
/
PGA - 650M
SGA - 2500M
create or replace directory T578602 as '/production/data1/archives/dump_SPRINT_MODEL/expdp_SPRINT_MODEL_20171108';
drop directory T576511;
Plan hash value: 3138946379
-----------------------------------------------------------------------------------------------------
| Id  | Operation                           | Name          | Rows  | Bytes | Cost  | Pstart| Pstop |
-----------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                    |               |       |       |   597K|       |       |
|   1 |  NESTED LOOPS                       |               |       |       |       |       |       |
|   2 |   NESTED LOOPS                      |               |    12 |  1008 |   597K|       |       |
|   3 |    TABLE ACCESS FULL                | TABLE_SESSION |     5 |   125 |   597K|       |       |
|   4 |    INDEX RANGE SCAN                 | T2I5831       |     2 |       |     3 |       |       |
|   5 |   TABLE ACCESS BY GLOBAL INDEX ROWID| TABLE_TOPIC   |     2 |   118 |     6 | ROWID | ROWID |
-----------------------------------------------------------------------------------------------------
SELECT
  ''||REASON_1||''
  ||''||''||REASON_2||''
  ||''||''||RESULT||''
  ||''||X_TOPIC2SITE_PART
  ||''||TOPIC2INTRXN
FROM SA_CMDS.TABLE_TOPIC SRC_TABLE_TOPIC
inner join
  SA_CMDS.TABLE_SESSION SRC_TABLE_SESSION
    on SESSION2INTRXN = TOPIC2INTRXN
where
  SRC_TABLE_SESSION.END_TIME >= to_date('2017-12-04', 'YYYY-MM-DDHH24-MI-SS')
  and SRC_TABLE_SESSION.START_TIME >= to_date('2017-12-04', 'YYYY-MM-DDHH24-MI-SS') – 1
Plan hash value: 607190056
-------------------------------------------------------------------
| Id  | Operation         | Name          | Rows  | Bytes | Cost  |
-------------------------------------------------------------------
|   0 | SELECT STATEMENT  |               |       |       |   597K|
|   1 |  TABLE ACCESS FULL| TABLE_SESSION |     5 |   270 |   597K|
-------------------------------------------------------------------
 SELECT
  OBJID
  ||''||SESSION2INTRXN
  ||''||SESSION2USER
  ||''||''||X_CTI_CALL_IDENTIFIER||''
  ||''||''||TO_CHAR(SRC_TABLE_SESSION.END_TIME,'YYYY-MM-DD')||''
  ||''||''||TO_CHAR(SRC_TABLE_SESSION.START_TIME,'YYYY-MM-DD HH24:MI:SS')||''
  ||''||''||TO_CHAR(SRC_TABLE_SESSION.END_TIME,'YYYY-MM-DD HH24:MI:SS')||''
FROM SA_CMDS.TABLE_SESSION SRC_TABLE_SESSION
WHERE
  SRC_TABLE_SESSION.END_TIME >= to_date('2017-12-04', 'YYYY-MM-DDHH24-MI-SS')
  and SRC_TABLE_SESSION.START_TIME >= to_date('2017-12-04', 'YYYY-MM-DDHH24-MI-SS') - 1
select sql_id, sql_fulltext from gv$sql where sql_text like 'SELECT%WORK_ITEM%RETAIL_NOTIFICATION_DETL%ORDER_LINE_DETAILS%CANCELLED%CLOSED%';
select distinct sql_id from gv$sql where sql_text like '%select  index(chg,CHARGE_3IX)%NORSNAPADM.CHARGE%CHG.CHG_CREATION_DATE';
  col time for a17
  col time for a20
  col event for a40
  set lines 170 pages 500
  break on time
  select to_char(sample_time, 'dd-mon-yyyy hh24:mi') time, event, count(1) qty, count(1)*100/sum(count(1)) over() pctload
    from gv$active_session_history
    --where sample_time > sysdate - 3/24
    --where sample_time between to_date('04-Dec-2017 07:00','dd-mon-yyyy hh24:mi:ss') and to_date('04-Dec-2017 22:20','dd-mon-yyyy hh24:mi:ss')
    --and session_id = :B1
    where sql_id='16wn7utcs0bjv'
    and sample_time between sysdate-1/24 and sysdate
     group by to_char(sample_time, 'dd-mon-yyyy hh24:mi'), event
    order by 1,3 desc ;
select owner, TABLE_NAME, NUM_ROWS, OBJECT_TYPE, LAST_ANALYZED, STALE_STATS
from dba_tab_statistics where table_name in (
'LOAN_1IX','CONTRACT_EQUIP_INSTL_BILL','SERIAL_ITEM_INV','SERIAL_ITEM_INV_PK','PHYSICAL_DEVICE','PHYSICAL_DEVICE_5IX','COMPANY_INT',
'HC_DAILY_FALLOUT2','DS_RSRV_LOG','SPCS_DS_ESN_FROM_ASI','TRANSACTION_HDR','TRANSACTION_ITEMS','PRODUCT_MASTER')
/
select owner, object_name, object_type from dba_objects
where object_name in
(
'LOAN_1IX','CONTRACT_EQUIP_INSTL_BILL','SERIAL_ITEM_INV','SERIAL_ITEM_INV_PK','PHYSICAL_DEVICE','PHYSICAL_DEVICE_5IX','COMPANY_INT',
'HC_DAILY_FALLOUT2','DS_RSRV_LOG','SPCS_DS_ESN_FROM_ASI','TRANSACTION_HDR','TRANSACTION_ITEMS','PRODUCT_MASTER'
)
and object_type='VIEW'
/
select /*+parallel(24)*/ count(*) ct, BAN, PYM_SEQ_NO, ACTV_SEQ_NO, LOAN_SEQ_NO
from nxtappo.STG_PYM_ACTV_ALLOCATION
group by BAN, PYM_SEQ_NO, ACTV_SEQ_NO, LOAN_SEQ_NO having count(*) > 1;
 CREATE UNIQUE INDEX "NXTAPPO"."STGPYM_ACTV_ALLOCATION_PK" ON "NXTAPPO"."STG_PYM_ACTV_ALLOCATION" ("BAN", "PYM_SEQ_NO", "ACTV_SEQ_NO", "LOAN_SEQ_NO")
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 20971520 NEXT 20971520 MINEXTENTS 1 MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "IX06"
select sql_id, sql_fulltext from gv$sql where sql_id in (
select distinct sql_id from gv$session where type <> 'BACKGROUND' and status='ACTIVE')
/
select sql_id, sql_fulltext from gv$sql where sql_text like 'SELECT%TOPIC2INTRXN%RC_TABLE_SESSION.START_TIME%';
SELECT /*+PARALLEL(SRC_TABLE_TOPIC, 8)*/
''||REASON_1||''  ||''||''||REASON_2||''  ||''||''||RESULT||''  ||'
'||X_TOPIC2SITE_PART  ||''||TOPIC2INTRXN FROM SA_CMDS.TABLE_TOPIC SRC_TABLE_TOPIC
inner join   SA_CMDS.TABLE_SESSION SRC_TABLE_SESSION on SESSION2INTRXN = TOPIC2INTRXN
where    SRC_TABLE_SESSION.END_TIME >= to_date('20171215','YYYYMMDDHH24MISS')
and SRC_TABLE_SESSION.START_TIME >= to_date('20171215','YYYYMMDDHH24MISS') - 1
select sid, serial#, sql_id from gv$session
where sid in (
select distinct qcsid from gv$px_session where sid in (
select SID
from gv$session
where type <> 'BACKGROUND'
and status='ACTIVE'
and username = 'APP_DLS_ACT_READ'
)
)
/
select sql_fulltext from gv$sql where sql_id='6p7vyuzg0ykq6';
      SID    SERIAL# SQL_ID
---------- ---------- -------------
       733       1547 0wv8d4xr3phj9
       901        367 9ctvsjq0cy8xd
       961       1019 2xkjq0n6garba
       961       2663
       992       2237 63du7apd4qpm4
      1004       2175 6p7vyuzg0ykq6
ORACLE_SID=MMPP101 ; export ORACLE_SID
ORACLE_GROUP=g01
ORAGRP_BASE=/oracle/g01
ORACLE_BASE=/oracle/g01/software
ORACLE_HOME=/oracle/g01/software/rdbms/11.2.0.3 ; export ORACLE_HOME
TNS_ADMIN=/oracle/g01/admin/common/sqlnet; export TNS_ADMIN
mail_list=SFWDBS-DS-NOR-NOL-PROD-DBA@sprint.com
PATH=/usr/local/bin:/bin:/usr/bin:/usr/sbin:.:/sbin:/usr/bin:/usr/ccs/bin:/usr/local/bin:/usr/ucb/::/home/oracle:/oracle/g01/software/rdbms/11.2.0.3/bin:/oracle/g01/admin/common/bin:/usr/local/bin:/bin:/usr/bin:/usr/sbin:.:/sbin:/usr/bin:/usr/ccs/bin:/usr/local/bin:/usr/ucb/::/oracle/dbtools/datapoint//script; export PATH
sqlplus -s /nolog <<!
conn / as sysdba
set pages 0 line 500 trimsp on feed off define off
@/oracle/g01/admin/MMPP101/scripts/chk_growth.sql
exit
!
(uuencode MMPP101_object_growth_report.html MMPP101_object_growth_report.html) | mailx -s " MMPP101 Growth Report " $mail_list
set pagesize 50000
col mb for 999,999,999.99
set markup html on
spool /oracle/g01/admin/MMPP101/scripts/MMPP101_object_growth_report.html
clear columns
SELECT 'REPORT: GROWTH OF DATABASE' || ' DATE: ' || TO_CHAR(TO_DATE(SYSDATE, 'DD/MONTH/RRRR')) AS "GROWTH REPORT" FROM DUAL;
SELECT INSTANCE_NAME AS "INSTANCE NAME"  FROM V$INSTANCE;
SELECT 'MONITORED SCHEMAS: '|| SCHEMA_NAME AS "MONITORED SCHEMAS" FROM DBA_MAINTENANCE.MONITORED_SCHEMAS;
SELECT 'TOP_10_MONITORED_OBJECTS_WITH_HIGHEST_GROWTH_ON_PAST_7_DAYS' FROM DUAL;
select owner, object_name, object_type, MB as "GROWTH_PAST_7_DAYS(MB)" from
(SELECT CD.OWNER, CD.OBJECT_NAME, CD.OBJECT_TYPE, (CD.BYTES-SD.BYTES)/1024/1024 AS MB
FROM (select * from DBA_MAINTENANCE.DATABASE_OBJECTS_GROWTH WHERE SNAP_TIME > TRUNC(SYSDATE-1)) CD,
(SELECT * FROM DBA_MAINTENANCE.DATABASE_OBJECTS_GROWTH WHERE SNAP_TIME BETWEEN TRUNC(SYSDATE-7) AND trunc(SYSDATE-6)) SD
WHERE CD.OWNER = SD.OWNER
AND CD.OBJECT_NAME = SD.OBJECT_NAME
AND CD.OBJECT_TYPE = SD.OBJECT_TYPE
group by cd.owner, cd.object_name, cd.object_type, cd.bytes, sd.bytes
having (cd.bytes-sd.bytes) > 0
order by 4 DESC)
Where rownum <= 10
/
SELECT 'MONITORED_SCHEMAS_GROWTH_ON_PAST_7_DAYS' FROM DUAL;
SELECT CD.OWNER, (CD.BYTES-SD.BYTES)/1024/1024 AS "GROWTH_PAST_7_DAYS(MB)",
FROM (select owner, sum(bytes) as bytes from DBA_MAINTENANCE.DATABASE_OBJECTS_GROWTH WHERE SNAP_TIME > TRUNC(SYSDATE) group by owner) CD,
(SELECT owner, sum(bytes) as bytes from DBA_MAINTENANCE.DATABASE_OBJECTS_GROWTH WHERE SNAP_TIME BETWEEN TRUNC(SYSDATE-7) AND trunc(SYSDATE-6) group by owner) SD
WHERE CD.OWNER = SD.OWNER
order by 2,1
/
SPOOL OFF
BEGIN
  DBMS_SCHEDULER.CREATE_JOB (
   job_name           =>  'OBJECT_GROWTH_MONITORING',
   job_type           =>  'STORED_PROCEDURE',
   job_action         =>  'dba_maintenance.database_objects_growth_proc',
   start_date         =>  '27-DEC-17 10.30.00 PM America/Chicago',
   repeat_interval    =>  'FREQ=DAILY;BYHOUR=22;BYMINUTE=30',
   auto_drop          =>   FALSE,
   enabled            =>   TRUE,
   comments           =>  'Monitors database growth at object level');
END;
/
BEGIN
  DBMS_SCHEDULER.DROP_JOB ('monitor_active_sessions');
END;
/
BEGIN
 DBMS_SCHEDULER.ENABLE ('DBA_MAINTENANCE.OBJECT_GROWTH_MONITORING');
END;
explain plan for
SELECT /*+ index(ADJUSTMENT ADJUSTMENT_6IX) +parallel(2) */ SUM(actv_amt) SUM
FROM ADJUSTMENT
WHERE feature_code              IN ('NRSFTR','EQPHNC','EQACCC')
AND balance_impact_code         = 'B'
AND ban                          = '529200217'
AND sysdate - adj_creation_date <= '90';
SELECT PLAN_TABLE_OUTPUT FROM TABLE(DBMS_XPLAN.DISPLAY());
select sql_text from dba_hist_sqltext where sql_id='fggtyxm7yt1y5';
spool report_sql_monitor_bqs6btd795bh3.htm
SELECT DBMS_SQLTUNE.report_sql_monitor(
  sql_id           => 'fggtyxm7yt1y5',
  type             => 'HTML',
  report_level     => 'ALL') AS report
FROM dual;
spool off
ALTER TABLE STORMADM.HC_BAN_NSP_HIST ADD PARTITION HCBNSP_HIST_201801 VALUES LESS THAN ( TO_DATE('2018-FEB-01','YYYY-MON-DD')) TABLESPACE STORM_DATA;
ALTER TABLE STORMADM.HC_BAN_NSP_HIST ADD PARTITION HCBNSP_HIST_201802 VALUES LESS THAN ( TO_DATE('2018-MAR-01','YYYY-MON-DD')) TABLESPACE STORM_DATA;
ALTER TABLE STORMADM.HC_BAN_NSP_HIST ADD PARTITION HCBNSP_HIST_201803 VALUES LESS THAN ( TO_DATE('2018-APR-01','YYYY-MON-DD')) TABLESPACE STORM_DATA;
ALTER TABLE STORMADM.HC_BAN_NSP_HIST ADD PARTITION HCBNSP_HIST_201804 VALUES LESS THAN ( TO_DATE('2018-MAY-01','YYYY-MON-DD')) TABLESPACE STORM_DATA;
ALTER TABLE STORMADM.HC_BAN_NSP_HIST ADD PARTITION HCBNSP_HIST_201805 VALUES LESS THAN ( TO_DATE('2018-JUN-01','YYYY-MON-DD')) TABLESPACE STORM_DATA;
ALTER TABLE STORMADM.HC_BAN_NSP_HIST ADD PARTITION HCBNSP_HIST_201806 VALUES LESS THAN ( TO_DATE('2018-JUL-01','YYYY-MON-DD')) TABLESPACE STORM_DATA;
ALTER TABLE STORMADM.HC_BAN_NSP_HIST ADD PARTITION HCBNSP_HIST_201807 VALUES LESS THAN ( TO_DATE('2018-AUG-01','YYYY-MON-DD')) TABLESPACE STORM_DATA;
ALTER TABLE STORMADM.HC_BAN_NSP_HIST ADD PARTITION HCBNSP_HIST_201808 VALUES LESS THAN ( TO_DATE('2018-SEP-01','YYYY-MON-DD')) TABLESPACE STORM_DATA;
ALTER TABLE STORMADM.HC_BAN_NSP_HIST ADD PARTITION HCBNSP_HIST_201809 VALUES LESS THAN ( TO_DATE('2018-OCT-01','YYYY-MON-DD')) TABLESPACE STORM_DATA;
ALTER TABLE STORMADM.HC_BAN_NSP_HIST ADD PARTITION HCBNSP_HIST_201810 VALUES LESS THAN ( TO_DATE('2018-NOV-01','YYYY-MON-DD')) TABLESPACE STORM_DATA;
ALTER TABLE STORMADM.HC_BAN_NSP_HIST ADD PARTITION HCBNSP_HIST_201811 VALUES LESS THAN ( TO_DATE('2018-DEC-01','YYYY-MON-DD')) TABLESPACE STORM_DATA;
ALTER TABLE STORMADM.HC_BAN_NSP_HIST ADD PARTITION HCBNSP_HIST_201812 VALUES LESS THAN ( TO_DATE('2019-JAN-01','YYYY-MON-DD')) TABLESPACE STORM_DATA;
RE: Partition management for NGS schem
alter table NGS.MANAGE_CART ADD PARTITION P201803 VALUES LESS THAN (TO_DATE(' 2018-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table NGS.ACCESSORY_SELECTED add partition P201803 values less than (TO_DATE(' 2018-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS','NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table NGS.CART_PAYMENT_INFO add partition P201803 values less than (TO_DATE(' 2018-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS','NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table NGS.CREDIT_CHECK_INFO add partition P201803 values less than (TO_DATE(' 2018-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS','NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table NGS.CUSTOMER_ADDRESS add partition P201803 values less than (TO_DATE(' 2018-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS','NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table NGS.DEVICES_COMPARED add partition P201803 values less than (TO_DATE(' 2018-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS','NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table NGS.DEVICE_APPS_SELECTED add partition P201803 values less than (TO_DATE(' 2018-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS','NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table NGS.DEVICE_LIST add partition P201803 values less than (TO_DATE(' 2018-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS','NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table NGS.LIFESTYLE add partition P201803 values less than (TO_DATE(' 2018-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS','NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table NGS.OPTIONS_SELECTED add partition P201803 values less than (TO_DATE(' 2018-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS','NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table NGS.PREFERENCE add partition P201803 values less than (TO_DATE(' 2018-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS','NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table NGS.RECOMMENDATION_LIST add partition P201803 values less than (TO_DATE(' 2018-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS','NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter system set wallet open identified by "P80dNorS8cr3t3###2**EncPas";
alter system set wallet open identified by "P80dNorS8cr3t3###2**EncPas";
orapki wallet display -wallet /oracle/dbtools/TDE/11.2.0/wallet/ -summary
cp -r /oracle/dbtools/TDE/11.2.0/wallet/* /tmp/wallet
select distinct owner, SEGMENT_NAME, SEGMENT_TYPE, TABLESPACE_NAME, count(*), sum(bytes)/1048576 as total_mb
from dba_segments
where tablespace_name like 'ENC%'
and (segment_type='TABLE' or segment_type='TABLE PARTITION')
group by owner, SEGMENT_NAME, SEGMENT_TYPE, TABLESPACE_NAME
order by segment_name;
select /*+parallel(4)*/ versions_starttime stime,
versions_endtime endtime,
versions_xid xid,
case
when versions_operation = 'I' then  'INSERT'
when versions_operation = 'U' then  'UPDATE'
when versions_operation = 'D' then  'DELETE'
end as operation
from oemadm.order_master versions between timestamp minvalue and maxvalue
order by stime;
cat /oracle/g01/admin/diag/rdbms/wdmp201/WDMP201/trace/alert_WDMP201.log
 SAMPLE_ID                                                                                                                  NUMBER
 SAMPLE_TIME                                                                                                                TIMESTAMP(3)
 IS_AWR_SAMPLE                                                                                                              VARCHAR2(1)
 SESSION_ID                                                                                                                 NUMBER
 SESSION_SERIAL#                                                                                                            NUMBER
 SESSION_TYPE                                                                                                               VARCHAR2(10)
 FLAGS                                                                                                                      NUMBER
 USER_ID                                                                                                                    NUMBER
 SQL_ID                                                                                                                     VARCHAR2(13)
 IS_SQLID_CURRENT                                                                                                           VARCHAR2(1)
 SQL_CHILD_NUMBER                                                                                                           NUMBER
 SQL_OPCODE                                                                                                                 NUMBER
 SQL_OPNAME                                                                                                                 VARCHAR2(64)
 FORCE_MATCHING_SIGNATURE                                                                                                   NUMBER
 TOP_LEVEL_SQL_ID                                                                                                           VARCHAR2(13)
 TOP_LEVEL_SQL_OPCODE                                                                                                       NUMBER
 SQL_PLAN_HASH_VALUE                                                                                                        NUMBER
 SQL_PLAN_LINE_ID                                                                                                           NUMBER
 SQL_PLAN_OPERATION                                                                                                         VARCHAR2(30)
 SQL_PLAN_OPTIONS                                                                                                           VARCHAR2(30)
 SQL_EXEC_ID                                                                                                                NUMBER
 SQL_EXEC_START                                                                                                             DATE
 PLSQL_ENTRY_OBJECT_ID                                                                                                      NUMBER
 PLSQL_ENTRY_SUBPROGRAM_ID                                                                                                  NUMBER
 PLSQL_OBJECT_ID                                                                                                            NUMBER
 PLSQL_SUBPROGRAM_ID                                                                                                        NUMBER
 QC_INSTANCE_ID                                                                                                             NUMBER
 QC_SESSION_ID                                                                                                              NUMBER
 QC_SESSION_SERIAL#                                                                                                         NUMBER
 PX_FLAGS                                                                                                                   NUMBER
 EVENT                                                                                                                      VARCHAR2(64)
 EVENT_ID                                                                                                                   NUMBER
 EVENT#                                                                                                                     NUMBER
 SEQ#                                                                                                                       NUMBER
 P1TEXT                                                                                                                     VARCHAR2(64)
 P1                                                                                                                         NUMBER
 P2TEXT                                                                                                                     VARCHAR2(64)
 P2                                                                                                                         NUMBER
 P3TEXT                                                                                                                     VARCHAR2(64)
 P3                                                                                                                         NUMBER
 WAIT_CLASS                                                                                                                 VARCHAR2(64)
 WAIT_CLASS_ID                                                                                                              NUMBER
 WAIT_TIME                                                                                                                  NUMBER
 SESSION_STATE                                                                                                              VARCHAR2(7)
 TIME_WAITED                                                                                                                NUMBER
 BLOCKING_SESSION_STATUS                                                                                                    VARCHAR2(11)
 BLOCKING_SESSION                                                                                                           NUMBER
 BLOCKING_SESSION_SERIAL#                                                                                                   NUMBER
 BLOCKING_INST_ID                                                                                                           NUMBER
 BLOCKING_HANGCHAIN_INFO                                                                                                    VARCHAR2(1)
 CURRENT_OBJ#                                                                                                               NUMBER
 CURRENT_FILE#                                                                                                              NUMBER
 CURRENT_BLOCK#                                                                                                             NUMBER
 CURRENT_ROW#                                                                                                               NUMBER
 TOP_LEVEL_CALL#                                                                                                            NUMBER
 TOP_LEVEL_CALL_NAME                                                                                                        VARCHAR2(64)
 CONSUMER_GROUP_ID                                                                                                          NUMBER
 XID                                                                                                                        RAW(8)
 REMOTE_INSTANCE#                                                                                                           NUMBER
 TIME_MODEL                                                                                                                 NUMBER
 IN_CONNECTION_MGMT                                                                                                         VARCHAR2(1)
 IN_PARSE                                                                                                                   VARCHAR2(1)
 IN_HARD_PARSE                                                                                                              VARCHAR2(1)
 IN_SQL_EXECUTION                                                                                                           VARCHAR2(1)
 IN_PLSQL_EXECUTION                                                                                                         VARCHAR2(1)
 IN_PLSQL_RPC                                                                                                               VARCHAR2(1)
 IN_PLSQL_COMPILATION                                                                                                       VARCHAR2(1)
 IN_JAVA_EXECUTION                                                                                                          VARCHAR2(1)
 IN_BIND                                                                                                                    VARCHAR2(1)
 IN_CURSOR_CLOSE                                                                                                            VARCHAR2(1)
 IN_SEQUENCE_LOAD                                                                                                           VARCHAR2(1)
 CAPTURE_OVERHEAD                                                                                                           VARCHAR2(1)
 REPLAY_OVERHEAD                                                                                                            VARCHAR2(1)
 IS_CAPTURED                                                                                                                VARCHAR2(1)
 IS_REPLAYED                                                                                                                VARCHAR2(1)
 SERVICE_HASH                                                                                                               NUMBER
 PROGRAM                                                                                                                    VARCHAR2(48)
 MODULE                                                                                                                     VARCHAR2(64)
 ACTION                                                                                                                     VARCHAR2(64)
 CLIENT_ID                                                                                                                  VARCHAR2(64)
 MACHINE                                                                                                                    VARCHAR2(64)
 PORT                                                                                                                       NUMBER
 ECID                                                                                                                       VARCHAR2(64)
 DBREPLAY_FILE_ID                                                                                                           NUMBER
 DBREPLAY_CALL_COUNTER                                                                                                      NUMBER
 TM_DELTA_TIME                                                                                                              NUMBER
 TM_DELTA_CPU_TIME                                                                                                          NUMBER
 TM_DELTA_DB_TIME                                                                                                           NUMBER
 DELTA_TIME                                                                                                                 NUMBER
 DELTA_READ_IO_REQUESTS                                                                                                     NUMBER
 DELTA_WRITE_IO_REQUESTS                                                                                                    NUMBER
 DELTA_READ_IO_BYTES                                                                                                        NUMBER
 DELTA_WRITE_IO_BYTES                                                                                                       NUMBER
 DELTA_INTERCONNECT_IO_BYTES                                                                                                NUMBER
 PGA_ALLOCATED                                                                                                              NUMBER
 TEMP_SPACE_ALLOCATED
 SFWDBS-IBM-DM-DEV-ATLANTA-DBA
 NDWD101 (dresa577.dev.sprint.com)
/oracle/g01/bkup01/DROP_PART
alter user bn101852 identified by nsNBw0TtBhQ7 ;
alter user eq507529 identified by nl5UFLo3rSFz ;
alter user wf945025 identified by uayt9Xzt3Fvo ;
alter user xm568808 identified by z3xI6ftuUZyz ;
alter user vc529855 identified by dRFkrbTTZrT7 ;
SD4799057
select username, created from dba_users where lower(username) in ('rn412175','bn101852','eq507529','wf945025','xm568808','vc529855');
grant SELECT_HS_DATA, SELECT_CFS_FRAUD, SELECT_NCI_STORMDM, SELECT_NRTADM_DATA, SELECT_STORMDM_DATA, SELECT_NORSNAPADM_ROLE to vc529855;
grant SELECT_BOOSTADM_DATA, SELECT_NRTADM_HS_DATA, SELECT_NORSNAPADM_DATA, SELECT_SALESTLSADM_ROLE, SELECT_NORSNAPADM_HS_DATA, SELECT_NORSNAPADM_SEC_DATA to vc529855;
  grant select on CFSREPORTING.PICK_LIST_ADHOC to vc529855;
PCI DATA...
select count(*) from  CLCSADM.CLCS_CREDIT_CARD b where NAME_ON_CARD is not null;
if we get the count >1
then check using below and see if we have any non tokenized
;
select /*+ no_mergeb) */ decode(cl1,NULL,'NOTTOKENIZED','TOKENIZED'),count(*) from (
select /*+ parallel(a,6) */
translate( pci_pkg.d_cc(NAME_ON_CARD,654916320742196284 ) , '_01234 56789-',' ') cl1
from CLCSADM.CLCS_CREDIT_CARD   a where
NAME_ON_CARD is not null
) b
group by decode(cl1,NULL,'NOTTOKENIZED','TOKENIZED');
-
-- To see if they are real numbers
spool pci_CLCS_CREDIT_CARD.txt
select CREDIT_CARD_ID,  from CLCSADM.CLCS_CREDIT_CARD  a where
SECURITY_CODE is not null;
spool off;
select CREDIT_CARD_ID, pci_pkg.d_cc(CC_NUMBER,654916320742196284 ) as cc, pci_pkg.d_cc(SECURITY_CODE,654916320742196284 ) as pci from OEMARCH.CLCS_CREDIT_CARD  a where
SECURITY_CODE is not null;
kfod status=TRUE asm_diskstring='/dev/rdsk/*c6t*s0' disk=ALL
kfod  a=’/dev/rdsk/c0t*d0s*’ di=all
query="where TO_DATE(order_date,'ddmmyy') BETWEEN TO_DATE('010118','ddmmyy') AND TO_DATE('200118','ddmmyy')"
create table tmp_order_master as  select /*+parallel(4)*/ * from oemadm.order_master where order_date > sysdate - 5;
update clw_p01_epm.usage_log set
    UN = 'JPhegley',
    ACTION_ID = 3,
    PAGE_NAME = null,
    IIS_START = to_date('2018-01-24 12:15:30', 'YYYY-MM-DD HH24:MI:SS'),
    IIS_FINISH = to_date('2018-01-24 12:15:31', 'YYYY-MM-DD HH24:MI:SS'),
    IIS_RUNTIME = 1.111,
    USER_RUNTIME = null,
    USER_ID = 100132831,
    URL = '/api/v2/trackor_type/Augment_Tracker?TRACKOR_KEY=Bradleys%20TestH17.8',
    SQL = null,
    XITOR_TYPE_ID = null,
    ZONE_ID = null,
    PROGRAM_ID = 1001497,
    DB_RUNTIME = null,
    FILTER_USER_ID = null,
    FILTER_NAME = null,
    FILTER_SEC3_CATEGORY = null,
    VIEW_USER_ID = null,
    VIEW_NAME = null,
    VIEW_SEC3_CATEGORY = null,
    USAGE_LOG_BROWSER_ID = 1001101,
    SERVER_IP = '10.229.21.22',
    CLIENT_IP = '10.229.21.252',
    WS_REQUEST = to_clob('{ "fields": { "ATP_004": { "file_name" : "test-jdbc.jar",
          "data" : "a long file a long file a long file a long file a long file a long file a long file a long file a long file a long file "
        }
      }
    }'),
    IS_FLUXX = 0,
    IS_EDIT_MODE = 0,
    XML_SIZE = 62,
    RESPONSE_DELIVERY_TIME = null,
    BROWSER_RUNTIME = null,
    TMP_REQUEST_TOKEN = null,
    NOT_LIMITED_SQL = to_clob('select b.* from (
    select
    tid grid_rowid, internal.* from (
    select x10011934.xitor_id tid,
    x10011934.xitor_class_id tcid,
    x10011934.xitor_id x10011934_xitor_id
    from xitor x10011934
    where x10011934.xitor_type_id = :p0
    and x10011934.program_id = :p1
    and x10011934.is_template = 0
    and ((((upper(x10011934.xitor_key) like (upper(:p2)) escape ''\'' ) ) ))
    ) internal
    ) b'),
    GRID_PAGE_ID = null,
    ACTION_STATUS_ID = 0,
    ERROR_MESSAGE = null,
    ROWS_COUNT = null
where usage_log_id = 100171782141;'
rollback;
/oracle/g01/software/grid/11.2.0.2/install/relinkActions2018-01-25_06-06-03-AM.log
binutils-2.23.52.0.1-12.el7.x86_64          OK
compat-libcap1-1.10-3.el7.x86_64            MISSING
compat-libstdc++-33-3.2.3-71.el7.i686       MISSING
compat-libstdc++-33-3.2.3-71.el7.x86_64     MISSING
gcc-4.8.2-3.el7.x86_64                      MISSING
gcc-c++-4.8.2-3.el7.x86_64                  MISSING
glibc-2.17-36.el7.i686                      OK
glibc-2.17-36.el7.x86_64                    OK
glibc-devel-2.17-36.el7.i686                MISSING
glibc-devel-2.17-36.el7.x86_64              OK
ksh                                         OK
libaio-0.3.109-9.el7.i686                   MISSING
libaio-0.3.109-9.el7.x86_64                 OK
libaio-devel-0.3.109-9.el7.i686             MISSING
libaio-devel-0.3.109-9.el7.x86_64           MISSING
libgcc-4.8.2-3.el7.i686                     MISSING
libgcc-4.8.2-3.el7.x86_64                   OK
libstdc++-4.8.2-3.el7.i686                  MISSING
libstdc++-4.8.2-3.el7.x86_64                OK
libstdc++-devel-4.8.2-3.el7.i686            MISSING
libstdc++-devel-4.8.2-3.el7.x86_64          MISSING
libXi-1.7.2-1.el7.i686                      MISSING
libXi-1.7.2-1.el7.x86_64                    OK
libXtst-1.2.2-1.el7.i686                    MISSING
libXtst-1.2.2-1.el7.x86_64                  MISSING
make-3.82-19.el7.x86_64                     OK
sysstat-10.1.5-1.el7.x86_64                 OK
spool ./log/constraint_status.log
set lin 200
set pages 999
col owner for a10
col table_name for a30
col status for a20
select OWNER, CONSTRAINT_NAME, CONSTRAINT_TYPE , TABLE_NAME, STATUS, VALIDATED
from dba_constraints
where owner='BRITEBILL' and table_name in
('DOCUMENT',
  'DOCUMENTMETADATA',
  'DOCUMENT_FACT',
  'DOCUMENTDATASTOREITEM',
  'HISTORICCHARGES',
  'HISTORICUSAGE',
  'BILL'
)
order by table_name
/
spool off;
exit;
spool ./log/indexes_status.log
set lin 200
set pages 999
col owner for a10
col table_name for a30
col status for a20
select owner, index_name, index_type, table_name, uniqueness, status
from dba_indexes where table_name in
('DOCUMENT',
  'DOCUMENTMETADATA',
  'DOCUMENT_FACT',
  'DOCUMENTDATASTOREITEM',
  'HISTORICCHARGES',
  'HISTORICUSAGE',
  'BILL'
)
order by table_name;
spool off;
exit;
set timing on
set echo off
alter session force parallel query parallel 8;
alter session set current_schema=REGADM;
set pages 999
set lin 200
set numwidth 30
col segment_name for a30
column dt new_val X
select to_char(sysdate,'yyyymmdd_hh24miss') dt from dual;
spool ./log/table_status_&X.log
select segment_name, sum(bytes)/1048576 as total_mb from dba_segments
where segment_name='BILL' and owner='BRITEBILL'
group by segment_name;
select min(ID) as min_ID from bill;
select segment_name, sum(bytes)/1048576 as total_mb from dba_segments
where segment_name='DOCUMENT' and owner='BRITEBILL'
group by segment_name;
select min(ID) as min_ID from document;
select segment_name, sum(bytes)/1048576 as total_mb from dba_segments
where segment_name='HISTORICCHARGES' and owner='BRITEBILL'
group by segment_name;
select min(documentid) as min_documentID from historiccharges;
select segment_name, sum(bytes)/1048576 as total_mb from dba_segments
where segment_name='HISTORICUSAGE' and owner='BRITEBILL'
group by segment_name;
select min(documentID) as min_documentID from historicusage;
select segment_name, sum(bytes)/1048576 as total_mb from dba_segments
where segment_name='DOCUMENTDATASTOREITEM' and owner='BRITEBILL'
group by segment_name;
select min(document_id) as min_document_ID from documentdatastoreitem;
select segment_name, sum(bytes)/1048576 as total_mb from dba_segments
where segment_name='DOCUMENTMETADATA' and owner='BRITEBILL'
group by segment_name;
select min(document) as min_document from documentmetadata;
select segment_name, sum(bytes)/1048576 as total_mb from dba_segments
where segment_name='DOCUMENT_FACT' and owner='BRITEBILL'
group by segment_name;
select min(document_ID) as min_document_ID from document_fact;
spool off;
exit;
Please promote job to production.
Job name: m6qsmatb1s
Execution:  Monthly, in the first day after completion of the following jobs: m027dggnrt  &  m027dggeod .
PERMANENT - Please promote job m6qsmatb1s  to PRODUCTION.
BRITEBILL  SYS_C004094                    P BILL                           ENABLED              NOT VALIDATED
BRITEBILL  SYS_C003872                    C BILL                           ENABLED              NOT VALIDATED
BRITEBILL  UK_N3TST0E3E5F6CKRKK1G5RASB9   U DOCUMENT                       ENABLED              NOT VALIDATED
BRITEBILL  SYS_C005019                    C DOCUMENT                       ENABLED              NOT VALIDATED
BRITEBILL  SYS_C005020                    C DOCUMENT                       ENABLED              NOT VALIDATED
BRITEBILL  SYS_C005021                    C DOCUMENT                       ENABLED              NOT VALIDATED
BRITEBILL  SYS_C005022                    C DOCUMENT                       ENABLED              NOT VALIDATED
BRITEBILL  SYS_C005023                    C DOCUMENT                       ENABLED              NOT VALIDATED
BRITEBILL  SYS_C005024                    C DOCUMENT                       ENABLED              NOT VALIDATED
BRITEBILL  FK_40R9FU217EOHO6Y84FJN9QAUD   R DOCUMENT                       ENABLED              NOT VALIDATED
BRITEBILL  FK_O87KX3FG7NDCGI5L9ETBEASDE   R DOCUMENT                       ENABLED              NOT VALIDATED
BRITEBILL  SYS_C005086                    C DOCUMENT                       ENABLED              NOT VALIDATED
BRITEBILL  SYS_C005059                    C DOCUMENT                       ENABLED              NOT VALIDATED
BRITEBILL  FK_L6OM9J438E4F08KLRPMKUDT8L   R DOCUMENT                       ENABLED              NOT VALIDATED
BRITEBILL  UK_L6OM9J438E4F08KLRPMKUDT8L   U DOCUMENT                       ENABLED              NOT VALIDATED
BRITEBILL  SYS_C004080                    P DOCUMENT                       ENABLED              NOT VALIDATED
BRITEBILL  SYS_C004866                    C DOCUMENTDATASTOREITEM          ENABLED              NOT VALIDATED
BRITEBILL  DOCDATASTOREITEM_SECID         U DOCUMENTDATASTOREITEM          ENABLED              NOT VALIDATED
BRITEBILL  DOCUMENTDATASTOREITEM_FK1      R DOCUMENTDATASTOREITEM          ENABLED              NOT VALIDATED
BRITEBILL  DOCUMENTDATASTOREITEM_PK       P DOCUMENTDATASTOREITEM          ENABLED              NOT VALIDATED
BRITEBILL  SYS_C004865                    C DOCUMENTDATASTOREITEM          ENABLED              NOT VALIDATED
BRITEBILL  SYS_C004867                    C DOCUMENTDATASTOREITEM          ENABLED              NOT VALIDATED
BRITEBILL  SYS_C005002                    C DOCUMENTMETADATA               ENABLED              NOT VALIDATED
BRITEBILL  DOCUMENTMETADATA_PK            P DOCUMENTMETADATA               ENABLED              NOT VALIDATED
BRITEBILL  SYS_C004863                    C DOCUMENT_FACT                  ENABLED              NOT VALIDATED
select owner, table_name, constraint_name, CONSTRAINT_TYPE, r_constraint_name, status
from dba_constraints
where r_constraint_name in
(select constraint_name
from dba_constraints
where table_name in ('BILL','DOCUMENT','DOCUMENTDATASTOREITEM','DOCUMENTMETADATA','DOCUMENT_FACT','HISTORICUSAGE','HISTORICCHARGES'))
order by table_name;
BRITEBILL       REPRINT_QUEUE                  FK_CFRFYBWASAIQOEREMK6L7GGO7
BRITEBILL       SEMANTICCHECKFAILURE           FK_NUCLW7NH82VI6TRC5LFMA5CXJ
alter table REPRINT_QUEUE disable novalidate constraint FK_CFRFYBWASAIQOEREMK6L7GGO7;
alter table SEMANTICCHECKFAILURE disable novalidate constraint FK_NUCLW7NH82VI6TRC5LFMA5CXJ;
OWNER      INDEX_NAME                     INDEX_TYPE                  TABLE_NAME                     UNIQUENES STATUS
---------- ------------------------------ --------------------------- ------------------------------ --------- --------------------
BRITEBILL  BILL_PK                        NORMAL                      BILL                           UNIQUE    VALID
BRITEBILL  ISSUE_DATE_SC_INDEX            NORMAL                      BILL                           NONUNIQUE VALID
BRITEBILL  FK_DOCUMENT_BATCH_IDX          NORMAL                      DOCUMENT                       NONUNIQUE VALID
BRITEBILL  INGESTSTATUS_SC_INDEX          NORMAL                      DOCUMENT                       NONUNIQUE VALID
BRITEBILL  FK335CD11BE40A3BAC_IDX         NORMAL                      DOCUMENT                       NONUNIQUE VALID
BRITEBILL  CONTENTID_SC_INDEX             NORMAL                      DOCUMENT                       NONUNIQUE VALID
BRITEBILL  UK_N3TST0E3E5F6CKRKK1G5RASB9   NORMAL                      DOCUMENT                       UNIQUE    VALID
BRITEBILL  SYS_C004080                    NORMAL                      DOCUMENT                       UNIQUE    VALID
BRITEBILL  UK_L6OM9J438E4F08KLRPMKUDT8L   NORMAL                      DOCUMENT                       UNIQUE    VALID
BRITEBILL  DOCUMENTDATASTOREITEM_PK       NORMAL                      DOCUMENTDATASTOREITEM          UNIQUE    VALID
BRITEBILL  SECTION_IDX                    NORMAL                      DOCUMENTDATASTOREITEM          NONUNIQUE VALID
BRITEBILL  DOCUMENT_ID_INDEX              NORMAL                      DOCUMENTDATASTOREITEM          NONUNIQUE VALID
BRITEBILL  TYPE_FOR_DOC_IDX               NORMAL                      DOCUMENTDATASTOREITEM          NONUNIQUE VALID
BRITEBILL  DOCUMENT_IDX                   NORMAL                      DOCUMENTMETADATA               NONUNIQUE VALID
BRITEBILL  DOCUMENTMETADATA_PK            NORMAL                      DOCUMENTMETADATA               UNIQUE    VALID
BRITEBILL  FK_FACT_DOCUMENT_IDX           NORMAL                      DOCUMENT_FACT                  NONUNIQUE VALID
BRITEBILL  REF_INDEX_HIST_C_BAN_CODE      NORMAL                      HISTORICCHARGES                NONUNIQUE VALID
BRITEBILL  REF_INDEX_HIST_CHARGES_DOC     NORMAL                      HISTORICCHARGES                NONUNIQUE VALID
BRITEBILL  REF_INDEX_HIST_C_DAC_CODE      NORMAL                      HISTORICCHARGES                NONUNIQUE VALID
BRITEBILL  REF_INDEX_HIST_CHARGES_DATE    NORMAL                      HISTORICCHARGES                NONUNIQUE VALID
BRITEBILL  REF_INDEX_HIST_U_DAC_CODE      NORMAL                      HISTORICUSAGE                  NONUNIQUE VALID
BRITEBILL  REF_INDEX_HIST_USAGE_BAN       NORMAL                      HISTORICUSAGE                  NONUNIQUE VALID
BRITEBILL  REF_INDEX_HIST_USAGE_DOC       NORMAL                      HISTORICUSAGE                  NONUNIQUE VALID
BRITEBILL  REF_INDEX_HIST_U_BAN_CODE      NORMAL                      HISTORICUSAGE                  NONUNIQUE VALID
select inst_id , qcsid, count(*) from gv$px_session group by inst_id, qcsid order by 3;
select model_nme as "Model", loan_cancelled_date as "Cancel Date", count(*) as "Items"
from (select /*+ parallel (b, 8) */ closed_leases.*, changedate.loan_cancelled_date
from NDWLEASEADM.leaseco_response_b_01 b,(select /*+ parallel (l, 8) */ l.loan_number, l.loan_seq_no, cancel_ind,
loan_status_rsn, l.ban, wd.model_nme
from norsnapadm.loan l, norsnapadm.loan_item li, bsonarview.wrls_dev wd
where l.ban = li.ban and l.loan_seq_no = li.loan_seq_no and li.item_id = wd.wrls_dev_sku_nbr
and l.cancel_ind is not null and((l.loan_status = 'N') or (l.loan_status not in ('C','N'))))  closed_leases,
(select /*+ parallel (l,16) parallel (li,16) */ l.loan_number, l.loan_seq_no, l.loan_status, l.loan_status_rsn, l.cancel_ind,
to_char(li.sys_update_date,'yyyymmdd') as loan_cancelled_date
from norsnapadm.loan l, norsnapadm.loan_installment li, (select /*+ parallel (li,16) */ ban, loan_seq_no, min(loan_install_no) as use_this_loaninstall_no
from norsnapadm.loan_installment li where install_status = 'N' group by ban, loan_seq_no) lilili
where li.ban = lilili.ban and li.loan_seq_no = lilili.loan_seq_no and li.loan_install_no = lilili.use_this_loaninstall_no
and li.ban = l.ban and li.loan_seq_no = l.loan_seq_no
and l.ban = li.ban and l.loan_seq_no = li.loan_seq_no
and ((loan_status <> 'O') or ((cancel_ind is not null) and (cancel_ind <> ' ')))
) changedate
where b.lease_number = closed_leases.loan_number and b.lease_number = changedate.loan_number)
where to_date(loan_cancelled_date,'yyyymmdd') between trunc(sysdate-7) and trunc
(sysdate-1)
group by model_nme, loan_cancelled_date
order by model_nme, loan_cancelled_date


select distinct 'alter system disconnect session ''' || sid ||  ',' || serial# || ',@' || s.inst_id || ''' immediate;'
from gv$session s join
(select distinct qcsid, inst_id from gv$px_session where  (qcsid, inst_id) in (select sid , inst_id from gv$session where username='AU063250')) p
on (p.qcsid=s.sid and p.inst_id=s.inst_id);
declare
f_exporder UTL_FILE.FILE_TYPE;
f_name varchar2(50);
f_dir varchar2(30);
f_header varchar2(4000);
first_col varchar2(30);
last_col varchar2(30);
middle_col date;
v_null varchar2(10);
begin
      f_name := 'NOME' || '.sql' ;
      f_dir := 'EXP_ORDER' ;
      f_exporder := UTL_FILE.FOPEN(f_dir,f_name,'W');
      f_header := 'insert into order_master (a,b,c) values (';
      first_col := null;
      last_col := null;
      middle_col := null;
      v_null := null;
      UTL_FILE.PUTF(f_exporder,f_header);
      UTL_FILE.PUTF(f_exporder, '''' || to_char(nvl(first_col,null)) || ''',' );
      UTL_FILE.PUTF(f_exporder, test_null(middle_col) || ',' );
      --UTL_FILE.PUTF(f_exporder, middle_col || ',' );
      UTL_FILE.PUTF(f_exporder, to_char(nvl(last_col,0)) || ');');
      UTL_FILE.FCLOSE(f_exporder);
end;
create or replace function test_null (var1 date) return varchar2
  is
    begin
      if var1 is null then
        return 'null';
      else
        return to_char (var1,'dd-mon-yyyy hh24:mi:ss');
      end if;
  end;
  declare
  -- TYPE Variables to handle output data.
    TYPE curtype IS REF CURSOR;
    TYPE t_order_master is table of varchar2(4000) index by varchar2(64);
    a_order_master t_order_master;
    j varchar2(64);
  -- Variables to handle DBMS_SQL.
    src_cur      curtype;
    curid        NUMBER;
    namevar  VARCHAR2(50);
    numvar   NUMBER;
    datevar  DATE;
    dtvar    DATE;
    desctab  DBMS_SQL.DESC_TAB;
    colcnt   NUMBER;
    colt     NUMBER;
    col_null NUMBEr;
    coltype  varchar2(100);
    dsql varchar2(1000) := 'select * from oemadm.order_master where rownum = 1';
  -- UTL_FILE variables  .
  f_exporder UTL_FILE.FILE_TYPE;
  f_name varchar2(50);
  f_dir varchar2(50);
begin
  OPEN src_cur FOR dsql;
  -- Switch from native dynamic SQL to DBMS_SQL package.
  curid := DBMS_SQL.TO_CURSOR_NUMBER(src_cur);
  DBMS_SQL.DESCRIBE_COLUMNS(curid, colcnt, desctab);
  -- Define columns.
  FOR i IN 1 .. colcnt LOOP
    IF desctab(i).col_type = 2 THEN
      DBMS_SQL.DEFINE_COLUMN(curid, i, numvar);
    ELSIF desctab(i).col_type = 12 THEN
      DBMS_SQL.DEFINE_COLUMN(curid, i, datevar);
    ELSE
      DBMS_SQL.DEFINE_COLUMN(curid, i, namevar, 50);
    END IF;
    --  UTL_FILE.PUTF(f_utl_file,desctab(i).col_name || ' ' || coltype || ' ' || to_char(col_null) || desctab(i).column_value);
  END LOOP;
  --Fetch rows with DBMS_SQL package.
  WHILE DBMS_SQL.FETCH_ROWS(curid) > 0 LOOP
    FOR i IN 1 .. colcnt LOOP
      IF (desctab(i).col_type = 1) THEN
        DBMS_SQL.COLUMN_VALUE(curid, i, namevar);
          if namevar is not null then
            --UTL_FILE.PUTF(f_utl_file,desctab(i).col_name || ' ' || namevar);
            a_order_master(to_char(desctab(i).col_name)) := '''' || namevar || '''';
          --else
            --UTL_FILE.PUTF(f_utl_file,'tomar no cu, VAR');
          end if;
      ELSIF (desctab(i).col_type = 2) THEN
        DBMS_SQL.COLUMN_VALUE(curid, i, numvar);
          if numvar is not null then
            --UTL_FILE.PUTF(f_utl_file,desctab(i).col_name || ' ' || numvar);
            a_order_master(to_char(desctab(i).col_name)) := to_char(numvar);
          --else
            -- UTL_FILE.PUTF(f_utl_file,'tomar no cu, NUM');
          end if;
      ELSIF (desctab(i).col_type = 12) THEN
        DBMS_SQL.COLUMN_VALUE(curid, i, datevar);
          if datevar is not null then
            --UTL_FILE.PUTF(f_utl_file,desctab(i).col_name || ' ' || datevar);
            a_order_master(to_char(desctab(i).col_name)) := 'to_date(' || '''' || to_char(datevar,'dd-mon-yyyy hh24:mi:ss') || ''',''dd-mon-yyyy hh24:mi:ss'')';
         --else
            --UTL_FILE.PUTF(f_utl_file,'tomar no cu, DT');
          end if;
      END IF;
    END LOOP;
  END LOOP;
  DBMS_SQL.CLOSE_CURSOR(curid);
  -- Output Associative Array a_order_master .
  f_name := 'nome.sql' ;
  f_dir := 'EXP_ORDER' ;
  f_exporder := UTL_FILE.FOPEN(f_dir,f_name,'W',32767);
  j := a_order_master.FIRST;  -- Get first element of array
  UTL_FILE.PUTF(f_exporder,'insert into oemadm.order_master(' || upper(j));
  --WHILE j IS NOT NULL LOOP
  LOOP
    j := a_order_master.NEXT(j);  -- Get next element of array
  EXIT WHEN J is null;
    UTL_FILE.PUTF(f_exporder, chr(10));
    UTL_FILE.PUTF(f_exporder, chr(9));
    UTL_FILE.PUTF(f_exporder, ',' || upper(j) );
    --UTL_FILE.PUTF(f_utl_file,'Value of column ' || j || ' is ' || a_order_master(j));
   END LOOP;
  j := a_order_master.FIRST;  -- Get first element of array AGAIN
  UTL_FILE.PUTF(f_exporder,')');
  UTL_FILE.PUTF(f_exporder, chr(10));
  UTL_FILE.PUTF(f_exporder, chr(9));
  UTL_FILE.PUTF(f_exporder, chr(9));
  UTL_FILE.PUTF(f_exporder, chr(9));
  UTL_FILE.PUTF(f_exporder, ' values (' );
  UTL_FILE.PUTF(f_exporder, chr(10));
  UTL_FILE.PUTF(f_exporder, chr(9));
  UTL_FILE.PUTF(f_exporder, a_order_master(j));
  --WHILE j IS NOT NULL LOOP
  LOOP
    j := a_order_master.NEXT(j);  -- Get next element of array
  EXIT WHEN j is null;
    UTL_FILE.PUTF(f_exporder, chr(10));
    UTL_FILE.PUTF(f_exporder, chr(9));
    UTL_FILE.PUTF(f_exporder, ',' || a_order_master(j) );
   -- UTL_FILE.PUTF(f_utl_file,',' || a_order_master(j));
  END LOOP;
  UTL_FILE.PUTF(f_exporder, chr(10));
  UTL_FILE.PUTF(f_exporder, chr(9));
  UTL_FILE.PUTF(f_exporder, chr(9));
  UTL_FILE.PUTF(f_exporder, chr(9));
  UTL_FILE.PUTF(f_exporder,');');
  UTL_FILE.FCLOSE(f_exporder);
end;
/
allocate channel c8 device type disk FORMAT '/oracle/g01/bkup01/NRMOS101/hotbkup_2018-01-29-15-59-47_NRMOR101/';
select owner, segment_name, sum(bytes)/1048576 as total_mb from dba_segments where owner='NXTAPPO' and segment_name IN ('BILLING_ACCOUNT','MEMO') group by owner, segment_name
union all
select owner, segment_name, sum(bytes)/1048576 from dba_segments where owner='NXTSECO' and segment_name IN ('USERS') group by owner, segment_name
/
,to_char(substrb(dump(min("LN_AGE_BKT_1_30"),16,0,
32),1,120)),to_char(substrb(dump(max("LN_AGE_BKT_1_30"),16,0,32),1,120)),to_char
(count("LN_AGE_BKT_31_60")),to_char(substrb(dump(min("LN_AGE_BKT_31_60"),16,0,32
),1,120)),to_char(substrb(dump(max("LN_AGE_BKT_31_60"),16,0,32),1,120)),to_char(
count("LN_AGE_BKT_61_90")),to_char(substrb(dump(min("LN_AGE_BKT_61_90"),16,0,32)
,1,120)),to_char(substrb(dump(max("LN_AGE_BKT_61_90"),16,0,32),1,120)),to_char(c
ount("LN_AGE_BKT_91_PLS")),to_char(substrb(dump(min("LN_AGE_BKT_91_PLS"),16,0,32
),1,120)),to_char(substrb(dump(max("LN_AGE_BKT_91_PLS"),16,0,32),1,120)),to_char
(count("LN_DEBT_AGE_REF_DT")),to_char(substrb(dump(min("LN_DEBT_AGE_REF_DT"),16,
0,32),1,120)),to_char(substrb(dump(max("LN_DEBT_AGE_REF_DT"),16,0,32),1,120)),to
_char(count("LN_CRE_BKT_PNDG")),to_char(substrb(dump(min("LN_CRE_BKT_PNDG"),16,0
,32),1,120)),to_char(substrb(dump(max("LN_CRE_BKT_PNDG"),16,0,32),1,120)),to_cha
r(count("LN_CRE_BKT_1MNTH")),to_char(substrb(dump(min("LN_CRE_BKT_1MNTH"),16,0,3
2),1,120)),to_char(substrb(dump(max("LN_CRE_BKT_1MNTH"),16,0,32),1,120)),to_char
(count("LN_CRE_BKT_2MNTH")),to_char(substrb(dump(min("LN_CRE_BKT_2MNTH"),16,0,32
),1,120)),to_char(substrb(dump(max("LN_CRE_BKT_2MNTH"),16,0,32),1,120)),to_char(
count("LN_CRE_BKT_3MNTH")),to_char(substrb(dump(min("LN_CRE_BKT_3MNTH"),16,0,32)
,1,120)),to_char(substrb(dump(max("LN_CRE_BKT_3MNTH"),16,0,32),1,120)),to_char(c
ount("LN_CRE_BKT_4MNTH")),to_char(substrb(dump(min("LN_CRE_BKT_4MNTH"),16,0,32),
1,120)),to_char(substrb(dump(max("LN_CRE_BKT_4MNTH"),16,0,32),1,120)),to_char(co
unt("LN_CRE_BKT_5MNTH")),to_char(substrb(dump(min("LN_CRE_BKT_5MNTH"),16,0,32),1
,120)),to_char(substrb(dump(max("LN_CRE_BKT_5MNTH"),16,0,32),1,120)),to_char(cou
nt("CSA")),to_char(substrb(dump(min("CSA"),16,0,32),1,120)),to_char(substrb(dump
(max("CSA"),16,0,32),1,120)),to_char(count("INV_TYPE")),to_char(substrb(dump(min
("INV_TYPE"),16,0,32),1,120)),to_char(substrb(dump(max("INV_TYPE"),16,0,32),1,12
0)),to_char(count("LOAN_SEQ_NO")),to_char(substrb(dump(min("LOAN_SEQ_NO"),16,0,3
2),1,120)),to_char(substrb(dump(max("LOAN_SEQ_NO"),16,0,32),1,120)),to_char(coun
t("BAN")),to_char(substrb(dump(min("BAN"),16,0,32),1,120)),to_char(substrb(dump(
max("BAN"),16,0,32),1,120)),to_char(count("SUB_MARKET")),to_char(substrb(dump(mi
n("SUB_MARKET"),16,0,32),1,120)),to_char(substrb(dump(max("SUB_MARKET"),16,0,32)
,1,120)),to_char(count("ACTV_DATE")),to_char(substrb(dump(min("ACTV_DATE"),16,0,
32),1,120)),to_char(substrb(dump(max("ACTV_DATE"),16,0,32),1,120)),to_char(count
("SYS_CREATION_DATE")),to_char(substrb(dump(min("SYS_CREATION_DATE"),16,0,32),1,
120)),to_char(substrb(dump(max("SYS_CREATION_DATE"),16,0,32),1,120)),to_char(cou
nt("SYS_UPDATE_DATE")),to_char(substrb(dump(min("SYS_UPDATE_DATE"),16,0,32),1,12
0)),to_char(substrb(dump(max("SYS_UPDATE_DATE"),16,0,32),1,120)),to_char(count("
OPERATOR_ID")),to_char(substrb(dump(min("OPERATOR_ID"),16,0,32),1,120)),to_char(
substrb(dump(max("OPERATOR_ID"),16,0,32),1,120)),to_char(count("APPLICATION_ID")
),to_char(substrb(dump(min("APPLICATION_ID"),16,0,32),1,120)),to_char(substrb(du
mp(max("APPLICATION_ID"),16,0,32),1,120)),to_char(count("DL_SERVICE_CODE")),to_c
har(substrb(dump(min("DL_SERVICE_CODE"),16,0,32),1,120)),to_char(substrb(dump(ma
x("DL_SERVICE_CODE"),16,0,32),1,120)),to_char(count("DL_UPDATE_STAMP")),to_char(
substrb(dump(min("DL_UPDATE_STAMP"),16,0,32),1,120)),to_char(substrb(dump(max("D
L_UPDATE_STAMP"),16,0,32),1,120)),to_char(count("ACTV_TYPE")),to_char(substrb(du
mp(min("ACTV_TYPE"),16,0,32),1,120)),to_char(substrb(dump(max("ACTV_TYPE"),16,0,
32),1,120)),to_char(count("AR_BALANCE")),to_char(substrb(dump(min("AR_BALANCE"),
16,0,32),1,120)),to_char(substrb(dump(max("AR_BALANCE"),16,0,32),1,120)),to_char
(count("AGE_BUCKET_0")),to_char(substrb(dump(min("AGE_BUCKET_0"),16,0,32),1,120)
),to_char(substrb(dump(max("AGE_BUCKET_0"),16,0,32),1,120)),to_char(count("AGE_B
UCKET_1_30")),to_char(substrb(dump(min("AGE_BUCKET_1_30"),16,0,32),1,120)),to_ch
ar(substrb(dump(max("AGE_BUCKET_1_30"),16,0,32),1,120)),to_char(count("AGE_BUCKE
T_31_60")),to_char(substrb(dump(min("AGE_BUCKET_31_60"),16,0,32),1,120)),to_char
(substrb(dump(max("AGE_BUCKET_31_60"),16,0,32),1,120)),to_char(count("AGE_BUCKET
_61_90")),to_char(substrb(dump(min("AGE_BUCKET_61_90"),16,0,32),1,120)),to_char(
substrb(dump(max("AGE_BUCKET_61_90"),16,0,32),1,120)),to_char(count("AGE_BUCKET_
91_PLUS")),to_char(substrb(dump(min("AGE_BUCKET_91_PLUS"),16,0,32),1,120)),to_ch
ar(substrb(dump(max("AGE_BUCKET_91_PLUS"),16,0,32),1,120)),to_char(count("DEBT_A
GE_REF_DATE")),to_char(substrb(dump(min("DEBT_AGE_REF_DATE"),16,0,32),1,120)),to
_char(substrb(dump(max("DEBT_AGE_REF_DATE"),16,0,32),1,120)),to_char(count("AR_W
O_IND")),to_char(substrb(dump(min("AR_WO_IND"),16,0,32),1,120)),to_char(substrb(
dump(max("AR_WO_IND"),16,0,32),1,120)),to_char(count("CRE_AGE_BCKT_PENDING")),to
_char(substrb(dump(min("CRE_AGE_BCKT_PENDING"),16,0,32),1,120)),to_char(substrb(
dump(max("CRE_AGE_BCKT_PENDING"),16,0,32),1,120)),to_char(count("CRE_AGE_BCKT_1M
NTH")),to_char(substrb(dump(min("CRE_AGE_BCKT_1MNTH"),16,0,32),1,120)),to_char(s
ubstrb(dump(max("CRE_AGE_BCKT_1MNTH"),16,0,32),1,120)),to_char(count("CRE_AGE_BC
KT_2MNTH")),to_char(substrb(dump(min("CRE_AGE_BCKT_2MNTH"),16,0,32),1,120)),to_c
har(substrb(dump(max("CRE_AGE_BCKT_2MNTH"),16,0,32),1,120)),to_char(count("CRE_A
GE_BCKT_3MNTH")),to_char(substrb(dump(min("CRE_AGE_BCKT_3MNTH"),16,0,32),1,120))
,to_char(substrb(dump(max("CRE_AGE_BCKT_3MNTH"),16,0,32),1,120)),to_char(count("
CRE_AGE_BCKT_4MNTH")),to_char(substrb(dump(min("CRE_AGE_BCKT_4MNTH"),16,0,32),1,
120)),to_char(substrb(dump(max("CRE_AGE_BCKT_4MNTH"),16,0,32),1,120)),to_char(co
unt("CRE_AGE_BCKT_5MNTH")),to_char(substrb(dump(min("CRE_AGE_BCKT_5MNTH"),16,0,3
2),1,120)),to_char(substrb(dump(max("CRE_AGE_BCKT_5MNTH"),16,0,32),1,120)),to_ch
ar(count("PRODUCT_TYPE")),to_char(substrb(dump(min("PRODUCT_TYPE"),16,0,32),1,12
0)),to_char(substrb(dump(max("PRODUCT_TYPE"),16,0,32),1,120)) from "NXTAPPO"."AT
B_HISTORY_A" t  /* NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,N
DV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,N
IL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,N
IL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,N
DV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,N
IL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,NIL,NIL,NDV,N
IL,NIL,NDV,NIL,NIL,NDV,NIL,NIL*/
set echo on;
set tim on;
set feedback on;
alter session set ddl_lock_timeout=300;
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'MSAF', TABNAME => 'DWT_DOCTO_FISCAL', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE AUTO', DEGREE=>8, no_invalidate=>true)
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'MSAF', TABNAME => 'DWT_ITENS_MERC', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', DEGREE=>24, no_invalidate=>true)
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'MSAF', TABNAME => 'X2081_EXTENSAO_CFO', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', DEGREE=>24, no_invalidate=>true);
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'MSAF', TABNAME => 'X08_ITENS_MERC', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1',  no_invalidate=>false)
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'NXTAPPO', TABNAME => 'CUSTOMER', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', DEGREE=>24, no_invalidate=>true)
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'NXTAPPO', TABNAME => 'PHYSICAL_DEVICE', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', DEGREE=>24, no_invalidate=>true)
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'NXTAPPO', TABNAME => 'SERVICE_AGREEMENT', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', DEGREE=>24, no_invalidate=>true)
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'NXTAPPO', TABNAME => 'MEMO', PARTNAME =>'MEMO_P41', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', DEGREE=>16, no_invalidate=>false)
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'NXTAPPO', TABNAME => 'MEMO', PARTNAME =>'MEMO_P40', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', DEGREE=>16, no_invalidate=>false)
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'NXTAPPO', TABNAME => 'MEMO', PARTNAME =>'MEMO_P39', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', DEGREE=>16, no_invalidate=>false)
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'NXTAPPO', TABNAME => 'MEMO', PARTNAME =>'MEMO_P38', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', DEGREE=>16, no_invalidate=>false)
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'NXTAPPO', TABNAME => 'MEMO', PARTNAME =>'MEMO_P37', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', DEGREE=>16, no_invalidate=>false)
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'NXTAPPO', TABNAME => 'MEMO', PARTNAME =>'MEMO_P36', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', DEGREE=>16, no_invalidate=>false)
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'NXTAPPO', TABNAME => 'MEMO', PARTNAME =>'MEMO_P35', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', DEGREE=>16, no_invalidate=>false);
/
exit;
select sid, serial#, username, sql_id, last_call_et, event from gv$session
where (sid, inst_id) in (select sid, inst_id from gv$px_session where qcsid='3571');
create or replace procedure main_code(okey IN oemadm.order_master.ORDER_KEY%type)
    as
      -- Table variables.
      v_owner varchar2(100) ;
      v_table varchar2(100) ;
      -- query
      dsql varchar2(4000) ;
      -- get tables
      cursor c_tbl_list is select * from tbl_list order by level;
      v_tbl_list c_tbl_list%rowtype;
      v_ext_table t_extracted_table;
      --write to file.
      v_oname oemadm.order_master.ORDER_KEY%type := okey;
    begin
      v_owner := 'OEMADM';
      v_table := 'ORDER_MASTER';
      dsql := 'select * from ' || v_owner || '.' || v_table || ' where order_key = ''' || v_oname || '''';
      OPEN src_cur FOR dsql;
        if src_cur%FOUND then
          --UTL_FILE.PUTF(f_utl_file,'Extracting table:' || v_owner || '.' || v_table || ';');
          v_text := '-- Writing content of table ' || v_owner || '.' || v_table || ' .';
          v_ext_table := extorders.extract_data(src_cur);
          if v_table = 'ORDER_MASTER' then
            output_data(v_text,v_owner,v_table,v_ext_table, v_oname, 'W');
          else
            output_data(v_text,v_owner,v_table,v_ext_table, v_oname, 'A');
          end if;
        else
          --UTL_FILE.PUTF(f_utl_file,'NOT  FOUND');
          if v_table = 'ORDER_MASTER' then
            raise no_order_found;
          else
            v_text := '-- Nothing to write for table ' || v_owner || '.' || v_table || ' .';
            v_ext_table(t1) := 'empty';
            output_data(v_text,v_owner,v_table,v_ext_table, v_fname, 'A');
          end if;
        end if;
      CLOSE src_cur;
      EXCEPTION
        WHEN no_order_found then
          UTL_FILE.PUTF(f_utl_file,'No orders found to have that order key#');
    end main_code;
    SELECT seg.begin_interval_time
      ,seg.end_interval_time
      ,o.object_type
      ,o.object_name
      ,o.subobject_name
      ,seg.db_block_changes_delta
FROM  (
SELECT * FROM (
SELECT seg.snap_id
      ,seg.dataobj#
      ,ss.begin_interval_time
      ,ss.end_interval_time
      ,seg.db_block_changes_delta
FROM  dba_hist_seg_stat seg
JOIN  dba_hist_snapshot ss
  ON  seg.snap_id = ss.snap_id
WHERE  ss.begin_interval_time >= TRUNC(SYSDATE)
AND    ss.end_interval_time <= TRUNC(SYSDATE)+INTERVAL'4'HOUR
ORDER BY seg.db_block_changes_delta DESC
      )
--WHERE  rownum <=15
      ) seg
JOIN  dba_objects o
  ON  seg.dataobj# = o.data_object_id
  where o.object_name in ('MANAGE_CART')
ORDER BY db_block_changes_delta;
select to_char(sysdate,'yyyy-mm-dd hh24:mi') collect_time, t.table_owner, t.table_name, t.inserts, t.updates, t.deletes
from (select table_owner,table_name,sum(inserts) inserts,sum(updates) updates,sum(deletes) deletes
from dba_tab_modifications
where table_name in (
'MANAGE_CART'
,'DCM_REQ_RES_INFO'
,'OVM_REQ_RES_INFO'
,'OVM_REQ_RES_INFO'
,'DCM_REQ_RES_INFO')
group by table_owner,table_name) t
order by t.table_name
/
col segment_name for a31
select owner, segment_name, sum(bytes)/1048576
from dba_segments
where tablespace_name like 'ENC%'
group by owner, segment_name
order by 3;
select INST_ID, OPERATION, STATE, POWER, SOFAR, EST_WORK, EST_RATE, EST_MINUTES from GV$ASM_OPERATION;
select /* no_merge */ OWNER, OBJECT_NAME, OBJECT_TYPE, statistic_name, sum(VALUE)
from gv$segment_statistics
where statistic_name in
('logical reads',
'physical reads',
'physical writes',
'physical writes direct',
'db block changes')
and
(owner, object_name) in (select owner, segment_name
                          from dba_segments
                          where tablespace_name like 'ENC%'
                          group by owner, segment_name)
group by OWNER, OBJECT_NAME, OBJECT_TYPE, statistic_name
order by 4,5 desc;
tables=OEMADM.ORDER_MASTER,OEMADM.EXTR_ORDR_CHNL_INFO,OEMADM.SECURITY_AUTHENTICATION,OEMADM.ORDER_PROMOTIONS,OEMADM.ORDER_PROMOTION_DETAILS,
OEMADM.ORDER_PROMO_REASON_INFO,OEMADM.ORDER_MEMO,OEMADM.ORDER_AISLE_INFO,OEMADM.ORDER_LINE_DETAILS,OEMADM.PHONE_CONFIG,OEMADM.ACCESSORY_CONFIG,
OEMADM.ORDER_LINE_OFFER_INFO,OEMADM.ORDER_LINE_SOC,OEMADM.ORDER_LINE_SOC_FEATURES,OEMADM.FEATURE_PARAM_DATA,OEMADM.PORT_IN_BILLING_INFO,
OEMADM.PORT_ELIGIBILITY_RESPONSE,OEMADM.ORDER_LINE_PORT_IN_DATA,OEMADM.ORDER_AUDIT_CHECK,OEMADM.ORDER_FOLLOWUP,OEMADM.ORDER_AISLE_PARAMETER,
OEMADM.CLOSING_TOOL_TRANSACTION_INFO,OEMADM.BUYBACK_DEVICE_INFO,OEMADM.SIEBEL_OFFER_INFO,OEMADM.ORDER_STORE_APPT_INFO,OEMADM.ORDER_LINE_APPT_INFO,
OEMADM.ORDER_IB_INFO,OEMADM.ORDER_DISCOUNT_INFO,OEMADM.ORDER_GIVEBACK_DEVICE_INFO,OEMADM.ORDER_DISCOUNT_QA,OEMADM.ORDER_RMA_INFO,
OEMADM.ORDER_APPT_INFO,OEMADM.ORDER_TRADE_IN_DEVICE_INFO,OEMADM.ORDER_TRADE_IN_DEVICE_QA,OEMADM.ORDER_FRAUDCHECK_CONDITIONS,OEMADM.ORDER_FRAUD_CONDITIONS
query="where order_key in ('oy-shso-850523494','or-bynr-850519347','ob-brbm-850550175','ob-brbm-850558690','ob-brbm-850550578','o9-qugn-850815597',
'o9-qugn-850815597','o9-qugn-850815641','o9-qugn-850815665','o9-qugn-850815640','o9-qugn-850815664','o9-qugn-850815595','o9-qugn-850815596','o9-qugn-850815638',
'o9-qugn-850815662','ek-icga-850815661','oy-shso-850815449','o9-qugn-850476717','o9-qugn-850476718','ob-brbm-850476719','or-bynr-850476359','o9-qugn-850476670',
'o9-qugn-850476721','o9-qugn-850476722','ek-icga-850476671','ek-icga-850476755','o9-qugn-850476723','o9-qugn-850476754')"
exec extorders.main_code('o9-qugn-850476721');
insert into OEMADM.ORDER_LINE_SOC
 (
        DATA_GID,DISCOUNT_PLAN_NAME,EFFECTIVE_DATE,EXPIRATION_DATE,
        FOURG_QTY,GROUP_ID,GROUP_SHARING_QUANTITY,
        GROUP_TYPE,HYBRID_TYPE,
        LTS_RANK,ORDER_KEY,ORDER_LINE_DETAILS_KEY,
        PLAN_NAME_SPANISH,PLAN_SHARING_QUANTITY,
        PROMO_DURATION,SOC_DESC,SOC_ELIGIBILITY_VERIFIED_CD,
        SOC_PRICE,SOC_SEQ_NO,SOTS_ORDER_KEY_ID,
        SOTS_SUB_LINE_SEQ_NUMBER,THREEG4G_QTY,
        THREEG_QTY,UNIT,VOICE_GID,VOICE_QTY
)
values
(
        null,null,to_date('21-jan-2018 00:00:00','dd-mon-yyyy hh24:mi:ss'),null,null,null,null,null,null,null,'o9-qugn-850476721',1,null,null,null,'$3 Boos  t Premium Caller ID',null,3,null,null,null,null,null,null,null,null
);
select grant inse
exclude=TABLE_STATISTICS
exclude=INDEX
exclude=CONSTRAINT
exclude=REFCONSTRAINT
exclude=
remap_tablespace=WDATA30:OVM_DATA
remap_tablespace=WDATA27:OVM_DATA
remap_tablespace=WDATA22:OVM_DATA
remap_tablespace=WDATA17:OVM_DATA
remap_tablespace=WDATA16:OVM_DATA
remap_tablespace=WDATA13:OVM_DATA
remap_tablespace=WDATA11:OVM_DATA
remap_tablespace=WDATA09:OVM_DATA
remap_tablespace=WDATA08:OVM_DATA
remap_tablespace=WDATA06:OVM_DATA
remap_tablespace=WDATA05:OVM_DATA
remap_tablespace=WDATA04:OVM_DATA
remap_tablespace=WDATA03:OVM_DATA
remap_tablespace=WDATA02:OVM_DATA
remap_tablespace=WDATA01:OVM_DATA
remap_tablespace=LWDATA02_SSD:OVM_DATA
remap_tablespace=:OVM_DATA
select distinct DATA_TYPE
from dba_tab_columns
where TABLE_NAME in
(
  select tab from ext_oemadm.tbl_list
  )
/
select TABLE_NAME, COLUMN_NAME , DATA_LENGTH, DATA_TYPE from dba_tab_columns
where TABLE_NAME
in
(
  select tab from ext_oemadm.tbl_list
  )
and DATA_TYPE = 'BLOB';
select owner, segment_name, segment_type, sum(bytes)/1048576 as total_mb
from dba_segments
where tablespace_name like 'ENC%'
group by owner, segment_name, segment_type
order by 4;
PROD_WDM_REDEF_Step5_ngs.sql
PROD_WDM_REDEF_Step5_1.sql
PROD_WDM_REDEF_Step5_2.sql
start_redef_ngs.sql
start_redef_ovm1.sql
start_redef_ovm2.sql
ind_cons_ovmadm.sql
ind_cons_ovmarch.sql
ovmadm_ovm_req_res_info_stg.sql
ovmadm_dcm_req_res_info_stg.sql
create_tbs.sql
validate_tbs_is_empty.sql
Hello Alexander -
Ok fine, keep us update the statu s
Regards,
Rajesh
Oracle Customer Support
ALEXANDER.BUFALOL@SPRINT.COM  - 5+ hours ago    [Update from Customer]
Hi Rajesh,
we are planning to do it in 4 days because some of the tables are really big, so are their indexes and we want to cause least impact to application users.
This is a 3 nodes rac used by several apps.
Thanks
  Oracle Support  - Thursday    [ODM Action Plan]
Hello Alexander -
Thanks for the updte,
Yes plan it looks good, not understand why the activity is spread over 4 days
Regards,
Rajesh
Oracle Customer Support
  Oracle Support  - Thursday    [ODM Issue Verification]
This REDEF change will be over a minimum of four days:
o Friday, Feb 16 – Begin the copy of the tables using Oracle’s redefinition process – 2:00 AM
 Create the new table – (_STG suffix)
 Start the Redef : EXEC DBMS_REDEFINITION.START_REDEF_TABLE('OVMADM','OVM_REQ_RES_INFO','OVM_REQ_RES_INFO_STG'); - nohup
 After the START REDEF completes, we can set up a cron job to Synch Interim table periodically: EXEC DBMS_REDEFINITION.SYNC_INTERIM_TABLE('OVMADM','OVM_REQ_RES_INFO','OVM_REQ_RES_INFO_STG');
o Saturday, Feb 17 – Build indexes
 We will run the cron job to Synch Interim throughout the day (every four hours) and a few hours prior to our window to build indexes.
 Ensure the Synch Interim job is not running and on hold (comment cron).
 Run the CREATE INDEX jobs
 Set the Cron job to Synch Interim the new table every four hours again
o Sunday, Feb 18 – Implement the change
 Ensure that the Synch process runs 2 or 3 hours prior to the outage
 The application will stop – take an outage – 2:00 AM
 We will perform a sync of the new table and Finish Redef: EXEC DBMS_REDEFINITION.FINISH_REDEF_TABLE('OVMADM','OVM_REQ_RES_INFO','OVM_REQ_RES_INFO_STG');
 We will create triggers on the new tables to keep the old tables in synch with the new tables to allow for a potential back-out
 The apps will verify the new tables.
o Monday, Feb 19 – Clean up - Could be Tuesday, Feb 20 if team is more comfortable with that (tbd)
 Drop triggers
 Drop old tables
 Drop ENC ASO tablespaces
  Oracle Support  - Thursday    [ODM Cause Determination]
DBMS_REDEFINITION uses Materialized View (MVIEW) technology in order to online redefine tables
DBMS_REDEFINITION.START_REDEF_TABLE -
* Initially instantiates the interim table as a fast refresh MVIEW
* Loads the data from the original table into the interim table
* A materialized view log is created on the original table if one does not already exist
DBMS_REDEFINITION.SYNC_INTERIM_TABLE - Performs a fast refresh on the MVIEW (original -> interim tables)
DBMS_REDEFINITION.FINISH_REDEF_TABLE - Peforms
Phase 1 - DBMS_REDEFINITION.SYNC_INTERIM_TABLE ... synchronizes (as close as possible) the original and interim tables
Phase 2 - Locks the original table such that no changes can occur during the next phase
Phase 3 - DBMS_REDEFINITION.SYNC_INTERIM_TABLE ... synchronizes (as close as possible) the original and interim tables .. this phase should not take much time as phase 3 just 'synched' the tables
Phase 4 - The interim and original table names are swapped
Phase 5 - The MVIEW is unregistered and if this was the only fast refresh on the table the MVIEW log is dropped
Phase 6 - The lock on the interim table (former original) is released
ALEXANDER.BUFALOL@SPRINT.COM  - Thursday    [Update from Customer]
Hi Oracle Support,
thanks for your input.
We've based our plan on that document.
Could you please review the plan and say that we are doing it right?
Thanks,
Alex
  Oracle Support  - Wednesday   [ODM Action Plan]
Hello Alexander -
Please refer the below note for DBMS_REDEFINITION process steps
Master Note:Overview of Online Redefinition of Tables (DBMS_REDEFINITION) ( Doc ID 1357825.1 )
Regards,
Rajesh
Oracle Customer Support
  Oracle Support  - Wednesday   [ODM Issue Clarification]
Problem Summary
---------------------------------------------------
Move tables out of ENCrypted tablespace using DBMS_REDEFINITION
  Oracle Support  - Wednesday   [ODM Action Plan]
Hello
Thank you for using My Oracle Support.
My name is Rajesh and I will be working with you via this Service Request.
I am currently reviewing/researching the situation and will update this SR or call you as soon as I have relevant information.Thank you for your patience.
Regards,
Rajesh
Oracle Customer Support
Desk Number: 91 80 4107 4851,
Shift Timings (5:00 AM to 1:30 PM PST) / (12:00 PM to 8:30 PM GMT) / (5:30 PM to 2:00 AM IST)
NOTE : To engage support outside of my shift hours, please dial your local Support Center: http://www.oracle.com/support/contact.html.
and request to repatriate to your time zone or to speak to the next available engineer.
ALEXANDER.BUFALOL@SPRINT.COM  - Wednesday   [Customer Problem Description]
Customer Problem Description
---------------------------------------------------
Problem Summary
---------------------------------------------------
Move tables out of ENCrypted tablespace using DBMS_REDEFINITION
Problem Description
---------------------------------------------------
Good Morning Oracle Support.
We are in the planning phase of a change process to move tables out of an encrypted tablespace. Our tables contain PCI data but we decided to use DBMS_CRYPT instead of TDE.
Below are the macro steps for the activity and we would like you to revise and provide your guidance, pointing out what you think needs to be corrected and suggest new approaches, if it is the case.
This REDEF change will be over a minimum of four days:
o Friday, Feb 16 – Begin the copy of the tables using Oracle’s redefinition process – 2:00 AM
 Create the new table – (_STG suffix)
 Start the Redef : EXEC DBMS_REDEFINITION.START_REDEF_TABLE('OVMADM','OVM_REQ_RES_INFO','OVM_REQ_RES_INFO_STG'); - nohup
 After the START REDEF completes, we can set up a cron job to Synch Interim table periodically: EXEC DBMS_REDEFINITION.SYNC_INTERIM_TABLE('OVMADM','OVM_REQ_RES_INFO','OVM_REQ_RES_INFO_STG');
o Saturday, Feb 17 – Build indexes
 We will run the cron job to Synch Interim throughout the day (every four hours) and a few hours prior to our window to build indexes.
 Ensure the Synch Interim job is not running and on hold (comment cron).
 Run the CREATE INDEX jobs
 Set the Cron job to Synch Interim the new table every four hours again
o Sunday, Feb 18 – Implement the change
 Ensure that the Synch process runs 2 or 3 hours prior to the outage
 The application will stop – take an outage – 2:00 AM
 We will perform a sync of the new table and Finish Redef: EXEC DBMS_REDEFINITION.FINISH_REDEF_TABLE('OVMADM','OVM_REQ_RES_INFO','OVM_REQ_RES_INFO_STG');
 We will create triggers on the new tables to keep the old tables in synch with the new tables to allow for a potential back-out
 The apps will verify the new tables.
o Monday, Feb 19 – Clean up - Could be Tuesday, Feb 20 if team is more comfortable with that (tbd)
 Drop triggers
 Drop old tables
 Drop ENC ASO tablespaces
Thanks.
Alex
Error Codes
---------------------------------------------------
Problem Category/Subcategory
---------------------------------------------------
Database Storage (Compression, Corruption, Partitioning, LOBS, Tablespaces, Files)/Database Storage: Segment and Tablespace Space Management
Uploaded Files
---------------------------------------------------
Template Question Responses
---------------------------------------------------
1) On what tablespace do you encounter the issue? (SYSTEM, SYSAUX, Temporary, UNDO or User created)
2) ### If you are receiving errors, please list the exact error messages and message text.###
3) ### Impact on Business ###
select dbms_metadata.get_ddl('TABLE','DCM_REQ_RES_INFO','OVMARCH')
from dual;
• Alex - Validate that the columns are in the same order and also have the same exact columns.
select owner, segment_name, sum(bytes)/1048576
from dba_segments
where segment_name in
('MANAGE_CART',
  'DCM_REQ_RES_INFO',
  'OVM_REQ_RES_INFO')
group by owner, segment_name
order by 3;
--Finish Redefinition
EXEC DBMS_REDEFINITION.FINISH_REDEF_TABLE('OVMADM','DCM_REQ_RES_INFO','DCM_REQ_RES_INFO_STG');
EXEC DBMS_REDEFINITION.FINISH_REDEF_TABLE('OVMADM','OVM_REQ_RES_INFO','OVM_REQ_RES_INFO_STG');
EXEC DBMS_REDEFINITION.FINISH_REDEF_TABLE('OVMARCH','OVM_REQ_RES_INFO','OVM_REQ_RES_INFO_STG');
EXEC DBMS_REDEFINITION.FINISH_REDEF_TABLE('OVMARCH','DCM_REQ_RES_INFO','DCM_REQ_RES_INFO_STG');
EXEC DBMS_REDEFINITION.FINISH_REDEF_TABLE('NGS','MANAGE_CART','MANAGE_CART_STG');
66.1.222.220
select owner, object_name, object_type, status
from dba_objects
where object_name
in ('TRS_IP_SRV_SEARCH_MV',
'TRS_IP_SRV_SEARCH_MV',
'TRS_IP_SRV_SEARCH_MV')
/
 SELECT
      CKT.OBJECT_ID CKT_OBJ_ID,
      CKT.NAME CKT_NAME,
      CKT.OBJECT_TYPE_ID CKT_OBJ_TYPE_ID,
      NUA.VALUE NUA,
      FMS_CIRCUIT_ID.VALUE FMS_CKT_ID
 FROM NC_OBJECTS CKT
 LEFT JOIN (SELECT OBJECT_ID, VALUE FROM NC_PARAMS WHERE ATTR_ID = 6031568052013834260) FMS_CIRCUIT_ID
 ON FMS_CIRCUIT_ID.OBJECT_ID = CKT.OBJECT_ID
 LEFT JOIN (SELECT OBJECT_ID, VALUE FROM NC_PARAMS WHERE ATTR_ID = 6020743004013859871) NUA
 ON NUA.OBJECT_ID = CKT.OBJECT_ID
 WHERE CKT.OBJECT_TYPE_ID IN (
 8030468815013126517,
 6051958424013094100,
 7062144747013310726,
 9124310774213842555,
 6031568052013834212,
 7052444948013339624,
 7052231890013335954
 )
/
 SELECT
      SI.OBJECT_ID SI_OBJ_ID,
      SI.NAME SI_NAME,
      H1_ID.VALUE H1_ID,
      H6_ID.VALUE H6_ID,
      CMS_ID.VALUE CMS_ID,
      NUA_SERVICE_LEVEL.VALUE NUA_SVC_LVL,
      NUA.VALUE NUA,
      FMS_CIRCUIT_ID.VALUE FMS_CKT_ID,
      CIRCUITS.ATTR_ID CKT_ATTR_ID,
      CIRCUITS.REFERENCE CKT_OBJ_ID,
      NUA_OFFNET.VALUE NUA_OFFNET,
      NUA_EVC_PE.value NUA_EVC_PE
 FROM NC_OBJECTS SI
 LEFT JOIN (SELECT OBJECT_ID, VALUE FROM NC_PARAMS WHERE ATTR_ID = 6120459774013426223) NUA_SERVICE_LEVEL
 ON NUA_SERVICE_LEVEL.OBJECT_ID = SI.OBJECT_ID
 LEFT JOIN (SELECT OBJECT_ID, VALUE FROM NC_PARAMS WHERE ATTR_ID = 9125216610713434555) NUA_OFFNET
 ON NUA_OFFNET.OBJECT_ID = SI.OBJECT_ID
 LEFT JOIN (SELECT OBJECT_ID, VALUE FROM NC_PARAMS WHERE ATTR_ID = 6030165908013011902 ) CMS_ID
 on CMS_ID.OBJECT_ID = SI.OBJECT_ID
 LEFT JOIN (SELECT OBJECT_ID, VALUE FROM NC_PARAMS WHERE ATTR_ID = 6030165908013011910 ) H6_ID
  ON H6_ID.OBJECT_ID = SI.OBJECT_ID
      JOIN (SELECT OBJECT_ID, LIST_VALUE_ID FROM NC_PARAMS WHERE ATTR_ID = 6020645459013857727
                  AND LIST_VALUE_ID in (6020645459013857726, 7012445733013432698,
  7012445733013432702, 7012445733013432701,
            7012445733013432714, 6022359050013956153,7012445733013432717, 7012445733013432700, 7012445733013432718,
            6020645459013857725, 7012445733013432716)) SI_STAT
on SI_STAT.OBJECT_ID = SI.OBJECT_ID
 LEFT JOIN (SELECT OBJECT_ID, REFERENCE FROM NC_REFERENCES WHERE ATTR_ID = 7082841895013355705) CVRF
  ON CVRF.OBJECT_ID = SI.OBJECT_ID
 LEFT JOIN (SELECT OBJECT_ID, REFERENCE FROM NC_REFERENCES WHERE ATTR_ID IN (7082841895013355671, 7082841895013355673)) EVC
 on EVC.OBJECT_ID = CVRF.REFERENCE
 LEFT JOIN (SELECT OBJECT_ID, VALUE FROM NC_PARAMS WHERE ATTR_ID = 6020743004013859871) NUA_EVC_PE
  ON NUA_EVC_PE.OBJECT_ID = EVC.REFERENCE
      JOIN (SELECT REFERENCE, OBJECT_ID FROM NC_REFERENCES WHERE ATTR_ID = 4122754473013175635) SI_TO_CUST
       ON SI_TO_CUST.OBJECT_ID = SI.OBJECT_ID
 LEFT JOIN (SELECT OBJECT_ID, VALUE FROM NC_PARAMS WHERE ATTR_ID = 6013169245013852462) H1_ID
 ON H1_ID.OBJECT_ID = SI_TO_CUST.REFERENCE
 LEFT JOIN (SELECT OBJECT_ID, REFERENCE, ATTR_ID
            FROM NC_REFERENCES
            WHERE ATTR_ID IN (6020645459013857732,6051708497013894610,6053059966013130038, 6060160326013136517,
                              7062152281013313701, 7062152281013313702, 9124389392113855796,9124467383813870097, 9124337240013847734,
                                    9127454125513286080, 9092361288013899853, 9126625085313330800,
                              9127654071313277282)) CIRCUITS ON CIRCUITS.OBJECT_ID = SI.OBJECT_ID
 LEFT JOIN (SELECT OBJECT_ID, VALUE FROM NC_PARAMS WHERE ATTR_ID = 6031568052013834260) FMS_CIRCUIT_ID
  ON FMS_CIRCUIT_ID.OBJECT_ID = CIRCUITS.REFERENCE
 LEFT JOIN (SELECT OBJECT_ID, VALUE FROM NC_PARAMS WHERE ATTR_ID = 6020743004013859871) NUA
  ON NUA.OBJECT_ID = CIRCUITS.REFERENCE
 WHERE SI.OBJECT_CLASS_ID = 2101060386013441793
 select OBJECT_NAME, owner, object_type from dba_objects where
 object_name in (
'NC_OBJECTS',
'NC_PARAMS'
  )
order by 1,2;
OWNER                          OBJECT_NAME                    OBJECT_TYPE         STATUS
------------------------------ ------------------------------ ------------------- -------
TRS_READ                       TRS_IP_SRV_SEARCH_MV           TABLE               VALID
TRS_READ                       TRS_IP_SRV_SEARCH_MV           MATERIALIZED VIEW   INVALID
select owner, OBJECT_NAME, OBJECT_TYPE, status from dba_objects where object_name in ('NC_OBJECTS','NC_PARAMS')
and object_type='SYNONYM';
select * from dba_tab_privs where owner='NETCRACKER' and table_name='NC_PARAMS' and grantee='TRS_READ'
/
         SELECT SI_OBJ_ID INTO v_search_id from TRS_IP_SRV_SEARCH_MV
         SELECT SI_OBJ_ID INTO v_search_id from TRS_IP_SRV_SEARCH_MV
         SELECT SI_OBJ_ID INTO v_search_id from TRS_IP_SRV_SEARCH_MV
col tim for a15
col process for a7
col event for a40
col machine for a15
col program for a30
col username for a15
select /* no_merge */
inst_id,
SID,
serial#,
username,
--osuser,
--machine,
--program,
process,
--blocking_session as bl,
to_char(LOGON_TIME, 'DDMM - HH24:MI') as tim,
LAST_CALL_ET/60 et_min,
--BLOCKING_SESSION,
EVENT,
WAIT_TIME,
--SECONDS_IN_WAIT,
status,
sql_id
from gv$session
where (sid, inst_id) in
(select sid, inst_id from gv$px_session where qcsid = 14640)
/
select sid, serial#, inst_id from gv$session where sid='14640';
INSERT /*+ BYPASS_RECURSIVE_CHECK APPEND SKIP_UNQ_UNUSABLE_IDX */ INTO "OVMADM"."OVM_REQ_RES_INFO_STG"("REQ_RES_ID","RETURN_URL",
  "CREATED_DT","MESSAGE_TYPE","ERROR_DESCRIPTION","PARSED_YN","PARSED_DT","ERROR_CODE","SUBSCRIBER_AGREEMENT_YN",
  "RESPONSE_DT","REQ_RES_XML","SYNCHRONOUSLY_RESPONDED_YN","ENCRYPTED_YN","RESPONSE_TIME","ERROR_SUB_NAME","REQUEST_JVM_NAME",
  "RESPONSE_JVM_NAME") SELECT "OVM_REQ_RES_INFO"."REQ_RES_ID","OVM_REQ_RES_INFO"."RETURN_URL","OVM_REQ_RES_INFO"."CREATED_DT",
"OVM_REQ_RES_INFO"."MESSAGE_TYPE","OVM_REQ_RES_INFO"."ERROR_DESCRIPTION","OVM_REQ_RES_INFO"."PARSED_YN",
"OVM_REQ_RES_INFO"."PARSED_DT","OVM_REQ_RES_INFO"."ERROR_CODE","OVM_REQ_RES_INFO"."SUBSCRIBER_AGREEMENT_YN",
"OVM_REQ_RES_INFO"."RESPONSE_DT","OVM_REQ_RES_INFO"."REQ_RES_XML","OVM_REQ_RES_INFO"."SYNCHRONOUSLY_RESPONDED_YN",
"OVM_REQ_RES_INFO"."ENCRYPTED_YN","OVM_REQ_RES_INFO"."RESPONSE_TIME","OVM_REQ_RES_INFO"."ERROR_SUB_NAME","OVM_REQ_RES_INFO".
"REQUEST_JVM_NAME","OVM_REQ_RES_INFO"."RESPONSE_JVM_NAME" FROM "OVMADM"."OVM_REQ_RES_INFO" "OVM_REQ_RES_INFO"




select * from (
select   e.sid,
d.used_ublk,
substr(a.os_user_name,1,8)    "OS User"
 , substr(a.oracle_username,1,8) "DB User"
       , substr(b.owner,1,8)  "Schema"
 , substr(b.object_name,1,20)    "Object Name"
    , substr(b.object_type,1,10)    "Type"
       , substr(c.segment_name,1,5)  "RBS"
       , substr(d.used_urec,1,12)      "# of Records"
from v$locked_object      a
     , dba_objects b
     , dba_rollback_segs  c
     , v$transaction      d
 , v$session e
where   a.object_id =  b.object_id
 and a.xidusn    =  c.segment_id
    and a.xidusn    =  d.xidusn
    and a.xidslot   =  d.xidslot
 and d.addr      =  e.taddr
 and  e.sid = '10862')
 ;
select s.sid, s.serial#, s.program, s.sql_id, s.process, s.event, s.last_call_et, p.spid
from gv$session s join gv$process p on (s.paddr = p.addr)
where s.inst_id=2 and s.sid in ('1069','4254','2012','10980','8616','8969','4966','2951') order by s.program;
[‎2/‎16/‎2018 1:55 PM]  Kudum, Dinakar [IT]:
select * from dba_segments where segment_name in ('SYS_LOB0000341472C00011$$','SYS_LOB0001846748C00011$$');
select  sid, serial#,
inst_id, blocking_session, blocking_session_status, sql_id
from gv$session
where blocking_session is not null order by 5;
select SEGMENT_NAME, OWNER, TABLESPACE_NAME, count(EXTENT_ID), sum(BYTES)/1048576, sum(BLOCKS)
from dba_extents where tablespace_name='OVM_SSD_DATA' group by SEGMENT_NAME, OWNER, TABLESPACE_NAME;
select TABLE_OWNER, TABLE_NAME, INSERTS, UPDATES, DELETES-- TIMESTAMP
from dba_tab_modifications where table_owner='SAPIENSPRD' and table_name like 'E140IPV';
EXECUTE dbms_monitor.session_trace_enable (4254, 25583, waits => TRUE, binds => TRUE);
EXECUTE dbms_monitor.session_trace_disable (4254, 25583);
select sid, event, count(*) from gv$session where sql_id='bydm1f8m4crw5' group by sid,  event order by 2;
select sum(used_urec) from (
select * from gv$transaction order by start_time asc) where rownum<7;
 SELECT s.sid, s.serial#, s.status,s.sql_id,s.username, s.osuser, p.spid, s.machine, p.terminal, s.program
 FROM gv$session s, gv$process p
 WHERE s.paddr = p.addr
 and s.sid in ('4254','2012','4966','8969','10980','8616','1069','12871','14287')
 and s.inst_id=2
 order by s.sid;
then I do
ps -ef|grep[ p017
select to_char(startup_time, 'dd-mon-yyyy hh24:mi') from v$instance;
[‎3/‎8/‎2018 1:07 PM]  Kudum, Dinakar [IT]:
 declare
 error_1578 exception;
 error_1555 exception;
 error_22922 exception;
 pragma exception_init(error_1578,-1578);
 pragma exception_init(error_1555,-1555);
 pragma exception_init(error_22922,-22922);
 n number;
 begin
 for cursor_lob in (select rowid r, &&lob_column from &table_owner..&table_with_lob where mod(REQ_RES_ID,4)=0 ) loop
 begin
 n := dbms_lob.instr (cursor_lob.&&lob_column, hextoraw ('889911')) ;
 exception
 when error_1578 then
 insert into corrupted_lob_data values (cursor_lob.r, 1578);
 commit;
 when error_1555 then
 insert into corrupted_lob_data values (cursor_lob.r, 1555);
 commit;
 when error_22922 then
 insert into corrupted_lob_data values (cursor_lob.r, 22922);
 commit;
 end;
 end loop;
 end;
 /
set echo on feedback on timing on
spool /oracle/g01/bkup02/CORRUPT_CHK/verify_lob_1st.out
declare
  error_1578 exception;
  error_1555 exception;
  error_22922 exception;
  pragma exception_init(error_1578,-1578);
  pragma exception_init(error_1555,-1555);
  pragma exception_init(error_22922,-22922);
  n number;
begin
  for cursor_lob in (select rowid r, REQ_RES_XML from OVMADM.OVM_REQ_RES_INFO where mod(REQ_RES_ID,4)=0) loop
   begin
   n := dbms_lob.instr (cursor_lob.REQ_RES_XML, hextoraw ('889911')) ;
   exception
   when error_1578 then
   insert into corrupted_lob_data values (cursor_lob.r, 1578);
   commit;
   when error_1555 then
   insert into corrupted_lob_data values (cursor_lob.r, 1555);
   commit;
   when error_22922 then
   insert into corrupted_lob_data values (cursor_lob.r, 22922);
   commit;
   end;
  end loop;
end;
/
spool off
exit;
[‎2/‎16/‎2018 5:54 PM]  Kudum, Dinakar [IT]:
$ ptree 27481
27481 sqlplus -s / as sysdba @./PROD_WDM_REDEF_Step5_2.sql
  27482 oracleWDMP1012 (DESCRIPTION=(LOCAL=YES)(ADDRESS=(PROTOCOL=beq)))
  oracle 15389 28575   0 21:10:19 ?          34:25 ora_p001_WDMP1012
  oracle 15391 28575   0 21:10:19 ?          33:59 ora_p003_WDMP1012
 oracle 15390 28575   0 21:10:19 ?          80:33 ora_p002_WDMP1012
  oracle 15387 28575   0 21:10:19 ?          34:37 ora_p000_WDMP1012
  oracle 16859 28575   0 21:45:00 ?           2:33 ora_p004_WDMP1012
  oracle 16862 28575   0 21:45:00 ?           2:23 ora_p005_WDMP1012
  oracle 16865 28575   0 21:45:00 ?           2:25 ora_p006_WDMP1012
  oracle 16884 28575   0 21:45:00 ?           2:19 ora_p007_WDMP1012
12871
exec dbms_redefinition.abort_redef_table('OVMADM','OVM_REQ_RES_INFO','OVM_REQ_RES_INFO_STG');
exec dbms_redefinition.abort_redef_table('OVMADM','DCM_REQ_RES_INFO','DCM_REQ_RES_INFO_STG');
exec dbms_redefinition.abort_redef_table('NGS','MANAGE_CART','MANAGE_CART_STG');
drop table OVMADM.OVM_REQ_RES_INFO_STG;
drop table NGS.MANAGE_CART_STG;
NIVP101
ta terminando de criar os indices
ai depois precisa rodar isso aqui
9  Import the saved stats
cd /oracle/g01/bkup01/NIVP101/import
SQL> @IMPORT_STATS.sql
    
10   NIDMP101: cd /oracle/g01/bkup01/NIVP101/import
SQL> NC_CONSTRAINTS.SQL
11   Rename the logs
./rename_logs.ksh
preab223:oracle:/oracle/g01/bkup01/NIVP101/import:NIVP1011
>  ps -ef | grep -i NC_PARAMS
  oracle 39059582        1   0 14:32:14      -  0:00 /bin/ksh ./NC_PARAMS_IDX_B.ksh
  oracle 27787694 32964858   1 15:14:19  pts/1  0:00 grep -i NC_PARAMS
  select  b.recid,
        to_char(b.first_time, 'dd-mon-yy hh:mi:ss') start_time,
        a.recid,
        to_char(a.first_time, 'dd-mon-yy hh:mi:ss') end_time,
        round(((a.first_time-b.first_time)*25)*60,2) minutes
from    v$log_history a, v$log_history b
where   a.recid = b.recid + 1
order   by a.first_time asc
/
col collect_time for a20
col t_owner for a10
select to_char(sysdate,'yyyy-mm-dd hh24:mi') collect_time, t.table_owner t_owner, t.table_name t_name, t.inserts, t.updates, t.deletes
from (select table_owner,table_name,sum(inserts) inserts,sum(updates) updates,sum(deletes) deletes
from dba_tab_modifications
where table_name in
(
'INVENTORY_ITEM'
,'ACCESSORY_CONFIG'
,'BUYBACK_DEVICE_INFO'
,'EXTR_ORDR_CHNL_INFO'
,'FRAUD_HISTORY'
,'IDENT_ADDRESS_INFO'
,'OMIM_SHIPMENT_INFO'
,'ORDER_BILLING'
,'ORDER_COMMENTS'
,'ORDER_CREDIT_CHECK_INFO'
,'ORDER_GIVEBACK_DEVICE_INFO'
,'ORDER_IB_INFO'
,'ORDER_INVOICE'
,'ORDER_LINE_DETAILS'
,'ORDER_LINE_SOC'
,'ORDER_MASTER'
,'ORDER_MEMO'
,'ORDER_PAYMENTS'
,'ORDER_PROMOTIONS'
,'ORDER_PROMOTION_DETAILS'
,'ORDER_SHIPPING'
,'ORDER_SHIPPING_LINE'
,'ORDER_STATUS_CHANGE_REASON'
,'ORDER_TRADE_IN_DEVICE_INFO'
,'PHONE_AND_ACCESSORY','PHONE_CONFIG','PREPAID_RETURN_REASONS'
,'ORDER_RMA_INFO'
,'REASON_DESC'
)
and table_owner in ('OEMARCH','OEMADM')
group by table_owner,table_name
) t
order by t.table_owner, t.table_name
/
select *
from dba_tab_modifications
where table_name in
(
'INVENTORY_ITEM','ACCESSORY_CONFIG','BUYBACK_DEVICE_INFO','EXTR_ORDR_CHNL_INFO','FRAUD_HISTORY','IDENT_ADDRESS_INFO','OMIM_SHIPMENT_INFO'
,'ORDER_BILLING','ORDER_COMMENTS','ORDER_CREDIT_CHECK_INFO','ORDER_GIVEBACK_DEVICE_INFO','ORDER_IB_INFO','ORDER_INVOICE','ORDER_LINE_DETAILS'
,'ORDER_LINE_SOC','ORDER_MASTER','ORDER_MEMO','ORDER_PAYMENTS','ORDER_PROMOTIONS','ORDER_PROMOTION_DETAILS','ORDER_SHIPPING','ORDER_SHIPPING_LINE'
,'REASON_DESC','ORDER_STATUS_CHANGE_REASON','ORDER_TRADE_IN_DEVICE_INFO','PHONE_AND_ACCESSORY','PHONE_CONFIG','ORDER_RMA_INFO','PREPAID_RETURN_REASONS',
'xandao_do_pagode'
)
group by table_owner,table_name
SELECT /*+ RULE */ D.JOB, V.SID, V.SERIAL#, STATUS, LOG_USER USERNAME, WHAT,
DECODE(TRUNC(SYSDATE - LOGON_TIME), 0, NULL,
TRUNC(SYSDATE - LOGON_TIME) || ' Days' || ' + ') ||
TO_CHAR(TO_DATE(TRUNC(MOD(SYSDATE-LOGON_TIME,1) * 86400), 'SSSSS'), 'HH24:MI:SS') RUNNING,
D.FAILURES, 'alter system kill session ' || '''' || V.SID || ', ' || V.SERIAL# || '''' || ' immediate;' KILL_SQL
FROM DBA_JOBS_RUNNING D, V$SESSION V, DBA_JOBS J
WHERE V.SID = D.SID
AND D.JOB = J.JOB
/
col event for a33
col username for a15
col elapsed_time for a18
select sid, serial#, last_call_et/60, username, job_name, sql_id, event, blocking_session , j.elapsed_time
from v$session s, dba_scheduler_running_jobs j
where s.sid = j.session_id
and job_name='RDBADM_NRM_FLUX_LTE_INFO_MV';
set lines 300
col BROKEN form a10
select JOB,LAST_DATE,LAST_SEC,THIS_DATE,THIS_SEC,NEXT_DATE,NEXT_SEC,TOTAL_TIME,BROKEN,FAILURES,WHAT from dba_jobs where job=3138;
set serveroutput on
spool /tmp/testing_proc.out
SQL> select order_key, count(*) from oemadm.order_line_details group by order_key having count(*) > 1;
ORDER_KEY                                            COUNT(*)
-------------------------------------------------- ----------
ek-icga-850815661                                           2
ek-icga-850476755                                           2
ek-icga-850476671                                           2
o9-qugn-850476721                                           3
spool WDMP_tables.csv
select owner, segment_name as tbl_name, sum(bytes)/1048576 as total_mb from dba_segments
where owner like 'CLW%' and segment_type like 'TABLE%' group by owner, segment_name order by total_mb;
spool off;
/
DECLARE
okey varchar(1000);
clobinho clob;
chunkSize   CONSTANT INTEGER := 5000;
pos NUMBER;
BEGIN
oemadm.extorders.main_code('or-trtm-229764912',clobinho);
UTL_FILE.PUTF(f_utl_file,'vai?');
UTL_FILE.PUTF(f_utl_file,clobinho);
END;
 /
 or-trtm-
 wefast_fastbg/stimpy@wdmt201
MAC_RANK_TYPE VARCHAR2(5), MAC_PERCENTAGE NUMBER(5,2), MAC_RANK_NUMBER NUMBER(17,4)0;
DECLARE
okey varchar(1000);
clobinho clob;
chunkSize   CONSTANT INTEGER := 5000;
pos NUMBER;
BEGIN
oemadm.extorders.main_code('or-trtm-229764912',clobinho);
IF LENGTH(clobinho) > chunkSize THEN
    LOOP
        Htp.prn(SUBSTR(clobinho, pos, chunkSize));
        pos := pos + chunkSize;
        EXIT WHEN pos > LENGTH(clobinho);
    END LOOP;
ELSE
    Htp.prn(clobinho);
END IF;
end;
 spool off;
 exit;
o9-qugn-850476717
o9-qugn-850476718
o9-qugn-850476721
o9-qugn-850476723
o9-qugn-850476754
o9-qugn-850476670
o9-qugn-850476722
ob-brbm-850476719
ek-icga-850476671
or-bynr-850476359
ek-icga-850476755
ob-brbm-850558690
ob-brbm-850550578
oy-shso-850523494
or-bynr-850519347
ob-brbm-850550175
ek-icga-850815661
o9-qugn-850815595
o9-qugn-850815662
o9-qugn-850815596
o9-qugn-850815664
o9-qugn-850815638
o9-qugn-850815640
o9-qugn-850815641
o9-qugn-850815597
o9-qugn-850815665
oy-shso-850815449
o9-qugn-850476721
o9-qugn-850476721

DECLARE
v_nome varchar2(30);
csql number;
v_exec varchar2(4000);
BEGIN
v_nome := 'DBA_OBJECTS';
v_exec := 'select count(*) from ' || v_nome;
execute immediate v_exec into csql ;
UTL_FILE.PUTF(f_utl_file,csql);
END;
/

select 13 from oemadm.PORT_IN_BILLING_INFO
where PORT_IN_BILLING_INFO_ID in ( select PORT_IN_BILLING_INFO_ID from oemadm.ORDER_LINE_PORT_IN_DATA where ORDER_KEY = 'ob-brbm-850476719');
  CREATE OR REPLACE PROCEDURE nclob_example
 AS
   clobVariable CLOB := 'It is the east and Juliet is the sun';
   nclobVariable NCLOB;
 BEGIN
   INSERT INTO nmyTable (id, nclobData) VALUES (1, clobVariable);
    SELECT nclobData INTO clobVariable FROM nmyTable WHERE id = 1;
    UTL_FILE.PUTF(f_utl_file,'clobVariable = ' || clobVariable);
 END nclob_example;
 /
  CREATE TABLE "EXT_OEMADM"."TBL_LIST"
   (    "TAB" VARCHAR2(50),
        "LVL" NUMBER
   ) SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "WDATA10"
/
select owner, constraint_name, table_name, r_constraint_name from dba_constraints
where constraint_name='ORDER_PROMOTION_DETAILS_FK1';
select owner, constraint_name, table_name, r_constraint_name from dba_constraints
where constraint_name='ORDER_LINE_DETAILS_PK';
insert into OEMADM.ORDER_PROMOTION_DETAILS ( ACCUMULATED_APPLIED_AMT,ACTIVE_YN,ACTIVITY_CODE,ACTUAL_ADJUSTMENT_AMOUNT,
  ACTUAL_TOTAL,ACTUAL_TOTAL_TAX,ADDITIONAL_DESC,ADDITIONAL_PROMO_TYPE,ADJUSTMENT_SEQ_NUM,ADJ_CHARGE_CODE,AMOUNT,AMOUNT_OVERRIDE_YN,
  APPLIED_COUNT,BXGX_TRX_ID,CHARGE_CODE,CHARGE_SEQ_NUM,CHARGE_TYPE,CREATION_DATE,DURATION,DURATION_OVERRIDE_YN,EFFECTIVE_DATE,
  EXPIRATION_DATE,LINK_TYPE,LOAN_LEASE_NBR,LOAN_SEQUENCE_NBR,MAC_PERCENTAGE,MAC_RANK_NUMBER,MAC_RANK_TYPE,MAX_LIFETIME_CREDIT_AMT,
  NODE_ID,ORDER_KEY,ORDER_LINE_DETAILS_KEY,PROMOTION_ID,PROMO_ELIGIBILITY_CODE,PROMO_SOURCE,PROMO_TEXT,QUANTITY,REMOVE_EXP_YN,STATUS,
  UPDATE_DATE,UPGRADE_NOW_PROGRAM_YN )
values ( null,null,null,null,null,null,null,null,null,null,30,null,null,null,'36HUP',null,'CHARGE',
  to_date('28-feb-2018 09:48:19','dd-mon-yyyy hh24:mi:Ss'),null,null,null,null,null,null,null,null,null,null,null,null,
  'oy-shso-103177664',1,1,null,null,null,1,null,null,to_date('28-feb-2018 09:48:19','dd-mon-yyyy hh24:mi:Ss'),null )
Error report - SQL Error: ORA-02291: integrity constraint (OEMADM.ORDER_PROMOTION_DETAILS_FK1) violated - parent key not found 02291.
00000 - "integrity constraint (%s.%s) violated - parent key not found" *Cause: A foreign key value has no matching primary key value. *Action: Delete the foreign key or add a matching primary key. Bind Variable "47" is NOT DECLARED 0 rows inserted. 
insert into tbl_list values ('ORDER_MASTER',2);
insert into tbl_list values ('EXTR_ORDR_CHNL_INFO', 3);
insert into tbl_list values ('SECURITY_AUTHENTICATION', 4);
insert into tbl_list values ('ORDER_PROMOTIONS',  5);
insert into tbl_list values ('ORDER_PROMOTION_DETAILS', 6);
insert into tbl_list values ('ORDER_PROMO_REASON_INFO', 7);
insert into tbl_list values ('ORDER_MEMO',  8);
insert into tbl_list values ('ORDER_AISLE_INFO',  9);
insert into tbl_list values ('ORDER_LINE_DETAILS',  10);
insert into tbl_list values ('PHONE_CONFIG',  11);
insert into tbl_list values ('ACCESSORY_CONFIG',  12);
insert into tbl_list values ('ORDER_LINE_OFFER_INFO', 13);
insert into tbl_list values ('ORDER_LINE_SOC',  14);
insert into tbl_list values ('ORDER_LINE_SOC_FEATURES', 15);
insert into tbl_list values ('FEATURE_PARAM_DATA',  16);
insert into tbl_list values ('PORT_IN_BILLING_INFO',  17);
insert into tbl_list values ('PORT_ELIGIBILITY_RESPONSE', 18);
insert into tbl_list values ('ORDER_LINE_PORT_IN_DATA', 19);
insert into tbl_list values ('ORDER_AUDIT_CHECK', 20);
insert into tbl_list values ('ORDER_FOLLOWUP',  21);
insert into tbl_list values ('ORDER_AISLE_PARAMETER', 22);
insert into tbl_list values ('CLOSING_TOOL_TRANSACTION_INFO', 23);
insert into tbl_list values ('BUYBACK_DEVICE_INFO', 24);
insert into tbl_list values ('SIEBEL_OFFER_INFO', 25);
insert into tbl_list values ('ORDER_STORE_APPT_INFO', 26);
insert into tbl_list values ('ORDER_LINE_APPT_INFO', 27);
insert into tbl_list values ('ORDER_IB_INFO', 28);
insert into tbl_list values ('ORDER_DISCOUNT_INFO', 29);
insert into tbl_list values ('ORDER_GIVEBACK_DEVICE_INFO',  30);
insert into tbl_list values ('ORDER_DISCOUNT_QA', 31);
insert into tbl_list values ('ORDER_RMA_INFO',  32);
insert into tbl_list values ('ORDER_APPT_INFO', 33);
insert into tbl_list values ('ORDER_TRADE_IN_DEVICE_INFO',  34);
insert into tbl_list values ('ORDER_TRADE_IN_DEVICE_QA',  35);
insert into tbl_list values ('ORDER_FRAUDCHECK_CONDITIONS', 36);
insert into tbl_list values ('ORDER_FRAUD_CONDITIONS',  37);
insert into tbl_list values ('IDENT_ADDRESS_INFO',  1000);
commit;
dsql = 'select * from IDENT_ADDRESS_INFO where IDENT_ADDR_INFO_ID in( select CONTACT_ADDR_INFO_ID from ORDER_MASTER where ORDER_KEY = ' || okey || -
  ' union select BILLING_ADDR_INFO_ID from ORDER_BILLING where ORDER_KEY = ' || okey || -
  ' union select PAYER_ADDR_INFO_ID from ORDER_PAYMENTS where ORDER_KEY = ' || okey || -
  ' union select CREDIT_CHECK_ADDR_INFO_ID from ORDER_CREDIT_CHECK_INFO where ORDER_KEY = ' || okey || -
  ' union select SHIPPING_ADDR_INFO_ID from ORDER_SHIPPING where ORDER_KEY = ' || okey || -
  ' union select PI.PORT_IN_REQSTR_INFO_ID from ORDER_LINE_PORT_IN_DATA OLPD, PORT_IN_BILLING_INFO PI -
  where OLPD.PORT_IN_BILLING_INFO_ID = PI.PORT_IN_BILLING_INFO_ID and OLPD.ORDER_KEY = ' || okey || -
  ' union  select SUB_IDENT_ADDR_INFO_ID from PHONE_CONFIG where ORDER_KEY = ' || okey || --
  ' union select SUB_IDENT_INFO_ID from PHONE_CONFIG where ORDER_KEY = ' || okey || -
  ' union select STORE_ADDR_INFO_ID from ORDER_STORE_APPT_INFO where ORDER_KEY = ' || okey || ')';
tsql = 'select ''YEAH'' from IDENT_ADDRESS_INFO where IDENT_ADDR_INFO_ID in( select CONTACT_ADDR_INFO_ID from ORDER_MASTER where ORDER_KEY = ' || okey || -
  ' union select BILLING_ADDR_INFO_ID from ORDER_BILLING where ORDER_KEY = ' || okey || -
  ' union select PAYER_ADDR_INFO_ID from ORDER_PAYMENTS where ORDER_KEY = ' || okey || -
  ' union select CREDIT_CHECK_ADDR_INFO_ID from ORDER_CREDIT_CHECK_INFO where ORDER_KEY = ' || okey || -
  ' union select SHIPPING_ADDR_INFO_ID from ORDER_SHIPPING where ORDER_KEY = ' || okey || -
  ' union select PI.PORT_IN_REQSTR_INFO_ID from ORDER_LINE_PORT_IN_DATA OLPD, PORT_IN_BILLING_INFO PI -
  where OLPD.PORT_IN_BILLING_INFO_ID = PI.PORT_IN_BILLING_INFO_ID and OLPD.ORDER_KEY = ' || okey || -
  ' union  select SUB_IDENT_ADDR_INFO_ID from PHONE_CONFIG where ORDER_KEY = ' || okey || --
  ' union select SUB_IDENT_INFO_ID from PHONE_CONFIG where ORDER_KEY = ' || okey || -
  ' union select STORE_ADDR_INFO_ID from ORDER_STORE_APPT_INFO where ORDER_KEY = ' || okey || ')';
tables=OEMADM.ORDER_MASTER,OEMADM.EXTR_ORDR_CHNL_INFO,OEMADM.SECURITY_AUTHENTICATION,OEMADM.ORDER_PROMOTIONS,OEMADM.ORDER_PROMOTION_DETAILS,
OEMADM.ORDER_PROMO_REASON_INFO,OEMADM.ORDER_MEMO,OEMADM.ORDER_AISLE_INFO,OEMADM.ORDER_LINE_DETAILS,OEMADM.PHONE_CONFIG,OEMADM.ACCESSORY_CONFIG,
OEMADM.ORDER_LINE_OFFER_INFO,OEMADM.ORDER_LINE_SOC,OEMADM.ORDER_LINE_SOC_FEATURES,OEMADM.FEATURE_PARAM_DATA,OEMADM.PORT_IN_BILLING_INFO,
OEMADM.PORT_ELIGIBILITY_RESPONSE,OEMADM.ORDER_LINE_PORT_IN_DATA,OEMADM.ORDER_AUDIT_CHECK,OEMADM.ORDER_FOLLOWUP,OEMADM.ORDER_AISLE_PARAMETER,
OEMADM.CLOSING_TOOL_TRANSACTION_INFO,OEMADM.BUYBACK_DEVICE_INFO,OEMADM.SIEBEL_OFFER_INFO,OEMADM.ORDER_STORE_APPT_INFO,OEMADM.ORDER_LINE_APPT_INFO,
OEMADM.ORDER_IB_INFO,OEMADM.ORDER_DISCOUNT_INFO,OEMADM.ORDER_GIVEBACK_DEVICE_INFO,OEMADM.ORDER_DISCOUNT_QA,OEMADM.ORDER_RMA_INFO,
OEMADM.ORDER_APPT_INFO,OEMADM.ORDER_TRADE_IN_DEVICE_INFO,OEMADM.ORDER_TRADE_IN_DEVICE_QA,OEMADM.ORDER_FRAUDCHECK_CONDITIONS,OEMADM.ORDER_FRAUD_CONDITIONS
query="where order_key in ('oy-shso-850523494','or-bynr-850519347','ob-brbm-850550175','ob-brbm-850558690','ob-brbm-850550578','o9-qugn-850815597',
'o9-qugn-850815597','o9-qugn-850815641','o9-qugn-850815665','o9-qugn-850815640','o9-qugn-850815664','o9-qugn-850815595','o9-qugn-850815596','o9-qugn-850815638',
'o9-qugn-850815662','ek-icga-850815661','oy-shso-850815449','o9-qugn-850476717','o9-qugn-850476718','ob-brbm-850476719','or-bynr-850476359','o9-qugn-850476670',
'o9-qugn-850476721','o9-qugn-850476722','ek-icga-850476671','ek-icga-850476755','o9-qugn-850476723','o9-qugn-850476754')"
select ''YEAH'' from IDENT_ADDRESS_INFO where IDENT_ADDR_INFO_ID in( select CONTACT_ADDR_INFO_ID from ORDER_MASTER where ORDER_KEY = 'oy-shso-850523494'
union select BILLING_ADDR_INFO_ID from ORDER_BILLING where ORDER_KEY = ' || okey ||
union select PAYER_ADDR_INFO_ID from ORDER_PAYMENTS where ORDER_KEY = ' || okey ||
union select CREDIT_CHECK_ADDR_INFO_ID from ORDER_CREDIT_CHECK_INFO where ORDER_KEY = ' || okey ||
union select SHIPPING_ADDR_INFO_ID from ORDER_SHIPPING where ORDER_KEY = ' || okey || -
union select PI.PORT_IN_REQSTR_INFO_ID from ORDER_LINE_PORT_IN_DATA OLPD, PORT_IN_BILLING_INFO PI
where OLPD.PORT_IN_BILLING_INFO_ID = PI.PORT_IN_BILLING_INFO_ID and OLPD.ORDER_KEY = ' || okey ||
union  select SUB_IDENT_ADDR_INFO_ID from PHONE_CONFIG where ORDER_KEY = ' || okey ||
union select SUB_IDENT_INFO_ID from PHONE_CONFIG where ORDER_KEY = ' || okey ||
union select STORE_ADDR_INFO_ID from ORDER_STORE_APPT_INFO where ORDER_KEY = ' || okey || ')';
tables=oemadm.ORDER_BILLING,oemadm.ORDER_PAYMENTS,oemadm.ORDER_SHIPPING,oemadm.ORDER_CREDIT_CHECK_INFO,oemadm.ORDER_LINE_PORT_IN_DATA,oemadm.PORT_IN_BILLING_INFO,oemadm.PHONE_CONFIG,oemadm.ORDER_STORE_APPT_INFO
query=" where ORDER_KEY IN ('oy-shso-850523494','or-bynr-850519347','ob-brbm-850550175','ob-brbm-850558690','ob-brbm-850550578','o9-qugn-850815597',
'o9-qugn-850815597','o9-qugn-850815641','o9-qugn-850815665','o9-qugn-850815640','o9-qugn-850815664','o9-qugn-850815595','o9-qugn-850815596','o9-qugn-850815638',
'o9-qugn-850815662','ek-icga-850815661','oy-shso-850815449','o9-qugn-850476717','o9-qugn-850476718','ob-brbm-850476719','or-bynr-850476359','o9-qugn-850476670',
'o9-qugn-850476721','o9-qugn-850476722','ek-icga-850476671','ek-icga-850476755','o9-qugn-850476723','o9-qugn-850476754')"
select order_key from oemadm.order_master
where CONTACT_ADDR_INFO_ID in (select distinct IDENT_ADDR_INFO_ID from oemadm.IDENT_ADDRESS_INFO);
query="where IDENT_ADDR_INFO_ID in (6114496668,6114496115,6121497255,6114496730,6114496576,6114496760,6114496138,6114496733,6114496709,6114496789,6121497304,
  6121497338,6121497357,6121497538,6121497593,6121497353,6121497518,6121497347,6121497544,6114496650,6116002592,6116012216,6116193722,6114496566,6115397729,
  6115477271,6121494718)"
insert into OEMADM.IDENT_ADDRESS_INFO
(
        ADDITIONAL_LINE,ADDRESS,ADDRESS2,ADDRESS3,ADDRESS4,ADDRESS5,ADDRESS_LOCK_YN,ADDRESS_TYPE,ADDR_SEQ_NBR,ALT_BEST_TIME_TO_CALL,ALT_PHONE,ALT_PHONE_EXT,
        APARTMENT_NUM,APARTMENT_TYPE,APPLY_ADDRESS,BEST_TIME_TO_CALL,BOX_NUM,BUS_OWNER1_FIRST_NAME,BUS_OWNER1_LAST_NAME,BUS_OWNER2_FIRST_NAME,
        BUS_OWNER2_LAST_NAME,CITY,COMPANY_NAME,COUNTRY,COUNTY,EMAIL,FAX_NUMBER,FIRST_NAME,HOME_PHONE,HOME_PHONE_EXT,HOUSE_NUM,IDENT_ADDR_INFO_ID,LAST_NAME,
        MIDDLE_NAME,MOBILE_BEST_TIME_TO_CALL,MOBILE_PHONE,PARSEDFLAG,PARSE_YN,RURAL_ROUTE_NUM,STATE,STREET_DIRECTION,STREET_NAME,STREET_TYPE,SUFFIX,TITLE,TRAILING_DIRECTION,
        UPDATE_ADDRESS_YN,VALIDATEDFLAG,WORK_PHONE,WORK_PHONE_EXT,ZIP,ZIP_EXTENSION
)
values
(
        null,'505 EaglePt','Shores',null,null,null,'N','S','0',null,'000-000-0000',null,null,null,null,null,null,null,null,null,null,'RoamingShores',null,null,
        'Ashtabula',null,null,'donna','000-000-0000',null,'505',6114496650,'braat',null,null,'-','Y',null,null,'OH',null,'Eagle','Pt',null,null,null,'N','Y',
        '000-000-0000','0000','44084','9724'
);
-- script to create the table and to load data from PROD table, to be run with nohup.
alter session force parallel query parallel 4;
alter session force parallel dml parallel 4;
set echo on
set timing on
spool OVMADM_create_stg_table.out
--create empty table.
CREATE TABLE OVMADM.OVM_REQ_RES_INFO_STG
   (
  REQ_RES_ID NUMBER(10,0)  NOT NULL ENABLE,
  RETURN_URL VARCHAR2(100 BYTE),
  CREATED_DT DATE,
  MESSAGE_TYPE VARCHAR2(40 BYTE),
  ERROR_DESCRIPTION VARCHAR2(4000 BYTE),
  PARSED_YN CHAR(1 BYTE),
  PARSED_DT DATE,
  ERROR_CODE NUMBER(4,0),
  SUBSCRIBER_AGREEMENT_YN CHAR(1 BYTE),
  RESPONSE_DT DATE,
  REQ_RES_XML BLOB,
  SYNCHRONOUSLY_RESPONDED_YN CHAR(1 BYTE),
  ENCRYPTED_YN CHAR(1 BYTE),
  RESPONSE_TIME NUMBER(8,0),
  ERROR_SUB_NAME VARCHAR2(100 BYTE),
  REQUEST_JVM_NAME VARCHAR2(30 BYTE),
  RESPONSE_JVM_NAME VARCHAR2(30 BYTE)
   )
SEGMENT CREATION IMMEDIATE
PCTFREE 10 PCTUSED 40 INITRANS 5 MAXTRANS 255
NOCOMPRESS LOGGING
STORAGE(INITIAL 314572800 NEXT 52428800 MINEXTENTS 1 MAXEXTENTS 2147483645
PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
TABLESPACE OVM_SSD_DATA
LOB (REQ_RES_XML) STORE AS SECUREFILE (
TABLESPACE OVM_SSD_DATA ENABLE STORAGE IN ROW CHUNK 8192
CACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES
STORAGE(INITIAL 314572800 NEXT 52428800 MINEXTENTS 1 MAXEXTENTS 2147483645
PCTINCREASE 0
BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT));
--insert data
insert /*+ append */ into OVMADM.OVM_REQ_RES_INFO_STG
  select * from source table where rownum < 5000000;
commit;
spool off;
exit;
--parfile for the export.
userid="/ as sysdba"
directory=OEMADM_exp
dumpfile=expdp_OVMADM_%U_.dmp
logfile=expdp_OVMADM.log
tables=OVMADM.OVM_REQ_RES_INFO
parallel=6
cluster=no
exclude:INDEX
exclude:STATISTICS
exclude:REF_CONSTRAINTS
select distinct s.inst_id,s.username,s.osuser,s.status,s.sql_id,p.qcsid,p.DEGREE,p.REQ_DEGREE from gv$px_session p,gv$session s
where s.inst_id=p.inst_id and s.sid=p.sid and s.status='ACTIVE'
order by p.REQ_DEGREE ;
 0qnxy0yzadr44  select a.ban||:"SYS_B_0000"||a.tax_actv_amt||:"SYS_B_0001"||to_char(a.tax_actv_date, :"SYS_B_0002")||:"SYS_B_0003"||
              trim(a.source_actv_code)||:"SYS_B_0004"||a.chg_seq_no||:"SYS_B_0005"||b.feature_code||:"SYS_B_0006"||b.lease_seq_no||:"SYS_B_0007"||
              to_char(b.sys_creation_date, :"SYS_B_0008")||:"SYS_B_0009"||to_char(b.sys_update_date, :"SYS_B_0010")||:"SYS_B_0011"||
              b.inv_seq_no||:"SYS_B_0012"||to_char(c.inv_creation_date, :"SYS_B_0013")||:"SYS_B_0014"||
              nvl(a.tax_federal_amt, :"SYS_B_0015")||:"SYS_B_0016"|| nvl(a.tax_roaming_amt, :"SYS_B_0017")||:"SYS_B_0018"||
              nvl(a.tax_city_amt, :"SYS_B_0019")||:"SYS_B_0020"|| nvl(a.tax_county_amt, :"SYS_B_0021")||:"SYS_B_0022"||
              nvl(a.tax_state_amt, :"SYS_B_0023")||:"SYS_B_0024"|| c.inv_type
              from NORSNAPADM.tax_write_off a
              join (
              select * from norsnapadm.charge where lease_seq_no is not null
              ) b
              on a.ban = b.ban and a.chg_seq_no = b.chg_ent_seq_no
              left join
              (
              select * from norsnapadm.invoice_item where inv_type in
              (:"SYS_B_0025", :"SYS_B_0026", :"SYS_B_0027", :"SYS_B_0028", :"SYS_B_0029")
              ) c
              on b.ban = c.ban and b.inv_seq_no = c.ent_seq_no
              where trunc(a.tax_actv_date) <= :"SYS_B_0030" and a.ban in (:"SYS_B_0031",
              :"SYS_B_0032",
--Total 602 rows(Active-189, 413- Failed) need to update on ODL.
-- 189 rows to update
UPDATE studentadm.STUDENT_CTNCT SET PGM_STUS_NME ='ACTIVE' , IS_UPDATED_NDW='N', UPDT_DT = SYSDATE
WHERE PGM_STUS_NME='PENDING' AND STUDENT_CNTCT_ID IN(
310,1883,2663,3697,19302,20664,27610,29242,37226,43408,43460,44308,46422,46790,46946,51418,55558,55640,55642,55614,
55606,55682,55620,55648,55650,55690,55634,55636,55722,55676,55724,55678,55726,55764,55786,55788,55740,55806,55810,55748,
64036,64112,64066,64120,65614,67248,68328,69964,73340,74912,82790,83104,84984,86686,89254,93756,93774,96686,100374,100586,
100540,101604,102066,110310,110940,116048,117006,117248,118688,120264,120428,120338,120482,120548,120550,120558,120566,120544,120596,120602,
120660,120712,120722,120618,120886,122762,123708,124562,124686,130324,130674,130650,131850,136250,137560,138798,140522,140500,140534,140506,
140552,140590,140614,140668,140618,140672,140676,140714,143606,143632,143704,145366,145370,145378,145480,145382,145386,145494,145516,145550,
150442,150634,150338,150630,150592,150632,150594,150342,153766,155088,156150,157174,161822,161706,163502,163622,164126,165822,169560,170606,
170612,170756,172788,172782,172860,173058,173850,174430,174404,174406,174450,176456,176632,177922,181336,182510,183336,184142,190648,192812,
193072,193106,204806,207922,217196,217524,217570,217828,218074,217942,218086,218112,218118,218094,218350,218316,218802,219260,221966,222182,
222846,223044,231084,236104,236574,240790,240792,252714,254894);
Commit;
-- 413 rows to update
UPDATE studentadm.STUDENT_CTNCT SET PGM_STUS_NME ='FAILED' , IS_UPDATED_NDW='N', UPDT_DT = SYSDATE
WHERE PGM_STUS_NME='PENDING' AND STUDENT_CNTCT_ID IN(
1,2,3,48,51,159,
6734,8250,8404,8488,9052,9078,9286,
13362,13402,13600,13640,13602,13604,13606,13608,13680,13682,13684,13610,13612,13686,13688,13642,13720,13690,13722,13692,
13724,13760,13726,13694,13696,13734,13736,13738,13740,13762,15000,17250,17248,17288,21054,21056,21036,33562,33560,33600,
33526,33528,37326,37328,37228,37330,37332,37230,39972,40232,43324,43308,43428,43352,43442,43434,43514,44342,44350,44374,
44422,44442,44522,44508,44458,44660,44692,46980,46984,46986,46988,47766,47776,48030,48206,50762,51416,52506,52476,52434,
55934,55838,55960,55958,56062,56178,56290,56342,56344,56364,56356,56304,56306,56448,56506,56544,56600,56644,56618,56690,
63440,63632,63670,64284,71212,71258,72620,74036,75934,84582,85368,86816,89086,89306,89392,89394,89402,91868,93704,95276,
96732,97696,97788,97942,98176,98962,
103716,105734,107462,107464,113876,113830,113878,115922,118620,122102,122620,122838,122840,122700,122848,122850,122852,
122854,122704,122940,126978,129408,130046,131326,131182,131330,132900,133564,134356,134730,137034,137098,137724,138396,
138464,139140,143128,143960,145294,145326,145210,145430,145508,145446,145526,150028,150590,151410,151848,154910,154912,
154914,154826,154992,154940,154944,155030,157164,157166,157168,157124,157096,157170,157172,157098,157100,157126,157102,
161754,161758,161818,162790,164154,164874,164908,167992,167972,168732,169914,169996,170664,181568,181464,181570,181466,
181628,181572,181600,182924,182896,188268,188510,189868,191130,192748,193004,207924,208114,210438,210866,213440,217076,
218068,218036,217940,218040,217946,218108,218042,218084,218088,218116,218098,218100,218102,218166,218148,218124,218152,
218154,218104,218106,218046,218150,218122,218126,218128,218130,218132,218134,218136,218156,218160,218048,218050,218158,
218052,218162,218164,218168,218142,218144,218170,218056,218146,218172,218174,218176,218138,218054,218140,218188,218190,
218058,218192,218060,218194,218062,218196,218198,218064,218066,218228,218230,218232,218178,218234,218180,218200,218236,
218182,218184,218238,218202,218242,218240,218186,218268,218204,218206,218270,218272,218208,218244,218210,218246,218248,
218212,218214,218274,218250,218276,218216,218278,218280,218218,218282,218284,218286,218220,218288,218290,218222,218224,
218252,218254,218226,218256,218292,218294,218258,218296,218260,218308,218262,218264,218298,218300,218266,218302,218304,
218310,218348,223006,227744,227846,227848,227850,227884,227914,227886,227988,228030,228032,228738,229460,229844,231248,
231668,232772,233786,236276,237954,238716,239306,239768,240060,240196,244508,246754,247022,247464,247466,247906,248008,
248058,248070,248248,248346,248582,249048,249078,249066,249108,249022,249192,249272,249306,249252,249210,250338,251100,
251104,252062);
commit;
nohup ksh insert.ksh 1 &
nohup ksh insert.ksh 2 &
nohup ksh insert.ksh 3 &
nohup ksh insert.ksh 4 &
nohup ksh insert.ksh 5 &
nohup ksh insert.ksh 6 &
nohup ksh insert.ksh 7 &
nohup ksh insert.ksh 8 &
select /*+parallel(6)*/ 1 from ovmadm.ovm_req_res_info_stg_1 where req_res_id='182831107';
select /*+parallel(6)*/ 1 from ovmadm.ovm_req_res_info_stg_2 where req_res_id='182831107';
select /*+parallel(6)*/ 1 from ovmadm.ovm_req_res_info_stg_3 where req_res_id='182831107';
select /*+parallel(6)*/ 1 from ovmadm.ovm_req_res_info_stg_4 where req_res_id='182831107';
select /*+parallel(6)*/ 1 from ovmadm.ovm_req_res_info_stg_5 where req_res_id='182831107';
select /*+parallel(6)*/ 1 from ovmadm.ovm_req_res_info_stg_6 where req_res_id='182831107';
select /*+parallel(6)*/ 1 from ovmadm.ovm_req_res_info_stg_7 where req_res_id='182831107';
select /*+parallel(6)*/ 1 from ovmadm.ovm_req_res_info_stg_8 where req_res_id='182831107';
197897697
select count(distinct whatpk) from dba_maintenance.avoid_fts_pk
/
select count(*) from (select /*+parallel(6)*/ req_res_id from ovmadm.ovm_req_res_info_stg_1 group by req_res_id) a
union
select count(*) from (select /*+parallel(6)*/ req_res_id from ovmadm.ovm_req_res_info_stg_2 group by req_res_id) a
union
select count(*) from (select /*+parallel(6)*/ req_res_id from ovmadm.ovm_req_res_info_stg_3 group by req_res_id) a
union
select count(*) from (select /*+parallel(6)*/ req_res_id from ovmadm.ovm_req_res_info_stg_4 group by req_res_id) a
union
select count(*) from (select /*+parallel(6)*/ req_res_id from ovmadm.ovm_req_res_info_stg_5 group by req_res_id) a
union
select count(*) from (select /*+parallel(6)*/ req_res_id from ovmadm.ovm_req_res_info_stg_6 group by req_res_id) a
union
select count(*) from (select /*+parallel(6)*/ req_res_id from ovmadm.ovm_req_res_info_stg_7 group by req_res_id) a
union
select count(*) from (select /*+parallel(6)*/ req_res_id from ovmadm.ovm_req_res_info_stg_8 group by req_res_id) a
/
select count(*) from
(select /*+parallel(4)*/ a.whatpk from dba_maintenance.avoid_fts_pk a inner join (
select /*+parallel(4)*/ req_res_id from ovmadm.ovm_req_res_info_stg_1
union all
select /*+parallel(4)*/ req_res_id from ovmadm.ovm_req_res_info_stg_2
union all
select /*+parallel(4)*/ req_res_id from ovmadm.ovm_req_res_info_stg_3
union all
select /*+parallel(4)*/ req_res_id from ovmadm.ovm_req_res_info_stg_4
union all
select /*+parallel(4)*/ req_res_id from ovmadm.ovm_req_res_info_stg_5
union all
select /*+parallel(4)*/ req_res_id from ovmadm.ovm_req_res_info_stg_6
union all
select /*+parallel(4)*/ req_res_id from ovmadm.ovm_req_res_info_stg_7
union all
select /*+parallel(4)*/ req_res_id from ovmadm.ovm_req_res_info_stg_8
) b
on (a.whatpk<>b.req_res_id))
/
alter session set ddl_lock_timeout=500;
set echo on
set timing on
spool /prod_T605190.log
desc CXPREPADM_CMDS.DELINQ_ACCOUNTS_STG1
desc CXPREPADM_CMDS.DELINQ_ACCOUNTS_STG2
alter table CXPREPADM_CMDS.DELINQ_ACCOUNTS_STG1 modify (AR_BALANCE number(12,2) not null);
alter table CXPREPADM_CMDS.DELINQ_ACCOUNTS_STG2 modify (AR_BALANCE number(12,2));
desc CXPREPADM_CMDS.DELINQ_ACCOUNTS_STG1
desc CXPREPADM_CMDS.DELINQ_ACCOUNTS_STG2
spool off
exit;
delete from OEMADM.ORDER_GIVEBACK_DEVICE_INFO where ORDER_KEY='ek-icga-229765380';
delete from OEMADM.PHONE_CONFIG where ORDER_KEY='ek-icga-229765380';
delete from OEMADM.EXTR_ORDR_CHNL_INFO where ORDER_KEY='ek-icga-229765380';
delete from OEMADM.ORDER_LINE_DETAILS where ORDER_KEY='ek-icga-229765380';
delete from OEMADM.ORDER_MASTER where ORDER_KEY='ek-icga-229765380';
delete from OEMADM.IDENT_ADDRESS_INFO  where IDENT_ADDR_INFO_ID=826965104;
delete from OEMADM.IDENT_ADDRESS_INFO  where IDENT_ADDR_INFO_ID=826965105;
delete from OEMADM.IDENT_ADDRESS_INFO  where IDENT_ADDR_INFO_ID=826965106;
  ORDER_KEY, ORDER_LINE_DETAILS_KEY, PHONE_CONFIG_KEY
ORDER_KEY = 'ek-icga-229765380'
and  ORDER_LINE_DETAILS_KEY =
and PHONE_CONFIG_KEY =
alter session set ddl_lock_timeout=300
set echo on
set feedback on
set timing on
spool ovmarch_partitions.log
-- 2017
alter table OVMARCH.OVM_REQ_RES_INFO ADD PARTITION OVM_REQ_RES_INFO_P40
VALUES LESS THAN (TO_DATE(' 2017-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table OVMARCH.OVM_REQ_RES_INFO ADD PARTITION OVM_REQ_RES_INFO_P41
VALUES LESS THAN (TO_DATE(' 2017-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table OVMARCH.OVM_REQ_RES_INFO ADD PARTITION OVM_REQ_RES_INFO_P42
VALUES LESS THAN (TO_DATE(' 2017-07-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table OVMARCH.OVM_REQ_RES_INFO ADD PARTITION OVM_REQ_RES_INFO_P43
VALUES LESS THAN (TO_DATE(' 2017-10-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
--2018
alter table OVMARCH.OVM_REQ_RES_INFO ADD PARTITION OVM_REQ_RES_INFO_P44
VALUES LESS THAN (TO_DATE(' 2018-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table OVMARCH.OVM_REQ_RES_INFO ADD PARTITION OVM_REQ_RES_INFO_P45
VALUES LESS THAN (TO_DATE(' 2018-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table OVMARCH.OVM_REQ_RES_INFO ADD PARTITION OVM_REQ_RES_INFO_P46
VALUES LESS THAN (TO_DATE(' 2018-07-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table OVMARCH.OVM_REQ_RES_INFO ADD PARTITION OVM_REQ_RES_INFO_P47
VALUES LESS THAN (TO_DATE(' 2018-10-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
--2019
alter table OVMARCH.OVM_REQ_RES_INFO ADD PARTITION OVM_REQ_RES_INFO_P48
VALUES LESS THAN (TO_DATE(' 2019-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table OVMARCH.OVM_REQ_RES_INFO ADD PARTITION OVM_REQ_RES_INFO_P49
VALUES LESS THAN (TO_DATE(' 2019-04-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table OVMARCH.OVM_REQ_RES_INFO ADD PARTITION OVM_REQ_RES_INFO_P50
VALUES LESS THAN (TO_DATE(' 2019-07-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
alter table OVMARCH.OVM_REQ_RES_INFO ADD PARTITION OVM_REQ_RES_INFO_P51
VALUES LESS THAN (TO_DATE(' 2019-10-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) tablespace OVM_DATA;
spool off
exit;
select username, account_status from dba_users where username in ('BOAPPUSER','RD_TEST','FHABEE01','JJH3648','BH684443');
select REQ_RES_ID,RETURN_URL,CREATED_DT,MESSAGE_TYPE,ERROR_DESCRIPTION,PARSED_YN,PARSED_DT,ERROR_CODE,SUBSCRIBER_AGREEMENT_YN,RESPONSE_DT,
REQ_RES_XML,SYNCHRONOUSLY_RESPONDED_YN,ENCRYPTED_YN,RESPONSE_TIME,ERROR_SUB_NAME,REQUEST_JVM_NAME,RESPONSE_JVM_NAME
from ovmadm.ovm_req_res_info_hist
where req_res_id in (
select req_res_id from ovm_req_history where (order_id,dealer_code) in (
select ooi.order_id,ooi.dealer_code from ovm_order_info ooi
where ooi.created_dt >= sysdate - 40 and created_dt < sysdate - 30
and (ooi.status_code <> '16' and ooi.status_code <> '20' and ooi.status_code <> '17')));
insert into ovm_req_res_info (REQ_RES_ID,RETURN_URL,CREATED_DT,MESSAGE_TYPE,ERROR_DESCRIPTION,PARSED_YN,PARSED_DT,ERROR_CODE,SUBSCRIBER_AGREEMENT_YN,
RESPONSE_DT,REQ_RES_XML,SYNCHRONOUSLY_RESPONDED_YN,ENCRYPTED_YN,RESPONSE_TIME,ERROR_SUB_NAME,REQUEST_JVM_NAME,RESPONSE_JVM_NAME)
select REQ_RES_ID,RETURN_URL,CREATED_DT,MESSAGE_TYPE,ERROR_DESCRIPTION,PARSED_YN,PARSED_DT,ERROR_CODE,SUBSCRIBER_AGREEMENT_YN,RESPONSE_DT,
REQ_RES_XML,SYNCHRONOUSLY_RESPONDED_YN,ENCRYPTED_YN,RESPONSE_TIME,ERROR_SUB_NAME,REQUEST_JVM_NAME,RESPONSE_JVM_NAME from ovmadm.ovm_req_res_info_hist
where req_res_id in (
select req_res_id from ovm_req_history where (order_id,dealer_code) in (
select ooi.order_id,ooi.dealer_code from ovm_order_info ooi
where ooi.created_dt >= sysdate - 40 and created_dt < sysdate - 30
and (ooi.status_code <> '16' and ooi.status_code <> '20' and ooi.status_code <> '17'))); [‎3/‎26/‎2018 11:54 AM]
when you use it in a insert as select, it stalls?
select 'select /*+parallel(4) */ min(' || column_name || ') from ' || owner || '.' || table_name || ' ;'
from dba_tab_columns where owner='OEMADM' and data_type in ('DATE','TIMESTAMP');
select /*+parallel(4)*/ count(*) from oemadm.INVENTORY_ITEM;
SEGMENT_NAME                                                                             TOTAL_MB
--------------------------------------------------------------------------------- ---------------
BULK_GROUP                                                                                   5.00
BULK_MASTER                                                                                  5.00
BULK_SERVICE                                                                                 5.00
BULK_SUBSCRIBER                                                                         13,010.00
BULK_SUBSCRIBER_OLD                                                                     29,940.00
CASH_DEPOSIT_INFO                                                                           32.00
DCM_REQ_RES_INFO                                                                        43,800.00
OAR_ACCOUNT_LINK                                                                             5.00
OAR_DISCOUNT_PLAN_INFO                                                                       3.01
OAR_INFO                                                                                     5.00
OAR_INFO_HIST                                                                                 .51
OAR_PROMOTION_DETAILS                                                                      195.31
OVM_AUTH_COUNT                                                                              65.00
OVM_CACHE_STATISTICS                                                                       136.11
OVM_CANCEL_SUBSCRIBER                                                                    5,400.02
OVM_CREDIT_CARD_INFO                                                                       924.25
OVM_IDENTIFICATION_INFO                                                                     32.00
OVM_JOB_CONFIG                                                                              20.00
OVM_JOB_PROGRESS                                                                            20.00
OVM_ORDER_COMMENTS                                                                         760.00
OVM_ORDER_IB_INFO_OLD                                                                       32.00
OVM_ORDER_INFO                                                                          11,140.00
OVM_PHONE_CONFIG                                                                         5,960.00
OVM_PORT_IN_INFO                                                                         1,024.91
OVM_REQUEST_STATS                                                                          975.00
OVM_REQ_RES_INFO_HIST                                                                   65,700.00
OVM_STATUS_CHANGE                                                                        3,935.00
STATS_TBL                                                                                   64.06
SVR_ERROR_LOGS_NEW_MAR11                                                                 5,180.00
SVR_ERROR_LOGS_OLD                                                                      15,030.25
ZIP_ALL_OAR                                                                                 32.03
OVM_SEARCH_VIEW
The objective is to based on the above filtered items I defined to answer the following
3JN
1.) Are the currently defined Maint Windows(size and frequency) sufficient to keep the applications in good shape (Yes or No)
2.) If 'No" on the Maint Window please define the size and frequency of the needed Maint Window
3.) Are all desired Maintenance activities being done within the windows (Yes or No)
4.) If 'No' on the desired activities then please define what Maintenance Activities the DBAs are not having opportunity to get done are, list the items and what level of effort(time it would take) to accomplish
5.) Are there Application Maintenance Activities that the DBAs feel the applications should be doing on regular basis, example archiving off old data, this is the DBA opportunity to play king for a day in terms of Maintenance work, so not redesigning but Maint work.
Cleanup old data, partition if possible to improve the purge method and avoid fragmentation
Table Degrag / Index Rebuild
Basic Lobs to Secure Lobs
Remove dictiornary managed Tablespaces
Periodically Db/Server bounce
Review obsolete/Invalid objects
Revised Oracle Patch set level compatibility
Review unused indexes and drop if possible
Review public DBLINKS
ls -ltr /oracle/dbtools/datapoint/scripts/hotbkup[‎3/‎29/‎2018 4:39 PM]
> ls -ltr /oracle/dbtools/datapoint/scripts/hotbkup
--connect "jdbc:oracle:thin:@(description=(address=(protocol=tcp)(host=poc0193.corp.sprint.com)(port=1532))(connect_data=(service_name=WEFAST_OVMBG_SRV)))"
select /*+ parallel (a,6) parallel (sn,6) */ trunc(sn.end_interval_time) sql_snapshot_date,a.sql_id, p.owner, p.name, t.num_rows,t.last_analyzed, p.operation,
p.options,a.parsing_schema_name,a.sql_profile,a.plan_hash_value,p.id plan_step_id,sn.INSTANCE_NUMBER,a.module,u.username PARSING_USER_NAME, a.executions_total,
buffer_gets_delta,executions_delta, disk_reads_delta,elapsed_time_delta,max(a.snap_id) max_snap_id
from dba_indexes t, dba_hist_sqlstat a, dba_hist_snapshot sn, dba_users u,
       (select /*+ no_merge(pi1) */ distinct pl.sql_id,pl.PLAN_HASH_VALUE,object_owner owner, object_name name,operation,options,pl.id from  dba_hist_sql_plan pl
          where object_owner  in ('CORE_B') and object_name='&idx_name' and operation = 'INDEX' ) p
where a.snap_id = sn.snap_id
and a.instance_number=sn.instance_number
and a.sql_id = p.sql_id
and a.plan_hash_value=p.plan_hash_value
and t.index_name = p.name
and t.owner = p.owner
and a.PARSING_USER_ID=u.user_id
      and t.owner not in ('SYS','SYSTEM')
      and sn.BEGIN_INTERVAL_TIME>=sysdate-7
                  and a.snap_id>0
   group by trunc(sn.end_interval_time),a.sql_id,p.owner, p.name, t.num_rows,t.last_analyzed,p.operation,p.options,
   a.parsing_schema_name,a.SQL_PROFILE,a.plan_hash_value,p.id,sn.INSTANCE_NUMBER,a.MODULE,a.PARSING_SCHEMA_NAME,u.username,a.executions_total, buffer_gets_delta,executions_delta, disk_reads_delta,elapsed_time_delta;
select owner, object_name, object_type, vl
from
(select s.owner, s.object_name, o.object_type, sum(s.value) vl
  from gv$segment_statistics s join
dba_objects o on (s.owner=o.owner and s.object_name=o.object_name)
where s.owner <> 'SYS'
group by s.owner, s.object_name, o.object_type order by 4 desc) a
where rownum < 100;
(e.tablespace_name=t.tablespace_name)
sqlplus -s -m "HTML ON TABLE 'BORDER="2"'" / as sysdba @chk_alltabs_fragment.sql 30 > /tmp/wdmfrag.html
select l.owner, l.TABLE_NAME, l.COLUMN_NAME, SEGMENT_NAME, sum(s.bytes)/1048576 total_mb
from dba_lobs l
join dba_segments s using (segment_name)
where segment_name in
('REQUEST_RESPONSE_XML_NEW',
'SYS_LOB0000073201C00004$$',
'SYS_LOB0000341613C00011$$',
'SYS_LOB0000073201C00004$$',
'SYS_LOB0000202873C00012$$',
'SYS_LOB0000202873C00013$$',
'SYS_LOB0000341472C00011$$',
'SYS_LOB0001879537C00011$$',
'SYS_LOB0000341613C00011$$'
)
group by  l.owner,l.TABLE_NAME, l.COLUMN_NAME, SEGMENT_NAME
order by 3
;
select owner, segment_name, tablespace_name
from dba_segments
where segment_name in
(
'INCREMENTAL_DEPOSIT_INFO',
'OVM_INCREMENTAL_DEPOSIT_INFO',
'ORDER_INVOICE',
'ORDER_CREDIT_CHECK_INFO',
'ORDER_MASTER',
'ORDER_STATUS_CHANGE_REASON',
'ORDER_BILLING',
'ORDER_AISLE_INFO',
'ORDER_LINE_SOC',
'CDWS_DETAILS',
'EXTR_ORDR_CHNL_INFO',
'RESPONSE_DATA',
'TM_THIRD_PARTY_TX_LOG',
'FE_TMR_LOG'
)
and owner in ('OEMADM','OVMADM');
and owner in ('OVMADM','OEMADM')
;
select table_name, partition_name from dba_tab_partitions
where table_owner='OVMARCH' and table_name='DCM_REQ_RES_INFO';
select tablespace_name, EXTENT_MANAGEMENT
from dba_tablespaces
where tablespace_name in
(
'WDATA03',
'WDATA05',
'WDATA06',
'WDATA07',
'WDATA08',
'WDATA11',
'WDATA13',
'WDATA16',
'WDATA22',
'WDATA24',
'WDATA33')
select owner, segment_name, segment_type from dba_segments where tablespace_name='WDATA03';
select tablespace_name from dba_tables where table_name='ORDER_CREDIT_CHECK_INFO' and owner='OEMADM';
wdm
Broken                  406  InProcessASIInventoryEstimator;
Broken                  446  InProcessOMIMInventoryEstimatr;
Broken                  467  FIX_MISSING_SUBS;
Broken                  549  lbs_refresh;
Broken                  653  NXTREFWAITSNPEDM.REFDATA_SNAP;
select sql_id , sql_fulltext from gv$sql where sql_fulltext
like '%SELECT S.OBJID,S.ID_NUMBER, (CASE WHEN S.SUBC_CURRQ2QUEUE IS NULL%FROM TABLE_USER WHERE OBJID%C.X_BILLING_INDICATOR NOT IN%';
select tablespace_name, count(*),
sum(decode(segment_type,'TABLE',1,'TABLE PARTITION',1,'TABLE SUBPARTITION',1,0)) as "#Tables",
sum(decode(segment_type,'INDEX',1,'INDEX PARTITION',1,0)) as "#Indexes",
sum(decode(segment_type,'LOBSEGMENT',1,'LOB PARTITION',1,'LOBINDEX',1,0)) as "#Lobs"
from dba_segments
where tablespace_name in
(select tablespace_name from dba_tablespaces where extent_management='DICTIONARY')
group by tablespace_name
order by 1;
select sql_id , sql_fulltext from gv$sql where sql_fulltext like '%SELECT /*+ DRIVING_SITE (EPP) parallel(EPP,3) INDEX_JOIN (EPP IDX_TRANS_HIST_01 IDX_TRANS_HIST_02)%';
select sql_id, sql_fulltext from gv$sql where sql_fulltext like 'SELECT /*+ INDEX_JOIN ("EPP" "IDX_TRANS_HIST_01") INDEX_JOIN ("EPP" "IDX_TRANS_HIST_02") PARALLEL ("EPP",3) */%';
"DATETIME","PAYMENT_TYPE_INDICATOR","BAN",
"PAYMENT_OPTION_ID","PAYMENT_METHOD","PAYMENT_SUB_METHOD","PAN_TOKEN","PARTIAL_CARD_NUMBER","TRANSACTION_TYPE_CODE",
"TRANSACTION_STATUS","DECLINE_SOURCE","DECLINE_CODE","NAME_ON_ACCOUNT","EXPIRATION_DATE","CONSUMER_OWNED_PO"
FROM "EPPADM"."TRANS_ACTIVITY_HISTORY" "EPP"
WHERE "TRANSACTION_TYPE_CODE"=:"SYS_B_0" AND "PAYMENT_TYPE_INDICATOR"<>:"SYS_B_1" AND :1="PAN_TOKEN" AND :2="BAN" AND :3="DATETIME"
select a.owner, a.segment_name, a.total_mb, a.tablespace_name, i.index_name, b.tablespace_name
from (select owner, segment_name, tablespace_name, total_mb
      from (
            select owner, segment_name, tablespace_name, sum(bytes)/1048576 as total_mb
from dba_segments
where owner='OEMADM' and segment_type like 'TABLE%'
group by owner, segment_name, tablespace_name
order by total_mb desc
) where rownum <= 10) a
join dba_indexes i on (a.segment_name=i.table_name and a.owner=i.table_owner)
join dba_segments b on (b.segment_name=i.index_name and a.owner=i.owner)
order by a.segment_name;
select t.owner, t.table_name, t.tablespace_name, sum(s.bytes)/1048576 as total_mb
from dba_tables t join dba_segments s on (t.owner=s.owner and t.table_name=s.segment_name)
where t.owner='OVMADM' and t.table_name in ('OVM_REQ_RES_INFO_HIST','DCM_REQ_RES_INFO','MANAGE_CART')
group by t.owner, t.table_name, t.tablespace_name
order by  t.owner, t.table_name;
select 'select /*+parallel(4)*/ max(CREATED_DT) from ' || t.table_owner || '.' || t.table_name || ' partition (' || t.partition_name || ');'
from dba_tab_partitions t
where (t.table_owner='OVMARCH' or t.table_owner='NGS') and t.table_name in ('OVM_REQ_RES_INFO','DCM_REQ_RES_INFO','MANAGE_CART')
order by  t.table_owner, t.table_name, t.partition_position;
TO_DATE(' 2007-01-04 00:00:00', 'SYYYY-MM-DD HH24:MI:SS'
  OVMARCH.OVM_REQ_RES_INFO:OVM_REQ_RES_INFO_P24
select tablespace_name from dba_tables where table_name in ('OS_REF_DEVICE_MFG_TYPE','OS_UPSELL_SERVICE_DISP_ORDER')
select table_name, segment_name from dba_lobs where segment_name in (
'SYS_IL0000015339C00008$$',
'SYS_IL0000015339C00011$$',
'SYS_LOB0000015339C00008$$',
'SYS_LOB0000015339C00011$$',
'SYS_IL0000015329C00008$$',
'SYS_IL0000015329C00010$$',
'SYS_LOB0000015329C00008$$',
'SYS_LOB0000015329C00010$$')
ovm.par
userid="/ as sysdba"
directory=OVMADM_exp
dumpfile=expdp_OVMADM_%U_OVM.dmp
logfile=expdp_OVMADM.log
tables=OVMARCH.OVM_REQ_RES_INFO:OVM_REQ_RES_INFO_P4
parallel=6
cluster=no
dcm.par
userid="/ as sysdba"
directory=OVMADM_exp
dumpfile=expdp_OVMADM_%U_DCM.dmp
logfile=expdp_OVMADM.log
tables=OVMARCH.DCM_REQ_RES_INFO:DCM_REQ_RES_INFO_P16
parallel=6
cluster=no
for i in expdp_OVMADM*.dmp; do echo $i; gzip $i; done;
for i in expdp_OVMADM*.dmp.gz; do echo $i; scp $i TRESA618:/oracle/g01/bkup02/OVMADM
select dbms_metadata.get_ddl('INDEX','OVM_REQ_RES_INFO_PK','OVMARCH') from dual;
alter index ovmarch.DCM_REQ_RES_PK rebuild partition  "DCM_REQ_RES_INFO_P16" tablespace OVM_SSD_DATA;
alter index ovmarch.OVM_REQ_RES_INFO_PK rebuild partition  "OVM_REQ_RES_INFO_P4" tablespace OVM_SSD_DATA;
alter index ovmarch.OVM_REQ_RES_INFO_CR_DT_INDX rebuild partition  "OVM_REQ_RES_INFO_P4" tablespace OVM_SSD_DATA;
Alter session force parallel ddl parallel 6;
Alter session force parallel query parallel 6;
Set timing on;
Set echo on;
Spool /tmp/times.out
alter table ovmarch.dcm_req_res_info move partition "DCM_REQ_RES_INFO_P16" tablespace OVM_DATA;
alter index ovmarch.DCM_REQ_RES_PK rebuild partition  "DCM_REQ_RES_INFO_P16" tablespace OVM_DATA;
alter table ovmarch.ovm_req_res_info move partition "OVM_REQ_RES_INFO_P4" tablespace OVM_DATA;
alter index ovmarch.OVM_REQ_RES_INFO_PK rebuild partition  "OVM_REQ_RES_INFO_P4" tablespace OVM_DATA;
alter index ovmarch.OVM_REQ_RES_INFO_CR_DT_INDX rebuild partition  "OVM_REQ_RES_INFO_P4" tablespace OVM_DATA;
spool off
exit;
select to_char(trunc(CREATED_DT),'MON-YYYY'), count(*) from "OVMARCH"."DCM_REQ_RES_INFO" partition ("DCM_REQ_RES_INFO_P16")
group by to_char(trunc(CREATED_DT),'MON-YYYY') order by 2;
alter table ovmarch.dcm_req_res_info move partition "DCM_REQ_RES_INFO_P16" tablespace OVM_DATA;
select segment_name, sum(bytes)/1048576
from dba_segments
where partition_name='DCM_REQ_RES_INFO_P16'
and owner='OVMARCH'
group by segment_name;
select 'alter index ' || index_owner || '.' || index_name || ' rebuild partition "' || partition_name || '" tablespace sprint_usage_DATA;'
from dba_ind_partitions where index_name='I_KODIAK_RAR_RPT_DT';
 select INDEX_NAME, PARTITION_NAME, STATUS, tablespace_name from dba_ind_partitions
 where tablespace_name='SPRINT_USAGE_DATA'
 --in ('I_KODIAK_RAR_FL_ID','I_DS_MAFC_SBC_IDX','I_KODIAK_RAR_RPT_DT','I_DS_2G_DATE_HOUR_IDX')
 order by INDEX_NAME, PARTITION_NAME;
 select OWNER, TABLE_NAME, --PARTITION_NAME,
 NUM_ROWS, STALE_STATS, LAST_ANALYZED, AVG_ROW_LEN*NUM_ROWS as obj_size
 from dba_tab_statistics
 where table_name in ('TABLE_NOTES_LOG',
'TABLE_CASE',
'TABLE_ACT_ENTRY',
'TABLE_X_HISTORY',
'TABLE_CONDITION',
'TABLE_SUBCASE',
'SA.NOTES_LOG',
'SA.HISTORY')
  order by partition_position;
select role from dba_roles where role in (
select distinct grantee from dba_role_privs where granted_role in (
select distinct grantee from dba_tab_privs where owner='OEMADM' and table_name in
(
'ARIBA_DOCUMENT_INFO ',
'ASI_SHIPMENT_INFO',
'CALLER_INFO',
'CART_PORT_ELIGIBILITY_RESPONSE',
'CART_WNP_REQUEST_LIST',
'CTS_LOG',
'CUSTOMER_FRAUD_INFO'
)));
SQL> select sum(bytes)/1048576 as bt from dba_segments where segment_name='COEP';
              BT
----------------
         346,250
SQL> select sum(bytes)/1048576 as bt from dba_segments where segment_name='
SQL> select sum(bytes)/1048576 as bt from dba_segments where segment_name='OVM_REQ_RES_INFO_STG' and owner='OVMARCH';
              BT
----------------
         136,600
SQL> /
              BT
----------------
         137,050
select owner, TABLE_NAME, STALE_STATS , last_analyzed from dba_tab_statistics
where table_name in ('LU_SWITCH_NAME','AC6_BUILD_COMPARE_TC_RAW','DS_AMS_COMPARE_TC_3G_WS','ACT_LOG_STG2','DS_ACT_LOG','DS_ACT_LOG_RESEARCH');
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SPRINT_USAGE', TABNAME => 'ACT_LOG_STG2', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', DEGREE=>4, no_invalidate=>false);
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SPRINT_USAGE', TABNAME => 'DS_AMS_COMPARE_TC_3G_WS', PARTNAME =>'SYS_P39699', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', DEGREE=>4, no_invalidate=>false);
OSSCPP04.nmcc.sprintspectrum.com  10.22.29.145  255.255.255.0 pnbab518-prod.nmcc.sprintspectrum.com 10.88.2.114 255.255.255.255 Oracle  TCP 1023-65535  1521
Yes, but it is currently pointing to the existing server, not the new one.
telnet pnbab518-prod.nmcc.sprintspectrum.com
OSSCPP04.nmcc.sprintspectrum.com  10.22.29.145  255.255.255.0 pnbab518-prod.nmcc.sprintspectrum.com 10.88.2.114 255.255.255.255 Oracle  TCP 1023-65535  1521
select * from PPARGLO.ggs_partition_info where table_name ='AR9%TMP%' and SYS_CREATION_DATE > sysdate-1;
[‎5/‎4/‎2018 1:29 PM]  Jayakrishnan K:
I have done the inserts :
select count(*) from AR9_GL_EVENT_TMP_0; OK
--2220260
select count(*) from AR9_GL_EVENT_TMP_1; OK
--2216667
select count(*) from AR9_GL_EVENT_TMP_2; OK
--2221638
select count(*) from AR9_GL_EVENT_TMP_3;
--2223527
select count(*) from AR9_GL_EVENT_TMP_4;
--2223186
select count(*) from AR9_GL_EVENT_TMP_5;
--2222002
select count(*) from AR9_GL_EVENT_TMP_6;
--2223311
select count(*) from AR9_GL_EVENT_TMP_7;
--2223359
select count(*) from AR9_GL_EVENT_TMP_8;
--2221851
select count(*) from AR9_GL_EVENT_TMP_9;
--2218327
select count(*) from pparglo.AR9_GL_EVENT_DATA partition (PR101_P10_R1) union all
select count(*) from pparglo.AR9_GL_EVENT_DATA partition (PR102_P10_R2) union all
select count(*) from pparglo.AR9_GL_EVENT_DATA partition (PR103_P10_R3) union all
select count(*) from pparglo.AR9_GL_EVENT_DATA partition (PR104_P10_R4) union all
select count(*) from pparglo.AR9_GL_EVENT_DATA partition (PR105_P10_R5) union all
select count(*) from pparglo.AR9_GL_EVENT_DATA partition (PR106_P10_R6) union all
select count(*) from pparglo.AR9_GL_EVENT_DATA partition (PR107_P10_R7) union all
select count(*) from pparglo.AR9_GL_EVENT_DATA partition (PR108_P10_R8) union all
select count(*) from pparglo.AR9_GL_EVENT_DATA partition (PR109_P10_R9) union all
select count(*) from pparglo.AR9_GL_EVENT_DATA partition (PR110_P10_R10);
   2218327 TMP_9
   2221851 TMP_8
   2223359 TMP_7
   2223311 TMP_6
   2222002 TMP_5
   2223186 TMP_4
   2223527 TMP_3
   2221638 TMP_2
   2216667 TMP_1
   2220260 TMP_0
PPARGLO.GGS_EXCHG_PARTITION_INFO
select table_name, partition_name, SYS_CREATION_DATE, TARGET_PROCESS_DATE from PPARGLO.GGS_EXCHG_PARTITION_INFO where sys_creation_date > sysdate-1/24 and DDL_TYPE ='EXCHANGE';
SELECT OWNER,
  TABLE_OWNER,
  TABLE_NAME,
  INDEX_NAME,
  PARTITIONED
FROM all_indexes
WHERE table_name IN
('MANAGE_CART','DCM_REQ_RES_INFO','IDENT_ADDRESS_INFO','ORDER_CREDIT_CHECK_INFO','ORDER_MASTER','ORDER_PAYMENTS',
  'OVM_SERVICE_REQUEST_INFO')
AND owner
IN ('OVMARCH','NGS','OEMADM','OVMADM')
order by owner, table_name;
ORDER Master
'OEMADM','ORDER_MASTER_PK_STG'
'OEMADM','OM_CONT_ADD_INF_ID_STG'
'OEMADM','ORD_MSTR_PRCS_ID_STG'
'OEMADM','ORD_MSTR_ORD_STSCD_STG'
'OEMADM','OM_ACCT_ID_IDX_STG'
'OEMADM','ORDER_MASTER_DAC_IDX_STG'
'OEMADM','OM_ORDER_NUMBER_IDX_STG'
'OEMADM','ORD_MSTR_REF_ORDER_KEY_STG'
'OEMADM','OM_P2K_ACCT_NUM_IDX_STG'
'OEMADM','OM_CRT_DT_PK_STS_CHNL_PGM_STG'
'OEMADM','ORDER_MASTER_IDX1_STG'
'OEMADM','IX15_ORDER_MASTER_STG'
'OEMADM','IX14_ORDER_MASTER_STG'
'OEMADM','IX12_ORDER_MASTER_STG'
'OEMADM','OM_SIE_OFR_IND_IDX_STG'
'OEMADM','IX11_ORDER_MASTER_STG'
'OEMADM','ORD_MSTR_ORD_CHNL_STG'
'OEMADM','IX10_ORDER_MASTER_STG'
IDENT_ADDRESS_INFO
'OEMADM','IADD_ADDR_HOME_PHONE_INDX_STG'
'OEMADM','IADD_ADDRESS_INDX_STG'
'OEMADM','IDNT_ADDR_PK_STG'
'OEMADM','IDNT_ADDR_ZIP_STG'
'OEMADM','IDNT_ADDR_COMNAME_STG'
'OEMADM','IDENT_ADDRESS_INFO_EMAIL_STG'
'OEMADM','IDNT_ADDR_LSTN_STG'
'OEMADM','IDNT_ADDR_LSTFRSNM_STG'
'OEMADM','IDNT_ADDR_FRSNM_STG'
ORDER_PAYMENTS
'INDEX','I_ORDER_PYMTS_STG'
'INDEX','SYS_C006035_STG'
'INDEX','IX07_ORDER_PAYMENTS_STG'
'INDEX','CC_NUMBER_IDX_STG'
'INDEX','ORDER_PAYMENTS_REF1_STG'
'INDEX','ORDER_PAYMENTS_REF2_STG'
'INDEX','ORDER_PAYMENTS_REF3_STG'
'INDEX','ORDER_PAYMENTS_UK_STG'
'INDEX','ORDER_PAYMENTS_REF4_STG'
ORDER_CREDIT_CHECK_INFO
'INDEX','ORDER_CR_CHK_INFO_SSN_STG'
'INDEX','ORDER_CR_CHK_INFO_TAX_STG'
'INDEX','OC_CHK_APP_REFNUM_IDX_STG'
'INDEX','OC_PK_STG'
'INDEX','ORDER_CREDIT_CHECK_INFO_REF2_STG'
'INDEX','ORDER_CREDIT_CHECK_INFO_REF1_STG'
OVMADM TABLES
'INDEX','DCM_REQ_RES_PK_STG'
'INDEX','DCM_ORDER_ID_DEALER_CODE_INDX_STG'
'INDEX','OVM_SERVICE_REQUEST_INFO_PK_STG'
'INDEX','OVM_ORDER_ID_DEALER_CODE_INDX_STG'
BEGIN
DBMS_REDEFINITION.REGISTER_DEPENDENT_OBJECT(
   uname         => 'OVMARCH',
   orig_table    => 'IDENT_ADDRESS_INFO',
   int_table     => 'IDENT_ADDRESS_INFO_STG',
   dep_type      => DBMS_REDEFINITION.CONS_INDEX,
   dep_owner     => 'OVMARCH',
   dep_orig_name => 'IADD_ADDR_HOME_PHONE_INDX',
   dep_int_name  => 'IADD_ADDR_HOME_PHONE_INDX_STG');
END;
/
OVM ARCH TABLES
select dbms_metadata.get_ddl('INDEX','DCM_REQ_RES_PK_STG','OVMARCH') from dual;
select dbms_metadata.get_ddl('INDEX','OVM_REQ_RES_INFO_PK','OVMARCH') from dual;
select dbms_metadata.get_ddl('INDEX','OVM_REQ_RES_INFO_CR_DT_INDX','OVMARCH') from dual;
select owner, table_name, index_name from dba_indexes where table_name in(
'OVM_REQ_RES_INFO',
'DCM_REQ_RES_INFO')
and owner ='OVMARCH';
Hello Alexander,
may I ask you to run the following query in production:
    select df.tablespace_name, df.tbs_size_gb, fs.free_space_gb
      from
      (select tablespace_name, sum(bytes)/1024/1024/1024 as tbs_size_gb
         from dba_data_files
        group by tablespace_name
       ) df
       left join
       (select tablespace_name, sum(bytes)/1024/1024/1024 as free_space_gb
          from dba_free_space
         group by tablespace_name
       ) fs on df.tablespace_name = fs.tablespace_name
     order by free_space_gb desc nulls last
    ;

select 'alter system disconnect session ''' || sid || ',' || serial# || ',@' || inst_id ||''' immediate;'
  from gv$session
    where
    type <> 'BACKGROUND'
    and username = 'DCSINTG'
    and 
    /
Day              Total
---------------- -----
THU, 05-SEP-2019    23
FRI, 06-SEP-2019    40
SAT, 07-SEP-2019    21
SUN, 08-SEP-2019    22
MON, 09-SEP-2019    25
TUE, 10-SEP-2019   212
WED, 11-SEP-2019   545
THU, 12-SEP-2019   127
FRI, 13-SEP-2019    27
SAT, 14-SEP-2019    10
SUN, 15-SEP-2019    12
MON, 16-SEP-2019    55
TUE, 17-SEP-2019   261
WED, 18-SEP-2019   614
THU, 19-SEP-2019   397
FRI, 20-SEP-2019   310
SAT, 21-SEP-2019   310
SUN, 22-SEP-2019   314
MON, 23-SEP-2019   179

  select su.db_name ,
       to_char (chng_date, 'yyyy-mm') "Month",
       round(max(to_number(su.attr_value_txt)/1024/1024)) db_size_mb,
     round(max(to_number(su.attr_value_txt)/1024/1024))-lag(round(max(to_number(su.attr_value_txt)/1024/1024))) over (order by to_char (chng_date, 'yyyy-mm'))  growth_rate
from db_attr_val_hist su
where su.db_name like upper('SACP301%')
  and su.srvr_name = upper('PLSLB222')
  and su.attr_name = 'METRIC_SPACE_ALLOCATED'
group by su.db_name, to_char (chng_date, 'yyyy-mm')
order by 1, 2
/

'

--session events over time

select sample_time, SESSION_ID, sql_id, nvl(a.event, 'on cpu') as event
--, count(1) qty, count(1)*100/sum(count(*)) over() pctload
  from dba_hist_active_sess_history a
 where sample_time between to_date('01-jul-2021 23:00:00','dd-mon-yyyy hh24:mi:ss') and sysdate - 12/24
   and nvl(a.event, 'on cpu') ='enq: TX - row lock contention'
   --and SESSION_ID=1803
   --and INSTANCE_NUMBER=2
  -- and sql_id='9h9465s4hxrw9'
  group by sample_time,SESSION_ID, sql_id, nvl(a.event, 'on cpu')
  --having count(1) > 1
  order by 1;


select distinct user_id from dba_hist_active_sess_history
where sample_time between to_date('01-jul-2021 23:00:00','dd-mon-yyyy hh24:mi:ss') and sysdate - 12/24
   --and SESSION_ID=1803
   --and INSTANCE_NUMBER=2
   and sql_id='4k1tr4ttb7dzb'
  -- group by event
   order by event;

JAMAIS
  PJ023794
  CAMINHO RMAN PORTO:
  /tivoli/rman
if [[ $(/usr/bin/grep -c ORA- /oracle/g01/software/datadomain/logs/archbackup_WDMP1011.log) != 0 ]]; then
        echo "encontrou ORA"
        /oracle/g01/software/datadomain/send_msg_dp.sh WDMP101 WARN BACKUP_JOB "DD Backup Complete $LOGTIME" /oracle/g01/software/datadomain/logs/archbackup_WDMP1011.log
elif [[ $(/usr/bin/grep -c RMAN- /oracle/g01/software/datadomain/logs/archbackup_WDMP1011.log) != 0 ]]; then
        echo "encontrou RMAN"
        /oracle/g01/software/datadomain/send_msg_dp.sh WDMP101 WARN BACKUP_JOB "DD Backup Complete $LOGTIME" /oracle/g01/software/datadomain/logs/archbackup_WDMP1011.log
else
        echo "NADA"
        /oracle/g01/software/datadomain/send_msg_dp.sh WDMP101 NORMAL BACKUP_JOB "DD Backup Complete $LOGTIME" /oracle/g01/software/datadomain/logs/archbackup_WDMP1011.log
fi
LOGTIME=$(date "+%Y.%m.%d-%H.%M.%S")
exit
-- UPDATE DATAPOINT ATTRIBUTES MANUALLY
UPDATE dmd.DB_ATTR_VAL set ATTR_STATE = 'NORMAL'
where
dbms_name = 'ORACLE'
and
  pltfm_name = 'AIX'
  and srvr_name = 'PLSAB612' and instc_name = 'WDMP1011' and db_name = 'WDMP1011' and attr_name = 'BACKUP_ARCHIVE_JOB'
  /
  select attr_name from dmd.DB_ATTR_VAL where pltfm_name = 'AIX' and srvr_name = 'PLSAB612' and instc_name = 'WDMP1011' and db_name = 'WDMP1011' and ATTR_STATE<>'NORMAL';
rman target / catalog ECPCAT/"d###2uhtKUPTAxaxKHYiZJoTV3MXrO"@rcat
run{
allocate channel BkpTape1 type 'sbt_tape'
      parms  'ENV=(TDPO_OPTFILE=/usr/tivoli/tsm/client/oracle/bin64/tdpo_log_ECP1.opt)'
      #parms  'ENV=(XINT_PROFILE=/oracle/ECP/112/dbs/initECP.utl)'
      format 'LOG%d%T%s.%p';
allocate channel BkpTape2 type 'sbt_tape'
   parms  'ENV=(TDPO_OPTFILE=/usr/tivoli/tsm/client/oracle/bin64/tdpo_log_ECP1.opt)'
    #parms  'ENV=(XINT_PROFILE=/oracle/ECP/112/dbs/initECP.utl)'
      format 'LOG%d%T%s.%p';
SQL 'alter system checkpoint global';
crosscheck copy of archivelog all;
crosscheck archivelog all;
delete noprompt expired archivelog all ;
delete noprompt archivelog all backed up 1 times to sbt_tape;
backup archivelog all not backed up skip inaccessible;
release channel BkpTape1;
release channel BkpTape2;
resync catalog;
}
rman target / catalog BIPCAT/"a###X8BZ4NWsO4vO4yX63Gmh5oGRR6"@rcat
run{
allocate channel BkpTape1 type 'sbt_tape'
      parms  'ENV=(TDPO_OPTFILE=/usr/tivoli/tsm/client/oracle/bin64/tdpo_log_BIP1.opt)'
      #parms  'ENV=(XINT_PROFILE=/oracle/BIP/11203/dbs/initBIP_arc.utl)'
      format 'LOG%d%T%s.%p';
crosscheck archivelog all;
delete noprompt archivelog all backed up 1 times to sbt_tape;
backup archivelog all not backed up skip inaccessible;
release channel BkpTape1;
}
set lin 200 pages 99
select al.thrd "Thread", almax "Last Seq Received", lhmax "Last Seq Applied"
from (select thread# thrd, max(sequence#) almax
      from v$archived_log
      where resetlogs_change#=(select resetlogs_change# from v$database)
      group by thread#) al,
     (select thread# thrd, max(sequence#) lhmax
      from v$log_history
      where first_time=(select max(first_time) from v$log_history)
      group by thread#) lh
where al.thrd = lh.thrd;
set lines 200 pages 999
column name for a13
column tablespace format a30
column total_mb format 999,999,999.99
column used_mb format 999,999,999,999.99
column free_mb format 999,999,999.99
column pct_used format 999.99
select /*+parallel(4) */ name,total_mb,total_mb-free_mb used_mb,free_mb,(total_mb-free_mb)/total_mb*100 pct_used,
dg.USABLE_FILE_MB usable, d.qty disks, d.resize_gb
  from v$asm_diskgroup dg, (select GROUP_NUMBER, count(1) qty,avg(os_mb/1024) resize_GB from v$asm_disk group by group_number) d
  where d.GROUP_NUMBER=dg.GROUP_NUMBER
  order by 1
  /
run{
allocate channel BkpTape1 type 'sbt_tape'
      parms  'ENV=(TDPO_OPTFILE=/usr/tivoli/tsm/client/oracle/bin64/tdpo_log_BIP1.opt)'
      #parms  'ENV=(XINT_PROFILE=/oracle/BIP/11203/dbs/initBIP_arc.utl)'
      format 'LOG%d%T%s.%p';
crosscheck archivelog all;
delete noprompt archivelog all backed up 1 times to sbt_tape;
release channel BkpTape1;
}
/oracle/g01/software/datadomain/scripts/hotbackup_DD.sh WDMP1011 > /oracle/dbtools/datapoint/scripts/WDMP1011/hotbkup.log 2>&1
rman target / <<EOF >> $LOGFILE
run {
allocate channel ddd1 type 'sbt_tape' parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.4/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164no_rep,BACKUP_HOST=L4ED1164.corp.sprint.com)';
allocate channel ddd2 type 'sbt_tape' parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.4/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164no_rep,BACKUP_HOST=L4ED1164.corp.sprint.com)';
allocate channel ddd3 type 'sbt_tape' parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.4/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164no_rep,BACKUP_HOST=L4ED1164.corp.sprint.com)';
allocate channel ddd4 type 'sbt_tape' parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.4/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164no_rep,BACKUP_HOST=L4ED1164.corp.sprint.com)';
allocate channel ddd5 type 'sbt_tape' parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.4/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164no_rep,BACKUP_HOST=L4ED1164.corp.sprint.com)';
allocate channel ddd6 type 'sbt_tape' parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.4/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164no_rep,BACKUP_HOST=L4ED1164.corp.sprint.com)';
allocate channel ddd7 type 'sbt_tape' parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.4/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164no_rep,BACKUP_HOST=L4ED1164.corp.sprint.com)';
allocate channel ddd8 type 'sbt_tape' parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.4/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164no_rep,BACKUP_HOST=L4ED1164.corp.sprint.com)';
backup filesperset 1 database format '${host_name}_%d_TS_%T_%s_%p';
sql 'alter system archive log current';
sql 'alter system archive log current';
backup archivelog all format '${host_name}_%d_ARC_%T_%s_%p';
backup current controlfile format '${host_name}_%d_CF_%T_%s_%p.ctl';
CONFIGURE RETENTION POLICY TO RECOVERY WINDOW OF 15 DAYS;
delete noprompt obsolete;
crosscheck archivelog all;
delete force noprompt expired archivelog all;
release channel ddd1;
release channel ddd2;
release channel ddd3;
release channel ddd4;
release channel ddd5;
release channel ddd6;
release channel ddd7;
release channel ddd8;
}
EOF
m8psd8psfc
SELECT
distinct
    a.username
FROM
    gv$session     a
  , gv$sort_usage  b
  , (select value from gv$parameter
     where name = 'db_block_size') c
WHERE
      a.saddr = b.session_addr
      and b.tablespace='TEMP_FLASH_01';
run{
allocate channel BkpTape1 type 'sbt_tape'
      parms  'ENV=(TDPO_OPTFILE=/usr/tivoli/tsm/client/oracle/bin64/tdpo_log_BJP1.opt)'
      #parms  'ENV=(XINT_PROFILE=/oracle/BJP/112/dbs/initBJP_arc.utl)'
      format 'LOG%d%T%s.%p';
crosscheck copy of archivelog all;
crosscheck archivelog all;
delete noprompt expired archivelog all ;
#alterado para remontar o DR (fardim)
delete noprompt archivelog all backed up 1 times to sbt_tape;
backup archivelog all not backed up skip inaccessible;
release channel BkpTape1;
}
alter user APP-TEP-PROD quota 25G on USERS;
select * from datapoint_audit.SPRINT_USER_LAST_LOGON where username in
('6NY_USER',
'APP_TRP_READ',
'ARCGIS_APP',
'ATLAS_RPTG_USER',
'ATOLL_APP',
'CED_SYSTEM',
'CIQ_CIC_APP',
'FVL_USER',
'GLANCE_APP',
'INI_APP',
'NDRPTG_USER',
'NEO_USER',
'NIMS_EAI_APP',
'NIMS_EOC_APP',
'NIMS_MSI_READ',
'NIMS_USER',
'NRM_USER',
'NST_APP',
'NTWKMP_USER',
'ONAIR_APP',
'OSCR_SYSTEM',
'PMP_APP_USER',
'PRTS_APP',
'PSFT_APP',
'RFREG_USER',
'ROSETTA_APP',
'SAS',
'SD_RPRTR',
'SD_USER',
'SFDC_SYSTEM',
'SITEIQ_APP',
'VEO_ARCGIS_APP',
'VEO_USER',
'WART_USER',
'YHH_USER')
order by 1;
('NBA_BA_SUB',
'NBA_PDS_ENS_SUB_RT',
'NBA_SR_HPD',
'PHYSICAL_DEVICE_RT',
'PREPAID_RC_REGIST_RT',
'SERIAL_ITEM_INV_RT',
'SERVICE_AGREEMENT_RT',
'SERVICE_FEATURE_HIS_RT',
'SERVICE_FEATURE_RT',
'SOFTWARE_ATTR',
'SUB_RES_HISTORY_RT')
set lin 200 pages 999
set echo on feedback on timing on tim on
alter session set ddl_lock_timeout=60;
spool T755459.log
CREATE INDEX BRITEBILL.SUBTYP_FOR_DOCS_IDX ON BRITEBILL.DOCUMENTDATASTOREITEM ("subtype")
parallel 8 nologging tablespace BB_INDX ;
alter index  BRITEBILL.SUBTYP_FOR_DOCS_IDX   noparallel logging;
Day               Total
---------------- ------
TUE, 01-OCT-2019   4538
WED, 02-OCT-2019   5659
THU, 03-OCT-2019  12966
FRI, 04-OCT-2019  11692
SAT, 05-OCT-2019  12336
SUN, 06-OCT-2019  12690
run {
allocate channel ddd1 type 'sbt_tape' parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.4/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164no_rep,BACKUP_HOST=L4ED1164.corp.sprint.com)';
crosscheck backup;
release channel ddd1;
}
alter user SYS identified by "Octu100419.sp";
alter user SYSTEM identified by "Sp.Octu10042019";
alter user WMSYS identified by "SpRint.Oct102019";
alter user PERFSTAT identified by "SpRint.Oct102019";
alter user OUTLN identified by "SpRint.Oct102019";
alter user ORDSYS identified by "SpRint.Oct102019";
alter user ORDPLUGINS identified by "SpRint.Oct102019";
alter user MDSYS identified by "SpRint.Oct102019";
alter user SYSMAN identified by "SpRint.Oct102019";
alter user DBSNMP identified by "SpRint.OCt102019";
MASTER_B.SPR_MS_MEMBER_ROLES
MASTER_B.SPR_MS_USER
CORE_B.SPR_MS_AUTOREG_USER_TRNXN
CORE_B.SPR_MS_MEMBER_ROLES
select distinct sql_id, executions from gv$sql where upper(sql_text) like 'INSERT%SPR_MS_USER%' order by executions;
5qbbvmkntxxkv      69132
acc0q6k9k7rnt        709
7tdrybppuf9ym    3297913
gpu4knffn2m60    2027460
1tu36gtp3f6v9    1610225
7tdrybppuf9ym    1548050
ftv4mnvnah593      22587
5qbbvmkntxxkv      69132
acc0q6k9k7rnt        710
ftv4mnvnah593 - Table CORE_B.SPR_MS_AUTOREG_USER_TRNXN
  INST_ID SNAP_START_TIME             SNAP_END_TIME               SQL_ID        EXECUTIONS_DELTA  TOTAL_MIN ELAPSED_PER_EXEC_MIN
---------- --------------------------- --------------------------- ------------- ---------------- ---------- --------------------
         2 24-SEP-19 09.15.07.161 AM   24-SEP-19 09.30.08.274 AM   ftv4mnvnah593              228 .002821381           .000019862
         3 24-SEP-19 10.00.10.926 AM   24-SEP-19 10.15.12.413 AM   ftv4mnvnah593              117 .001736586          -.000015298
         2 24-SEP-19 10.30.13.513 AM   24-SEP-19 10.45.14.990 AM   ftv4mnvnah593              371 .003946522          -.000030309
         2 24-SEP-19 10.45.14.990 AM   24-SEP-19 11.00.16.152 AM   ftv4mnvnah593              359 .004310231           .000017785
...
         3 27-SEP-19 09.15.10.861 PM   27-SEP-19 09.30.08.409 PM   ftv4mnvnah593              138 .001346561           .000015337
         3 27-SEP-19 09.45.13.138 PM   27-SEP-19 10.00.14.102 PM   ftv4mnvnah593              135 .001371742           .000008727
         3 27-SEP-19 10.00.14.102 PM   27-SEP-19 10.15.15.445 PM   ftv4mnvnah593              117 .001214653           .000006496
         3 27-SEP-19 10.15.15.445 PM   27-SEP-19 10.30.16.415 PM   ftv4mnvnah593               95 .001071731          -.000015811
         3 27-SEP-19 10.30.16.415 PM   27-SEP-19 10.45.17.757 PM   ftv4mnvnah593               92 .001119164           .000018448
7tdrybppuf9ym - Table CORE_B.SPR_MS_USER
   INST_ID SNAP_START_TIME             SNAP_END_TIME               SQL_ID        EXECUTIONS_DELTA  TOTAL_MIN ELAPSED_PER_EXEC_MIN
---------- --------------------------- --------------------------- ------------- ---------------- ---------- --------------------
         1 25-SEP-19 09.45.03.596 AM   25-SEP-19 10.00.05.822 AM   7tdrybppuf9ym             5282 .057486181           .000010883
         2 25-SEP-19 09.45.03.664 AM   25-SEP-19 10.00.05.821 AM   7tdrybppuf9ym             5049 .053067586           .000032015
         4 25-SEP-19 09.45.03.665 AM   25-SEP-19 10.00.05.746 AM   7tdrybppuf9ym             5564 .052619081           .000010417
         3 25-SEP-19 09.45.03.665 AM   25-SEP-19 10.00.05.823 AM   7tdrybppuf9ym             5428 .055105939           .000010152
....
         2 08-OCT-19 09.45.01.701 AM   08-OCT-19 10.00.03.180 AM   7tdrybppuf9ym             4598 .041180922           .000008956
         3 08-OCT-19 09.45.01.767 AM   08-OCT-19 10.00.03.252 AM   7tdrybppuf9ym             5058 .045941869           .000009083
         4 08-OCT-19 09.45.01.768 AM   08-OCT-19 10.00.03.256 AM   7tdrybppuf9ym             4793 .045515503           .000009496
         1 08-OCT-19 09.45.01.771 AM   08-OCT-19 10.00.03.327 AM   7tdrybppuf9ym             5137 .049737411           .000017252
gpu4knffn2m60 - Table CORE_B.SPR_MS_USER
   INST_ID SNAP_START_TIME             SNAP_END_TIME               SQL_ID        EXECUTIONS_DELTA  TOTAL_MIN ELAPSED_PER_EXEC_MIN
---------- --------------------------- --------------------------- ------------- ---------------- ---------- --------------------
         4 24-SEP-19 06.30.27.150 AM   24-SEP-19 06.45.28.086 AM   gpu4knffn2m60             5289 .047257514           .000008935
         3 24-SEP-19 06.30.27.240 AM   24-SEP-19 06.45.28.162 AM   gpu4knffn2m60             4731 .043446644           .000009183
         2 24-SEP-19 06.30.27.243 AM   24-SEP-19 06.45.28.161 AM   gpu4knffn2m60             3596 .034911219           .000009708
         1 24-SEP-19 06.30.27.244 AM   24-SEP-19 06.45.28.162 AM   gpu4knffn2m60             4857 .044442675           .000009150
...
         4 08-OCT-19 06.30.11.546 AM   08-OCT-19 06.45.12.464 AM   gpu4knffn2m60             2375 .021015217           .000008849
         2 08-OCT-19 06.30.11.613 AM   08-OCT-19 06.45.12.530 AM   gpu4knffn2m60             2466 .021722506           .000008809
USERID ggsadm@NDWFP201 PASSWORD AACAAAAAAAAAAAIADDKHHAJBUJQCHFEI, ENCRYPTKEY DEFAULT
alias gg="sudo su - goldgate"
alias orl="sudo su - oracle"
alias sp="sqlplus / as sysdba"
alias -x fedmenu='sudo su - oracle -c  /oracle/g01/admin/sysoper/bin/fedmenu.sh'
alias -x fedmenu='sudo su - oracle -c  /oracle/g01/admin/sysoper/bin/fedmenu.sh NDWFP2011'
New password is 'New202101201038!'.
New password is 'New202011180929!'.
relinktime=`date -u '+%Y-%m-%d-%H-%M-%S'`
touch relink_$relinktime.log
relink all 1>>relink_$relinktime.log 2>>relink_$relinktime.log
cat relink_$relinktime.log | grep -i fatal
New password is 'New202006051657!'.
New202006091231!
sudo su - root -c "/oracle/g01/software/grid/11.2.0.4/crs/install/roothas.pl -patch"
  col elapsed_per_exec format 999999999.00
  col ELAPSED_PER_EXEC_MIN format 999.000000000
  col startup_time for a30
  col ELAPSED_TIME_TOTAL format 99999999999
  col snap_end_time for a27
  col snap_start_time for a27
  set pages 999 lines 200
  select --a.DBID,
         a.instance_number as inst_id, --c.STARTUP_TIME,
         c.BEGIN_INTERVAL_TIME as snap_start_time, c.END_INTERVAL_TIME as snap_end_time,
         a.sql_id, a.PLAN_HASH_VALUE,
         a.EXECUTIONS_DELTA, (a.ELAPSED_TIME_DELTA/1000000)/360 total_min --, b.EXECUTIONS_DELTA, b.ELAPSED_TIME_DELTA
         , (((a.ELAPSED_TIME_DELTA - nvl (b.ELAPSED_TIME_DELTA,0))/1000000)/(a.EXECUTIONS_DELTA - nvl(b.EXECUTIONS_DELTA, 0)))/360 elapsed_per_exec_min
  from dba_hist_sqlstat a,
       dba_hist_sqlstat b,
     DBA_HIST_SNAPSHOT C
       where a.sql_id = 'gpu4knffn2m60'
  and a.DBID = b.dbid (+)
  and a.instance_number = b.instance_number (+)
  and a.snap_id = b.snap_id (+) - 1
  and a.sql_id = b.sql_id (+)
  and a.PLAN_HASH_VALUE = b.PLAN_HASH_VALUE (+)
  and a.EXECUTIONS_DELTA - nvl (b.EXECUTIONS_DELTA,0) > 0
  AND A.SNAP_ID = C.SNAP_ID (+) - 1
  AND a.DBID = c.dbid (+)
  AND a.instance_number = c.instance_number (+)
  order by snap_start_time;
India:
km058840 hemantha.rao@sprint.com
so222213 venkata.reddy@sprint.com
ri603570 Shobha.Eshwarappa@sprint.com
gh657940 Monalisa.Patojoshi@sprint.com
du604229 Robert.Prabhu@sprint.com
el792318 Suresh.Kunchala@sprint.com
Brazil:
cr168192 rayder.campos@sprint.com
hb157774 fernando.pereira@sprint.com
tp557822 vicente.neto@sprint.com
us035742 murani.gomes@sprint.com
zy773554 patrick.mello@sprint.com
su330981 alexandre.pimentel@sprint.com
ek923426 alexander.bufalol@sprint.com
ay253699 samuel.tolentino@sprint.com
lm248896 Michael.Edward@sprint.com
Analysis design coding testing
select count(1) from v$session where sql_id='18btsvcfp9u0g' and username='APP7JLADM' and status='INACTIVE';
WDMST101_JMP =
  (DESCRIPTION =
    (SOURCE_ROUTE = YES)
    (ADDRESS =
      (PROTOCOL = TCP)(HOST = pvmke292.corp.sprint.com)(PORT = 1522)
    )
    (ADDRESS =
      (PROTOCOL = TCP)(HOST = plsab541.corp.sprint.com)(PORT = 1532)
    )
    (CONNECT_DATA =
      (SID = WDMST101)
    )
  )
alias wdmfc='echo "connecting to WDM FLASHCOPY" ; ssh PLSSA647'
JJVS99..
KKvs00..
144.230.6.7 vara4
0151
54334-5
select count(*)   "cCHILD",
     sum(GETS)   "sGETS",
     sum(MISSES) "sMISSES",
     sum(SLEEPS) "sSLEEPS"
from v$latch_children
where name = 'cache buffers chains'
order by 4, 1, 2, 3;
select /*+ ordered */
     e.owner ||'.'|| e.segment_name segment_name,
     e.extent_id extent#,
     x.dbablk - e.block_id + 1 block#,
     x.tch,
     l.child#
from
     sys.v$latch_children l,
     sys.x$bh x,
     sys.dba_extents e
where
     l.name    = 'cache buffers chains' and
     l.sleeps > &sleep_count and
     x.hladdr = l.addr and
     e.file_id = x.file# and
     x.dbablk between e.block_id and e.block_id + e.blocks - 1;
col path for a40
     select g.name dg, d.name disk, g.voting_files, d.state, d.path, d.mode_status,d.state, d.os_mb
     from v$asm_disk d left join v$asm_diskgroup g using (group_number)
     order by g.name;
ALTER DISKGROUP data ADD DISK
     '/dev/rhdisk93' NAME data_113,
     '/dev/rhdisk92' NAME data_112,
     '/dev/rhdisk90' NAME data_110,
     '/dev/rhdisk89' NAME data_109,
     '/dev/rhdisk91' NAME data_111,
     '/dev/rhdisk94' NAME data_114
     rebalance power 5;
ALTER DISKGROUP data ADD DISK
     '/dev/rhdisk18' NAME data_0003,
     '/dev/rhdisk19' NAME data_0004
     rebalance power 5;
set lin 200 pages 999
select * from v$asm_operation;
ALTER DISKGROUP DATA ONLINE ALL NOWAIT;
-- ADRCI
adrci
show incident
ips pack incident 721792 in /tmp
ALTER REPLICAT replicate_name, EXTSEQNO 1083 EXTRBA 434137074
WDMP101 =
  (DESCRIPTION =
     (ADDRESS_LIST =
     (LOAD_BALANCE=YES)
     (FAILOVER=YES)
        (ADDRESS = (PROTOCOL = TCP)(HOST = plsab612-vip1.corp.sprint.com) (PORT = 1529))
        (ADDRESS = (PROTOCOL = TCP)(HOST = plsab613-vip1.corp.sprint.com) (PORT = 1529))
        (ADDRESS = (PROTOCOL = TCP)(HOST = plsab614-vip1.corp.sprint.com) (PORT = 1529))
      )
     (CONNECT_DATA =
        (SERVICE_NAME = WDMP101)
        (FAILOVER_MODE = (TYPE = SELECT) (METHOD = BASIC) (RETRIES = 180) (DELAY = 5))
     )
  )
WDM_JMP =
  (DESCRIPTION =
    (SOURCE_ROUTE = YES)
    (ADDRESS =
      (PROTOCOL = TCP)(HOST = pvmke807.corp.sprint.com)(PORT = 1522)
    )
    (ADDRESS =
      (PROTOCOL = TCP)(HOST = plsab612z.corp.sprint.com)(PORT = 1525)
    )
    (CONNECT_DATA =
      (SID=WDMP1011)
    )
  )
WDMP201 =
  (DESCRIPTION =
     (ADDRESS_LIST =
     (LOAD_BALANCE=YES)
     (FAILOVER=YES)
        (ADDRESS = (PROTOCOL = TCP)(HOST = pnbab615-vip1.corp.sprint.com) (PORT = 1529))
        (ADDRESS = (PROTOCOL = TCP)(HOST = pnbab616-vip1.corp.sprint.com) (PORT = 1529))
        (ADDRESS = (PROTOCOL = TCP)(HOST = pnbab617-vip1.corp.sprint.com) (PORT = 1529))
      )
     (CONNECT_DATA =
        (SERVICE_NAME = WDMP201_STBY)
        (FAILOVER_MODE = (TYPE = SELECT) (METHOD = BASIC) (RETRIES = 180) (DELAY = 5))
     )
  )
CREATE DISKGROUP REDO1 NORMAL REDUNDANCY
  FAILGROUP controller1 DISK
    '/devices/diska1' NAME F,
    '/devices/diska2' NAME diska2,
    '/devices/diska3' NAME diska3,
    '/devices/diska4' NAME diska4
  FAILGROUP controller2 DISK
    '/devices/diskb1' NAME diskb1,
    '/devices/diskb2' NAME diskb2,
    '/devices/diskb3' NAME diskb3,
    '/devices/diskb4' NAME diskb4
  ATTRIBUTE 'au_size'='4M',
    'compatible.asm' = '11.2',
    'compatible.rdbms' = '10.1';
CREATE DISKGROUP arch EXTERNAL REDUNDANCY
DISK
'/dev/rhdisk0' name ARCH_0001,
'/dev/rhdisk3' name ARCH_0002,
'/dev/rhdisk4' name ARCH_0003,
'/dev/rhdisk5' name ARCh_0004
ATTRIBUTE
   'compatible.asm' = '11.2',
    'compatible.rdbms' = '10.1';
CREATE DISKGROUP data EXTERNAL REDUNDANCY
DISK
'/dev/rhdisk6'  name DATA_0001,
'/dev/rhdisk7'  name DATA_0002,
'/dev/rhdisk8'  name DATA_0003,
'/dev/rhdisk9'  name DATA_0004,
'/dev/rhdisk10' name DATA_0005,
'/dev/rhdisk11' name DATA_0006,
'/dev/rhdisk12' name DATA_0007,
'/dev/rhdisk13' name DATA_0008,
'/dev/rhdisk14' name DATA_0009,
'/dev/rhdisk15' name DATA_00010,
'/dev/rhdisk16' name DATA_00011,
'/dev/rhdisk17' name DATA_00012,
'/dev/rhdisk18' name DATA_00013,
'/dev/rhdisk19' name DATA_00014,
'/dev/rhdisk20' name DATA_00015,
'/dev/rhdisk21' name DATA_00016,
'/dev/rhdisk22' name DATA_00017,
'/dev/rhdisk23' name DATA_00018
ATTRIBUTE
   'compatible.asm' = '11.2',
    'compatible.rdbms' = '10.1';
CREATE DISKGROUP FRA_01 EXTERNAL REDUNDANCY
DISK
'/dev/ora-262144-07' name FRA_01_0000,
'/dev/ora-262144-08' name FRA_01_0001,
'/dev/ora-262144-09' name FRA_01_0002,
'/dev/ora-262144-10' name FRA_01_0003
ATTRIBUTE
   'compatible.asm' = '11.2',
    'compatible.rdbms' = '10.1';
CREATE DISKGROUP GG_DATA EXTERNAL REDUNDANCY
DISK
'/dev/ora-262144-01' name GG_DATA_0000,
'/dev/ora-262144-02' name GG_DATA_0001,
'/dev/ora-262144-03' name GG_DATA_0002,
'/dev/ora-262144-04' name GG_DATA_0003,
'/dev/ora-262144-05' name GG_DATA_0004,
'/dev/ora-262144-06' name GG_DATA_0005
ATTRIBUTE
   'compatible.asm' = '11.2',
    'compatible.rdbms' = '10.1';



CREATE DISKGROUP FRA EXTERNAL REDUNDANCY
DISK
'/dev/oracleasm/disks/FRA1' name FRA1;

CREATE DISKGROUP REDO2 EXTERNAL REDUNDANCY
DISK
'/dev/oracleasm/disks/REDO21' name REDO2_1,
'/dev/oracleasm/disks/REDO22' name REDO2_2,
'/dev/oracleasm/disks/REDO23' name REDO2_3,
'/dev/oracleasm/disks/REDO24' name REDO2_4;

ALTER DISKGROUP data ADD DISK
     '/dev/oracleasm/disks/DATA6' NAME DATA6,
     '/dev/oracleasm/disks/DATA7' NAME DATA7;

ALTER SYSTEM SET LOG_ARCHIVE_CONFIG='DG_CONFIG=(WDMP101,WDMP201)' scope=both sid='*';
alter system set LOG_ARCHIVE_DEST_1='LOCATION=+FRA_01 VALID_FOR=(ALL_LOGFILES,ALL_ROLES) DB_UNIQUE_NAME=WDMP101' scope=both sid='*';
ALTER SYSTEM SET LOG_ARCHIVE_DEST_2='SERVICE=WDMP201_STBY NOAFFIRM ASYNC VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE) DB_UNIQUE_NAME=WDMP201' scope=both sid='*';
ALTER SYSTEM SET LOG_ARCHIVE_DEST_STATE_2=ENABLE scope=both sid='*';
alter system set log_archive_max_processes=8 scope=both sid='*';
alter system set fal_server=WDMP201 scope=both sid='*';
alter system set standby_file_management=AUTO scope=both sid='*';
ALTER SYSTEM SET LOG_ARCHIVE_DEST_2='SERVICE=WDMP101_PRI NOAFFIRM ASYNC VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE) DB_UNIQUE_NAME=WDMP201' scope=both sid='*';
ek923426@plsab677:/oracle/g01/bkup01/restore[EAIP1031] > cat restore_controlfile.sh
#!/bin/ksh
export ORACLE_SID=WDMP201
export ORACLE_HOME=`cat /etc/oratab | grep -i \^$ORACLE_SID: | cut -f2 -d':'`
export PATH=${ORACLE_HOME}/bin:$PATH
export NLS_DATE_FORMAT="DD-MON-YYYY HH24:MI:SS"
YYYYMMDD=`date +%Y'%m'%d`
LOGTIME=$(TZ=CST6CDT;date +%Y-%m-%d-%H-%M-%S)
LOGFILE=/oracle/g01/bkup01/restore/restore_controlfile_${ORACLE_SID}_$LOGTIME.log
echo "START RESTORE TIME: `date`" > $LOGFILE
rman target / nocatalog <<EOF >> $LOGFILE
run {
ALLOCATE CHANNEL dd1 TYPE 'SBT_TAPE' trace 5 PARMS 'BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/datadomain/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164_nob_rep, BACKUP_HOST=L4ED1164.corp.sprint.com, RMAN_AGENT_HOME=/oracle/g01/software/datadomain)';
BACKUP CURRENT CONTROLFILE FOR STANDBY;
release channel dd1;
}
EOF
rman target / nocatalog <<EOF >> $LOGFILE
run {
ALLOCATE CHANNEL dd1 TYPE 'SBT_TAPE' trace 5 PARMS 'BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/datadomain/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164_nob_rep, BACKUP_HOST=L4ED1164.corp.sprint.com, RMAN_AGENT_HOME=/oracle/g01/software/datadomain)';
BACKUP CURRENT CONTROLFILE FOR STANDBY;
release channel dd1;
}
CONFIGURE CHANNEL device TYPE 'SBT_TAPE' trace 5 PARMS 'BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/datadomain/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164_nob_rep, BACKUP_HOST=NBED0101.corp.sprint.com, RMAN_AGENT_HOME=/oracle/g01/software/datadomain)';
CONFIGURE CHANNEL device TYPE 'SBT_TAPE' trace 5 PARMS 'BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/datadomain/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164_nob_rep, BACKUP_HOST=L4ED1164.corp.sprint.com, RMAN_AGENT_HOME=/oracle/g01/software/datadomain)';
CONFIGURE CHANNEL device TYPE 'SBT_TAPE'parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.4/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1745no_rep,BACKUP_HOST=l2ed1745.corp.sprint.com)';
catalog device type 'SBT_TAPE' backuppiece  'sbueve46_1_1';

alter database create datafile '' as new;
alter database create datafile 264 as '+DATA' size 32767m;
alter database create datafile 265 as '+DATA' size 32767m;
spfile='+DATA/WDMP201/PARAMETERFILE/spfile'
control_files='+DATA/WDMP201/CONTROLFILE/current.755.1022338853','+FRA_01/WDMP201/CONTROLFILE/current.256.1022339091'
WDMP2011.audit_file_dest='/oracle/g01/admin/WDMP2011/adump'
WDMP2012.audit_file_dest='/oracle/g01/admin/WDMP2012/adump'
WDMP2013.audit_file_dest='/oracle/g01/admin/WDMP2013/adump'
*.audit_sys_operations=TRUE
WDMP2011.diagnostic_dest='/oracle/g01/admin/WDMP2011'
WDMP2012.diagnostic_dest='/oracle/g01/admin/WDMP2012'
WDMP2013.diagnostic_dest='/oracle/g01/admin/WDMP2013'
*.cluster_database=FALSE
*.cluster_database_instances=3
WDMP2011.core_dump_dest='/oracle/g01/admin/WDMP2011/cdump'
WDMP2012.core_dump_dest='/oracle/g01/admin/WDMP2012/cdump'
WDMP2013.core_dump_dest='/oracle/g01/admin/WDMP2013/cdump'
*.db_block_size=8192
*.db_file_multiblock_read_count=16
WDMP2011.instance_name='WDMP2011'
WDMP2012.instance_name='WDMP2012'
WDMP2013.instance_name='WDMP2013'
WDMP2011.instance_number=1
WDMP2012.instance_number=2
WDMP2013.instance_number=3
*.job_queue_processes=2
*.log_archive_dest_state_1=enable
WDMP2011.log_archive_format='WDMP2011.arch_%t_%r_%s.dbf'
WDMP2012.log_archive_format='WDMP2012.arch_%t_%r_%s.dbf'
WDMP2013.log_archive_format='WDMP2013.arch_%t_%r_%s.dbf'
*.log_buffer=16777216
*.log_checkpoints_to_alert=true
*.max_dump_file_size=10M
*.open_cursors=4096
*.pga_aggregate_target=1G             #was 320M
*.processes=10000
*.recyclebin='off'
*.remote_login_passwordfile='EXCLUSIVE'
*.sga_target=8GM                       #was 1200M
*.session_cached_cursors=100
*.timed_statistics=TRUE
*.undo_management='AUTO'
*.undo_retention=900
WDMP2011.undo_tablespace='UNDO_01'
WDMP2012.undo_tablespace='UNDO_02'
WDMP2013.undo_tablespace='UNDO_03'
*.workarea_size_policy=AUTO
*.db_create_file_dest='+DATA'
*.db_create_online_log_dest_1='+REDO_01'
*.db_recovery_file_dest = '+FRA_01'
*.db_recovery_file_dest_size = 1024G

alter database add standby logfile thread 1
 group 11 ('+REDO01','+REDO02') size 200M,
 group 12 ('+REDO01','+REDO02') size 200m,
 group 13 ('+REDO01','+REDO02') size 200M,
 group 19 ('+DATA') size 1G,
 group 20 ('+DATA') size 1G,
 group 21 ('+DATA') size 1G;
alter database add standby logfile thread 2
 group 21 ('+DATA') size 1G,
 group 22 ('+DATA') size 1G,
 group 23 ('+DATA') size 1G,
 group 25 ('+DATA') size 1G,
 group 26 ('+DATA') size 1G,
 group 27 ('+DATA') size 1G;

alter database add standby logfile thread 3
 group 28 ('+DATA') size 1G,
 group 29 ('+DATA') size 1G,
 group 30 ('+DATA') size 1G,
 group 31 ('+DATA') size 1G,
 group 32 ('+DATA') size 1G,
 group 33 ('+DATA') size 1G;

srvctl add database -d WDMP201 -n WDMP101 -o /oracle/g01/software/rdbms/11.2.0.4/ -p +DATA/WDMP201/PARAMETERFILE/spfile -r physical_standby -a DATA,FRA_01,REDO_01
srvctl add instance -d WDMP201 -i WDMP2011 -n pnbab615
srvctl add instance -d WDMP201 -i WDMP2012 -n pnbab616
srvctl add instance -d WDMP201 -i WDMP2013 -n pnbab617
srvctl start database -d WDMP201 -o mount
export-exec_db_rpt_10015424536
EDIT DATABASE 'wdmp201' SET STATE='APPLY-ON' with apply instance='WDMP2011';
select /*+Parallel(4)*/ to_char(trunc(a.sample_time),'dd-mon-rr'), a.INSTANCE_NUMBER, b.username, count(1) qty
  from DBA_HIST_ACTIVE_SESS_HISTORY a, dba_users b
  --where sample_time >  sysdate - 8/(24*60)
  where a.user_id=b.user_id
    and b.username in ('CFS_FRAUD','BOACCESSADM','STORMADM')
  group by to_char(trunc(a.sample_time),'dd-mon-rr'), a.INSTANCE_NUMBER, b.username
  order by 1,2;
select sql_id, sql_fulltext from gv$sql where upper(sql_text) like '%DELETE%MEMO%';
New201910261146!
  col elapsed_per_exec format 999999999.00
  col ELAPSED_PER_EXEC_MIN format 999.000000000
  col startup_time for a30
  col ELAPSED_TIME_delta format 99999999999
  col snap_end_time for a27
  col snap_start_time for a27
  set pages 999 lines 200
  select --a.DBID,
         a.instance_number as inst_id, --c.STARTUP_TIME,
         c.BEGIN_INTERVAL_TIME as snap_start_time, c.END_INTERVAL_TIME as snap_end_time,
         a.sql_id, a.PLAN_HASH_VALUE,
         a.executions_delta, (a.ELAPSED_TIME_delta/1000000)/360 delta_min --, b.executions_delta, b.ELAPSED_TIME_delta
         , (((a.ELAPSED_TIME_delta - nvl (b.ELAPSED_TIME_delta,0))/1000000)/(a.executions_delta - nvl(b.executions_delta, 0)))/360 elapsed_per_exec_min
  from dba_hist_sqlstat a,
       dba_hist_sqlstat b,
     DBA_HIST_SNAPSHOT C
       where a.sql_id = '9j32khy9wn8fz'
  and a.DBID = b.dbid (+)
  and a.instance_number = b.instance_number (+)
  and a.snap_id = b.snap_id (+) - 1
  and a.sql_id = b.sql_id (+)
  and a.PLAN_HASH_VALUE = b.PLAN_HASH_VALUE (+)
  and a.executions_delta - nvl (b.executions_delta,0) > 0
  AND A.SNAP_ID = C.SNAP_ID (+) - 1
  AND a.DBID = c.dbid (+)
  AND a.instance_number = c.instance_number (+)
  order by snap_start_time;
select BA.ACCOUNT_TYPE, BA.ACCOUNT_SUB_TYPE, BA.BAN_STATUS,TRIM(BA.BL_MAJOR_ACCOUNT_NO) majorAccoutnNo, AT.NAME_FORMAT,
decode(nvl(BA.COL_DELINQ_STATUS,''), 'D', '1' ,'0') COL_DELINQ_STATUS, decode(BA.HIERARCHY_ID, NULL, '1', '0') HIERARCHY_ID  from BILLING_ACCOUNT BA, ACCOUNT_TYPE AT
where BA.ACCOUNT_TYPE = AT.ACC_TYPE and BA.ACCOUNT_SUB_TYPE = AT.ACC_SUB_TYPE and BA.BAN = '732463459';
-- First command will tell oradebug to only trace your session, not entire database.
SQL> oradebug setmypid
SQL> oradebug ipc
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191028_24786_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191028_24787_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191028_24785_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191028_24784_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191028_24791_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191028_24788_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191028_24790_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191028_24789_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191028_24795_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191028_24793_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191028_24792_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191028_24794_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191028_24799_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191028_24798_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191028_24796_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191028_24797_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24801_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24800_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24802_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24803_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24807_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24804_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24806_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24805_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24808_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24810_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24811_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24809_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24812_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24815_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24814_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24813_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24816_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24818_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24817_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24819_1';
catalog device type 'sbt_tape' backuppiece 'plsab612_WDMP101_ARC_20191029_24820_1';
set numwidth 20
select current_scn from v$database;
         CURRENT_SCN
--------------------
      15855038489641
      15855039999768
select inst_id,process,status from gv$managed_standby where process like '%MRP%';
## PAGE ONSHORE DBA
OnShore DBAs (PAGE)
SFWDBS-DM-PROD-ORA-ONSHORE-OC1 for calling out the primary on-shore on-call DBA.
                            SFWDBS-DM-PROD-ORA-ONSHORE-OC2 If no response… Please page out
              SFWDBS-DM-PROD-ORA-ONSHORE If escalation is still required… Please page out .
              R6QHC5C1
              R6QHD1C1
PLDSA633 - new dp server
• Navigate to the $datapoint_home directory
• ftp resacp01 or 144.226.166.26 - use regular ftp, not sftp or you probably won’t get connected
• login as anonymous, provide your email address as the password rodrigo.dainez@sprint.com
• cd outbox
• bin
• get datapoint_23.tar
• bye
• tar -xvf datapoint_23.tar
• ./install_datapoint23.sh -s
###House Keeping
30 23 * * 6 /oracle/dbtools/datapoint/scripts/aginglog_server  >/dev/null 2>&1
55 23 * * 6 /oracle/dbtools/datapoint/scripts/aginglog WDMP2013 >/dev/null 2>&1
###Datapoint Collector Check
33 * * * * /oracle/g01/admin/common/bin/check_dpt_collector.sh WDMP2013 > /oracle/g01/admin/common/log/check_dpt_collector.log 2>&1
mkdir -p /oracle/g01/admin/WDMP201/scripts/DataguardCheck/archive_gap_check.sql
instalar oracle baseado no ECP
CREATE CONFIGURATION WDMP_DATABASE AS PRIMARY DATABASE IS WDMP101 CONNECT IDENTIFIER IS WDMP101_PRI;
ADD DATABASE WDMP201 AS CONNECT IDENTIFIER IS WDMP201_STBY MAINTAINED AS PHYSICAL;
su root -c "chown oracle:oinstall $OHGRID"
su root -c "chown root:oinstall $OHGRID"
set IHRDBMS=/oracle/EC_PROD/11204
set OHRDBMS=/oracle/EC_PROD/112
set OHGRID=/orainfra/app/product/11.2.0.4/grid
set ORACLE_BASE=/orainfra/app/oracle
set ORACLE_HOME=$OHGRID
mkdir -p /oracle/KPV/11204
mkdir -p /oracle/KPV/112
mkdir -p /orainfra/app/product/11.2.0.4/grid
mkdir -p /orainfra/app/oracle
chown -R oracle:oinstall  /oracle
chown -R oracle:oinstall  /orainfra
chmod -R 775 /oracle
chmod -R 775 /orainfra
export IHRDBMS=/oracle/KPV/11204
export OHRDBMS=/oracle/KPV/112
export OHGRID=/orainfra/app/product/11.2.0.4/grid
export ORACLE_BASE=/orainfra/app/
export ORACLE_HOME=$IHRDBMS
export ORACLE_SID='KPV'
export HOSTNAME=`hostname`
export PS1='$HOSTNAME ($ORACLE_SID) $PWD$ '
export OHRDBMS=/oracle/KPV/112
export IHRDBMS=/oracle/KPV/11204
export GRID_HOME=/orainfra/app/product/11.2.0.4/grid
export OHGRID=/orainfra/app/product/11.2.0.4/grid
export SBPFUSER=/usr/sbin/fuser
ORACLE_BASE - RDBMS: /oracle/EC_PROD
mv $OHGRID/OPatch $OHGRID/OPatch-pre-SBP_11204171109_201711
mv $OHGRID/sapbundle/SBP_11204171109_201711/OPatch $OHGRID/OPatch
test -d $OHGRID/MOPatch && mv $OHGRID/MOPatch $OHGRID/MOPatch-pre-SBP_11204171109_201711
mv $OHGRID/sapbundle/SBP_11204171109_201711/MOPatch $OHGRID/MOPatch
env ORACLE_HOME=$OHRDBMS $OHRDBMS/bin/srvctl stop home -o $OHRDBMS -s $OHRDBMS.srvctlstatus
env ORACLE_HOME=$OHGRID $OHGRID/OPatch/opatch rollback -silent -local -id 18522892 -all_subpatches
New password is 'New201911041027!'.
select 'alter index ' || owner || '.' || index_name || ' rebuild tablespace OVMADM_IDX;'
 from dba_indexes where owner='OVMADM';
select owner, object_name, object_type from dba_objects where object_name in ('OAR_PHONE_AND_ACCESSORY','ITEM_DEFINITION','KIT_COMPONENTS') order by 3,2,1;
New201911050921!
/oracle/g01/admin/sysoper/stage/MID19_10/6ZN/MID19_10_1_MID19_11_1_C242852_T766213_OEG_PHO_DDL.sql
/oracle/g01/admin/sysoper/ddl/MID19_10/4BN/MID19_10_1_MID19_11_1_C242842_T766224_OEG_8W3_DDL.sql
19 01 * * *  /oracle/g01/bkup01/export/export_pci.ksh > /oracle/g01/bkup01/export/export_pci.log 2>&1
userid=\'/ as sysdba\'
VP827141
/orainfra/app/product/11.2.0.4/grid/perl/bin/perl -I/orainfra/app/product/11.2.0.4/grid/perl/lib -I/orainfra/app/product/11.2.0.4/grid/crs/install /orainfra/app/product/11.2.0.4/grid/crs/in
stall/roothas.pl
./runInstaller -silent -detachHome ORACLE_HOME="/orainfra/app/product/11.2.0.4/grid" ORACLE_HOME_NAME="Ora11g_gridinfrahome1"
/usr/sbin/no -a | fgrep ephemeral
./runInstaller -silent -responseFile "/sapmidias/ORACLE_112/grid/response/grid_install_u1305.rsp"
# configure ntp to use -x
. Edit /etc/rc.tcpip and make following changes
uncomment following line and add “-x” at the end of the line as below
# Start up Network Time Protocol (NTP) daemon
start /usr/sbin/xntpd “$src_running” “-x”
[root@u1305:/sapmidias/ORACLE_112/grid]# ps -aef | grep xntpd | grep -v grep
    root  4128942  4063402   0 14:10:23      -  0:00 /usr/sbin/xntpd
chssys -s xntpd -a "-x"
ps -aef | grep xntpd | grep -v grep
stopsrc -s xntpd
startsrc -s xntpd
[root@u1305:/sapmidias/ORACLE_112/grid]# ps -aef | grep xntpd | grep -v grep
    root  4128944  4063402   0 17:17:15      -  0:00 /usr/sbin/xntpd -x
/orainfra/app/product/11.2.0.4/grid/perl/bin/perl -I/orainfra/app/product/11.2.0.4/grid/perl/lib -I/orainfra/app/product/11.2.0.4/grid/crs/install /orainfra/app/product/11.2.0.4/grid/crs/install/roothas.pl
ioo –o aio_maxreqs
ioo -r –o aio_maxreqs=65536
/sapmidias/ORACLE_112/deinstall/./perl/bin/perl -I/sapmidias/ORACLE_112/deinstall/./perl/lib -I/sapmidias/ORACLE_112/deinstall/./crs/install /sapmidias/ORACLE_112/deinstall/./crs/install/roothas.pl -force  -deconfig -paramfile "/sapmidias/ORACLE_112/deinstall/response/deinstall_Ora11g_gridinfrahome1.rsp"
export DISPLAY=172.20.28.148:0.0
/orainfra/app/product/11.2.0.4/grid/perl/bin/perl -I/orainfra/app/product/11.2.0.4/grid/perl/lib -I/orainfra/app/product/11.2.0.4/grid/crs/install /orainfra/app/product/11.2.0.4/grid/crs/install/roothas.pl
/sapmidias/ORACLE_112/deinstall/./perl/bin/perl -I/sapmidias/ORACLE_112/deinstall/./perl/lib -I/sapmidias/ORACLE_112/deinstall/./crs/install /sapmidias/ORACLE_112/deinstall/./crs/install/roothas.pl -force  -deconfig -paramfile "/sapmidias/ORACLE_112/deinstall/response/deinstall_Ora11g_gridinfrahome1.rsp"
/orainfra/app/product/11.2.0.4/grid/perl/bin/perl -I/orainfra/app/product/11.2.0.4/grid/perl/lib -I/orainfra/app/product/11.2.0.4/grid/crs/install /orainfra/app/product/11.2.0.4/grid/crs/install/roothas.pl
/orainfra/app/product/11.2.0.4/grid/crs/install/roothas.pl -deconfig -force
/orainfra/app/product/11.2.0.4/grid/bin/crsctl start has
Picadilho3;f0da
##### CERTPONTO EXCEDENTE
21 minutos
Type                 Key    Completion Time    Filename/Handle
-------------------- ------ ------------------ --------------------
Control File Copy     1      21-OCT-2019 18:39:40 /tmp/ctlfilewdmp101.ctl
RMAN-06207: WARNING: 1 objects could not be deleted for DISK channel(s) due
RMAN-06208:          to mismatched status.  Use CROSSCHECK command to fix status
RMAN-06210: List of Mismatched objects
RMAN-06211: ==========================
RMAN-06212:   Object Type   Filename/Handle
RMAN-06213: --------------- ---------------------------------------------------
RMAN-06214: Datafile Copy   /tmp/ctlfilewdmp101.ctl
./runInstaller -updateNodeList ORACLE_HOME=$ORACLE_HOME -defaultHomeName CLUSTER_NODES= CRS=TRUE
processes=300
remote_login_passwordfile='exclusive'
audit_file_dest='/orainfra/app/oracle/diag/asm/+asm/+ASM/adump'
core_dump_dest='/orainfra/app/oracle/diag/asm/+asm/+ASM/cdump'
diagnostic_dest='/orainfra/app/oracle'
asm_diskgroups = 'DATA', 'ARCH', 'RECO', 'OLOG', 'MLOG'
asm_diskgroups = 'DATA', 'ARCH', 'RECO', 'OLOG', 'MLOG'
DATA, ARCH, RECO, OLOG, MLOG
asm_diskstring                       string
select
( select sum(bytes)/1024/1024/1024 data_size from dba_data_files ) +
( select nvl(sum(bytes),0)/1024/1024/1024 temp_size from dba_temp_files ) +
( select sum(bytes)/1024/1024/1024 redo_size from sys.v_$log ) +
( select sum(BLOCK_SIZE*FILE_SIZE_BLKS)/1024/1024/1024 controlfile_size from v$controlfile) "Size in GB"
from
dual;
select
"Reserved_Space(MB)", "Reserved_Space(MB)" - "Free_Space(MB)" "Used_Space(MB)","Free_Space(MB)"
from(
select
(select sum(bytes/(1014*1024)) from dba_data_files) "Reserved_Space(MB)",
(select sum(bytes/(1024*1024)) from dba_free_space) "Free_Space(MB)"
from dual
);
#!/bin/ksh
sqlplus / as sysdba <<EOF
set lines 500 pages 9999 echo on time on timing on trimspool on trim on
spool /oracle/g01/admin/sysoper/log/refresh_CSTADM.EIB_CONTRACT_HISTORY2.log
alter session set current_schema=CSTADM;
exec BEGIN dbms_mview.refresh('EIB_CONTRACT_HISTORY2','C',atomic_refresh=>FALSE,parallelism=>4); END;
spool off
EOF
dg068404
"-ignoreDiskWarning"
./RUNINSTALLER -silent -ignoreAll
/oracle/g01/admin/sysoper/log
alter session set current_schema=CORE_B;
- Disk space : required 8.53 GB available 49.79 GB
- Source location : /sapmidias/ORACLE_112/database/install/../stage/products.xml
- Database edition : Enterprise Edition (Install database software only)
- Oracle base : /oracle
- Software location : /oracle/KPV/11204
- Privileged Operating System Groups : dba (OSDBA), oper (OSOPER)
/oracle/EC_PROD/11204/perl/bin/perl clone.pl ORACLE_BASE="/oracle/" ORACLE_HOME="/oracle/EC_PROD/11204" OSDBA_GROUP=dba OSOPER_GROUP=oper -defaultHomeName
ls r6gv5*c4.prm
find /goldengate/ggsoracle/gvn/ora112/dirprm/rnrtv*c4.prm -type f -exec tail "{}"  \;
cp r6gv51c4.prm r6gv53c4.prm
cp r6gv51c4.prm r6gv54c4.prm
cp r6gv51c4.prm r6gv55c4.prm
cp r6gv51c4.prm r6gv56c4.prm
cp r6gv51c4.prm r6gv57c4.prm
cp r6gv51c4.prm r6gv58c4.prm
add replicat r6gv53c4 , EXTTRAIL /ggsCUST/repl4/c4 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat r6gv54c4 , EXTTRAIL /ggsCUST/repl4/c4 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat r6gv55c4 , EXTTRAIL /ggsCUST/repl4/c4 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat r6gv56c4 , EXTTRAIL /ggsCUST/repl4/c4 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat r6gv57c4 , EXTTRAIL /ggsCUST/repl4/c4 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat r6gv58c4 , EXTTRAIL /ggsCUST/repl4/c4 , CHECKPOINTTABLE GGSADM.GGSCHKPT
alter replicat r6gv53c4 , extseqno 157089 , extrba 105609004
alter replicat r6gv54c4 , extseqno 157089 , extrba 105609004
alter replicat r6gv55c4 , extseqno 157089 , extrba 105609004
alter replicat r6gv56c4 , extseqno 157089 , extrba 105609004
alter replicat r6gv57c4 , extseqno 157089 , extrba 105609004
alter replicat r6gv58c4 , extseqno 157089 , extrba 105609004
start r6gv5*c4
info r6gv5*c4
info rnrtv*c4
start rnrtv*c4
dirprm/endpointx4.inc
cp rnrtv3c4.prm rnrtv4c4.prm
cp rnrtv3c4.prm rnrtv5c4.prm
cp rnrtv3c4.prm rnrtv6c4.prm
cp rnrtv3c4.prm rnrtv7c4.prm
cp rnrtv3c4.prm rnrtv8c4.prm
rnrtv*c4.prm
add replicat RNRTV3C4 , EXTTRAIL /ggsCUST/repl4/c4 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat RNRTV4C4 , EXTTRAIL /ggsCUST/repl4/c4 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat RNRTV5C4 , EXTTRAIL /ggsCUST/repl4/c4 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat RNRTV6C4 , EXTTRAIL /ggsCUST/repl4/c4 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat RNRTV7C4 , EXTTRAIL /ggsCUST/repl4/c4 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat RNRTV8C4 , EXTTRAIL /ggsCUST/repl4/c4 , CHECKPOINTTABLE GGSADM.GGSCHKPT
alter replicat RNRTV3C4 , extseqno 237593 , extrba 105609004
alter replicat RNRTV4C4 , extseqno 237593 , extrba 105609004
alter replicat RNRTV5C4 , extseqno 237593 , extrba 105609004
alter replicat RNRTV6C4 , extseqno 237593 , extrba 105609004
alter replicat RNRTV7C4 , extseqno 237593 , extrba 105609004
alter replicat RNRTV8C4 , extseqno 237593 , extrba 105609004
shell vi dirprm/rnrtv3c4.prm
shell vi dirprm/rnrtv4c4.prm
shell vi dirprm/rnrtv5c4.prm
shell vi dirprm/rnrtv6c4.prm
shell vi dirprm/rnrtv7c4.prm
shell vi dirprm/rnrtv8c4.prm
stats RNRTV3C4 total , hourly, reportrate sec
select count(1) qty, to_char(sample_time,'dd-mon-yyyy hh24:mi:ss')
  from dba_hist_active_sess_history
where sample_time between to_date('08-Nov-2019 11:00:00','dd-mon-yyyy hh24:mi:ss') and to_date('08-Nov-2019 12:30:00','dd-mon-yyyy hh24:mi:ss')
  group by sample_time
  order by 1 desc, 2;
select owner, object_name, object_type from dba_objects
where object_name in ('ANCESTOR','BLOB_ANCESTOR',
'IDX01_ANCESTOR',
'IDX1_BLOB_ANCESTOR',
'IDX3_BLOB_ANCESTOR');
select 'alter system disconnect session ''' || sid || ',' || serial# || ',@' || inst_id || ''' immediate;'
from gv$session where sql_id= '76jcq17hjsgt7';
select count(*), sample_time
from dba_hist_active_sess_history where sql_id='76jcq17hjsgt7'
group by sample_time order by 1;
Hello Alexander -
▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬
▬ Follow-Up
▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬
At customer's convenience.
▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬
▬ Cause
▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬
Doc ID 10114419.8 Bug:10114419 "ORA-600 [qerrmOxi2e1] from complex join between local and remote tables"
ORA-600 [qerrmOxi2e1] can occur when parsing a SQL with a complex join between local and remote tables
involving a local predicate with a datatype not supported by remote operation such as CLOB, BLOB, LOB
Match Reasons:
~ Trace shows ORA-600 [qerrmOxi2e1]
~ Issue affects this version (11.2.0.4)
~ Not Patched
Current PSU "Database Patch Set Update : 11.2.0.4.190115 (28729262)"
▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬
▬ ACTION PLAN 12.1 and Lower
▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬
Download and apply Patch: https://updates.oracle.com/download/10114419.html
Select > IBM AIX on POWER Systems (64-bit)
Select > 11.2.0.4.2
I have checked on your behalf and found NO conflicts between the Version 11.2.0.4.2 created for Patch 10114419 and your current Opatch Lsinventory list.
▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬
Thank You,
Amanda
Oracle Support
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
| Available Monday - Friday from 8:30 AM to 17:30 PM (5:30 PM EST United States)
| Local Time Converter https://www.timeanddate.com/worldclock/converter.html
| Need URGENT Assistance? http://www.oracle.com/support/contact.html
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
'76jcq17hjsgt7'
select /*+ parallel (a,4)*/ to_char(sample_time, 'dd-mon-yyyy hh24:mi') time, sql_id, count(1) qty, count(1)*100/sum(count(*)) over() pctload
--  from gv$active_session_history a
  from DBA_HIST_ACTIVE_SESS_HISTORY a
--  where sample_time between to_date('16-JUL-2019 13:20:00','dd-mon-yyyy hh24:mi:ss') and to_date('16-JUL-2019 13:50:00','dd-mon-yyyy hh24:mi:ss')
  where sample_time > sysdate - 3/24
    and event='enq: TX - row lock contention'
   --and session_id = :B1
    and sql_id='76jcq17hjsgt7'
  having count(1)>20
  group by to_char(sample_time, 'dd-mon-yyyy hh24:mi'), sql_id
  order by 1,3 desc;
 alter system disconnect session '918,5087' immediate;
select to_char(sample_time, 'dd-mon-yyyy hh24:mi') time,b.username,machine,a.event,count(1) qty, count(1)*100/sum(count(1)) over() pctload
  from DBA_HIST_ACTIVE_SESS_HISTORY a, dba_users b
--  from gv$active_session_history a, dba_users b
  where a.user_id=b.user_id
--    and sample_time between to_date('16-JUL-2019 13:20:00','dd-mon-yyyy hh24:mi:ss') and to_date('16-JUL-2019 13:50:00','dd-mon-yyyy hh24:mi:ss')
    and sample_time > sysdate - 3/24
    and event='enq: TX - row lock contention'
    and sql_id='&SQL_ID'
  group by to_char(sample_time, 'dd-mon-yyyy hh24:mi'),b.username,a.event,machine
  order by 1,2;
run {
allocate channel d1 device type disk;
crosscheck backup;
report obsolete;
}
LSNR_JMP =
  (ADDRESS_LIST =
        (ADDRESS= (PROTOCOL= TCP)(Host=plsab612z.corp.sprint.com)(Port= 1525))
  )
SID_LIST_LSNR_JMP =
  (SID_LIST =
    (SID_DESC =
      (ORACLE_HOME= /oracle/g01/software/rdbms/11.2.0.4)
      (SID_NAME = WDMP1011)
    )
    (SID_DESC =
      (ORACLE_HOME= /oracle/g01/software/rdbms/11.2.0.4)
      (SERVICE_NAME = WDMP101_USR)
    )
)
WDM_AIX_JMP =
  (DESCRIPTION =
    (SOURCE_ROUTE = YES)
    (ADDRESS =
      (PROTOCOL = TCP)(HOST = pvmke807.corp.sprint.com)(PORT = 1522)
    )
    (ADDRESS =
      (PROTOCOL = TCP)(HOST = 10.118.158.195)(PORT = 1525)
    )
    (CONNECT_DATA =
      (SID = WDMP101)
    )
  )
select NAME,RTIME,TABLESPACE_SIZE*8192/1024/1024/1024/1024,TABLESPACE_USEDSIZE*8192/1024/1024/1024/1024
from dba_hist_tbspc_space_usage,v$tablespace
where TABLESPACE_ID=TS# and NAME='TEMP_FLASH_01' and RTIME like '11/17/2019%' order by 1,2;
SELECT /* Recalc.08 */ GROUP_ID, RECALC_SETID, PRIORITY, GROUP_RECALC_GROUP_ID from GROUP_RECALC_GROUPS where GROUP_ID =
(select GROUP_ID from GROUP_RECALC_GROUPS where GROUP_RECALC_GROUP_ID = (select min(GROUP_RECALC_GROUP_ID) from GROUP_RECALC_GROUPS where PRIORITY =
(select max(PRIORITY) from GROUP_RECALC_GROUPS) ) ) for update;
/opt/opsware/support/bin/sql -a  "select trunc(start_dt), count(*) from sessions group by trunc(start_dt) order by 1"
 select OWNER, JOB_NAME, JOB_TYPE, JOB_ACTION REPEAT_INTERVAL, LAST_START_DATE, ENABLED, state
 from dba_scheduler_jobs where owner = 'CSTADM';
   CREATE MATERIALIZED VIEW "CSTADM"."EIB_CONTRACT_HISTORY2" ("EIB_CONTRACT_HISTORY_ID", "TRANSACTION_NUMBER", "LOAN_NUMBER", "TRANSACTION_DATE", "STORE_ID", "STORE_CITY",
   "STORE_STATE", "BAN", "FIRST_NAME", "LAST_NAME", "TOTAL_LOAN_AMT", "LOAN_MO_INSTALLMENT23", "LOAN_MO_INSTALLMENT24", "LOAN_END_DATE", "PEAL_TERM", "SRP", "DOWNPAYMENT",
   "SUBSCRIBER_ID", "BILL_CYCLE", "FL_STAMP_TAX", "BUYERS_ADDRESS", "BUYERS_PHONE_NUMBER", "SALES_TAX", "GOODS_DESCRIPTION", "TEMPLATE_ID", "REP_ID", "EMAIL_ADDRESS",
   "TEMPLATE_VERSION", "HAS_SIGNATURE", "STATUS", "CHANNEL_TYPE", "SAVE_IND", "APP_NAME", "ENTITY_NAME", "TRANS_TIME", "APR", "FINANCE_CHARGE", "CSA", "MAPPING_ADDRESS_LINE1",
   "MAPPING_ADDRESS_LINE2", "MAPPING_ADDRESS_CITY", "MAPPING_ADDRESS_STATE", "MAPPING_ADDRESS_ZIP", "CREATE_DATE", "LANGUAGE_CODE", "LOAN_INSTANT_DISCOUNT_AMT", "MODEL_TYPE",
   "SALES_CHANNEL", "IN_LOAN_TABLE", "LAST_CHECKED", "PURCHASE_AMOUNT", "INSTALLMENT_AMT_TAX", "LAST_INSTALLMENT_AMT_TAX", "MONTH_TO_MONTH_AMT", "PREPAID_BRAND_CODE",
   "CHECK_RETURN_FEE", "MAC_AMT", "MAC_DURATION", "MAC_LIFETIME_AMT", "ITEM_ID", "ORIG_LOAN_NUMBER")
      ORGANIZATION HEAP PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
      NOCOMPRESS NOLOGGING
      STORAGE(INITIAL 104857600 NEXT 104857600 MINEXTENTS 1 MAXEXTENTS 2147483645
      PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
      BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
      TABLESPACE "DATA14"
      BUILD IMMEDIATE
      USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255
      REFRESH FORCE ON DEMAND START WITH sysdate+0 NEXT TRUNC(SYSDATE + 1)+ 23/24
      WITH PRIMARY KEY USING DEFAULT LOCAL ROLLBACK SEGMENT
      USING ENFORCED CONSTRAINTS DISABLE QUERY REWRITE
  AS SELECT "EIB_CONTRACT_HISTORY2"."EIB_CONTRACT_HISTORY_ID" "EIB_CONTRACT_HISTORY_ID","EIB_CONTRACT_HISTORY2"."TRANSACTION_NUMBER" "TRANSACTION_NUMBER",
  "EIB_CONTRACT_HISTORY2"."LOAN_NUMBER" "LOAN_NUMBER","EIB_CONTRACT_HISTORY2"."TRANSACTION_DATE" "TRANSACTION_DATE",
  "EIB_CONTRACT_HISTORY2"."STORE_ID" "STORE_ID","EIB_CONTRACT_HISTORY2"."STORE_CITY" "STORE_CITY","EIB_CONTRACT_HISTORY2"."STORE_STATE" "STORE_STATE",
  "EIB_CONTRACT_HISTORY2"."BAN" "BAN","EIB_CONTRACT_HISTORY2"."FIRST_NAME" "FIRST_NAME","EIB_CONTRACT_HISTORY2"."LAST_NAME" "LAST_NAME",
  "EIB_CONTRACT_HISTORY2"."TOTAL_LOAN_AMT" "TOTAL_LOAN_AMT","EIB_CONTRACT_HISTORY2"."LOAN_MO_INSTALLMENT23" "LOAN_MO_INSTALLMENT23",
  "EIB_CONTRACT_HISTORY2"."LOAN_MO_INSTALLMENT24" "LOAN_MO_INSTALLMENT24","EIB_CONTRACT_HISTORY2"."LOAN_END_DATE" "LOAN_END_DATE","EIB_CONTRACT_HISTORY2"."PEAL_TERM" "PEAL_TERM",
  "EIB_CONTRACT_HISTORY2"."SRP" "SRP","EIB_CONTRACT_HISTORY2"."DOWNPAYMENT" "DOWNPAYMENT","EIB_CONTRACT_HISTORY2"."SUBSCRIBER_ID" "SUBSCRIBER_ID",
  "EIB_CONTRACT_HISTORY2"."BILL_CYCLE" "BILL_CYCLE","EIB_CONTRACT_HISTORY2"."FL_STAMP_TAX" "FL_STAMP_TAX","EIB_CONTRACT_HISTORY2"."BUYERS_ADDRESS" "BUYERS_ADDRESS",
  "EIB_CONTRACT_HISTORY2"."BUYERS_PHONE_NUMBER" "BUYERS_PHONE_NUMBER","EIB_CONTRACT_HISTORY2"."SALES_TAX" "SALES_TAX","EIB_CONTRACT_HISTORY2"."GOODS_DESCRIPTION" "GOODS_DESCRIPTION",
  "EIB_CONTRACT_HISTORY2"."TEMPLATE_ID" "TEMPLATE_ID","EIB_CONTRACT_HISTORY2"."REP_ID" "REP_ID","EIB_CONTRACT_HISTORY2"."EMAIL_ADDRESS" "EMAIL_ADDRESS",
  "EIB_CONTRACT_HISTORY2"."TEMPLATE_VERSION" "TEMPLATE_VERSION","EIB_CONTRACT_HISTORY2"."HAS_SIGNATURE" "HAS_SIGNATURE","EIB_CONTRACT_HISTORY2"."STATUS" "STATUS",
  "EIB_CONTRACT_HISTORY2"."CHANNEL_TYPE" "CHANNEL_TYPE","EIB_CONTRACT_HISTORY2"."SAVE_IND" "SAVE_IND","EIB_CONTRACT_HISTORY2"."APP_NAME" "APP_NAME",
  "EIB_CONTRACT_HISTORY2"."ENTITY_NAME" "ENTITY_NAME","EIB_CONTRACT_HISTORY2"."TRANS_TIME" "TRANS_TIME","EIB_CONTRACT_HISTORY2"."APR" "APR",
  "EIB_CONTRACT_HISTORY2"."FINANCE_CHARGE" "FINANCE_CHARGE","EIB_CONTRACT_HISTORY2"."CSA" "CSA","EIB_CONTRACT_HISTORY2"."MAPPING_ADDRESS_LINE1" "MAPPING_ADDRESS_LINE1",
  "EIB_CONTRACT_HISTORY2"."MAPPING_ADDRESS_LINE2" "MAPPING_ADDRESS_LINE2","EIB_CONTRACT_HISTORY2"."MAPPING_ADDRESS_CITY" "MAPPING_ADDRESS_CITY",
  "EIB_CONTRACT_HISTORY2"."MAPPING_ADDRESS_STATE" "MAPPING_ADDRESS_STATE","EIB_CONTRACT_HISTORY2"."MAPPING_ADDRESS_ZIP" "MAPPING_ADDRESS_ZIP",
  "EIB_CONTRACT_HISTORY2"."CREATE_DATE" "CREATE_DATE","EIB_CONTRACT_HISTORY2"."LANGUAGE_CODE" "LANGUAGE_CODE","EIB_CONTRACT_HISTORY2"."LOAN_INSTANT_DISCOUNT_AMT" "LOAN_INSTANT_DISCOUNT_AMT",
  "EIB_CONTRACT_HISTORY2"."MODEL_TYPE" "MODEL_TYPE","EIB_CONTRACT_HISTORY2"."SALES_CHANNEL" "SALES_CHANNEL","EIB_CONTRACT_HISTORY2"."IN_LOAN_TABLE" "IN_LOAN_TABLE",
  "EIB_CONTRACT_HISTORY2"."LAST_CHECKED" "LAST_CHECKED","EIB_CONTRACT_HISTORY2"."PURCHASE_AMOUNT" "PURCHASE_AMOUNT","EIB_CONTRACT_HISTORY2"."INSTALLMENT_AMT_TAX" "INSTALLMENT_AMT_TAX",
  "EIB_CONTRACT_HISTORY2"."LAST_INSTALLMENT_AMT_TAX" "LAST_INSTALLMENT_AMT_TAX","EIB_CONTRACT_HISTORY2"."MONTH_TO_MONTH_AMT" "MONTH_TO_MONTH_AMT",
  "EIB_CONTRACT_HISTORY2"."PREPAID_BRAND_CODE" "PREPAID_BRAND_CODE","EIB_CONTRACT_HISTORY2"."CHECK_RETURN_FEE" "CHECK_RETURN_FEE","EIB_CONTRACT_HISTORY2"."MAC_AMT" "MAC_AMT",
  "EIB_CONTRACT_HISTORY2"."MAC_DURATION" "MAC_DURATION","EIB_CONTRACT_HISTORY2"."MAC_LIFETIME_AMT" "MAC_LIFETIME_AMT","EIB_CONTRACT_HISTORY2"."ITEM_ID" "ITEM_ID",
  "EIB_CONTRACT_HISTORY2"."ORIG_LOAN_NUMBER" "ORIG_LOAN_NUMBER" FROM "OASIS2_OWN"."EIB_CONTRACT_HISTORY2"@"PSDP101.CORP.SPRINT.COM" "EIB_CONTRACT_HISTORY2"
  /
select 'grant ' || privilege || ' on CSTADM.EIB_CONTRACT_HISTORY2 to ' || grantee  || ' ;'
from dba_tab_privs where table_name='EIB_CONTRACT_HISTORY2';
delete noprompt archivelog until time 'sysdate-6.5/24' backed up 1 times to device type sbt_tape;
RMAN> delete noprompt archivelog until time 'sysdate-4/24' backed up 1 times to device type sbt_tape;
released channel: ORA_DISK_1
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=14638 instance=WDMP1011 device type=DISK
RMAN-08137: WARNING: archived log not deleted, needed for standby or upstream capture process
archived log file name=+FRA_01/wdmp101/archivelog/2019_11_21/thread_1_seq_12920.1052.1024916709 thread=1 sequence=12920
RMAN-08137: WARNING: archived log not deleted, needed for standby or upstream capture process
archived log file name=+FRA_01/wdmp101/archivelog/2019_11_21/thread_1_seq_12921.1000.1024917611 thread=1 sequence=12921
RMAN-08137: WARNING: archived log not deleted, needed for standby or upstream capture process
archived log file name=+FRA_01/wdmp101/archivelog/2019_11_21/thread_1_seq_12922.1712.1024918509 thread=1 sequence=12922
RMAN-08137: WARNING: archived log not deleted, needed for standby or upstream capture process
archived log file name=+FRA_01/wdmp101/archivelog/2019_11_21/thread_1_seq_12923.303.1024919411 thread=1 sequence=12923
RMAN-08137: WARNING: archived log not deleted, needed for standby or upstream capture process
archived log file name=+FRA_01/wdmp101/archivelog/2019_11_21/thread_1_seq_12924.426.1024920291 thread=1 sequence=12924
RMAN-08137: WARNING: archived log not deleted, needed for standby or upstream capture process
archived log file name=+FRA_01/wdmp101/archivelog/2019_11_21/thread_2_seq_8789.1148.1024916709 thread=2 sequence=8789
RMAN-08137: WARNING: archived log not deleted, needed for standby or upstream capture process
archived log file name=+FRA_01/wdmp101/archivelog/2019_11_21/thread_2_seq_8790.1621.1024917609 thread=2 sequence=8790
RMAN-08137: WARNING: archived log not deleted, needed for standby or upstream capture process
archived log file name=+FRA_01/wdmp101/archivelog/2019_11_21/thread_2_seq_8791.1196.1024918511 thread=2 sequence=8791
RMAN-08137: WARNING: archived log not deleted, needed for standby or upstream capture process
archived log file name=+FRA_01/wdmp101/archivelog/2019_11_21/thread_2_seq_8792.1916.1024919409 thread=2 sequence=8792
RMAN-08137: WARNING: archived log not deleted, needed for standby or upstream capture process
archived log file name=+FRA_01/wdmp101/archivelog/2019_11_21/thread_2_seq_8793.1528.1024920311 thread=2 sequence=8793
RMAN-08137: WARNING: archived log not deleted, needed for standby or upstream capture process
archived log file name=+FRA_01/wdmp101/archivelog/2019_11_21/thread_3_seq_8465.1747.1024916709 thread=3 sequence=8465
RMAN-08137: WARNING: archived log not deleted, needed for standby or upstream capture process
archived log file name=+FRA_01/wdmp101/archivelog/2019_11_21/thread_3_seq_8466.859.1024917611 thread=3 sequence=8466
RMAN-08137: WARNING: archived log not deleted, needed for standby or upstream capture process
archived log file name=+FRA_01/wdmp101/archivelog/2019_11_21/thread_3_seq_8467.778.1024918509 thread=3 sequence=8467
RMAN-08137: WARNING: archived log not deleted, needed for standby or upstream capture process
archived log file name=+FRA_01/wdmp101/archivelog/2019_11_21/thread_3_seq_8468.807.1024919411 thread=3 sequence=8468
RMAN-08137: WARNING: archived log not deleted, needed for standby or upstream capture process
archived log file name=+FRA_01/wdmp101/archivelog/2019_11_21/thread_3_seq_8469.1371.1024920311 thread=3 sequence=8469
NAME                 TOTAL_MB             USED_MB         FREE_MB PCT_USED     USABLE      DISKS  RESIZE_GB
------------- --------------- ------------------- --------------- -------- ---------- ---------- ----------
DATA         20,971,520.00       19,147,812.00    1,823,708.00    91.30    1823708         20       1024
FRA_01           1,048,576.00           37,995.00    1,010,581.00     3.62    1010581          4        256
GG_DATA       1,572,864.00        1,561,764.00       11,100.00    99.29      11100          6        256
OCRVOT             256,000.00            1,388.00      254,612.00      .54      50737          5         50
REDO_01             81,920.00           74,103.00        7,817.00    90.46       7817          8         10
select GROUP_NUMBER, DISK_NUMBER, MOUNT_STATUS, TOTAL_MB, NAME, path from v$asm_disk;
/oracle/EC1/saptrace/audit
BZEN7V         8BC05ZVV       PORTO SEGURO S/A OPP 0I-Y...                      GB0020         General Billable                        Y         0.0       0.0       1.0       1.0       1.0       0.0       0.0       3.0
alter system set diagnostic_dest='/oracle/g01/admin/+ASM1' scope=both sid='+ASM1';
DIG avenida francisco pereira de castro 878
EQUIPE apolo 2
15h
select * from dba_tab_modifications where table_name='WP_TASK_DATES';
SELECT to_char(sample_time,'hh24:mi') , machine, event, count(*)
FROM gv$active_session_history
where sample_time >= to_date('11-27-19 10:30','mm-dd-yy hh24:mi')
and sample_time <= to_date('11-27-19 10:50','mm-dd-yy hh24:mi')
and event is not null
group by to_char(sample_time,'hh24:mi'), machine , event
order by 1,2,4;
SELECT job, next_date, next_sec, failures, broken, SUBSTR(what,1,40) DESCRIPTION FROM dba_jobs where job='613';
INSERT_PREPAID_PRICING
New201911300845!
  set lines 200 pages 999
  column name for a13
  column tablespace format a30
  column total_mb format 999,999,999.99
  column used_mb format 999,999,999,999.99
  column free_mb format 999,999,999.99
  column pct_used format 999.99
  select /*+parallel(4) */ name,total_mb,total_mb-free_mb used_mb,free_mb,
  dg.USABLE_FILE_MB usable, d.qty disks, d.resize_gb
    from v$asm_diskgroup dg, (select GROUP_NUMBER, count(1) qty,avg(os_mb/1024) resize_GB from v$asm_disk group by group_number) d
    where d.GROUP_NUMBER=dg.GROUP_NUMBER
    order by 1
    /
    tail -50 dirprm/RNRT01C7
    EXEC    DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'STORMADM', TABNAME => 'ACCOUNT_DIM',ESTIMATE_PERCENT => 3, CASCADE => TRUE, DEGREE=> 12, no_invalidate => TRUE);
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'STORMADM', TABNAME => 'ACCOUNT_DIM', PARTNAME =>'ACCOUNT_DIM_P01', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', DEGREE=>12, no_invalidate=>TRUE);
/
select 'exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => ''STORMADM'', TABNAME => ''ACCOUNT_DIM'', PARTNAME =>''' || PARTITION_NAME || ''', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, DEGREE=>12, no_invalidate=>TRUE);'
from dba_tab_partitions
where table_owner='STORMADM' and table_name='ACCOUNT_DIM';
ASW_SUB_INFO_MAST
R6QS01C4
R6QS02C4
R6QS03C4
R6QS04C4
R6QS05C4
R6QS06C4
R6QS07C4
R6QS08C4
R6QS09C4
R6QS10C4
R6QS11C4
R6QS12C4
STATS REPLICAT R6QSM1C3, TOTAL, HOURLY, REPORTRATE SEC
info R6QS09C4
select /*+ parallel(a,24) */ table_name,trunc(REPORT_DATE),sum(INSERTS),sum(UPDATES),sum(DELETES),sum(DISCARDS)
 from sysread.replicats_report a
 where ENVIRONMENT= '6QS'
   --and upper(REPLICAT_NAME)  like ('R6QSM1C3')
   and TABLE_NAME = 'NXTAPPO.CHARGE'
   and REPORT_DATE > sysdate - 30
 group by trunc(REPORT_DATE),table_name
 order by 1;
spool lib_cache_lock.log
set lin 200 pages 999
column h_wait format A20
SELECT s.sid,
    waiter.p1raw w_p1r,
    waiter.p2raw w_p2r,
    holder.event h_wait,
    holder.p1raw h_p1r,
    holder.p2raw h_p2r,
    count(s.sid) users_blocked,
    sql.hash_value
FROM
    v$sql sql,
    v$session s,
    x$kgllk l,
    v$session_wait waiter,
    v$session_wait holder
WHERE
    s.sql_hash_value = sql.hash_value and
    l.KGLLKADR=waiter.p2raw and
    s.saddr=l.kgllkuse and
    waiter.event like 'library cache lock' and
    holder.sid=s.sid
GROUP BY
    s.sid,
    waiter.p1raw ,
    waiter.p2raw ,
    holder.event ,
    holder.p1raw ,
    holder.p2raw ,
    sql.hash_value
;
spool off
exit;
r6qsm1c3
-- Table added from Group 1 move Rodrigo D.
Read Checkpoint #1
  GGS Log Trail
  Startup Checkpoint (starting position in the data source):
    Sequence #: 155977
    RBA: 396625926
    Timestamp: 2019-12-01 03:30:37.089403
    Extract Trail: /ggsCUST/repl3/c3
  Current Checkpoint (position of last record read in the data source):
    Sequence #: 155979
    RBA: 158185101
    Timestamp: 2019-12-01 04:47:10.039721
    Extract Trail: /ggsCUST/repl3/c3
FILTER (@RANGE(1,4));
"r6qst4c3.prm"
add replicat r6qst1c3 , EXTTRAIL /ggsCUST/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat r6qst2c3 , EXTTRAIL /ggsCUST/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat r6qst3c3 , EXTTRAIL /ggsCUST/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat r6qst4c3 , EXTTRAIL /ggsCUST/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
alter replicat r6qst1c3 , extseqno 155979 , extrba 158185101
alter replicat r6qst2c3 , extseqno 155979 , extrba 158185101
alter replicat r6qst3c3 , extseqno 155979 , extrba 158185101
alter replicat r6qst4c3 , extseqno 155979 , extrba 158185101
add replicat r6qsv1c3,  EXTTRAIL /ggsCUST/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat r6qsv2c3,  EXTTRAIL /ggsCUST/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat r6qsv3c3,  EXTTRAIL /ggsCUST/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat r6qsv4c3,  EXTTRAIL /ggsCUST/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
alter replicat r6qsv1c3,  EXTSEQNO 155977 , EXTRBA 396625926
alter replicat r6qsv2c3,  EXTSEQNO 155977 , EXTRBA 396625926
alter replicat r6qsv3c3,  EXTSEQNO 155977 , EXTRBA 396625926
alter replicat r6qsv4c3,  EXTSEQNO 155977 , EXTRBA 396625926
info r6qst*c3
info r6qsv*c3
STATS REPLICAT RNRT09C4, TOTAL, HOURLY, REPORTRATE SEC
/oracle/g01/software/grid/11.2.0.4/log/plss5005/agent/crsd/oraagent_oracle//oraagent_oracle.log
New password is 'New201912021427!'.
Ganch0redondo..
dblogin userid ggsadm password G0ldgate
select FILE#, CREATION_TIME from v$datafile
where to_char(creation_time,'dd-mm-yyyy') > '29-11-2019';
TEMP_01
TEMP_03
TEMP_04
TEMP_FLASH_01
set lin 200 pages 999
spool /oracle/g01/admin/sysoper/log/create_temp_tbsps.out
set tim on timing on echo on feedback on
CREATE TEMPORARY TABLESPACE "TEMP_FLASH_02" TEMPFILE
'+TEMP_FLASH_02' SIZE 32453427200
EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1048576
/
CREATE TEMPORARY TABLESPACE "TEMP_05" TEMPFILE
'+TEMP_FLASH_02' SIZE 33554432000
TABLESPACE GROUP TEMP_GROUP_02
EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1048576
/
CREATE TEMPORARY TABLESPACE "TEMP_06" TEMPFILE
'+TEMP_FLASH_02' SIZE 33554432000
TABLESPACE GROUP TEMP_GROUP_02
EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1048576
/
CREATE TEMPORARY TABLESPACE "TEMP_07" TEMPFILE
'+TEMP_FLASH_02' SIZE 1073741824
EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1048576
/
spool off
exit
s
SELECT u.tablespace, sum(u.blocks*(select value from v$parameter where name='db_block_size')/1024/1024) MB
  FROM gv$session s, gv$tempseg_usage u
  WHERE s.inst_id=u.inst_id
    and s.saddr=u.session_addr
  group by u.tablespace;
SET PAUSE ON
SET PAUSE 'Press Return to Continue'
SET PAGESIZE 50
SET LINESIZE 300
COLUMN tablespace FORMAT A20
COLUMN temp_size FORMAT A20
COLUMN sid_serial FORMAT A20
COLUMN username FORMAT A20
COLUMN program FORMAT A50
SELECT b.tablespace,
       ROUND(((b.blocks*p.value)/1024/1024),2)||'M' AS temp_size,
       a.inst_id as Instance,
       a.sid||','||a.serial# AS sid_serial,
       NVL(a.username, '(oracle)') AS username,
       a.program,
       a.status,
       a.sql_id
FROM   gv$session a,
       gv$sort_usage b,
       gv$parameter p
WHERE  p.name  = 'db_block_size'
AND    a.saddr = b.session_addr
AND    a.inst_id=b.inst_id
AND    a.inst_id=p.inst_id
ORDER BY b.tablespace, b.blocks
/
col tablespace for a15
col username for a16
col machine for a30
col osuser for a15
compute sum of mb on report
break on report
set linesize 220 pagesize 1000
select count(*), sum(s.blocks), s.tablespace, s.username from
(SELECT s.inst_id,s.sid, s.username, s.osuser, s.machine, s.sql_id, u.tablespace, s.sql_hash_value||'/'||u.sqlhash hash_value, u.segtype, u.contents,
       u.blocks,u.blocks*(select value from v$parameter where name='db_block_size')/1024/1024 MB
  FROM gv$session s, gv$tempseg_usage u
  WHERE s.inst_id=u.inst_id
    and s.saddr=u.session_addr
       ) s
    group by s.tablespace,  s.username;
#!/bin/ksh
export ORACLE_SID=+ASM1
export ORACLE_BASE=/oracle/g01/admin
export ORACLE_HOME=/oracle/g01/software/grid/11.2.0.4
export LD_LIBRARY_PATH=$ORACLE_HOME/lib:/usr/lib
export TNS_ADMIN=$ORACLE_HOME/network/admin
export PATH=$ORACLE_HOME/bin:$ORACLE_HOME/OPatch:/oracle/g01/admin/common/bin:/usr/local/bin:/usr/ccs/bin:/usr/bin:/usr/sbin:/usr/ucb:/etc:/usr/local/bin:/bin:/usr/bin
expor LOGFILE=/oracle/g01/admin/sysoper/log/oracle_dd_test.log
dd if='/dev/rdsk/c0t6005076801808520F800000000001099d0s0' of=/dev/null count=100 bs=8192  > $LOG_FILE
(uuencode ${LOG_FILE} ${LOG_FILE}) | mailx -r NDWP1011@plss5006 -s "NDWP101: CHECK DISK - DONE" SFWDBS-DS-NOR-NOL-PROD-DBA@sprint.com
exit;
This message wasn't sent to Gomes, Murani M [IBM Contractor for Sprint].
Ganchoredond0..'
select owner, segment_name, segment_type, sum(bytes)/1048576
from dba_segments
where owner not in ('SYS','SYSTEM','XDB')
group by owner, segment_name, segment_type order by 4 desc;
"/oracle/g01/software/grid/11.2.0.4/log/plss5006/agent/crsd/oraagent_oracle//oraagent_oracle.log"
grant select on dba_hist_sql_plan to wn189101 ;
grant select on dba_hist_sqlstat to wn189101 ;
grant select on gv_$sql_shared_cursor to wn189101 ;
grant select on gv_$sql_plan_statistics_all to wn189101 ;
grant select on gv_$sql_plan to wn189101 ;
grant select on gv_$sesstat to wn189101 ;
grant select on gv_$statname to wn189101 ;
grant select on gv_$mystat to wn189101 ;
R6QSM1C3
R6QS03C4
R6QS04C4
R6QS05C4
R6QS06C4
R6QS07C4
R6QS04C7
R6QS06C7
R6QS07C7
-- Table added from Group 1 move Rodrigo D.
MAP NXTSECO.ACCESS_TIME,                        TARGET   NXTSECO.ACCESS_TIME, FILTER (@RANGE(1,4));
MAP NXTSECO.ACCESS_TIME_HEADER,                 TARGET   NXTSECO.ACCESS_TIME_HEADER, FILTER (@RANGE(1,4));
MAP NXTSECO.DEALER_GRP,                         TARGET   NXTSECO.DEALER_GRP, FILTER (@RANGE(1,4));
MAP NXTSECO.DEALER_GRP_LINK,                    TARGET   NXTSECO.DEALER_GRP_LINK, FILTER (@RANGE(1,4));
MAP NXTSECO.DEALER_GRP_USER_LINK,               TARGET   NXTSECO.DEALER_GRP_USER_LINK, FILTER (@RANGE(1,4));
MAP NXTSECO.DEALER_USER_LINK,                   TARGET   NXTSECO.DEALER_USER_LINK, FILTER (@RANGE(1,4));
MAP NXTSECO.ENVIRONMENT,                        TARGET   NXTSECO.ENVIRONMENT, FILTER (@RANGE(1,4));
MAP NXTSECO.LOCAL_SERVER_LINK,                  TARGET   NXTSECO.LOCAL_SERVER_LINK, FILTER (@RANGE(1,4));
MAP NXTSECO.LOCATION_USER_LINK,                 TARGET   NXTSECO.LOCATION_USER_LINK, FILTER (@RANGE(1,4));
MAP NXTSECO.PROFILE_ACTIVITY,                   TARGET   NXTSECO.PROFILE_ACTIVITY, FILTER (@RANGE(1,4));
MAP NXTSECO.PROFILE_RESTRICT_ACC,               TARGET   NXTSECO.PROFILE_RESTRICT_ACC, FILTER (@RANGE(1,4));
MAP NXTSECO.PROFILE_SEC_PARAMS,                 TARGET   NXTSECO.PROFILE_SEC_PARAMS, FILTER (@RANGE(1,4));
MAP NXTSECO.ROLES,                              TARGET   NXTSECO.ROLES, FILTER (@RANGE(1,4));
MAP NXTSECO.SEC1_SESSION,                       TARGET   NXTSECO.SEC1_SESSION, FILTER (@RANGE(1,4));
MAP NXTSECO.SECURITY_ACTION,                    TARGET   NXTSECO.SECURITY_ACTION, FILTER (@RANGE(1,4));
MAP NXTSECO.SECURITY_ACTION_HEADER,             TARGET   NXTSECO.SECURITY_ACTION_HEADER, FILTER (@RANGE(1,4));
--MAP NXTSECO.SECURITY_LOG,                       TARGET   NXTSECO.SECURITY_LOG, FILTER (@RANGE(1,4));
MAP NXTSECO.SECURITY_OBJ_DESC,                  TARGET   NXTSECO.SECURITY_OBJ_DESC, FILTER (@RANGE(1,4));
MAP NXTSECO.SECURITY_PARAM,                     TARGET   NXTSECO.SECURITY_PARAM, FILTER (@RANGE(1,4));
MAP NXTSECO.SECURITY_PROFILE,                   TARGET   NXTSECO.SECURITY_PROFILE, REPERROR (1403, DISCARD), FILTER (@RANGE(1,4));
MAP NXTSECO.SECURITY_PROFILE_ACTION,            TARGET   NXTSECO.SECURITY_PROFILE_ACTION, FILTER (@RANGE(1,4));
MAP NXTSECO.SECURITY_PROFILE_HEADER,            TARGET   NXTSECO.SECURITY_PROFILE_HEADER, FILTER (@RANGE(1,4));
MAP NXTSECO.UAMS_USERS,                         TARGET   NXTSECO.UAMS_USERS, FILTER (@RANGE(1,4));
MAP NXTSECO.USERS,                              TARGET   NXTSECO.USERS, FILTER (@RANGE(1,4));
MAP NXTSECO.USER_ENV_PROFILE,                   TARGET   NXTSECO.USER_ENV_PROFILE, FILTER (@RANGE(1,4));
MAP NXTSECO.USER_INFORMATION,                   TARGET   NXTSECO.USER_INFORMATION, FILTER (@RANGE(1,4));
MAP NXTSECO.USER_PROFILE_INFO,                  TARGET   NXTSECO.USER_PROFILE_INFO, FILTER (@RANGE(1,4));
MAP NXTSECO.USER_SEC_PARAMS,                    TARGET   NXTSECO.USER_SEC_PARAMS, FILTER (@RANGE(1,4));
MAP NXTSECO.WORK_POSITION,                      TARGET   NXTSECO.WORK_POSITION, FILTER (@RANGE(1,4));
MAP NXTSECO.WORK_POSITION_ASSIGNMENT,           TARGET   NXTSECO.WORK_POSITION_ASSIGNMENT, FILTER (@RANGE(1,4));
MAP NXTLOAD.CHURN_REASON_INFO,                  TARGET   NXTLOAD.CHURN_REASON_INFO, FILTER (@RANGE(1,4));
MAP NXTLOAD.CHURN_SUB_INFO,                     TARGET   NXTLOAD.CHURN_SUB_INFO, FILTER (@RANGE(1,4));
MAP NXTLOAD.CHURN_SUB_INFO_DTLS,                TARGET   NXTLOAD.CHURN_SUB_INFO_DTLS, FILTER (@RANGE(1,4));
MAP NXTLOAD.CHURN_TREAT_INFO,                   TARGET   NXTLOAD.CHURN_TREAT_INFO, FILTER (@RANGE(1,4));
MAP NXTLOAD.CHURN_TREAT_MTX,                    TARGET   NXTLOAD.CHURN_TREAT_MTX, FILTER (@RANGE(1,4));
MAP NXTLOAD.LERG6,                              TARGET   NXTLOAD.LERG6,     KEYCOLS (npa, nxx, block_id, effective_date), FILTER (@RANGE(1,4));
MAP NXTAPPO.AR_ASL_HTL_COUNT,                   TARGET   NXTAPPO.AR_ASL_HTL_COUNT,     KEYCOLS (FROM_DATE, TO_DATE, PENDING), FILTER (@RANGE(1,4));
MAP NXTAPPO.AR_ASL_SUSP_COUNT,                  TARGET   NXTAPPO.AR_ASL_SUSP_COUNT,  KEYCOLS (FROM_DATE, TO_DATE, PEND_TRX), FILTER (@RANGE(1,4));
MAP NXTAPPO.CSFTRTOSOC_DATA,                    TARGET   NXTAPPO.CSFTRTOSOC_DATA, FILTER (@RANGE(1,4));
MAP NXTAPPO.LOAN_HISTORY,                       TARGET   NXTAPPO.LOAN_HISTORY, FILTER (@RANGE(1,4));
MAP NXTAPPO.LOAN_ITEM_DISCOUNT,                 TARGET   NXTAPPO.LOAN_ITEM_DISCOUNT, FILTER (@RANGE(1,4));
ggsadm WDMggsadm2019,.
add replicat R6QSM1C3 , EXTTRAIL /ggsCUST/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat R6QSM2C3 , EXTTRAIL /ggsCUST/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat R6QSM3C3 , EXTTRAIL /ggsCUST/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat R6QSM4C3 , EXTTRAIL /ggsCUST/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
alter replicat R6QSM1C3 , extseqno 157089 , extrba 105609004
alter replicat R6QSM2C3 , extseqno 157089 , extrba 105609004
alter replicat R6QSM3C3 , extseqno 157089 , extrba 105609004
alter replicat R6QSM4C3 , extseqno 157089 , extrba 105609004
STATS REPLICAT RNRGG1C4 , TOTAL, HOURLY, REPORTRATE SEC
echo "info all"|ggsci|grep "RUNNING"
r6qsm1c3
MANAGER     RUNNING
REPLICAT    RUNNING     R6QS01C7    17:33:36      00:00:02
REPLICAT    RUNNING     R6QS02C7    17:38:12      00:00:02
REPLICAT    RUNNING     R6QS03C7    17:36:17      00:00:06
REPLICAT    RUNNING     R6QS04C7    17:58:19      00:00:05
REPLICAT    RUNNING     R6QS05C7    17:36:53      00:00:01
REPLICAT    RUNNING     R6QS06C7    17:36:41      00:00:11
REPLICAT    RUNNING     R6QS07C7    17:33:19      00:00:04
REPLICAT    RUNNING     R6QS08C7    17:51:52      00:00:08
REPLICAT    RUNNING     R6QS09C7    17:36:16      00:00:06
REPLICAT    RUNNING     R6QS10C7    17:37:56      00:00:02
REPLICAT    RUNNING     R6QS11C7    17:33:25      00:00:06
REPLICAT    RUNNING     R6QS12C7    17:37:48      00:00:04
REPLICAT    RUNNING     R6QST1C5    00:00:00      00:00:01
REPLICAT    RUNNING     R6QSTRC3    00:00:00      04:22:46
REPLICAT    RUNNING     R6QSTRG3    00:00:00      00:00:05
REPLICAT    RUNNING     R6QSV1C3    00:00:00      00:00:01
REPLICAT    RUNNING     R6QSV2C3    00:00:00      00:00:01
REPLICAT    RUNNING     R6QSV3C3    00:00:00      00:00:00
REPLICAT    RUNNING     R6QSV4C3    00:00:00      00:00:00
REPLICAT    RUNNING     R6QTG1C2    00:00:00      00:00:01
 select * from ggsadm_g.tab_privs_log where start_date>sysdate-3 and group_id=3 order by start_date ;
MAP NXTAPPO.CHARGE,                     TARGET   NXTAPPO.CHARGE,                   FILTER (@RANGE(1,4, BAN));
MAP NXTAPPO.CHARGE_TAX,                 TARGET   NXTAPPO.CHARGE_TAX,               FILTER (@RANGE(1,4, BAN));
add replicat r6qsy1c7 , EXTTRAIL /ggsCUST/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat r6qsy2c7 , EXTTRAIL /ggsCUST/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat r6qsy3c7 , EXTTRAIL /ggsCUST/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat r6qsy4c7 , EXTTRAIL /ggsCUST/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
alter replicat r6qsy1c7 , extseqno 157089 , extrba 105609004
alter replicat r6qsy2c7 , extseqno 157089 , extrba 105609004
alter replicat r6qsy3c7 , extseqno 157089 , extrba 105609004
alter replicat r6qsy4c7 , extseqno 157089 , extrba 105609004
insert into GGSMARKER.LOGICAL_DATE_MARKER_NRT (REPLICAT_NAME ,SOURCE_COMMIT) values ('RNRTSPC3','2018-03-29 00:51:22.039508') ;
commit;
select REPLICAT_NAME ,SOURCE_COMMIT from GGSMARKER.LOGICAL_DATE_MARKER_NRT where REPLICAT_NAME like 'RGGTG_C5' order by ;
alter tablespace U8EL_DATA add datafile '+DATA_NDW_FLASH_01' size 32767m;
SELECT DISTINCT WI.ORDER_KEY  FROM WORK_ITEM WI, ORDER_MASTER OM, ORDER_LINE_DETAILS OL, ORDER_DISCOUNT_QA QA  WHERE WI.ORDER_KEY =
OM.ORDER_KEY AND  WI.ORDER_KEY = OL.ORDER_KEY AND  WI.ORDER_KEY = QA.ORDER_KEY AND  ( OM.DISCOUNT_QA_SAVED_YN IS NULL OR
OM.DISCOUNT_QA_SAVED_YN = :"SYS_B_00" ) AND  OL.ORDER_LINE_STATUS_CD = :"SYS_B_01" AND  OL.ORDER_LINE_ITEM_TYPE = :"SYS_B_02" AND
WI.QUEUE_NAME = :"SYS_B_03"  AND WI.activity_name != :"SYS_B_04" AND WI.owner != :"SYS_B_05"  MINUS  SELECT DISTINCT WI.ORDER_KEY  FROM
WORK_ITEM WI, ORDER_MASTER OM,  ORDER_LINE_DETAILS OL, ORDER_DISCOUNT_QA QA  WHERE WI.ORDER_KEY = OM.ORDER_KEY AND
WI.ORDER_KEY = OL.ORDER_KEY AND  WI.ORDER_KEY = QA.ORDER_KEY AND  ( OM.DISCOUNT_QA_SAVED_YN IS NULL OR OM.DISCOUNT_QA_SAVED_YN =
:"SYS_B_06" ) AND  OL.ORDER_LINE_STATUS_CD NOT IN (:"SYS_B_07",:"SYS_B_08", :"SYS_B_09") AND OL.ORDER_LINE_ITEM_TYPE = :"SYS_B_10"
AND WI.activity_name != :"SYS_B_11" AND WI.owner != :"SYS_B_12"
select distinct sql_id, sql_text from gv$sql where sql_text like 'SELECT DISTINCT WI.ORDER_KEY  FROM WORK_ITEM WI, ORDER_MASTER OM,%';
SELECT COLUMN_NAME, HISTOGRAM , density, num_buckets
FROM   dba_TAB_COL_STATISTICS
WHERE  TABLE_NAME = 'WORK_ITEM'
and owner='OEMADM';
SELECT count(*), event
FROM gv$active_session_history
where sample_time >= sysdate - 1/24
and USER_ID= ( select user_id from dba_users where username='GGSADM')
group by event
order by 1;
select 'alter index NXTAPPONRT.' || index_name || ' rebuild partition ' || partition_name ||' parallel 12 nologging;'
 from dba_ind_partitions
 where index_owner='NXTAPPONRT' and index_name
 in
 (select index_name from dba_indexes where table_name='CSM_TRANSACTIONS' and owner='NXTAPPONRT');
PAYMENT
SUBSCRIBER
alter session set ddl_lock_timeout=30;
set lin 200 pages 999
set echo on tim on timing on feedback on
alter session set workarea_size_policy=manual;
alter session set hash_area_size=1048576000;
spool /code/prod/dba/rbd/rbd_nrtSUBSCRIBER.log
nohup sqlplus ek923426/"Olhod3tand3ra.." @08_copy_dependent.sql > 08_copy_dependent.out 2>&1 &
nohup sqlplus seu_user/sua_senha @00_enable_validate.sql.sql  1>00_enable_validate.out &
nohup sqlplus cr168192/"Teste1972Rayder" @01_can_redef.sql  1>01.out &
/oracle/g01/admin/sysoper/log/
select distinct sql_id, sql_text from gv$sql where sql_text like '%FROM%customer c,%physical_device pd,%serial_item_inv sii,%subscriber s,%subscriber_rsource sr,%name_data nd,%address_name_link anl%';
NXTAPPONRT.BILLING_ACCOUNT
NXTAPPONRT.CREDIT_HISTORY
NXTAPPONRT.FOLLOW_UP
NXTAPPONRT.HOTLINE_TRX
NXTAPPONRT.PAYMENT
NXTAPPONRT.PENDING_ADJUSTMENT
NXTAPPONRT.POS_ORDER_LINE
NXTAPPONRT.WRITE_OFF
NXTAPPONRT.ADJUSTMENT
NXTAPPONRT.BILL
NXTAPPONRT.ATB_HISTORY_A
NXTAPPONRT.ACH_TRX_LOG
NXTAPPONRT.SUB_PORT_REQUEST
NXTAPPONRT.CSM_TRANSACTIONS
NXTAPPONRT.PORT_REQUEST
NXTAPPONRT.ACT_PORT_REQUEST
STATS REPLICAT RNRTY1C3, TOTAL, HOURLY, REPORTRATE SEC
alter index NXTAPPONRT_G.SUBSCRIBER_7IX logging noparallel;
alter index NXTAPPONRT_G.SUBSCRIBER_9IX logging noparallel;
alter index NXTAPPONRT_G.SUBSCRIBER_PK logging noparallel;
Mark, The C7 is running for NORSNAP, the lag now is 19h and it’s coming down quicly.
We have other replicats on NRT with a HUGE lag:
REPLICAT    RUNNING     RNRGG1C4    37:29:22      00:00:32
REPLICAT    RUNNING     RNRGG2C4    37:29:42      00:00:14
REPLICAT    RUNNING     RNRGG3C4    37:29:08      00:00:47
REPLICAT    RUNNING     RNRGG4C4    37:29:08      00:00:47  
These are the tables:
NXTAPPONRT_G.PAYMENT
NXTAPPONRT_G.BILLING_ACCOUNT
NXTAPPONRT_G.ACT_PORT_REQUEST
• C4
o NXTAPPO.CSM_TRANSACTIONS
o NXTAPPO.CHG_TAX_DETAILS
o NXTAPPO.BILL_MESSAGE
o NXTAPPO.BILL
o NXTAPPO_G.BILLING_ACCOUNT
• C2
o NXTAPPO.SERVICE_FEATURE
• C6
o NXTAPPO.CSM_TRX_LOG
• C3
o NXTAPPO.SERVICE_AGREEMENT
select 'alter index NXTAPPONRT_G.' || index_name || ' rebuild partition ' || partition_name ||' parallel 12 nologging;'
 from dba_ind_partitions
 where index_owner='NXTAPPONRT_G' and index_name
 in
 (select index_name from dba_indexes where table_name='ACT_PORT_REQUEST' and owner='NXTAPPONRT_G');
 select 'alter index NXTAPPONRT_G.' || index_name || ' rebuild parallel 15 nologging;'
 from dba_indexes
 where owner='NXTAPPONRT_G' and table_name='ACT_PORT_REQUEST'
 and partitioned='NO';
NXTL_APP_OVMEKS NXTL_APP_OVMBG
  set lin 200 pages 999
  col tim for a15
  col process for a7
  col event for a40
  col machine for a15
  col program for a30
  col username for a15
  select
  inst_id,
  SID,
  serial#,
  username,
  --osuser,
  machine,
  program,
  process,
  --blocking_session as bl,
  to_char(LOGON_TIME, 'DDMM - HH24:MI') as tim,
  LAST_CALL_ET/60 et_min,
  --BLOCKING_SESSION,
  EVENT,
  WAIT_TIME,
  SECONDS_IN_WAIT,
  status,
  sql_id
  from gv$session
  --where sid = '2597'
  where
  type <> 'BACKGROUND'
  and username = 'EK923426'
   order by tim desc
  /
ALTER TABLE "NXTAPPO"."AGED_TRIAL_BALANCE" ADD CONSTRAINT AGED_TRIAL_BALANCE_PK
    PRIMARY KEY ("SUB_MARKET", "ACCOUNT_TYPE", "ACCOUNT_SUB_TYPE", "CS_CORP_TYPE", "ACTV_DATE", "CREDIT_CLASS", "BAN_STATUS", "AR_WO_IND", "INV_TYPE")
    USING INDEX
    /
for i in expdp_4tab_scn_0*.expdp; do echo $i ; gzip $i; done;
for i in expdp_4tab_scn_1*.expdp; do echo $i ; gzip $i; done;
set lin 200
col ddl for a150
select dbms.......() as ddl from dual
select plan_table_output
   from TABLE( dbms_xplan.display
               ( 'dynamic_plan_table',
                 (select rawtohex(address)||'_'||child_number x
                    from dba_hist_sqlstat
 where sql_id='4rsmqgp0knwrd' ), 'serial' )
               /
select plan_table_output
from TABLE( dbms_xplan.display
               ( 'dynamic_plan_table',
                 (select rawtohex(address)||'_'||child_number x
                    from dba_hist_sqlstat
 where sql_id='4rsmqgp0knwrd' ),
                 'serial' ) )
/
-- SQL PLAN
set lin 200 pages 999
col I for a 5
col Operation for a60
  SELECT /*+ NO_MERGE */
         ROWNUM-1||
   DECODE(access_predicates,NULL,DECODE(filter_predicates,NULL,'','*'),'*') "I",
         SUBSTR(LPAD(' ',(DEPTH-1))||
   OPERATION,1,40)||
   DECODE(OPTIONS,NULL,'',' ('
   || OPTIONS
   || ')') "Operation",
         SUBSTR(OBJECT_NAME,1,30) "Object Name",
         cardinality "# Rows",
         bytes,
         cost,
         time
    FROM (
         SELECT *
           FROM dba_hist_sql_plan
          WHERE sql_id = '&SQLID'
         ) plan
ORDER BY id
/
Olhod3tand3ra..
Rua Francisco Pereira de Castro,305, 13208-110, Jundiaí
New201912181054!
  set lin 200 pages 999
  col tim for a15
  col process for a7
  col event for a40
  col machine for a15
  col program for a30
  col username for a15
  select
  inst_id,
  SID,
  serial#,
  username,
  --osuser,
  machine,
  program,
  process,
  --blocking_session as bl,
  to_char(LOGON_TIME, 'DDMM - HH24:MI') as tim,
  LAST_CALL_ET/60 et_min,
  --BLOCKING_SESSION,
  EVENT,
  WAIT_TIME,
  SECONDS_IN_WAIT,
  status,
  sql_id
  from gv$session
  --where sid = '2597'
  where
  type <> 'BACKGROUND'
  and username = 'AY253699'
  --and sid='587'
  order by tim desc
  /
  ALTER TABLE NXTAPPO.CSM_TRANSACTIONS_STG
  ADD CONSTRAINT CSM_TRANSACTIONS_PK_STG
  PRIMARY KEY ("TRX_SEQ_NO", "ACTV_CODE", "BAN", "SUBSCRIBER_NO", "PRODUCT_TYPE")
  USING INDEX DISABLE;
DECLARE
  num_errors PLS_INTEGER;
BEGIN
  DBMS_REDEFINITION.COPY_TABLE_DEPENDENTS ('NXTAPPO','CSM_TRANSACTIONS','CSM_TRANSACTIONS_STG',DBMS_REDEFINITION.CONS_ORIG_PARAMS, TRUE, TRUE, TRUE, TRUE, num_errors, TRUE, TRUE);
  UTL_FILE.PUTF(f_utl_file,'Errors:'||num_errors);
END;
/
12/19/2019 15:29:42
Task T777894 Phase Sprint Task Closure Closed by Bufalol, Alexander D [IBM Contractor for Sprint]
1144
0001286-9
Multivitaminico
Uva passa
select sum(bytes)/1048576, owner, segment_name from dba_segments
where segment_name= 'SPR_IB_LOAN_INFO'
and owner = 'ORDER_PROD'
group by owner, segment_name;
select sum(bytes)/1048576, owner, segment_name from dba_segments
where segment_name in ( select index_name from dba_indexes where table_name='SPR_IB_LOAN_INFO' and owner = 'ORDER_PROD')
group by owner, segment_name;
select sum(bytes)/1048576, owner, segment_name from dba_segments
where segment_name in ( select segment_name from dba_lobs where table_name='SPR_IB_LOAN_INFO' and owner = 'ORDER_PROD')
group by owner, segment_name;
find /oracle/g01/admin/SVIP1011/adump -type f  -mtime +3 -exec mv "{}"  /oracle/g01/bkup01/AUD_BACKUP \;
[‎12/‎30/‎2019 12:58 PM]  Busanelli, Sreedhar R [IT]:
No Title
SELECT /*+ parallel(4) FIRST_ROWS leading(oii) */
     ooi.order_key,
     DECODE(ooi.dealer_code,'W2','99','SA','98') store_number,
     ooi.account_id,
     nvl(oii.ib_down_payment_amt,0.0) + nvl(oii.ib_equipment_tax_amt,0.0) payment_amount
 FROM
     oemadm.order_ib_info oii,
     ovmadm.ovm_order_info ooi,
     order_master om
 WHERE
     ooi.order_key = oii.order_key
     AND ooi.order_key = om.order_key
     AND om.order_status_cd IN ('CLOSED','ENSEMBLE_ACTIVATED')
     AND ooi.dealer_code IN ( 'W2', 'SA')
     AND oii.device_sale_type = 'L'
     AND nvl(oii.ib_down_payment_amt,0.0) + nvl(oii.ib_equipment_tax_amt,0.0) > 0
     AND NOT EXISTS (
         SELECT
             order_key
         FROM
             oemadm.order_comments
         WHERE
             order_key = ooi.order_key
             AND comment_txt = 'Payment collected by WalMart'
     );
alter user JA137463 password expire ;
alter user PW050998 password expire ;
alter user JN834812 password expire ;
alter user PR210650 password expire ;
SELECT /*+ FIRST_ROWS leading(OL)  index(wi WORK_ITEM_REF1) use_nl(wi om) index(ol ORDER_LINE_DETAILS_PK) use_nl(om ol) index(qa PK_ORDER_DISCOUNT_QA) use_nl(wi oa) */ DISTINCT WI.ORDER_KEY
FROM WORK_ITEM WI, ORDER_MASTER OM,  ORDER_LINE_DETAILS OL, ORDER_DISCOUNT_QA QA
WHERE WI.ORDER_KEY = OM.ORDER_KEY AND
  WI.ORDER_KEY = OL.ORDER_KEY AND
  WI.ORDER_KEY = QA.ORDER_KEY AND
  ( OM.DISCOUNT_QA_SAVED_YN IS NULL OR OM.DISCOUNT_QA_SAVED_YN = 'N' ) AND
  OL.ORDER_LINE_STATUS_CD = 'CLOSED' AND
  OL.ORDER_LINE_ITEM_TYPE = 'P' AND
  WI.QUEUE_NAME = 'Closed'
  AND WI.activity_name!='TAPASDummyActivity' AND WI.owner!='TAPAS'
MINUS
SELECT DISTINCT WI.ORDER_KEY
FROM WORK_ITEM WI, ORDER_MASTER OM,  ORDER_LINE_DETAILS OL, ORDER_DISCOUNT_QA QA
WHERE WI.ORDER_KEY = OM.ORDER_KEY AND
  WI.ORDER_KEY = OL.ORDER_KEY AND
  WI.ORDER_KEY = QA.ORDER_KEY AND
  ( OM.DISCOUNT_QA_SAVED_YN IS NULL OR OM.DISCOUNT_QA_SAVED_YN = 'N' ) AND
  OL.ORDER_LINE_STATUS_CD NOT IN ('CLOSED', 'CANCELLED', 'CANCEL_PENDING') AND
  OL.ORDER_LINE_ITEM_TYPE = 'P'
  AND WI.activity_name!='TAPASDummyActivity' AND WI.owner!='TAPAS';
index(om ORDER_MASTER_PK)
index(oa PK_ORDER_DISCOUNT_QA)
  index(wi WORK_ITEM_REF1)
  index(wi WRK_ITM_QUE_NM_IDX)
  index(ol ORDER_LINE_DETAILS_PK)
  select segment_name, sum(bytes)/1048576, (968350-sum(bytes)/1048576) from dba_segments where segment_name='SERVICE_FEATURE_STG_1219' group by segment_name
select sql_id, sql_fulltext from gv$sql where sql_id in
(
'1qt7aqzk436mq',
'bkhav9rgf2qck',
'gfjzu32kzw1y2',
'dp9ufxt8jp20g',
'1b2uq8cc2nbwb'
);
select sql_id, sql_fulltext from gv$sql where sql_id in
(
'4hpdk8pa5cvzd'
);
col time for a17
col time for a20
col event for a40
set lines 170 pages 500
break on time
select /*+parallel(8)*/ --to_char(a.sample_time, 'dd-mon-yyyy hh24:mi') time,
 a.sql_id , count(1) qty
  from dba_hist_active_sess_history a
 where a.sample_time between to_date('03-jan-2020 00:50:00','dd-mon-yyyy hh24:mi:ss') and to_date('03-jan-2020 01:40:00','dd-mon-yyyy hh24:mi:ss')
   and user_id=30
   group by --to_char(a.sample_time, 'dd-mon-yyyy hh24:mi'),
   a.sql_id
  order by 2 desc ;
select  /*+ FIRST_ROWS INDEX ( WORK_ITEM WRK_ITM_QUE_NM_IDX )*/ wi.process_id, wi.order_status_cd, wi.order_created_dt
 from work_item wi, order_master om, os_schedule_master osm
 where wi.queue_name = 'Closed'
AND wi.activity_name!='TAPASDummyActivity' AND wi.owner!='TAPAS'
  and wi.order_key = om.order_key
and wi.PROCESS_ID = osm.PROCESS_ID
and wi.SCHEDULE_KEY = osm.OS_SCHEDULE_KEY
  and wi.SCHEDULE_COMPLETED_YN = 'Y'
  and osm.SCHEDULE_COMPLETED_DT < to_date('01/06/2020', 'MM/DD/YYYY HH:MI:ss PM')
UNION ALL
 select /*+ FIRST_ROWS  no_index(wi) Parallel(4) leading(wi)*/ wi.process_id, wi.order_status_cd, wi.order_created_dt
 from work_item wi, order_master om
 where wi.queue_name = 'Cloased'
AND wi.activity_name!='TAPASDummyActivity' AND wi.owner!='TAPAS'
  AND wi.queue_entered_dt > (SYSDATE -20  )
  AND wi.order_key = om.order_key
  and ( wi.schedule_key = 0 OR wi.schedule_key is null )
  AND wi.queue_entered_dt < to_date('01/06/2020', 'MM/DD/YYYY HH:MI:ss PM')
 order by order_created_dt ;
select /*+ FIRST_ROWS index(wi) parallel(2) */  distinct wi.process_id
from order_line_details old, work_item wi
where order_line_status_cd = 'CLOSED'
and wi.order_status_cd in ('SHIP_FILE_PENDING', 'FULFILLMENT', 'FULFILLMENT_HOLD' )
and old.process_id = wi.process_id
AND wi.activity_name!='TAPASDummyActivity' AND wi.owner!='TAPAS';
SQL> select num_rows, last_analyzed from dba_tab_statistics where table_name='WORK_ITEM' and owner='OEMADM';
  NUM_ROWS LAST_ANAL
---------- ---------
  10904776 06-JAN-20
INDEX_OWNER                    INDEX_NAME                     TABLE_OWNER                    TABLE_NAME                     COLUMN_NAME
------------------------------ ------------------------------ ------------------------------ ------------------------------ ------------------------------
OEMADM                         I_WORK_ITEM_OMIM_CRLTN_ID      OEMADM                         WORK_ITEM                      OMIM_CORRELATION_ID
OEMADM                         SYS_C0010685                   OEMADM                         WORK_ITEM                      PROCESS_ID
OEMADM                         WI_BIT_INDX                    OEMADM                         WORK_ITEM                      QUEUE_NAME
OEMADM                         WI_BIT_INDX                    OEMADM                         WORK_ITEM                      ORDER_CHANNEL
OEMADM                         WI_Q_ENT_DT_IDX                OEMADM                         WORK_ITEM                      QUEUE_ENTERED_DT
OEMADM                         WI_SCH_COM_YN_IDX              OEMADM                         WORK_ITEM                      SCHEDULE_COMPLETED_YN
OEMADM                         WI_SCH_KEY_IDX                 OEMADM                         WORK_ITEM                      SCHEDULE_KEY
OEMADM                         WI_WHOL_TX_STATUS_IDX          OEMADM                         WORK_ITEM                      WARHOL_TX_STATUS
OEMADM                         WORK_ITEM_REF1                 OEMADM                         WORK_ITEM                      ORDER_KEY
OEMADM                         WORK_ITEM_REF5                 OEMADM                         WORK_ITEM                      REASON_CD
OEMADM                         WRK_ITM_ACT_NAM_IDX            OEMADM                         WORK_ITEM                      ACTIVITY_NAME
OEMADM                         WRK_ITM_ORD_CHNL               OEMADM                         WORK_ITEM                      ORDER_CHANNEL
OEMADM                         WRK_ITM_ORD_CRT_DT_IDX         OEMADM                         WORK_ITEM                      ORDER_CREATED_DT
OEMADM                         WRK_ITM_ORD_CRT_DT_Q_NM_IDX    OEMADM                         WORK_ITEM                      QUEUE_NAME
OEMADM                         WRK_ITM_ORD_CRT_DT_Q_NM_IDX    OEMADM                         WORK_ITEM                      ORDER_CREATED_DT
OEMADM                         WRK_ITM_ORD_STA_CD_IDX         OEMADM                         WORK_ITEM                      ORDER_STATUS_CD
OEMADM                         WRK_ITM_OWN_IDX                OEMADM                         WORK_ITEM                      OWNER
OEMADM                         WRK_ITM_QUE_NM_IDX             OEMADM                         WORK_ITEM                      QUEUE_NAME
set tim on feedback on timing on
alter session set ddl_lock_timeout=10;
spool C248011.log
  CREATE INDEX "CLW_P01_EPM"."IDX5_USAGE_LOG" ON "CLW_P01_EPM"."USAGE_LOG" (TRUNC("IIS_START"))
  PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  PARALLEL 8 NOLOGGING
  TABLESPACE "SVADM_SSD_INDX"
  /
  ALTER INDEX "CLW_P01_EPM"."IDX5_USAGE_LOG" noparallel logging
  /
  spool off
  exit
  while true
  do
  sqlplus / as sysdba @C248011.sql
  done;
  /
INSURANCE_CLAIM_FEE_AMT
CTE
PJ024671
C246015
SELECT /*+ index(qa) index(wi,work_item_ref1) use_nl(wi,om) use_nl(wi,ol) */ DISTINCT WI.ORDER_KEY
FROM WORK_ITEM WI, ORDER_MASTER OM,  ORDER_LINE_DETAILS OL, ORDER_DISCOUNT_QA QA
WHERE WI.ORDER_KEY = OM.ORDER_KEY AND
WI.ORDER_KEY = OL.ORDER_KEY AND
WI.ORDER_KEY = QA.ORDER_KEY AND
( OM.DISCOUNT_QA_SAVED_YN IS NULL OR OM.DISCOUNT_QA_SAVED_YN = 'N' ) AND
OL.ORDER_LINE_STATUS_CD = 'CLOSED' AND
OL.ORDER_LINE_ITEM_TYPE = 'P' AND
WI.QUEUE_NAME = 'Closed'
AND WI.activity_name!='TAPASDummyActivity' AND WI.owner!='TAPAS'
MINUS
SELECT /*+ leading(qa) index(qa) index(wi) use_nl(qa,wi) use_nl(wi,om) use_nl(wi,ol)*/ DISTINCT WI.ORDER_KEY
FROM WORK_ITEM WI, ORDER_MASTER OM,  ORDER_LINE_DETAILS OL, ORDER_DISCOUNT_QA QA
WHERE WI.ORDER_KEY = OM.ORDER_KEY AND
WI.ORDER_KEY = OL.ORDER_KEY AND
WI.ORDER_KEY = QA.ORDER_KEY AND
( OM.DISCOUNT_QA_SAVED_YN IS NULL OR OM.DISCOUNT_QA_SAVED_YN = 'N' ) AND
OL.ORDER_LINE_STATUS_CD NOT IN ('CLOSED', 'CANCELLED', 'CANCEL_PENDING') AND
OL.ORDER_LINE_ITEM_TYPE = 'P'
AND WI.activity_name!='TAPASDummyActivity' AND WI.owner!='TAPAS';
SELECT /*+ leading(qa) index_ffs(qa) parallel(4) index(wi,work_item_ref1) use_nl(wi,om) use_nl(wi,ol) */ DISTINCT WI.ORDER_KEY
FROM WORK_ITEM WI, ORDER_MASTER OM,  ORDER_LINE_DETAILS OL, ORDER_DISCOUNT_QA QA
WHERE WI.ORDER_KEY = OM.ORDER_KEY AND
WI.ORDER_KEY = OL.ORDER_KEY AND
WI.ORDER_KEY = QA.ORDER_KEY AND
( OM.DISCOUNT_QA_SAVED_YN IS NULL OR OM.DISCOUNT_QA_SAVED_YN = 'N' ) AND
OL.ORDER_LINE_STATUS_CD = 'CLOSED' AND
OL.ORDER_LINE_ITEM_TYPE = 'P' AND
WI.QUEUE_NAME = 'Closed'
AND WI.activity_name!='TAPASDummyActivity' AND WI.owner!='TAPAS'
MINUS
SELECT /*+ leading(qa) index_ffs(qa) parallel(4) index(wi) use_nl(qa,wi) use_nl(wi,om) use_nl(wi,ol)*/ DISTINCT WI.ORDER_KEY
FROM WORK_ITEM WI, ORDER_MASTER OM,  ORDER_LINE_DETAILS OL, ORDER_DISCOUNT_QA QA
WHERE WI.ORDER_KEY = OM.ORDER_KEY AND
WI.ORDER_KEY = OL.ORDER_KEY AND
WI.ORDER_KEY = QA.ORDER_KEY AND
( OM.DISCOUNT_QA_SAVED_YN IS NULL OR OM.DISCOUNT_QA_SAVED_YN = 'N' ) AND
OL.ORDER_LINE_STATUS_CD NOT IN ('CLOSED', 'CANCELLED', 'CANCEL_PENDING') AND
OL.ORDER_LINE_ITEM_TYPE = 'P'
AND WI.activity_name!='TAPASDummyActivity' AND WI.owner!='TAPAS'
;
        "BAN" NUMBER(9,0) CONSTRAINT CHG_NN_BAN NOT NULL ENABLE
        "CHG_ENT_SEQ_NO" NUMBER(15,0) CONSTRAINT CHG_NN_CHG_ENT_SEQ_NO NOT NULL ENABLE
        "ACTV_SEQ_NO" NUMBER(3,0) CONSTRAINT CHG_NN_ACTV_SEQ_NO NOT NULL ENABLE
        "SYS_CREATION_DATE" DATE CONSTRAINT CHG_NN_SYS_CR_DT NOT NULL ENABLE
        "DL_SERVICE_CODE" CHAR(5) CONSTRAINT CHG_NN_DL_SVC_CODE NOT NULL ENABLE
        "ACTV_AMT" NUMBER(9,2) CONSTRAINT CHG_NN_ACTV_AMT NOT NULL ENABLE
        "FEATURE_CODE" CHAR(6) CONSTRAINT CHG_NN_FEATURE_CODE NOT NULL ENABLE
        "FTR_REVENUE_CODE" CHAR(3) CONSTRAINT CHG_NN_FTR_RVN_CODE NOT NULL ENABLE
        "BALANCE_IMPACT_CODE" CHAR(1) CONSTRAINT CHG_NN_BLC_IMPC_CODE NOT NULL ENABLE
        "BEFORE_DISCNT_AMT" NUMBER(9,2) CONSTRAINT CHG_NN_BF_DISCNT_AMT NOT NULL ENABLE
        "AU_RATING_SCHEME_IND" CHAR(1) CONSTRAINT CHG_NN_AU_RTG_SCHEME_IND NOT NULL ENABLE
        "CHARGE_TYPE" CHAR(1) CONSTRAINT CHG_NN_CHG_TYPE NOT NULL ENABLE
        "CHARGE_HIST_IND" CHAR(1) CONSTRAINT CHG_NN_CHG_HIST_TYPE NOT NULL ENABLE
col OBJECT_TYPE          format a10
col OBJECT_OWNER         format a20
col OBJECT_NAME          format a25
col BASE_TABLE_OWNER     format a20
col BASE_TABLE_NAME      format a20
col INTERIM_OBJECT_OWNER format a20
col INTERIM_OBJECT_NAME  format a25
col EDITION_NAME         format a20
select * from DBA_REDEFINITION_OBJECTS where BASE_TABLE_OWNER='NXTAPPO';
alter table nxtappo.charge rename constraint "BIN$nDPhNcE+AILgU5DioGDMwg==$0" to NN_FTR_REVENUE_CODE;
alter table nxtappo.charge rename constraint "BIN$nDPhNcE/AILgU5DioGDMwg==$0" to NN_BALANCE_IMPACT_CODE;
alter table nxtappo.charge rename constraint "BIN$nDPhNcE3AILgU5DioGDMwg==$0" to NN_BAN;
alter table nxtappo.charge rename constraint "BIN$nDPhNcE4AILgU5DioGDMwg==$0" to NN_CHG_ENT_SEQ_NO;
alter table nxtappo.charge rename constraint "BIN$nDPhNcE5AILgU5DioGDMwg==$0" to NN_ACTV_SEQ_NO;
alter table nxtappo.charge rename constraint "BIN$nDPhNcE6AILgU5DioGDMwg==$0" to NN_SYS_CREATION_DATE;
alter table nxtappo.charge rename constraint "BIN$nDPhNcE7AILgU5DioGDMwg==$0" to NN_DL_SERVICE_CODE;
alter table nxtappo.charge rename constraint "BIN$nDPhNcE8AILgU5DioGDMwg==$0" to NN_ACTV_AMT;
alter table nxtappo.charge rename constraint "BIN$nDPhNcE9AILgU5DioGDMwg==$0" to NN_FEATURE_CODE;
alter table nxtappo.charge rename constraint "BIN$nDPhNcFAAILgU5DioGDMwg==$0" to NN_BEFORE_DISCNT_AMT;
alter table nxtappo.charge rename constraint "BIN$nDPhNcFBAILgU5DioGDMwg==$0" to NN_AU_RATING_SCHEME_IND;
alter table nxtappo.charge rename constraint "BIN$nDPhNcFCAILgU5DioGDMwg==$0" to NN_CHARGE_TYPE;
alter table nxtappo.charge rename constraint "BIN$nDPhNcFDAILgU5DioGDMwg==$0" to NN_CHARGE_HIST_IND;
  TABLESPACE "DATA07"  LOCAL
                       *
ERROR at line 208:
ORA-00922: missing or invalid option
select
'revoke ' || privilege || ' on NXTAPPO.CHARGE from ' || grantee || ';'
from dba_tab_privs
where owner = 'NXTAPPO' and table_name='CHARGE'
;
revoke SELECT on NXTAPPO.CHARGE from CUSTOMERCRPROG_SELECT_ROLE;
revoke SELECT on NXTAPPO.CHARGE from CUST_BILL_SVC_1_ROLE;
revoke SELECT on NXTAPPO.CHARGE from ENTOPS1_READ_ROLE;
revoke SELECT on NXTAPPO.CHARGE from INVENTORY_USER_ROLE;
revoke SELECT on NXTAPPO.CHARGE from NDW_AUDIT_RO;
revoke SELECT on NXTAPPO.CHARGE from NORSNAPADM_STORMDM_READ1_ROLE;
revoke SELECT on NXTAPPO.CHARGE from OPERATIONSFINANCE_1_ROLE;
revoke SELECT on NXTAPPO.CHARGE from RELEASE_TBL_MGMT_ROLE;
revoke SELECT on NXTAPPO.CHARGE from REVENUEASSURANCE_SELECT_ROLE;
revoke SELECT on NXTAPPO.CHARGE from SELECT_ALL_NPI_NOR_DATA;
revoke SELECT on NXTAPPO.CHARGE from SELECT_CUSTOMER_SERVICE_ROLE;
revoke SELECT on NXTAPPO.CHARGE from SELECT_GEN_NORSNAP_DATA;
revoke SELECT on NXTAPPO.CHARGE from SELECT_HELM_GRP;
revoke SELECT on NXTAPPO.CHARGE from SELECT_HS_DATA;
revoke SELECT on NXTAPPO.CHARGE from SELECT_MIRADM_DATA;
revoke SELECT on NXTAPPO.CHARGE from SELECT_NORCPADM_DATA;
revoke SELECT on NXTAPPO.CHARGE from SELECT_NORSNAPADM_HS_DATA;
revoke SELECT on NXTAPPO.CHARGE from SELECT_NORSNAPADM_ROLE;
revoke SELECT on NXTAPPO.CHARGE from SELECT_NORSNAPADM_RU133843;
revoke SELECT on NXTAPPO.CHARGE from SELECT_NPI_NORSNAPADM;
revoke SELECT on NXTAPPO.CHARGE from SELECT_NXTAPPO_ROLE;
revoke SELECT on NXTAPPO.CHARGE from SELECT_VI145466_READ;
revoke SELECT on NXTAPPO.CHARGE from SELECT_NPI_NORSNAPADM_DATA;
revoke SELECT on NXTAPPO.CHARGE from NXTAPPO_SEL;
revoke SELECT on NXTAPPO.CHARGE from STORMADM;
revoke SELECT on NXTAPPO.CHARGE from NARLOADADM;
revoke SELECT on NXTAPPO.CHARGE from QPASSADM;
revoke SELECT on NXTAPPO.CHARGE from NDWADM;
revoke SELECT on NXTAPPO.CHARGE from CHARGEADM;
revoke SELECT on NXTAPPO.CHARGE from PSPAPP;
revoke SELECT on NXTAPPO.CHARGE from TAXREP;
revoke SELECT on NXTAPPO.CHARGE from AL073999;
revoke SELECT on NXTAPPO.CHARGE from AN066339;
revoke SELECT on NXTAPPO.CHARGE from ASDRADM;
revoke SELECT on NXTAPPO.CHARGE from BOACCESSADM;
revoke SELECT on NXTAPPO.CHARGE from BOACCESSPPR;
revoke SELECT on NXTAPPO.CHARGE from BOOSTADM;
revoke SELECT on NXTAPPO.CHARGE from BR065085;
revoke SELECT on NXTAPPO.CHARGE from CFSREPORTING;
revoke SELECT on NXTAPPO.CHARGE from CH131157;
revoke SELECT on NXTAPPO.CHARGE from CH134255;
revoke SELECT on NXTAPPO.CHARGE from CHRNADM;
revoke SELECT on NXTAPPO.CHARGE from CLCROADM;
revoke SELECT on NXTAPPO.CHARGE from CMSADM;
revoke SELECT on NXTAPPO.CHARGE from COMET;
revoke SELECT on NXTAPPO.CHARGE from CPNIADM;
revoke SELECT on NXTAPPO.CHARGE from CRNCHADM;
revoke SELECT on NXTAPPO.CHARGE from DA078279;
revoke SELECT on NXTAPPO.CHARGE from DAPCDRREAD;
revoke SELECT on NXTAPPO.CHARGE from DCCADM;
revoke SELECT on NXTAPPO.CHARGE from DRDMADM;
revoke SELECT on NXTAPPO.CHARGE from EAIADM;
revoke SELECT on NXTAPPO.CHARGE from ECAADM;
revoke SELECT on NXTAPPO.CHARGE from ENSWARADM;
revoke SELECT on NXTAPPO.CHARGE from ESRTADM;
revoke SELECT on NXTAPPO.CHARGE from ESRTREAD;
revoke SELECT on NXTAPPO.CHARGE from FCRF_ADMIN;
revoke SELECT on NXTAPPO.CHARGE from GMDPPADM;
revoke SELECT on NXTAPPO.CHARGE from HE047981;
revoke SELECT on NXTAPPO.CHARGE from HIERADM;
revoke SELECT on NXTAPPO.CHARGE from HISTORICALDATA;
revoke SELECT on NXTAPPO.CHARGE from IPRO;
revoke SELECT on NXTAPPO.CHARGE from IS072253;
revoke SELECT on NXTAPPO.CHARGE from IVRADM;
revoke SELECT on NXTAPPO.CHARGE from JA073908;
revoke SELECT on NXTAPPO.CHARGE from JI142617;
revoke SELECT on NXTAPPO.CHARGE from KR050295;
revoke SELECT on NXTAPPO.CHARGE from LA062120;
revoke SELECT on NXTAPPO.CHARGE from LI047519;
revoke SELECT on NXTAPPO.CHARGE from LINKADM;
revoke SELECT on NXTAPPO.CHARGE from MO025092;
revoke SELECT on NXTAPPO.CHARGE from NCI_CODEMGMTADM;
revoke SELECT on NXTAPPO.CHARGE from NETADM;
revoke SELECT on NXTAPPO.CHARGE from NLRETSADM;
revoke SELECT on NXTAPPO.CHARGE from NORSNAPADM;
revoke SELECT on NXTAPPO.CHARGE from NORSNAPADM_HS;
revoke SELECT on NXTAPPO.CHARGE from NPANXXADM;
revoke SELECT on NXTAPPO.CHARGE from NPI_CODEMGMTADM;
revoke SELECT on NXTAPPO.CHARGE from NPI_COMMADM;
revoke SELECT on NXTAPPO.CHARGE from NPI_ESRTADM;
revoke SELECT on NXTAPPO.CHARGE from NPI_GSAFEEADM;
revoke SELECT on NXTAPPO.CHARGE from NPI_HIERADM;
revoke SELECT on NXTAPPO.CHARGE from NPI_SCORECARDADM;
revoke SELECT on NXTAPPO.CHARGE from NXTAPPC;
revoke SELECT on NXTAPPO.CHARGE from ONESOURCEAPP;
revoke SELECT on NXTAPPO.CHARGE from PA053174;
revoke SELECT on NXTAPPO.CHARGE from PCADM;
revoke SELECT on NXTAPPO.CHARGE from PDSADM;
revoke SELECT on NXTAPPO.CHARGE from PDSREAD;
revoke SELECT on NXTAPPO.CHARGE from PDVADM;
revoke SELECT on NXTAPPO.CHARGE from PSRVADM;
revoke SELECT on NXTAPPO.CHARGE from Q4PROMREAD;
revoke SELECT on NXTAPPO.CHARGE from RA074830;
revoke SELECT on NXTAPPO.CHARGE from RO072760;
revoke SELECT on NXTAPPO.CHARGE from SCEXTRACTADM;
revoke SELECT on NXTAPPO.CHARGE from SCORECARDADM;
revoke SELECT on NXTAPPO.CHARGE from SECURITY_MASTER;
revoke SELECT on NXTAPPO.CHARGE from SIGNALADM;
revoke SELECT on NXTAPPO.CHARGE from SMARTCD;
revoke SELECT on NXTAPPO.CHARGE from SRUMMADM;
revoke SELECT on NXTAPPO.CHARGE from STARSADM;
revoke SELECT on NXTAPPO.CHARGE from STORMDM;
revoke SELECT on NXTAPPO.CHARGE from UNBLDADM;
revoke SELECT on NXTAPPO.CHARGE from VADOPSADM;
revoke SELECT on NXTAPPO.CHARGE from VADREPADM;
revoke SELECT on NXTAPPO.CHARGE from VI073649;
revoke SELECT on NXTAPPO.CHARGE from VPNADM;
revoke SELECT on NXTAPPO.CHARGE from WNPFEEWAIVADM;
revoke SELECT on NXTAPPO.CHARGE from WNPNPIADM;
revoke SELECT on NXTAPPO.CHARGE from WNPPORTADM;
revoke SELECT on NXTAPPO.CHARGE from YE010108;
revoke SELECT on NXTAPPO.CHARGE from RPOADM;
revoke SELECT on NXTAPPO.CHARGE from METRICSADM;
revoke SELECT on NXTAPPO.CHARGE from U8EL_ADM;
revoke SELECT on NXTAPPO.CHARGE from CODEMGMT;
revoke SELECT on NXTAPPO.CHARGE from CRMDEV;
revoke SELECT on NXTAPPO.CHARGE from CUSTOPS_PRODADM;
revoke SELECT on NXTAPPO.CHARGE from WNPADM;
revoke SELECT on NXTAPPO.CHARGE from XREF_ADMIN;
revoke SELECT on NXTAPPO.CHARGE from ENS_CCRADM;
revoke SELECT on NXTAPPO.CHARGE from ENTOPS1;
revoke SELECT on NXTAPPO.CHARGE from SELECT_NORSNAPADM_DATA_EOD;
revoke SELECT on NXTAPPO.CHARGE from EKS_APP;
revoke SELECT on NXTAPPO.CHARGE from CLWRADM;
revoke SELECT on NXTAPPO.CHARGE from APP6QSADM;
revoke SELECT on NXTAPPO.CHARGE from SBNA_OWNER;
revoke SELECT on NXTAPPO.CHARGE from CNAPADM;
revoke SELECT on NXTAPPO.CHARGE from ESECURITELADM;
revoke SELECT on NXTAPPO.CHARGE from CH200548;
revoke SELECT on NXTAPPO.CHARGE from EPPADM;
revoke SELECT on NXTAPPO.CHARGE from ITSONADM;
revoke SELECT on NXTAPPO.CHARGE from PY610889;
revoke SELECT on NXTAPPO.CHARGE from SELECT_ALL_EPP;
revoke SELECT on NXTAPPO.CHARGE from SELECT_ALL_DEV;
revoke SELECT on NXTAPPO.CHARGE from APP_32P;
revoke SELECT on NXTAPPO.CHARGE from JI073424;
revoke SELECT on NXTAPPO.CHARGE from READ8UN;
revoke SELECT on NXTAPPO.CHARGE from TR966650;
revoke SELECT on NXTAPPO.CHARGE from PSNYDE01;
revoke SELECT on NXTAPPO.CHARGE from LA279153;
revoke SELECT on NXTAPPO.CHARGE from SELECT_ANY_TABLE_EXCEPT_GOVT;
revoke SELECT on NXTAPPO.CHARGE from SELECT_ALL_REPTBL_EXCEPT_GOVT;
revoke SELECT on NXTAPPO.CHARGE from NORSNAPADM_SPRINT;
revoke SELECT on NXTAPPO.CHARGE from NORSNAPADM_TPP;
revoke SELECT on NXTAPPO.CHARGE from NORSNAPADM_TPP_HS;
revoke SELECT on NXTAPPO.CHARGE from NORSNAPADM_SPRINT_HS;
select /*+ parallel(12) */ count(*) from NXTAPPO.CHARGE
  COUNT(*)
----------
2639438255
1 row selected.
select /*+ parallel(12) */ count(*) from NXTAPPO.CHARGE_STG
  COUNT(*)
----------
2639438255
1 row selected.
SQL> select /*+parallel(12)*/ count(*) from SYS.AUD$;
  COUNT(*)
----------
  14111748
select object_name, owner, object_type, created
from dba_objects where object_name='CPATH_LEGACYNV_DATA'
;
  select
 'alter system disconnect session ''' || SID || ',' ||  serial# || ',@' || inst_id || ''' immediate;'
  from gv$session
    where
  type <> 'BACKGROUND'
  and status='ACTIVE'
 and username = 'SYS'
    /
drop table nxtappo.charge_stg;
0152
15471-2
 create user test_dblink identified by "testmydbl1nk_";
conn test_dblink[svdmadm]
  SQL> select 1 from dual@SVI_DBLINK;
select 1 from dual@SVI_DBLINK
                   *
ERROR at line 1:
ORA-12170: TNS:Connect timeout occurred
select * from dba_tab_privs where table_name='V_XITOR_CLASS';
grant insert, update, delete on CLW_P01_EPM.Relation_type to CLW_P01_EPM_USER;
      SR 3-22120465011 : RAC: Cluster node list communication SVIP101
      select 'grant select, insert, update, delete on CLW_P01_EPM.' || table_name || ' to CLW_P01_EPM_USER;'
      from dba_tab_privs
      where owner='CLW_P01_EPM'
      and grantee='CLW_P01_EPM_USER'
      and privilege <> 'EXECUTE';
1812-0 396028
Email MESSAGE-ID: 26318123 :
INSTANCE=ITXANDOWN
 ATTR=MON_ALERT_ALGAZARRA_LEVEL
 STATE=CRITICAL
 VALUE=ALG-666 - ALGAZARRA LEVEL IS ABOVE ALL SAFETY. EVACUATE THE OFFICE
Reference URL: http://pvmka372.corp.sprint.com/datapoint/dp_query_driver.jsp?query_seq_id_nbr=5306&in_context=Y&pltfm_name=LINUX&dbms_name=ORACLE&srvr_name=ITXANDOWN&instc_name=+ITXANDOW&attr_name=MON_ALERT_IT_XANDOWN
./tfactl diagcollect -from "2020-01-21 02:00:00" -to "2020-01-21 11:00:00"
-- new tables as per task T782011
Table ETICKET_OWNER_HIST.TICKET_IOS_REPAIR_JOURNAL_HIST;
Table ETICKET_OWNER_HIST.TICKET_STEP_STATUS_HIST;
Table ETICKET_OWNER_HIST.WORK_TO_BE_PERFORMED_HIST;
-- new tables as per task T782011
ADD TRANDATA ETICKET_OWNER_HIST.TICKET_IOS_REPAIR_JOURNAL_HIST , ALLCOLS
ADD TRANDATA ETICKET_OWNER_HIST.TICKET_STEP_STATUS_HIST        , ALLCOLS
ADD TRANDATA ETICKET_OWNER_HIST.WORK_TO_BE_PERFORMED_HIST      , ALLCOLS
ADD TRANDATA ETICKET_OWNER.MODEL_NUMBER      ,COLS (PROTECTION_TIER_CD)
ADD TRANDATA ETICKET_OWNER.ETICKET         ,COLS (PROTECTION_CD,SCREEN_PROTECTOR_CD)
ADD TRANDATA ETICKET_OWNER_HIST.ETICKET_HIST ,COLS (PROTECTION_CD,SCREEN_PROTECTOR_CD)
info TRANDATA ETICKET_OWNER_HIST.TICKET_IOS_REPAIR_JOURNAL_HIST
info TRANDATA ETICKET_OWNER_HIST.TICKET_STEP_STATUS_HIST
info TRANDATA ETICKET_OWNER_HIST.WORK_TO_BE_PERFORMED_HIST
info TRANDATA ETICKET_OWNER.MODEL_NUMBER
info TRANDATA ETICKET_OWNER.ETICKET
info TRANDATA ETICKET_OWNER_HIST.ETICKET_HIST
EE8S01C2
PE8S01C2
BZEN7V         8BC05ZVV       PORTO SEGURO S/A OPP 0I-Y...                      GB0020         General Billable                        S         12.0      12.0      0.0       0.0       0.0       0.0       0.0       24.0
New202001231241!
PLSAB709
2a3gb33ppaupy
[‎1/‎24/‎2020 6:42 PM]  Gadiparthi, Sudheer [CTO]:
nohup sh nohup bash phase1.sh clw_p01_epm/bu4Lret9@SVIP101 clw_p01_epm_user/bu4Lret9@SVIP101 clw_p01_epm_rpt/psw23e@SVIP101 > phase1_log.txt &
nohup sh nohup bash phase2.sh clw_p01_epm/bu4Lret9@SVIP101 clw_p01_epm_user/bu4Lret9@SVIP101 clw_p01_epm_rpt/psw23e@SVIP101 > phase2_log.txt &
nohup sh phase1.sh clw_p01_epm/bu4Lret9@SVIP101 clw_p01_epm_user/bu4Lret9@SVIP101 clw_p01_epm_rpt/psw23e@SVIP101 > phase1_log.txt &
nohup sh phase2.sh   clw_p01_epm_user/bu4Lret9@SVIP101 clw_p01_epm_rpt/psw23e@SVIP101 > phase2_log.txt &
select 'alter system disconnect session ''' || sid || ',' || serial# || ',@' || inst_id || ''' immediate;'
from gv$session where status='ACTIVE' and username is not null and username <> 'SYS'
and sql_id='asy42pj54tnan';
WN189101
set pages 999 lin 200
set timing on echo on feedback on
alter session set ddl_lock_timeout=10;
alter session set current_schema=CLW_P01_EPM;
spool
 select sum(bytes)/1048576 dba_segments where segment_name = 'CONFIG_VALUE_CLOB';
select /*+parallel(16)*/ key_value, config_field_id, dbms_lob.substr(value_clob, 2000, 1) as value_char,
           ts, user_id, 1001497 as program_id,
           case when lengthb(dbms_lob.substr(value_clob, 2000, 1)) >= 2000 then value_clob
                else null
           end as value_clob
      from clw_p01_epm.config_value_clob cfcl
     where value_clob is not null
  order by key_value, config_field_id;
    insert  into clw_p01_epm.test_table_char(key_value, config_field_id, value_char, ts, user_id, program_id, value_clob)
  select /*+ parallel(16) full(cfcl)*/ key_value, config_field_id, dbms_lob.substr(value_clob, 2000, 1) as value_char,
           ts, user_id, 1001497 as program_id,
           case when lengthb(dbms_lob.substr(value_clob, 2000, 1)) >= 2000 then value_clob
                else null
           end as value_clob
      from clw_p01_epm.config_value_clob cfcl
     where value_clob is not null
  order by key_value, config_field_id;
  create table clw_p01_epm.test_table_char as select * from clw_p01_epm.CONFIG_VALUE_CHAR where 1 = 2;
    un1_wp_tasks
    select
     'alter ' || object_type || ' ' || owner || '.' || object_name || ' compile;'
     from dba_objects where status='INVALID'
     and owner not like 'SYS%'
     and object_type <> 'PACKAGE BODY';
     create unique index CLW_P01_EPM.un1_wp_tasks on CLW_P01_EPM.wp_tasks(upper(task_name), wp_workplan_id, xitor_id) parallel 8 nologging;
create table CLW_P01_EPM.wp_tasks_dups_onevision
  as
select /*+parallel(16)*/ *
from CLW_P01_EPM.wp_tasks
where (upper(task_name),  wp_workplan_id, xitor_id)
in
(Select /*+parallel(16)*/ upper(task_name), wp_workplan_id, xitor_id
from CLW_P01_EPM.wp_tasks
group by upper(task_name), wp_workplan_id, xitor_id
having count(*)>1
)
/
18235
directory=EXPD_ASH
table=CLW_P01_EPM.CONFIG_VALUE_CLOB
cluster=N
  QUERY=(CLW_P01_EPM.config_value_clob:"WHERE key_value = 1001136314386 and  Config_Field_id = 100164322 CLW_P01_EPM.config_value_clob@SVIP201_TMP")
select * from config_value_clob@SVIP201_TMP where key_value = 1001136314386 and  Config_Field_id = 100164322
select b.key_value, config_field_id, dbms_lob.substr(value_clob, 2000, 1) as value_char,
             ts, user_id, 1001497 as program_id,
             case when lengthb(dbms_lob.substr(value_clob, 2000, 1)) >= 2000 then value_clob
                  else null
             end as value_clob
        from (select column_value as key_value from table(list_id(1001136314386))) b
          join clw_p01_epm.CONFIG_VALUE_CLOB@SVIP201_TMP cfcl on b.key_value = cfcl.key_value
       where value_clob is not null;
select key_value, (select value_clob from dual) value_clob , dbms_lob.getlength( ( select value_clob from dual ) ) len,
utl_raw.cast_to_varchar2( dbms_lob.substr( ( select value_clob from dual ), 20, 1 ) ) sub
from clw_p01_epm.config_value_clob@SVIP201_TMP
where key_value = 1001136314386 and  Config_Field_id = 100164322 ;
select id
     , ( select blb from dual ) blb
     , dbms_lob.getlength( ( select blb from dual ) ) len
     , utl_raw.cast_to_varchar2( dbms_lob.substr( ( select blb from dual ), 20, 1 ) ) sub
from test_blob@xx;
select value_clob
from clw_p01_epm.config_value_clob@SVIP201_TMP
where key_value = 1001136314386 and  Config_Field_id = 100164322 ;
C249536
set lin 200 pages 999
set trimspool on echo on feedback on timing on
spool create_user.log
create user bbstage identified by "&pwd" default tablespace BB_DATA temporary tablespace TEMP_01 profile SPRINT_APP_PROFILE;
 grant CREATE TRIGGER to bbstage;
 grant CREATE VIEW to bbstage;
 grant CREATE TABLE to bbstage;
 grant CREATE MATERIALIZED VIEW to bbstage;
 grant UNLIMITED TABLESPACE to bbstage;
 grant CREATE SEQUENCE to bbstage;
 grant SELECT ANY DICTIONARY to bbstage;
 grant CREATE SESSION to bbstage;
 grant WRITE on SYS.UYV_PROD_DATA to bbstage;
 grant READ on SYS.UYV_PROD_DATA to bbstage;
 grant BB_RO_ROLE to bbstage;
spool off
exit;
SQL> create or replace directory C249536 as '/oracle/g01/bkup02/C249536';
Directory created.
ORA-15012: ASM file '+FRA_01/wdmp101/archivelog/2020_01_23/thread_2_seq_15734.1479.1030417169' does not exist
19 998046217
11 992171471
Provide high level implementation plan steps for this change.
This change is to move hosts in LSDC room DC4 onto Data Center infrastructure switches that are target state. Specifically, hosts on the IT Network E, F, and G LAN switches will have cable move on network switch. Specific identified hosts for Prod and BDT in LSDC DC4. The change will not change IP address.
High Level MOP:
1-  DBA or application team to stop Database or application instance as those teams determine necessary prior to network change activity. Splash etc.
2-     IT  Network team to move the cables from EOL 6500 switch to new Nexus target state switch.
3-  SA to restart server if needed and DBA, Storage and/or application team to support room DC4 server issue, as needed.
4-  DENG interface verification after IT Network changes completed.
5-      Client application teams post change testing.
What is the business justification - why is this change needed?
PJ024601      FY19 Network Core EOL   Preparation to decom 6 EOL 6500s.
Scope > LSDC room DC4 - host migrations off of EOL 6500 LAN switches  RTMOLESBXE1/2,  RTMOLESBXF1/2, RTMOLESBXG1/2
Please explain the risks, impacts or outages associated with implementing the RFC.
     IT Network  interface outage on host:  Cable move from EOL switch to new target state switch for each identified host.  The change will not change IP address.
What pre-implementation testing has been completed and by whom? If no testing was done, provide justification.
January re-check  C246908
C247093  LSDC DC4 VLAN1156 shutdown pre-testing
pre-work, pre-cabling   C239335  and   C235886
If customer impacting, what business functionality will be unavailable or degraded during the change window?
IT Network  interface outage on host:  Cable move from EOL switch to new target state switch for each identified host.  The change will not change IP address.
 NOTE: Cable move from EOL switch to new target state switch for each identified host.This is an outage/impact.
Standard Precautionary: The technical complexity of this type of Core network change advises caution. Applications that are sensitive with their network connectivity should plan for IT network interruption. DC4 is scope E-F-G
Is post implementation testing required?
Yes
Has post implementation been coordinated?
Yes
Has Pre-Implementation testing been completed and/or has the pre-implementation testing documentation been placed in Docshare (test tracking form and business sponsor signoff)?
Yes
 set lin 200 pages 999
  col tim for a15
  col process for a7
  col event for a40
  col machine for a15
  col program for a30
  col username for a15
  select
  inst_id,
  SID,
  serial#,
  username,
  --osuser,
  machine,
  program,
  process,
  --blocking_session as bl,
  to_char(LOGON_TIME, 'DDMM - HH24:MI') as tim,
  LAST_CALL_ET/60 et_min,
  --BLOCKING_SESSION,
  EVENT,
  WAIT_TIME,
  SECONDS_IN_WAIT,
  status,
  sql_id
  from gv$session
  --where sid = '2597'
  where
  sid in (
    select qcsid from v$px_session);
  select sql_id, sql_fulltext from gv$sql
  where sql_id in
  (
  '2n6319nx5nh4j',
  '2gndud1pvdkdr',
  'gqqph2a0vj2p3')
  /
alter system disconnect session '104,28553' immediate;
alter system disconnect session '26,257' immediate;
Export/Trasport IRP20.3 - Prod to ITE3 - WDM (9NN/4BN) - PLSAB612to pvmke292 to TREAB726 - 2 GB Uncompressed via SEN
PLSAB612 L5SVC3
TREAB726 RESVC2
pvmke292  (Jump box) (Data to be transported to Jump box under Minor change and then to test server under non prod change)
4BN OEMARCH
Need to VERIFY the entire structure (tables, synonyms, sequences, stored procedures, foreign/primary key constraints, indexes etc.) of this schema in ITE3 against Production
9NN (TOES) + 4BN (Fast) OEMADM We only want data from specific tables and structures, indexes, grants and synonyms for all tables
Need to VERIFY the entire structure (tables, synonyms, sequences, stored procedures, foreign/primary key constraints, indexes etc.) of this schema in ITE3 against Production. If there are any differences then ITE3 needs to be fixed to reflect the production (unless the changes themselves belong to the current release).
*********** 4BN Checklist for OEMARCH & OEMADM *********
Look up tables should be in sync
Constraints/ Indexes should be created and compared for correctness
DBMS jobs has to be started after the refresh
Analyze Tables once the refresh is over
******************************************
*********** 4BN REF Tables in OEMADM - Total of 112 tables *********
*********** Structures and Data *********
tables=OEMADM.ACCESSORY_HOUSE_ACCOUNT,OEMADM.ACK_STATUS_DESC,OEMADM.ACTION_INFO,OEMADM.ACTION_LOOK_UP,OEMADM.ACTIVITY_STATUSES,OEMADM.ASI_ERROR_DESC,
OEMADM.ASW_EQUIPMENT_PRIORITY,OEMADM.AUDIT_HISTORY_LOOKUP,OEMADM.AUDIT_STATUS_DESC,OEMADM.AUTO_ACTIVITY_WRKFLW_TASK,OEMADM.BOLTON_DETAILS,
OEMADM.BUSINESS_ENTITY_INFO,OEMADM.BUSINESS_RULE,OEMADM.CATEGORY_ITEM,OEMADM.COLLATERAL_DETAILS,OEMADM.COMMENTS_LOOKUP,OEMADM.CONFIG_DATA,
OEMADM.CORP_GOV_LOOKUP,OEMADM.CREDIT_POLICY_DETAILS,OEMADM.CREDIT_SCORE_DETAILS,OEMADM.DECISION_CODE_LOOKUP,OEMADM.DYNAMIC_CONTENT,
OEMADM.EMAIL_TAX_FEE_DETAILS,OEMADM.EMAIL_TEMPLATE_TAG_DETAILS,OEMADM.EMAIL_TEMPLATES,OEMADM.ENSEMBLE_API_ROUTING,OEMADM.EQUIPMENT_ALLOCATION,
OEMADM.ERROR_CODE_DETAILS,OEMADM.ERROR_DESC,OEMADM.EVENT_TYPE_LOOKUP,OEMADM.FALLOUT_COUNTS,OEMADM.FAST_AUTO_ACTIVITY,OEMADM.FAST_AUTO_ACTIVITY_INFO,
OEMADM.FAST_AUTO_ACTIVITY_INFO_HISTRY,OEMADM.FAST_HB_RULE_DATA,OEMADM.FAST_HB_RULES,OEMADM.FAST_ROLE_DESC,OEMADM.FAST_SLA_DISTRO,OEMADM.FAST_SLA_RULE_CRITERIA,
OEMADM.FAST_SLA_RULE_LOG,OEMADM.FAST_SLA_RULES,OEMADM.FAST_UAFLDTYPE_CHNL_LOOKUP,OEMADM.FAST_USER_DETAILS,OEMADM.FAST_USER_ROLE,OEMADM.FE_API_STATUS_DATA,
OEMADM.FE_BT_STATUS_DATA,OEMADM.FE_ERROR_DESC,OEMADM.FE_ERROR_DESC_LOOKUP,OEMADM.HOUSE_ACCOUNT_INFO,OEMADM.INVENTORY_CATEGORY,OEMADM.INVENTORY_ITEM,
OEMADM.LOOK_UP_DEF,OEMADM.ORDER_PRIORITY,OEMADM.ORDER_PRIORITY_HISTORY,OEMADM.ORDER_STATUS_MSG,OEMADM.OS_ACTIVITY_LOOK_UP,OEMADM.OS_AT_AST_RULES,
OEMADM.OS_AT_AST_RULES_HISTORY,OEMADM.OS_ATTEMPT_LOOKUP,OEMADM.OS_CLOSED_REASONS_LOOKUP,OEMADM.OS_CLOSEDREASON_LOOKUPHISTRY,OEMADM.OS_EXIT_POINT_LOOKUP,
OEMADM.OS_EXT_SCHEDULE_INFO,OEMADM.OS_IMMD_ATTN_RULES,OEMADM.OS_IMMD_ATTN_RULES_HISTRY,OEMADM.OS_ORDER_RESULT_LOOKUP,OEMADM.OS_ORDER_RESULT_LOOKUP_HISTORY,
OEMADM.OS_ORDER_TYPE_RULES,OEMADM.OS_PRIORITY_DETAIL,OEMADM.OS_PRIORITY_DETAIL_HISTORY,OEMADM.OS_PRIORITY_DETAIL_LOOKUP,OEMADM.OS_QUEUE_ID_ROLE_MAPPING,
OEMADM.OS_QUEUE_LOOKUP,OEMADM.OS_QUEUE_LOOKUP_HISTORY,OEMADM.OS_QUEUE_PRIORITY_LOOKUP,OEMADM.OS_QUEUE_ROLES_LOOKUP,OEMADM.OS_SCHEDULING_INFO,
OEMADM.OS_SCHEDULING_INFO_HISTRY,OEMADM.OS_SCHEDULING_RULES,OEMADM.OS_SCHEDULING_RULES_HISTORY,OEMADM.OS_SITE_LOOKUP,OEMADM.OS_SLA_LOOKUP,
OEMADM.OS_SLA_LOOKUP_HISTRY,OEMADM.OS_STATE_TIMEZONE_LOOKUP,OEMADM.OS_TIMEZONE_LOOKUP,OEMADM.OS_USER_QUEUE_RULE_PRIORITY,OEMADM.OS_WORK_HOURS_LOOKUP,
OEMADM.OS_WORK_HOURS_LOOKUP_HISTRY,OEMADM.OS_WSGROUP_LOOKUP_HISTORY,OEMADM.OS_WSTATUS_DESC_HISTRY,OEMADM.OS_WSTATUS_GROUP_DESC,OEMADM.OS_WSTATUS_GROUP_LOOKUP,
OEMADM.OS_WSTATUS_SRULES,OEMADM.OS_WSTATUS_SRULES_HISTORY,OEMADM.OTM_ORDER_RETURN,OEMADM.OTM_RETURN_DEF,OEMADM.PAYMENT_RESP_CODE_DESC,OEMADM.PREPAID_ORDER_SUBTYPE_DESC,
OEMADM.PREPAID_ORDER_TYPE_SUBTYPE,OEMADM.PSI_LICENSE,OEMADM.QUEUE_ARCHIVE,OEMADM.QUEUE_CUSTOMIZATION,OEMADM.QUEUE_CUSTOMIZATION,OEMADM.QUEUE_DESC,
OEMADM.QUEUE_EMAILS,OEMADM.REASON_DESC,OEMADM.SUBMARKET_BUSENTITY_REF,OEMADM.USER_ROLE_DESC,OEMADM.USER_ROLE_PRIVILEGES,OEMADM.USER_ROLE_QUEUE_RESTRICTIONS,
OEMADM.WORKING_STATUS_DESC,OEMADM.WRITE_TRANS_FN
*********** End of 4BN REF Tables in OEMADM *********
*********** 4BN/9NN Shared REF Tables in OEMADM - Total of 30 tables *********
*********** Structures and Data *********
tables=OEMADM.ACCOUNT_TYPE_DESC,OEMADM.AIRLINE_DESC,OEMADM.ATTRIBUTE_DESC,OEMADM.ATTRIBUTE_TYPE_DESC,OEMADM.BILLING_TYPE_DESC,OEMADM.CC_TYPE_DESC,
OEMADM.CHANNEL_DETAILS,OEMADM.CHARGE_CODE_DESC,OEMADM.COUNTRY,OEMADM.CREDIT_POLICY,OEMADM.CUST_TYPE_DESC,OEMADM.DONOTSELL_BAN_LIST,
OEMADM.FEATURE,OEMADM.FORM_OF_PAYMENT_DESC,OEMADM.FRAUD_STATUS_DESC,OEMADM.ORDER_CHANNEL_DESC,OEMADM.ORDER_LINE_WORKING_STATUS_DESC,
OEMADM.ORDER_STATUS_DESC,OEMADM.ORDER_TYPE_DESC,OEMADM.PAYMENT_TYPE_DESC,OEMADM.PHONE_AND_ACCESSORY,OEMADM.PHONE_TO_ACCESSORY,
OEMADM.PHONE_TO_FEATURE,OEMADM.PROGRAM_DESC,OEMADM.SERVICE_DESC,OEMADM.SHIPPING_CHARGES,OEMADM.SHIPPING_METHOD_DESC
OEMADM.SHIPPING_TYPE_DESC,OEMADM.STATE_DESC,OEMADM.VENDOR_DESC,
*********** End of 4BN/9NN Shared REF Tables in OEMADM *********
************ 9NN REF Tables in OEMADM - Total of 54 tables *********
*********** Structures and Data *********
tables=OEMADM.ACCT_TYPES,OEMADM.AFFILIATE_DESCRIPTION,OEMADM.AISLE_DNIS_MAPPING,OEMADM.AUTHORIZATION_TYPE_DESC,OEMADM.CUSTOMER_FRAUD_INFO,
OEMADM.CUSTTYPE_NWK_LOOKUP,OEMADM.DNIS,OEMADM.EQUIPMENT_REBATE,OEMADM.FRAUD_CONDITION_LOOKUP,OEMADM.FRAUD_LIMITS,OEMADM.FRAUD_LIMITS,
OEMADM.FRAUD_LIMITS_ATTRIBUTE,OEMADM.FRAUD_LIMITS_LOOKUP,OEMADM.FRAUD_RULE_COMMON_ATTR,OEMADM.FRAUD_RULE_SCENARIO_ATTR,OEMADM.FRAUD_RULE_SCENARIO_HANDLER,
OEMADM.FRAUD_RULES,OEMADM.INDUSTRY_DESC,OEMADM.INVALID_DATA,OEMADM.MARKET_CHURN_MAP,OEMADM.MEDIA_SOURCE,OEMADM.NOTES_LOOKUP,OEMADM.P2K_ACCT_MTRX,
OEMADM.P2K_AFFILIATE_LOOKUP,OEMADM.P2K_CORP_GOV_LOOKUP,OEMADM.PREPAID_PRICING,OEMADM.PREPAID_RETURN_REASONS,OEMADM.PREPAID_SHIPPING,
OEMADM.PREPAID_WAIVE_SHIPPING_REASON,OEMADM.PRICE_CODES,OEMADM.PRICING,OEMADM.PRIMARY_DISPOSITION,OEMADM.SAC,OEMADM.SECONDARY_DISPOSITION,
OEMADM.SENSITIVE_DATA_TYPE_DESC,OEMADM.SHIPPING_METHOD_LOOKUP,OEMADM.SKU_OST_MAPPING,OEMADM.TM_ATTRIB,
OEMADM.TM_BUNDLE_TO_EQUIPMENT,OEMADM.TM_CAMPAIGN,OEMADM.TM_DNIS_TO_PRIORITY_CODE,OEMADM.TM_INSTRUCTION,OEMADM.TM_INSTRUCTION_TYPE,
OEMADM.TM_PAGE_TAB,OEMADM.TM_PHONE_TO_ACCESSORY,OEMADM.TM_PREFERRED_SOCS,OEMADM.TM_RECOMENDED_EQUIPMENT,OEMADM.TM_VENDOR_DESC,
OEMADM.TM_VENDOR_PROGRAM_DETAIL,OEMADM.TMP_P2K_AFFILIATE_LOOKUP,OEMADM.TMP_P2K_CORP_GOV_LOOKUP,OEMADM.VENDOR_AGENCY_CDE,
OEMADM.ZIPCODE_DEALERCODE,OEMADM.ZIPCODE_TO_MARKET
TM_ATTR_DEFAULT and TM_ATTRIB
* these 2 tables use TM_ATTRIB_DEFAULT_SEQ sequence
* sequence number needs to be set to match sequence number in production
************ End of 9NN REF Tables in OEMADM **************
Export/Transport IRP20.3 - Prod to ITE3 - WDM (6ZN) - PLSAB612 to PVMKE292  to TREAB726 - 0.5 GB Uncompressed via
PLSAB612 L5SVC4 (L2EIS3)
TREAB726 RESVC2
PVMKE292 (Jump box) (Data to be transported to Jump box under Minor change and then to test server under non prod change)
6ZN (OVM) OVMADM We only want data from specific tables and structures, indexes, grants and synonyms for all tables
Need to VERIFY the entire structure (tables, synonyms, sequences, stored procedures, foreign/primary key constraints, indexes etc.) of this schema in ITE3 against Production. If there are any differences then ITE3 needs to be fixed to reflect the production (unless the changes themselves belong to the current release).
*********** 6ZN REF Tables in OVMADM - Total of 42 tables *********
*********** Structures and Data *********
ASSERTIONS_DATA
BULK_FILE_FORMAT
BULK_FILE_SYSTEM
CLIENT_INFO
CRT_SSD_ROLE_DESC
DCM_ECHO_BACK_DATA
DECISION_CODE_LOOKUP
OAR_ACCOUNT_LINK
OAR_DISCOUNT_PLAN_INFO
OAR_INFO
OAR_ROUTING_CONFIG
OAR_ROUTING_CONFIG_EXT
OAR_SUB_INFO
OAR_TO_MESSAGE_TYPE
OVM_AGENT_CODE_CT_LOOKUP
OVM_AGENT_CODE_LOOKUP
OVM_AGENT_CODE_OT_LOOKUP
OVM_AGENT_CODE_PC_LOOKUP
OVM_CONTRACT_CONFIG
OVM_CORP_GOV_INFO
OVM_EMAIL_RULES
OVM_EMAIL_TEMPLATES
OVM_ERROR_DESC
OVM_ERROR_DETAILS
OVM_JOB_CONFIG
OVM_MARKET_TO_AGENT_CODE
OVM_STAGED_EMAILS
OVM_STATUS_CODE_LOOKUP
OVM_VENDOR_ERROR_TRANSFORM
STATS_TBL
TEMP_OAR_PHONE_AND_ACCESSORY
TEMP_OAR_PHONE_TO_ACCESSORY
TEMP_OAR_PRICING
TEST_REQUEST_DATA_2FISH
TEST_RUNNER_QUERY
ZIP_ALL_OAR
OAR_ACCOUNT_LINK_HIST
OAR_INFO_HIST
OAR_ROUTING_CONFIG_EXT_HIST
OAR_ROUTING_CONFIG_HIST
OAR_TO_MESSAGE_TYPE_HIST
OVM_AGENT_CODE_LOOKUP_HIST
*********** End of 6ZN REF Tables in OVMADM *********
Bufa,
               Será que não vira colocar um commando na cron pra limpar os aud trails? Ai só adequar para o seu server.
01 23 * * * find /oracle/g01/admin/EAIP1013/adump -name "*.aud" -print | xargs rm -rf > /dev/null 2>&1
[‎2/‎3/‎2020 12:19 PM]  Rao, Hemantha B [IBM Contractor for Sprint]:
Hostname: dvmk8071.dev.sprint.com
Username: appdba
Password: HJSdbaftp15
/usr/bin/sftp appdba@dvmk8071.dev.sprint.com
/data/appdba/T817216
echo "impdp \\\"/as sysdba\\\"  dumpfile= logfile= "
"impdp \\\"/as sysdba\\\"
set lin 200 pages 999
col file_name for a60
col tablespace_name for a20
set numwidth 15
select FILE_NAME, FILE_ID, TABLESPACE_NAME,
BYTES/1048576 as MB, MAXBYTES/1048576 as MB
from dba_temp_files where tablespace_name='&tbs'
/
2020-02-04 12:47:47  WARNING OGG-01154  SQL error 2291 mapping OEMADM.ASW_EQUIPMENT_PRIORITY to OEMADM.ASW_EQUIPMENT_PRIORITY
 OCI Error ORA-02291: integrity constraint (OEMADM.FK01_ASW_EQUIPMENT_PRIORITY) violated - parent key not found (status = 2291),
 SQL <INSERT INTO "OEMADM"."ASW_EQUIPMENT_PRIORITY" ("EQUIPMENT_ID","PRIORITY","HANDSET_CHOICE_IND","ACTIVE_YN","STATE_ID","H
ANDSET_TYPE","MODFD_BY_ID","MODFD_DT") VALUES (:a0,:a1,:a2,:a3,:a4,:a5,:a6,:a7)>.
1- import table  OEMADM.FAILED_RECORD_FK from dump.
2- insert into OEMADM.PHONE_AND_ACCESSORY select * from OEMADM.FAILED_RECORD_FK;
commit;
* for stand alone.
sudo /usr/bin/su - root -c "/oracle/g*/software/grid/*/bin/crsctl stop cluster "
* for stand alone.
sudo /usr/bin/su - root -c "/oracle/g*/software/grid/*/bin/crsctl start cluster"
* for RAC
sudo /usr/bin/su - root -c "/oracle/g*/software/grid/*/bin/crsctl stop cluster -all"
* for stand alone.
sudo /usr/bin/su - root -c "/oracle/g*/software/grid/*/bin/crsctl start cluster -all"
col object_name for a30
col owner for a30
col event for a30
  select
  l.SESSION_ID,
  s.SERIAL#,
  l.INST_ID inst,
  s.sql_id,
  s.username,
  s.event,
  s.seconds_in_wait s_in_wait,
  to_char(s.LOGON_TIME, 'DDMM - HH24:MI') as tim,
  s.status,
  o.owner,
  o.object_name
  from gv$locked_object l
  join dba_objects o using (object_id)
  join gv$session s on (l.session_id=s.sid and l.inst_id=s.inst_id)
  where -- s.status='INACTIVE'
  --and o.object_name like '%DFKKOP%'
  --where l.oracle_username='NXTAPPONRT'
  --and o.owner='NXTAPPO'
  --and
  o.object_name like '%3G%'
  --where l.session_id=189
  /
  select owner, table_name, partition_name, last_analyzed, stale_stats from dba_tab_statistics where table_name in
  (
  'DS_MAF_COMPARE_2G',
  'DS_AMS_COMPARE_TC_3G',
  'DS_WS_MAF_COMPARE_2G',
  'DS_AMS_COMPARE_TC_3G_WS'
  )
  /
ALTER USER SYSTEM     IDENTIFIED BY "Sp.Febr05022020";
ALTER USER SYS      IDENTIFIED BY "Febr050220.sp";
ALTER USER WMSYS    IDENTIFIED BY  "SpRint.Febr051220";
ALTER USER PERFSTAT   IDENTIFIED BY "SpRint.Febr051220";
ALTER USER OUTLN    IDENTIFIED BY "SpRint.Febr051220";
ALTER USER ORDSYS     IDENTIFIED BY "SpRint.Febr051220";
ALTER USER ORDPLUGINS   IDENTIFIED BY "SpRint.Febr051220";
ALTER USER MDSYS    IDENTIFIED BY "SpRint.Febr051220";
ICEP101  PLAN
-- BACKUP
FOUR_MONTH_CUT_VALUE         57000000000
SEVEN_MONTH_CUT_VALUE       52000000000
FOURTEEN_MONTH_CUT_VALUE   41000000000
userid="/ as sysdba"
dumpfile=exp_C250359_1_%u.dmp
logfile=exp_C250359_1.log
tables=BRITEBILL.DOCUMENT_FACT:SYS_P241, BRITEBILL.DOCUMENT_FACT:SYS_P221, BRITEBILL.DOCUMENT_FACT:P9, BRITEBILL.DOCUMENT_FACT:P10, BRITEBILL.DOCUMENT_FACT:P11,
BRITEBILL.DOCUMENT_FACT:P12, BRITEBILL.DOCUMENT_FACT:SYS_P261, BRITEBILL.DOCUMENTMETADATA:P9, BRITEBILL.DOCUMENTMETADATA:P10, BRITEBILL.DOCUMENTMETADATA:SYS_P142,
BRITEBILL.DOCUMENTMETADATA:SYS_P183, BRITEBILL.DOCUMENTMETADATA:SYS_P224, BRITEBILL.DOCUMENTMETADATA:SYS_P244, BRITEBILL.DOCUMENTMETADATA:SYS_P281
exclude=STATISTICS
exclude=INDEXES
userid="/ as sysdba"
dumpfile=exp_C250359_2_%u.dmp
logfile=exp_C250359_2.log
tables=BRITEBILL.HISTORICUSAGE:P6, BRITEBILL.HISTORICUSAGE:P7, BRITEBILL.HISTORICUSAGE:P8, BRITEBILL.HISTORICUSAGE:P9, BRITEBILL.HISTORICUSAGE:P10, BRITEBILL.HISTORICUSAGE:SYS_P86,
BRITEBILL.HISTORICUSAGE:SYS_P85, BRITEBILL.HISTORICUSAGE:SYS_P101, BRITEBILL.HISTORICUSAGE:SYS_P141, BRITEBILL.HISTORICCHARGES:P6,BRITEBILL.HISTORICCHARGES:P7,
BRITEBILL.HISTORICCHARGES:P8, BRITEBILL.HISTORICCHARGES:P9,BRITEBILL.HISTORICCHARGES:P10, BRITEBILL.HISTORICCHARGES:P11, BRITEBILL.HISTORICCHARGES:P12 ,
BRITEBILL.HISTORICCHARGES:P13 , BRITEBILL.HISTORICCHARGES:SYS_P161, BRITEBILL.HISTORICCHARGES:SYS_P182
exclude=STATISTICS
exclude=INDEXES
-- DISABLE CONSTRAINTS
-- DROP PARTITIONS
set echo on timing on feedback on trimspool on
set lin 200 pages 999
alter session set ddl_lock_timeout=60;
spool ./logs/drop_part_C250359.log
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P241 ;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P221 ;
alter table BRITEBILL.DOCUMENT_FACT drop partition P9 ;
alter table BRITEBILL.DOCUMENT_FACT drop partition P10 ;
alter table BRITEBILL.DOCUMENT_FACT drop partition P11 ;
alter table BRITEBILL.DOCUMENT_FACT drop partition P12 ;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P261 ;
alter table BRITEBILL.DOCUMENTMETADATA drop partition P9;
alter table BRITEBILL.DOCUMENTMETADATA drop partition P10;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P142;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P183;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P224;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P244;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P281;
alter table BRITEBILL.HISTORICCHARGES drop partition P6;
alter table BRITEBILL.HISTORICCHARGES drop partition P7;
alter table BRITEBILL.HISTORICCHARGES drop partition P8;
alter table BRITEBILL.HISTORICCHARGES drop partition P9;
alter table BRITEBILL.HISTORICCHARGES drop partition P10;
alter table BRITEBILL.HISTORICCHARGES drop partition P11;
alter table BRITEBILL.HISTORICCHARGES drop partition P12;
alter table BRITEBILL.HISTORICCHARGES drop partition P13;
alter table BRITEBILL.HISTORICCHARGES drop partition SYS_P161;
alter table BRITEBILL.HISTORICCHARGES drop partition SYS_P182;
alter table BRITEBILL.HISTORICUSAGE drop partition P6;
alter table BRITEBILL.HISTORICUSAGE drop partition P7;
alter table BRITEBILL.HISTORICUSAGE drop partition P8;
alter table BRITEBILL.HISTORICUSAGE drop partition P9;
alter table BRITEBILL.HISTORICUSAGE drop partition P10;
alter table BRITEBILL.HISTORICUSAGE drop partition SYS_P86;
alter table BRITEBILL.HISTORICUSAGE drop partition SYS_P85;
alter table BRITEBILL.HISTORICUSAGE drop partition SYS_P101;
alter table BRITEBILL.HISTORICUSAGE drop partition SYS_P141;
spool off
exit;
-- INDEXES
set echo on timing on feedback on trimspool on
set lin 200 pages 999
alter session set ddl_lock_timeout=60;
spool rbd_idx_C250359_1.log
alter index BRITEBILL.REF_INDEX_HIST_CHARGES_DATE rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_C_BAN_CODE rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_CHARGES_DOC rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_C_DAC_CODE rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_CHARGES_DATE noparallel logging;
alter index BRITEBILL.REF_INDEX_HIST_C_BAN_CODE noparallel logging;
alter index BRITEBILL.REF_INDEX_HIST_CHARGES_DOC noparallel logging;
alter index BRITEBILL.REF_INDEX_HIST_C_DAC_CODE noparallel logging;
spool off
exit
set echo on timing on feedback on trimspool on
set lin 200 pages 999
alter session set ddl_lock_timeout=60;
spool rbd_idx_C250359_2.log
alter index BRITEBILL.REF_INDEX_HIST_USAGE_DOC rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_USAGE_BAN rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_U_DAC_CODE rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_USAGE_DATE rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_U_BAN_CODE rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_USAGE_DOC noparallel logging;
alter index BRITEBILL.REF_INDEX_HIST_USAGE_BAN noparallel logging;
alter index BRITEBILL.REF_INDEX_HIST_U_DAC_CODE noparallel logging;
alter index BRITEBILL.REF_INDEX_HIST_USAGE_DATE noparallel logging;
alter index BRITEBILL.REF_INDEX_HIST_U_BAN_CODE noparallel logging;
spool off
exit
set echo on timing on feedback on trimspool on
set lin 200 pages 999
alter session set ddl_lock_timeout=60;
spool rbd_idx_C250359_3.log
alter index BRITEBILL.FK7E61014A2765BF58_IDX rebuild parallel 8 nologging;
alter index BRITEBILL.DOCUMENTMETADATA_PK rebuild parallel 8 nologging;
alter index BRITEBILL.FK7E61014A2765BF58_IDX noparallel logging;
alter index BRITEBILL.DOCUMENTMETADATA_PK noparallel logging;
alter index BRITEBILL.FK_FACT_DOCUMENT_IDX rebuild parallel 8 nologging;
alter index BRITEBILL.FK_FACT_DOCUMENT_IDX noparallel logging;
spool off
exit
DS_ACT_LOG_N_PK
CDRADM.ENS_CDR_ROW_COUNT
CDRADM.EVENT_PROCESS_LOG_DETAIL
CDRADM.EVENT_USAGE
CDRADM.EVENT_USAGE_HIST
CDRADM.USAGE
CDRADM.USER_IND_PARTITIONS
CDRADM.USER_INDEXES
CDRADM.USER_TAB_SUBPARTITIONS
ILCADM.ILC_USAGE6
ILCADM.LOCAL_PROCESS_LOG
ILCADM.USAGE_MONTHLY_DETAIL_LOG
ILCADM.USAGE_PROCESS_LOG
M2M_ADMIN.ALL_TAB_PARTITIONS
M2M_ADMIN.LOCAL_PROCESS_LOG
M2M_ADMIN.MOBILE_2_MOBILE
M2M_ADMIN.USAGE
M2M_ADMIN.USAGE_MONTHLY_DETAIL_LOG
M2M_ADMIN.USAGE_PROCESS_LOG
REVENUEADM.CDREVENT_USAGE
REVENUEADM.RETAIL_LOAD_CONTROL_REV_ASUR
REVENUEADM.RETAIL_LOAD_HISTORY_REV_ASUR
REVENUEADM.SPWSCDREVENT_USAGE
REVENUEADM.WHOLESALE_CYCLE_CONTROL
REVENUEADM.WHOLESALE_LOAD_CONTROL_REV_ASR
REVENUEADM.WHOLESALE_LOAD_HISTORY_REV_ASR
SPWSCDRADM.ACCUMULATED_USAGE
SPWSCDRADM.ENS_CDR_ROW_COUNT
SPWSCDRADM.EVENT_PROCESS_LOG_DETAIL
SPWSCDRADM.EVENT_USAGE
SPWSCDRADM.EVENT_USAGE_HIST
SPWSCDRADM.RESELLER_ROW_COUNT
SPWSCDRADM.USAGE
SPWSCDRADM.USER_IND_PARTITIONS
SPWSCDRADM.USER_TAB_PARTITIONS
SPWSCDRADM.USER_TAB_SUBPARTITIONS
TEOCOADM.CYCLE_CONTROL
TEOCOADM.EVENT_USAGE
TEOCOADM.TEOCO_LOAD_PROCESS_CONTROL
TEOCOADM.TEOCO_LOAD_PROCESS_HISTORY
TEOCOADM.USAGE
UNBLDUSGADM.UNB_WIMAX_PROCESS_CONTROL
UNBLDUSGADM.UNBILLED_2G_PROCESS_CONTROL
UNBLDUSGADM.UNBILLED_3G_PROCESS_CONTROL
UNBLDUSGADM.UNBILLED_ACCUMULATED_USAGE
UNBLDUSGADM.UNBILLED_EN_PI_DATA
UNBLDUSGADM.UNBILLED_PROCESS_CONTROL
UNBLDUSGADM.UNBILLED_PROCESS_CONTROL_LOCAL
UNBLDUSGADM.USER_TAB_PARTITIONS
-- 1
set echo on feedback on timing on tim on
alter session set db_file_multiblock_read_count=128;
alter session set workarea_size_policy='MANUAL';
alter session set sort_area_size=400000000;
spool /oracle/g01/admin/sysoper/log/T794055.log
SELECT /*+parallel(8)*/ 'UNBLDUSGADM.UNBILLED_EN_PI_DATA' as tbl,COUNT(*) FROM UNBLDUSGADM.UNBILLED_EN_PI_DATA WHERE CAST((cycle_run_year|cycle_run_month) AS INTEGER) >= 201912;
SELECT /*+ parallel(8)*/ 'SPWSCDRADM.USAGE' AS tbl, COUNT(*) FROM SPWSCDRADM.USAGE WHERE PROCESS_DATE >= trunc(sysdate)-7;
SELECT /*+ parallel(8)*/ 'CDRADM.USAGE' AS tbl, COUNT(*) FROM CDRADM.USAGE WHERE SYS_CREATION_DATE >= trunc(sysdate)-7;
spool off
exit
SELECT /*+ parallel(8)*/ 'OEMADM.ORDER_MASTER' AS tbl, COUNT(*) FROM OEMADM.ORDER_MASTER WHERE ORDER_DATE >= trunc(sysdate)-7;
CREDIT_DEBIT_LINK_WLHNDLR_STG
libname oralib1 oracle path="(DESCRIPTION=(ADDRESS = (PROTOCOL = TCP)(HOST = plsab320.corp.sprint.com)(PORT = 1527))
(CONNECT_DATA = (SERVICE_NAME=BSTP101.corp.sprint.com)))" user=myuser password=mypasswd;
SELECT_CLW_P01_EPM
GRANTEE                        OWNER                          TABLE_NAME                     GRANTOR                        PRIVILEGE                                GRA HIE
------------------------------ ------------------------------ ------------------------------ ------------------------------ ---------------------------------------- --- ---
SELECT_CLW_P01_EPM             CLW_P01_EPM                    DEBUG_INFO                     CLW_P01_EPM                    INSERT                                   NO  NO
  COUNT(*) SUM(BYTES)/1048576
---------- ------------------
        68         5575050.56
  COUNT(*) SUM(BYTES)/1048576
---------- ------------------
        14             963420
Melhor método para ressincronizar tabelas replicadas pelo golden gate que estejam out of sync , causando o mínimo impacto.
Tabelas alteradas dos dois lados da replicação. qual o melhor procedimento
select owner, segment_name, sum(bytes)/1048576, count(*)
from dba_segments where owner in ('REVENUEADM','REVENUEADM','TEOCOADM')
or segment_name in ('CDREVENT_USAGE','SPWSCDREVENT_USAGE','EVENT_USAGE')
group by owner, segment_name;
col column_name for a30
select cc.*, c.constraint_type, c.validated
from all_cons_columns cc join all_constraints c on (c.owner=cc.owner and c.constraint_name=cc.constraint_name)
where cc.table_name='ORDER_LINE_SOC' and cc.owner='OEMADM' and c.constraint_type in ('P','U')
order by cc.constraint_name, cc.position;
select order_key, fraud_detected_yn from oemadm.order_master om where om.warehouse_code = 'OMIM'
and created_dt > sysdate-5 and FRAUD_DETECTED_YN = 'Y' and order_status_cd = 'CLOSED' and rownum <=5;
Olhod3tand3ra..
Boradancar_2020
Eu_sou_invejos0
AsEmplaca2020..
As-emplaca-2020
Nova_conta_social_80
19 3327 3113
select owner, mview_name, last_refresh_type, last_refresh_date
from all_mviews     order by last_refresh_date desc  ;
drop user WL050909;
drop user YY457836;
select owner, count(*) from dba_objects
where owner in ('WL050909','YY457836')
group by owner;
New password is 'New202002181100!'.
select owner, segment_name, sum(bytes)/1048576 from dba_segments where segment_name='ORDER_LINE_SOC' group by owner, segment_name;
select 'grant '||privilege||' to '||grantee||';' from dba_sys_privs where grantee=upper('CLW_P01_EPM_PKG');
select 'grant '||granted_role||' to '||grantee||';' from dba_role_privs where grantee=upper('CLW_P01_EPM_PKG');
rua general osório 61,
3 da tarde.
grant TEP_USAGE_RO_ROLE to CV501136;
grant SELECT on SPRINT_USAGE.DEFLT_INTL_ROAM to CV501136;
grant REFERENCES on SPRINT_USAGE.DIM_CC_ACCOUNT_IDS to CV501136;
grant SELECT on SPRINT_USAGE.DIM_CC_ACCOUNT_IDS to CV501136;
grant SELECT on SPRINT_USAGE.COUNTRY_RATE to CV501136;
grant select on SPRINT_USAGE.SMPLY_EVRYTHG to CV501136;
grant select on SPRINT_USAGE.SPCWW to  CV501136;
grant select on SPRINT_USAGE.SWW to CV501136;
grant select on SPRINT_USAGE.N3SWW to CV501136;
grant select on SPRINT_USAGE.IDR to CV501136;
ggsora6qs
cp ./dirprm/tables_phad01c1.prm ./dirprm/tables_phad01c1.prm_old_T796111
cp ./dirprm/tables_phad01c1.prm_new vtables_phad01c1.prm
ggsci
stop phad01c1
start phad01c1
prod-ndwws
cp ./dirprm/tables_phadwsc5.prm ./dirprm/tables_phadwsc5.prm_old_T796111
cp ./dirprm/tables_phadwsc5.prm_new ./dirprm/tables_phadwsc5.prm
ggsci
stop phadwsc5
start phadwsc5
archived log file name=+ARCH/bwq/oraarch/1_2649047_793999050.dbf thread=1 sequence=2649047
archived log file name=+ARCH/bwq/oraarch/2_2324515_793999050.dbf thread=2 sequence=2324515
PLSAB709
Boradanc@r_2020
New202002240627!
create user me245044 identified by "NewPasswordf0rtemp_" default tablespace STAGE_USERS temporary tablespace TEMP_05 profile SPRINT_USER_PROFILE;
grant create session to me245044;
grant SELECT_NORSNAPADM_TPP_DATA to me245044;
grant SELECT_NORSNAPADM_TPP_HS_DATA to me245044;
Emailing CRITICAL-MON_INSTANCE_STATUS: PLSAA710/HFMP101/HFMP1011: Cannot connect. select 'good '||'connect' from dual*
Email MESSAGE-ID: 26427321
CRITICAL-MON_INSTANCE_STATUS
PLSAA710/HFMP101/HFMP1011
Cannot connect. select 'good '||'connect' from dual* Reference URL:
https://meet.ad.sprint.com/rayder.campos/78GJD36B
select count(1), sql_id from v$active_session_history ash where trunc(sample_time)=trunc(current_date) and client_id = 100171972 /*BRUES1*/ group by sql_id order by 1 desc;
select * from v$sql where sql_id in (
 select sql_id from v$active_session_history ash where trunc(sample_time)=trunc(current_date) and client_id = 100171972 /*BRUES1*/ group by sql_id
 );
select ooi.order_key, ooi.order_id, ooi.dealer_code, orri.created_dt, orri.message_type, ol.equipment_id, orri.error_code as OVM_ERROR, wi.bss_error_code as FAST_ERROR, fad.EXCEPTIONS
from ovmadm.ovm_order_info ooi, ovmadm.ovm_req_res_info orri, order_line_details ol, work_item wi, fe_api_data fad
where ooi.current_req_res_id = orri.req_res_id
and ooi.dealer_code = 'GR'
and ooi.created_dt > to_date('02232020:00:00:00','MMDDYYYY:HH24:MI:SS')
and ooi.order_key = ol.order_key
and ol.order_key = wi.order_key
and wi.order_key = fad.order_key
order by orri.created_dt;
|*  8 |         TABLE ACCESS FULL          | OVM_ORDER_INFO      | 24935 |  1290K|   107K  (1)| 00:21:28 |
|  13 |      TABLE ACCESS FULL             | FE_API_DATA         | 46324 |  9228K|   695   (1)| 00:00:09 |
select owner, table_name, avg_row_len from dba_tab_statistics where avg_row_len is not null and table_name in (
'ACCUMULATED_USAGE',
'CYCLE_CONTROL',
'ENS_CDR_ROW_COUNT',
'ENS_CDR_ROW_COUNT',
'EVENT_PROCESS_LOG_DETAIL',
'EVENT_PROCESS_LOG_DETAIL',
'EVENT_USAGE',
'EVENT_USAGE',
'ILC_USAGE6',
'LOCAL_PROCESS_LOG',
'LOCAL_PROCESS_LOG',
'MOBILE_2_MOBILE',
'RESELLER_ROW_COUNT',
'RETAIL_LOAD_CONTROL_REV_ASUR',
'RETAIL_LOAD_HISTORY_REV_ASUR',
'TEOCO_LOAD_PROCESS_CONTROL',
'TEOCO_LOAD_PROCESS_HISTORY',
'UNB_WIMAX_PROCESS_CONTROL',
'UNBILLED_2G_PROCESS_CONTROL',
'UNBILLED_3G_PROCESS_CONTROL',
'UNBILLED_EN_PI_DATA',
'UNBILLED_PROCESS_CONTROL_LOCAL',
'USAGE',
'USAGE',
'USAGE_MONTHLY_DETAIL_LOG',
'USAGE_PROCESS_LOG',
'USAGE_PROCESS_LOG',
'WHOLESALE_CYCLE_CONTROL',
'WHOLESALE_LOAD_CONTROL_REV_ASR',
'WHOLESALE_LOAD_HISTORY_REV_ASR'
)
order by 2
/
FOREAI_TRANS_ACTIVITY_HISTORY
GRANTEE                        GRANTED_ROLE                             TABNAME
------------------------------ ---------------------------------------- -------------------------------------------------------------
APHAN6                         SELECT_EPPADM_ROLE                       NO
APHAN6                         SELECT_NRTADM_DATA                       NO
APHAN6                         SELECT_STORMDM_DATA                      NO
APHAN6                         SELECT_STORMADM_DATA                     NO
APHAN6                         SELECT_NORSNAPADM_DATA                   NO
APHAN6                         SELECT_NRTADM_TPP_DATA                   NO
APHAN6                         SELECT_STORMDM_TPP_DATA                  NO
APHAN6                         SELECT_STORMADM_TPP_DATA                 NO
APHAN6                         SELECT_NRTADM_SPRINT_DATA                NO
APHAN6                         SELECT_NRTADM_TPP_HS_DATA                NO
APHAN6                         SELECT_NORSNAPADM_TPP_DATA               NO
APHAN6                         SELECT_STORMDM_SPRINT_DATA               NO
APHAN6                         SELECT_STORMADM_SPRINT_DATA              NO
APHAN6                         SELECT_NRTADM_SPRINT_HS_DATA             NO
APHAN6                         SELECT_NORSNAPADM_SPRINT_DATA            NO
APHAN6                         SELECT_NORSNAPADM_TPP_HS_DATA            NO
APHAN6                         SELECT_NORSNAPADM_SPRINT_HS_DT           NO
APHAN6                         CREATE SESSION                           NO
group by owner, segment_name, partition_name;
BZEN7V         8BC05ZVV       PORTO SEGURO S/A OPP 0I-Y...                      GB0020         General Billable                        Y         0.0       0.0       3.0       3.0       2.0       3.0       1.0       12.0
OPSWP101
if [ -t 0 ]
then
  stty erase ^?
fi
P_uladinhonapern4
ACorigins3hphoda_
Vamos_com_ozonio9
Em_2021_sera_AWS
Rest
IBM
Cu_de_1ntranet1
PQP_que_merda21
Putz,nuncamais0
Finalment3,porra

C0mctzagoravai.
Muitomelho-em22
Temquedarcert0.
Tioamademais.999


VOOS20

Yifan1sbac:|
Export/Transport IRP20.6 - Prod to Jump to  ITE1- WDM (9NN/4BN) - PLSAB612 to PVMKE292 to TREAB592 - 2 GB Uncompressed via SEN
PLSAB612 L5SVC3
TREAB592 RESVC3
PVMKE292 (Jump box) (Data to be transported to Jump box under Minor change and then to test server under non prod change)
4BN OEMARCH
Need to VERIFY the entire structure (tables, synonyms, sequences, stored procedures, foreign/primary key constraints, indexes etc.) of this schema in ITE1 against Production
9NN (TOES) + 4BN (Fast) OEMADM We only want data from specific tables and structures, indexes, grants and synonyms for all tables
Need to VERIFY the entire structure (tables, synonyms, sequences, stored procedures, foreign/primary key constraints, indexes etc.) of this schema in RTB1 against Production. If there are any differences then ITE1 needs to be fixed to reflect the production (unless the changes themselves belong to the current release).
*********** 4BN Checklist for OEMARCH & OEMADM *********
Look up tables should be in sync
Constraints/ Indexes should be created and compared for correctness
DBMS jobs has to be started after the refresh
Analyze Tables once the refresh is over
******************************************
*********** 4BN REF Tables in OEMADM - Total of 112 tables *********
*********** Structures and Data *********
ACCESSORY_HOUSE_ACCOUNT
ACK_STATUS_DESC
ACTION_INFO
ACTION_LOOK_UP
ACTIVITY_STATUSES
ASI_ERROR_DESC
ASW_EQUIPMENT_PRIORITY
AUDIT_HISTORY_LOOKUP
AUDIT_STATUS_DESC
AUTO_ACTIVITY_WRKFLW_TASK
BOLTON_DETAILS
BUSINESS_ENTITY_INFO
BUSINESS_RULE
CATEGORY_ITEM
COLLATERAL_DETAILS
COMMENTS_LOOKUP
CONFIG_DATA
CORP_GOV_LOOKUP
CREDIT_POLICY_DETAILS
CREDIT_SCORE_DETAILS
DECISION_CODE_LOOKUP
DYNAMIC_CONTENT
EMAIL_TAX_FEE_DETAILS
EMAIL_TEMPLATE_TAG_DETAILS
EMAIL_TEMPLATES
ENSEMBLE_API_ROUTING
EQUIPMENT_ALLOCATION
ERROR_CODE_DETAILS
ERROR_DESC
EVENT_TYPE_LOOKUP
FALLOUT_COUNTS
FAST_AUTO_ACTIVITY
FAST_AUTO_ACTIVITY_INFO
FAST_AUTO_ACTIVITY_INFO_HISTRY
FAST_HB_RULE_DATA
FAST_HB_RULES
FAST_ROLE_DESC
FAST_SLA_DISTRO
FAST_SLA_RULE_CRITERIA
FAST_SLA_RULE_LOG
FAST_SLA_RULES
FAST_UAFLDTYPE_CHNL_LOOKUP
FAST_USER_DETAILS
FAST_USER_ROLE
FE_API_STATUS_DATA
FE_BT_STATUS_DATA
FE_ERROR_DESC
FE_ERROR_DESC_LOOKUP
HOUSE_ACCOUNT_INFO
INVENTORY_CATEGORY
INVENTORY_ITEM
LOOK_UP_DEF
ORDER_PRIORITY
ORDER_PRIORITY_HISTORY
ORDER_STATUS_MSG
OS_ACTIVITY_LOOK_UP
OS_AT_AST_RULES
OS_AT_AST_RULES_HISTORY
OS_ATTEMPT_LOOKUP
OS_CLOSED_REASONS_LOOKUP
OS_CLOSEDREASON_LOOKUPHISTRY
OS_EXIT_POINT_LOOKUP
OS_EXT_SCHEDULE_INFO
OS_IMMD_ATTN_RULES
OS_IMMD_ATTN_RULES_HISTRY
OS_ORDER_RESULT_LOOKUP
OS_ORDER_RESULT_LOOKUP_HISTORY
OS_ORDER_TYPE_RULES
OS_PRIORITY_DETAIL
OS_PRIORITY_DETAIL_HISTORY
OS_PRIORITY_DETAIL_LOOKUP
OS_QUEUE_ID_ROLE_MAPPING
OS_QUEUE_LOOKUP
OS_QUEUE_LOOKUP_HISTORY
OS_QUEUE_PRIORITY_LOOKUP
OS_QUEUE_ROLES_LOOKUP
OS_SCHEDULING_INFO
OS_SCHEDULING_INFO_HISTRY
OS_SCHEDULING_RULES
OS_SCHEDULING_RULES_HISTORY
OS_SITE_LOOKUP
OS_SLA_LOOKUP
OS_SLA_LOOKUP_HISTRY
OS_STATE_TIMEZONE_LOOKUP
OS_TIMEZONE_LOOKUP
OS_USER_QUEUE_RULE_PRIORITY
OS_WORK_HOURS_LOOKUP
OS_WORK_HOURS_LOOKUP_HISTRY
OS_WSGROUP_LOOKUP_HISTORY
OS_WSTATUS_DESC_HISTRY
OS_WSTATUS_GROUP_DESC
OS_WSTATUS_GROUP_LOOKUP
OS_WSTATUS_SRULES
OS_WSTATUS_SRULES_HISTORY
OTM_ORDER_RETURN
OTM_RETURN_DEF
PAYMENT_RESP_CODE_DESC
PREPAID_ORDER_SUBTYPE_DESC
PREPAID_ORDER_TYPE_SUBTYPE
PSI_LICENSE
QUEUE_ARCHIVE
QUEUE_CUSTOMIZATION
QUEUE_CUSTOMIZATION
QUEUE_DESC
QUEUE_EMAILS
REASON_DESC
SUBMARKET_BUSENTITY_REF
USER_ROLE_DESC
USER_ROLE_PRIVILEGES
USER_ROLE_QUEUE_RESTRICTIONS
WORKING_STATUS_DESC
WRITE_TRANS_FN
*********** End of 4BN REF Tables in OEMADM *********
*********** 4BN/9NN Shared REF Tables in OEMADM - Total of 30 tables *********
*********** Structures and Data *********
tables=OEMADM.ACCOUNT_TYPE_DESC,OEMADM.AIRLINE_DESC,OEMADM.ATTRIBUTE_DESC,OEMADM.ATTRIBUTE_TYPE_DESC,OEMADM.BILLING_TYPE_DESC,OEMADM.CC_TYPE_DESC,
OEMADM.CHANNEL_DETAILS,OEMADM.CHARGE_CODE_DESC,OEMADM.COUNTRY,OEMADM.CREDIT_POLICY,OEMADM.CUST_TYPE_DESC,OEMADM.DONOTSELL_BAN_LIST,OEMADM.FEATURE,
OEMADM.FORM_OF_PAYMENT_DESC,OEMADM.FRAUD_STATUS_DESC,OEMADM.ORDER_CHANNEL_DESC,OEMADM.ORDER_LINE_WORKING_STATUS_DESC,OEMADM.ORDER_STATUS_DESC,
OEMADM.ORDER_TYPE_DESC,OEMADM.PAYMENT_TYPE_DESC,OEMADM.PHONE_AND_ACCESSORY,OEMADM.PHONE_TO_ACCESSORY,OEMADM.PHONE_TO_FEATURE,OEMADM.PROGRAM_DESC,
OEMADM.SERVICE_DESC,OEMADM.SHIPPING_CHARGES,OEMADM.SHIPPING_METHOD_DESC,OEMADM.SHIPPING_TYPE_DESC,OEMADM.STATE_DESC,OEMADM.VENDOR_DESC
*********** End of 4BN/9NN Shared REF Tables in OEMADM *********
************ 9NN REF Tables in OEMADM - Total of 54 tables *********
*********** Structures and Data *********
ACCT_TYPES
AFFILIATE_DESCRIPTION
AISLE_DNIS_MAPPING
AUTHORIZATION_TYPE_DESC
CUSTOMER_FRAUD_INFO
CUSTTYPE_NWK_LOOKUP
DNIS
EQUIPMENT_REBATE
FRAUD_CONDITION_LOOKUP
FRAUD_LIMITS
FRAUD_LIMITS
FRAUD_LIMITS_ATTRIBUTE
FRAUD_LIMITS_LOOKUP
FRAUD_RULE_COMMON_ATTR
FRAUD_RULE_SCENARIO_ATTR
FRAUD_RULE_SCENARIO_HANDLER
FRAUD_RULES
INDUSTRY_DESC
INVALID_DATA
MARKET_CHURN_MAP
MEDIA_SOURCE
NOTES_LOOKUP
P2K_ACCT_MTRX
P2K_AFFILIATE_LOOKUP
P2K_CORP_GOV_LOOKUP
PREPAID_PRICING
PREPAID_RETURN_REASONS
PREPAID_SHIPPING
PREPAID_WAIVE_SHIPPING_REASON
PRICE_CODES
PRICING
PRIMARY_DISPOSITION
SAC
SECONDARY_DISPOSITION
SENSITIVE_DATA_TYPE_DESC
SHIPPING_METHOD_LOOKUP
SKU_OST_MAPPING
TM_ATTR_DEFAULT and TM_ATTRIB
* these 2 tables use tm_attrib_default_seq sequence
* sequence number needs to be set to match sequence number in production
TM_BUNDLE_TO_EQUIPMENT
TM_CAMPAIGN
TM_DNIS_TO_PRIORITY_CODE
TM_INSTRUCTION
TM_INSTRUCTION_TYPE
TM_PAGE_TAB
TM_PHONE_TO_ACCESSORY
TM_PREFERRED_SOCS
TM_RECOMENDED_EQUIPMENT
TM_VENDOR_DESC
TM_VENDOR_PROGRAM_DETAIL
TMP_P2K_AFFILIATE_LOOKUP
TMP_P2K_CORP_GOV_LOOKUP
VENDOR_AGENCY_CDE
ZIPCODE_DEALERCODE
ZIPCODE_TO_MARKET
************ End of 9NN REF Tables in OEMADM **************
sed -n 's/T784408/T781761/g' T781761_OEMADM_4BN_data.par
sed -n 's/C248854/C248095/g' T781761_OEMADM_4BN_9NN_shared_data.par
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCZa+V3JKbGfJ03lD0O/2ySNLNveHFhh5NLL2iZOnPMWbyUmL5xfx8rtztOn+/H3VZXvQGz6MsRYtSotr5s8ltHirAWvEv9m4xGNS934wY/Xk4ENZ8yI1bNSvm+L6oout3nts0CpZd0d2mcbXMDc06Jw6aznqoe4PlVCzN6TTDy6Th8GCkyixZ3g4VolRBt6HY5JNQqga6xLm6tDkheSubqouAOS0b77eDGLdex7i3jnImoALuh30Zie/KTpjdS2ERVo3J/gGyjxpgK0VB6xs7k1tY4uzMWDF8k/zM9no3DgRTgcShP7IKv5LKOiWxgSg/rYr6eAzU9C4K6yIRhIYfP oracle@plsab612
\
CLCS_CONFIG_PROPS
56.09   eh662209
40.25   yo902086
15908190921160
15908190942252
OC0904187
   select 'alter system disconnect session ''' || sid || ',' || serial# || ''' immediate;'
    from gv$session
    where blocking_session is not null;


    inst_id, blocking_session, blocking_session_status, sql_id, status, last_call_et, event
from gv$session
where blocking_session is not null order by 5;
    



SELECT PRINCIPAL, HOST, lower_port, upper_port, acl, 'connect' AS PRIVILEGE, 
    DECODE(DBMS_NETWORK_ACL_ADMIN.CHECK_PRIVILEGE_ACLID(aclid, PRINCIPAL, 'connect'), 1,'GRANTED', 0,'DENIED', NULL) PRIVILEGE_STATUS
FROM DBA_NETWORK_ACLS
    JOIN DBA_NETWORK_ACL_PRIVILEGES USING (ACL, ACLID)  
UNION ALL
SELECT PRINCIPAL, HOST, NULL lower_port, NULL upper_port, acl, 'resolve' AS PRIVILEGE, 
    DECODE(DBMS_NETWORK_ACL_ADMIN.CHECK_PRIVILEGE_ACLID(aclid, PRINCIPAL, 'resolve'), 1,'GRANTED', 0,'DENIED', NULL) PRIVILEGE_STATUS
FROM DBA_NETWORK_ACLS
    JOIN DBA_NETWORK_ACL_PRIVILEGES USING (ACL, ACLID);
CREATE OR REPLACE FORCE VIEW dba_maintenance.all_tab_cols_rev (  owner,
                                               table_name,
                                               column_name,
                                               data_type,
                                               data_type_mod,
                                               data_type_owner,
                                               data_length,
                                               data_precision,
                                               data_scale,
                                               nullable,
                                               column_id,
                                               default_length,
                                               data_default,
                                               num_distinct,
                                               low_value,
                                               high_value,
                                               density,
                                               num_nulls,
                                               num_buckets,
                                               last_analyzed,
                                               sample_size,
                                               character_set_name,
                                               char_col_decl_length,
                                               global_stats,
                                               user_stats,
                                               avg_col_len,
                                               char_length,
                                               char_used,
                                               v80_fmt_image,
                                               data_upgraded,
                                               hidden_column,
                                               virtual_column,
                                               segment_column_id,
                                               internal_column_id,
                                               histogram,
                                               qualified_col_name,
                                               unused_column)
AS
   SELECT u.NAME,
          o.NAME,
          c.NAME,
          DECODE (c.type#,
                  1, DECODE (c.CHARSETFORM, 2, 'NVARCHAR2', 'VARCHAR2'),
                  2, DECODE (c.scale, NULL, DECODE (c.precision#, NULL, 'NUMBER', 'FLOAT'), 'NUMBER'),
                  8, 'LONG',
                  9, DECODE (c.CHARSETFORM, 2, 'NCHAR VARYING', 'VARCHAR'),
                  12, 'DATE',
                  23, 'RAW',
                  24, 'LONG RAW',
                  58, NVL2 (ac.synobj#, (SELECT o.NAME
                                           FROM obj$ o
                                          WHERE o.obj# = ac.synobj#), ot.NAME),
                  69, 'ROWID',
                  96, DECODE (c.CHARSETFORM, 2, 'NCHAR', 'CHAR'),
                  100, 'BINARY_FLOAT',
                  101, 'BINARY_DOUBLE',
                  105, 'MLSLABEL',
                  106, 'MLSLABEL',
                  111, NVL2 (ac.synobj#, (SELECT o.NAME
                                            FROM obj$ o
                                           WHERE o.obj# = ac.synobj#), ot.NAME),
                  112, DECODE (c.CHARSETFORM, 2, 'NCLOB', 'CLOB'),
                  113, 'BLOB',
                  114, 'BFILE',
                  115, 'CFILE',
                  121, NVL2 (ac.synobj#, (SELECT o.NAME
                                            FROM obj$ o
                                           WHERE o.obj# = ac.synobj#), ot.NAME),
                  122, NVL2 (ac.synobj#, (SELECT o.NAME
                                            FROM obj$ o
                                           WHERE o.obj# = ac.synobj#), ot.NAME),
                  123, NVL2 (ac.synobj#, (SELECT o.NAME
                                            FROM obj$ o
                                           WHERE o.obj# = ac.synobj#), ot.NAME),
                  178, 'TIME(' || c.scale || ')',
                  179, 'TIME(' || c.scale || ')' || ' WITH TIME ZONE',
                  180, 'TIMESTAMP(' || c.scale || ')',
                  181, 'TIMESTAMP(' || c.scale || ')' || ' WITH TIME ZONE',
                  231, 'TIMESTAMP(' || c.scale || ')' || ' WITH LOCAL TIME ZONE',
                  182, 'INTERVAL YEAR(' || c.precision# || ') TO MONTH',
                  183, 'INTERVAL DAY(' || c.precision# || ') TO SECOND(' || c.scale || ')',
                  208, 'UROWID',
                  'UNDEFINED'),
          DECODE (c.type#, 111, 'REF'),
          NVL2 (ac.synobj#, (SELECT u.NAME
                               FROM user$ u, obj$ o
                              WHERE o.owner# = u.user#
                                AND o.obj# = ac.synobj#), ut.NAME),
          c.LENGTH,
          c.precision#,
          c.scale,
          DECODE (SIGN (c.null$), -1, 'D', 0, 'Y', 'N'),
          DECODE (c.col#, 0, TO_NUMBER (NULL), c.col#),
          c.deflength,
          c.default$,
          h.distcnt,
          h.lowval,
          h.hival,
          h.density,
          h.null_cnt,
          CASE
             WHEN NVL (h.distcnt, 0) = 0
                THEN h.distcnt
             WHEN h.row_cnt = 0
                THEN 1
             WHEN (   h.bucket_cnt > 255
                   OR (    h.bucket_cnt > h.distcnt
                       AND h.row_cnt = h.distcnt
                       AND h.density * h.bucket_cnt <= 1) )
                THEN h.row_cnt
             ELSE h.bucket_cnt
          END,
          h.timestamp#,
          h.sample_size,
          DECODE (c.CHARSETFORM,
                  1, 'CHAR_CS',
                  2, 'NCHAR_CS',
                  3, NLS_CHARSET_NAME (c.CHARSETID),
                  4, 'ARG:' || c.CHARSETID),
          DECODE (c.CHARSETID, 0, TO_NUMBER (NULL), NLS_CHARSET_DECL_LEN (c.LENGTH, c.CHARSETID) ),
          DECODE (BITAND (h.spare2, 2), 2, 'YES', 'NO'),
          DECODE (BITAND (h.spare2, 1), 1, 'YES', 'NO'),
          h.avgcln,
          c.spare3,
          DECODE (c.type#,
                  1, DECODE (BITAND (c.property, 8388608), 0, 'B', 'C'),
                  96, DECODE (BITAND (c.property, 8388608), 0, 'B', 'C'),
                  NULL),
          DECODE (BITAND (ac.flags, 128), 128, 'YES', 'NO'),
          DECODE (o.status,
                  1, DECODE (BITAND (ac.flags, 256), 256, 'NO', 'YES'),
                  DECODE (BITAND (ac.flags, 2),
                          2, 'NO',
                          DECODE (BITAND (ac.flags, 4), 4, 'NO', DECODE (BITAND (ac.flags, 8), 8, 'NO', 'N/A') ) ) ),
          DECODE (c.property, 0, 'NO', DECODE (BITAND (c.property, 32), 32, 'YES', 'NO') ),
          DECODE (c.property, 0, 'NO', DECODE (BITAND (c.property, 8), 8, 'YES', 'NO') ),
          DECODE (c.segcol#, 0, TO_NUMBER (NULL), c.segcol#),
          c.intcol#,
          CASE
             WHEN NVL (h.row_cnt, 0) = 0
                THEN 'NONE'
             WHEN (   h.bucket_cnt > 255
                   OR (    h.bucket_cnt > h.distcnt
                       AND h.row_cnt = h.distcnt
                       AND h.density * h.bucket_cnt <= 1) )
                THEN 'FREQUENCY'
             ELSE 'HEIGHT BALANCED'
          END,
          DECODE (BITAND (c.property, 1024),
                  1024, (SELECT DECODE (BITAND (cl.property, 1), 1, rc.NAME, cl.NAME)
                           FROM SYS.col$ cl, attrcol$ rc
                          WHERE cl.intcol# = c.intcol# - 1
                            AND cl.obj# = c.obj#
                            AND c.obj# = rc.obj#(+)
                            AND cl.intcol# = rc.intcol#(+)),
                  DECODE (BITAND (c.property, 1), 0, c.NAME, (SELECT tc.NAME
                                                                FROM SYS.attrcol$ tc
                                                               WHERE c.obj# = tc.obj#
                                                                 AND c.intcol# = tc.intcol#) ) ),
          DECODE (c.property, 0, 'NO', DECODE (BITAND (c.property, 32768), 32768, 'YES', 'NO') )
     FROM SYS.col$ c, SYS.obj$ o, SYS.hist_head$ h, SYS.user$ u, SYS.coltype$ ac, SYS.obj$ ot, SYS.user$ ut
    WHERE o.obj# = c.obj#
      AND o.owner# = u.user#
      AND c.obj# = h.obj#(+)
      AND c.intcol# = h.intcol#(+)
      AND c.obj# = ac.obj#(+)
      AND c.intcol# = ac.intcol#(+)
      AND ac.toid = ot.oid$(+)
      AND ot.type#(+) = 13
      AND ot.owner# = ut.user#(+)
      AND (   o.type# IN (3, 4)   /* cluster, view */
           OR (    o.type# = 2   /* tables, excluding iot - overflow and nested tables */
               AND NOT EXISTS (
                         SELECT NULL
                           FROM SYS.tab$ t
                          WHERE t.obj# = o.obj#
                            AND (   BITAND (t.property, 512) = 512
                                 OR BITAND (t.property, 8192) = 8192) ) ) )
      AND (   o.owner# = USERENV ('SCHEMAID')
           OR o.obj# IN (SELECT obj#
                           FROM SYS.objauth$
                          WHERE grantee# IN (SELECT kzsrorol
                                               FROM x$kzsro) )
           OR   /* user has system privileges */
              EXISTS (
                 SELECT NULL
                   FROM v$enabledprivs
                  WHERE priv_number IN
                           (-45 /* LOCK ANY TABLE */,
                            -47 /* SELECT ANY TABLE */,
                            -48 /* INSERT ANY TABLE */,
                            -49 /* UPDATE ANY TABLE */,
                            -50 /* DELETE ANY TABLE */) ) );
                  alter user WEFAST_OVMBG account lock;
                  alter user WEFAST_FASTFG account lock;
                  alter user EAIAPP account lock;
select sql_text, sql_id from gv$sql where
sql_id in
(
'gkfdwsnxksuqc',
'7xh5cjnuf157m',
'58rnz15x0y4vf',
'gc4xdwptku601',
'0ahg2zschr1m8',
'4qm8a3w6a1rfd',
'f60y19hfrs5an'
)
/
select 'alter system disconnect session ''' || sid || ',' || serial# || ',@' || inst_id || ''' immediate;'
from
gv$session
where
username in ('WEFAST_FASTBG', 'WEFAST_FASTFG', 'WEFAST_OVMBG', 'APP_6DS','EAIAPP')
;
BEGIN
  FOR r IN (select sid,serial# from gv$session where username in ('WEFAST_FASTBG', 'WEFAST_FASTFG', 'WEFAST_OVMBG', 'APP_6DS'))
  LOOP
      EXECUTE IMMEDIATE 'alter system kill session ''' || r.sid  || ',' || r.serial# || ',@' || r.INST_ID || ''' immediate';
  END LOOP;
END;
/

SQL> alter user APP_6DS account unlock;
User altered.
SQL> alter user WEFAST_OVMBG account unlock;
User altered.
SQL> alter user WEFAST_FASTFG account unlock;
User altered.
SQL> alter user WEFAST_FASTBG account unlock;
alter user EAIAPP account unlock;
Table name : clcs_reporting_flag
Schema : CLCSADM
New column to be added : PORT_ACCT_NAME_REQD_CD
Comment for this column : to specify port name value is required in Report or not
                                DML :
          ADD (PORT_ACCT_NAME_REQD_CD NUMBER(1,0) DEFAULT 0) ;
                                NOTE : We want to default this column to ‘0’ similar to other existing flag values in this table and can have NULL values.
ALTER TABLE clcsadm.clcs_reporting_flag
ADD (PORT_ACCT_NAME_REQD_CD NUMBER(1,0) DEFAULT 0);
ALTER TABLE clcsadm.clcs_reporting_flag
ADD (PORT_ACCT_NAME_REQD_CD NUMBER(1,0) DEFAULT 0);
PORT_ACCT_NAME_REQD_CD
set lin 200 pages 999
alter session set ddl_lock_timeout=60;
set timing on feedback on echo on
spool T798752.log
ALTER TABLE clcsadm.CLCS_REPORTING_FLAG ADD (PORT_ACCT_NAME_REQD_CD NUMBER(1,0) DEFAULT 0);
spool off;
[root@u354:/root]# /orainfra/app/product/18.0.0/grid/bin/crsctl start has
[root@u355:/root]# /orainfra/app/product/18.0.0/grid/bin/crsctl stop has
[root@u360:/root]# /orainfra/app/product/11.2.0/grid/bin/crsctl start has
[root@u551:/]# /orainfra/app/product/11.2.0/grid/bin/crsctl stop has
u870 /orainfra/app/product/12.2.0/grid/bin/crsctl stop has
export ORACLE_HOME=/orainfra/app/product/18.0.0/grid
cd $ORACLE_HOME
umask 022
- Make sure you don't have any instances running which share the same home getting relinked. (ps -ef | grep oracle)
relinktime=`date -u '+%Y-%m-%d-%H-%M-%S'`
touch relink_$relinktime.log
relink all 1>>relink_$relinktime.log 2>>relink_$relinktime.log
    PS: should return no hits. waiting for 5 minutes or more
cat relink_$relinktime.log | grep -i fatal
lsdev -Cc iocp
mkdev -l iocp0
chdev -l iocp0 -P -a autoconfig='available'
sudo su - root -c "/orainfra/app/product/18.0.0/grid/crs/install/roothas.pl -patch"
Alexander Bufalo  23:48
Boa noite
23:48
tivemos um problema com u354 e 355 pois elas tem oracle 18
Boa noite, após a aplicação de PATCH no AIX esta noite, tivemos problemas para subir o oracle 18c.
Existe um componente do AIX que fica desabilitado por padrão precisei ativá-lo e recompilar os binários do grid para conseguir subir
Segue a nota da oracle:
AIX 12.1.0.2 Installation Fails with "rtld: 0712-001 Symbol CreateIoCompletionPort was referenced " (Doc ID 1949184.1)
o erro que dá é este:
[root@u355:/root]# /orainfra/app/product/18.0.0/grid/bin/crsctl stat res -t
Could not load program crsctl.bin:
rtld: 0712-001 Symbol CreateIoCompletionPort was referenced
      from module /orainfra/app/product/18.0.0/grid/lib/libhasgen18.so(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol GetMultipleCompletionStatus was referenced
      from module /orainfra/app/product/18.0.0/grid/lib/libhasgen18.so(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol CreateIoCompletionPort was referenced
      from module /orainfra/app/product/18.0.0/grid/lib/libttsh18.so(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol GetMultipleCompletionStatus was referenced
      from module /orainfra/app/product/18.0.0/grid/lib/libttsh18.so(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol CreateIoCompletionPort was referenced
      from module /orainfra/app/product/18.0.0/grid/lib/libons.so(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol GetQueuedCompletionStatus was referenced
      from module /orainfra/app/product/18.0.0/grid/lib/libons.so(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol ReadFile was referenced
      from module /orainfra/app/product/18.0.0/grid/lib/libons.so(), but a runtime definition
            of the symbol was not found.
rtld: 0712-001 Symbol WriteFile was referenced
      from module /orainfra/app/product/18.0.0/grid/lib/libons.so(), but a runtime definition
            of the symbol was not found.
rtld: 0712-002 fatal error: exiting.
Esse valor de DEFINED é o problema. ele tem q ser mudado para available
[root@u355:/root]# lsdev -Cc iocp
iocp0 Defined  I/O Completion Ports
Os passos a seguir devem ser acrescentados tanto ao procedimento de criação das bases com 18c:
ROOT (antes de instalar o oracle clusterware)
1- Checar se está em DEFINED com o comando: lsdev -Cc iocp
2- se estiver, rodar os dois comandos a seguir para ativá-lo:
[root@u355:/root]# mkdev -l iocp0
iocp0 Available
[root@u355:/root]# chdev -l iocp0 -P -a autoconfig='available'
iocp0 changed
3- Caso o software oracle tenha sido instalado ANTES de fazer os passos 1 e 2, fazer o relink dos binários do grid:
export ORACLE_HOME=/orainfra/app/product/18.0.0/grid
cd $ORACLE_HOME
umask 022
- Make sure you don't have any instances running which share the same home getting relinked. (ps -ef | grep oracle)
relinktime=`date -u '+%Y-%m-%d-%H-%M-%S'`
touch relink_$relinktime.log
relink all 1>>relink_$relinktime.log 2>>relink_$relinktime.log
    PS: should return no hits. waiting for 5 minutes or more
cat relink_$relinktime.log | grep -i fatal
* O passo 3 tem que ser feito com o usuário ORACLE
* O usuário oracle precisa ser owner da pasta grid
4- Rodar o script /orainfra/app/product/18.0.0/grid/root.sh como ROOT.
5- Subir o crs normalmente: /orainfra/app/product/18.0.0/grid/bin/crsctl start has (crs se for rac)
select instance_name from v$instance;
select count(*) from oemadm.PHONE_AND_ACCESSORY where EQUIPMENT_ID='UNI693CLAPB';
select count(*) from oemadm.ASW_EQUIPMENT_PRIORITY where EQUIPMENT_ID='UNI693CLAPB';
create table oemadm.failed_record_fk as select * from oemadm.PHONE_AND_ACCESSORY where EQUIPMENT_ID='UNI693CLAPB';
SQL> insert into oemadm.phone_and_accessory select * from oemadm.failed_record_fk ;
commit;
poc0311.corp.sprint.com
SVDP101_TST =
  (DESCRIPTION =
     (ADDRESS_LIST =
        (ADDRESS = (PROTOCOL = TCP)(HOST = 144.229.220.21) (PORT = 1525))
     )
     (CONNECT_DATA =
        (SERVICE_NAME = SVDAPPS)
      )
  )
10.229.71.80
T803557
@@MID20_3_1_WDM_OEG_01_PJ023892_8W3_OEG_Change_01_03042020_ddl_OEMADM.sql
@@MID20_3_1_WDM_OEG_02_PJ024590_8W3_OEG_Change_02_03112020_ddl_OEMADM.sql
--===================================================
PROMPT Connecting as OEMARCH User
-- ==================================================
--
ALTER SESSION SET CURRENT_SCHEMA=OEMARCH;
@@MID20_3_1_WDM_OEG_01_PJ023892_8W3_OEG_Change_01_03042020_ddl_OEMARCH.sql
@@MID20_3_1_WDM_OEG_02_PJ024590_8W3_OEG_Change_02_03112020_ddl_OEMARCH.sql
--===================================================
PROMPT Connecting as OEMARCH_STG User
-- ==================================================
--
ALTER SESSION SET CURRENT_SCHEMA=OEMARCH_STG;
@@MID20_3_1_WDM_OEG_01_PJ023892_8W3_OEG_Change_01_03042020_ddl_OEMARCH_STG.sql
ECP DR
/orainfra/app/product/11.2.0/grid/bin/crsctl stop has
sudo su - root -c "/orainfra/app/product/11.2.0/grid/crs/install/roothas.pl -unlock"
sudo su - root -c "/orainfra/app/product/11.2.0/grid/crs/install/roothas.pl -patch"
sudo su - root -c "/orainfra/app/product/11.2.0/grid/bin/crsctl stat res -t"
sudo su - root -c "/orainfra/app/product/11.2.0/grid/crs/install/roothas.pl -unlock"
sudo su - root -c "/orainfra/app/product/11.2.0/grid/bin/crsctl disable has"
sudo su - root -c "/orainfra/app/product/11.2.0/grid/crs/install/roothas.pl -patch"
sudo su - root -c "/orainfra/app/product/11.2.0/grid/bin/crsctl enable has"
sudo su - root -c "/orainfra/app/product/11.2.0/grid/bin/crsctl stat  res -t"
sudo su - root -c "/orainfra/app/product/12.2.0/grid/crs/install/roothas.pl -patch"
sudo su - root -c "/orainfra/app/product/11.2.0/grid/bin/crsctl stat res -t"
sudo su - root -c "/orainfra/app/product/11.2.0/grid/crs/install/roothas.pl -patch"
sudo su - root -c "/orainfra/app/product/11.2.0/grid/bin/crsctl disable has"
sudo su - root -c "/orainfra/app/product/11.2.0.4/grid/crs/install/roothas.pl -patch"
sudo su - root -c "/orainfra/app/product/11.2.0.4/grid/bin/crsctl enable has"
sudo su - root -c "/orainfra/app/product/11.2.0.4/grid/bin/crsctl stat res -t"
BZEN7V         8BC05ZVV       PORTO SEGURO S/A OPP 0I-Y...                      GB0020         General Billable                        S         12.0      12.0      0.0       0.0       0.0       0.0       0.0       24.0
 sudo su - root -c "/orainfra/app/product/11.2.0/grid/bin/crsctl stat res -t"
 sudo su - root -c "/orainfra/app/product/11.2.0/grid/crs/install/roothas.pl -unlock"
 Diretório base Oracle Agent OEM Porto: /oraagent/
Home: /oraagent/agent13c/agent_13.2.0.0.0/bin
19 3876 4545
Dagmar
T794347 - Prework.
set lin 200 pages 999
set echo on feedback on timing on tim on
spool /oracle/g01/admin/sysoper/log/T794347.log
#create pfile for parms backup
create pfile='/home/oracle/initOEGP101.ora_bkp' from spfile;
# changing streams_pool_size
Alter system set streams_pool_size = 2560M scope=spfile;
# changing  GG repl parm enabled
Alter system set enable_goldengate_replication = TRUE scope=spfile;
spool off
exit
set lin 200 pages 999
set echo on feedback on timing on tim on
spool /oracle/g01/admin/sysoper/log/T794349.log
ALTER DATABASE ADD SUPPLEMENTAL LOG DATA;
spool off
exit
14. Use the alias fed-wdm to go to /goldengate/ggsoracle/pho/ora123 and then open ggsci to stop the replicats.
GGSCI (plsab611) 1> info all
Program     Status      Group       Lag at Chkpt  Time Since Chkpt
MANAGER     RUNNING
REPLICAT    RUNNING     R8W31       00:00:00      00:00:03
REPLICAT    RUNNING     RO4H1       00:00:00      00:00:10
REPLICAT    RUNNING     RPHO1       00:00:00      00:00:03
GGSCI (plsab612) 1> stop R*
GGSCI (plsab612) 1> stop MGR
15. After this is done, please authorize onshore DBA to stop CRS and perform OSPATCH and CIRTPATCH alongside SAs.
16. When it is all done, Onshore DBA will bring database back online.
17. Connect to fedmenu and run the script using option 60. Execute – DDL .
Execute DDL......
To continue press (y/n).....: y
Enter ddl name to be executed : T794349.sql
18. Check if everything is back up in the node, then switch to gg account and start the replicats.
GGSCI (plsab612) 1> start MGR
GGSCI (plsab612) 1> start R*
New password is 'New202004060820!'.
select sum(bytes)/1048576 from dba_segments
where owner = 'CLW_P01_EPM' and
segment_name not in (
'WP_TASKS_WEEKLY_BACKUP','WP_TASKS_MONTHLY_BACKUP','USAGE_LOG','CONFIG_VALUE_CLOB',
'AUDIT_CALL_STACK',
'AUDIT_LOG',
'AUDIT_LOG_CFLITE',
'AUDIT_LOG_COMP',
'AUDIT_LOG_COMP_COL',
'AUDIT_LOG_COMP_COL_UN_VAL',
'AUDIT_LOG_COMP_MAIN_PK',
'AUDIT_LOG_COMP_PK',
'AUDIT_LOG_COMP_REC_UN_VAL',
'AUDIT_LOG_COMP_SESSION',
'AUDIT_LOG_TLITE',
'AUDIT_LOG_RECOVERY_MSG',
'AUDIT_LOG_RECOVERY_ATTEMPT',
'CONFIG_FIELD_WIDTH',
'EXPORT_RUN:',
'FIELD_SEC_PRIVS_LOOKUP',
'FIELD_PUBLISHED_LOOKUP',
'GRID_PAGE_FIELD_WIDTH',
'GLOBAL_TEMP',
'IMP_RUN',
'IMP_RUN_DATA_MAP_SQL',
'IMP_RUN_ENTITY_PK',
'IMP_RUN_ERROR',
'IMP_RUN_GRID_DELTAS',
'IMP_RUN_GRID_INCR',
'MESSAGE',
'NOTIF_QUEUE',
'NOTIF_QUEUE_ATTACHMENT',
'NOTIF_QUEUE_ATTEMPT',
'NOTIF_QUEUE_NOTIF_XREF',
'PROCESS_RUN',
'REPORT_RUN',
'REPORT_RUN_EMAILTO',
'REPORT_RUN_PARAM',
'REPORT_RUN_SQL',
'REPORT_RUN_SQL_PARAM',
'REPORT_RUN_TB_PARAM',
'RULE_RUN',
'RULE_RUN_ENTITY_PK',
'SESSION_TEMP',
'TMP_CLOB',
'ULOG_VIEW_OPT',
'ULOG_VIEW_OPT_COLUMN',
'USAGE_LOG',
'ULOG_VIEW_OPT_HIGHLIGHT',
'ULOG_FILTER_OPT',
'ULOG_FILTER_OPT_VALUE',
'ULOG_FILTER_OPT_ATTRIB',
'ULOG_VIEW_OPT_HIGHLIGHT_USER',
'ULOG_VIEW_OPT_SORT_COLUMN',
'ULOG_VIEW_OPT_MAP',
'ULOG_VIEW_OPT_MAP_INFO_COLUMN',
'ULOG_VIEW_OPT_MAP_LEG_COLOR',
'ULOG_VIEW_OPT_TASK_OVER',
'ULOG_VIEW_OPT_RDE',
'ULOG_VIEW_OPT_RDE_FIELD',
'ULOG_VIEW_OPT_RDE_GRID',
'ULOG_VIEW_OPT_RDE_TASK_COLUMN',
'USAGE_LOG_LOAD_TAB',
'USAGE_LOG_BROWSER',
'USAGE_LOG_SQL_PARAM',
'USAGE_LOG_GRID_FILTER',
'USER_USED_PWD',
'VIEW_OPT_HIGHLIGHT',
'XITOR_AUDIT',
'XITOR_COUNT',
'RULE_HTTP_CALL_LOG',
'ERROR_LOG');
select owner, object_name, object_type, status from dba_objects where object_name= 'TEP_MSE_4G_SGW_OUTPUTS';
 2907
 2790
 3715
26705
select count(*) from CLW_P01_EPM.AUDIT_LOG AL
WHERE
    AL.action = 'U'
    AND AL.ts = to_date('31/03/2020', 'MM/DD/YYYY')
    --AND AL.ts <= to_date(:vEndDate, 'MM/DD/YYYY')
    AND AL.table_name = 'CONFIG_VALUE'
    AND AL.column_name IN (
        '100165856',
        '100165857',
        '100165858',
        '100165861',
        '100165862',
        '100165863',
        '100165864',
        '100165885',
        '100165892',
        '100165894',
        '100165895',
        '100165897',
        '100165898',
        '100165900',
        '100165901',
        '100165902',
        '100165903',
        '100165904',
        '100165905',
        '100165906',
        '100165911',
        '100165913',
        '100165920',
        '100165923',
        '100165928',
        '100165945',
        '100165946',
        '100165947',
        '100165948',
        '100165949',
        '100165950',
        '100165951',
        '100165952',
        '100165953',
        '100165954',
        '100165955',
        '100165956',
        '100165957',
        '100165958',
        '100165977',
        '100165978',
        '100165982',
        '100165983',
        '100165984',
        '100165985',
        '100166013'
    )
BOOSTDAPCDRADM.BOOST_CDMA_IC_CDR_MAST_TPP_VW
  CREATE OR REPLACE FORCE VIEW "BOOST_CDMA_IC_CDR_MAST_TPP_VW" ("BAN", "SUBSCRIBER_ID", "NETWORK_ELEMENT_ID", "SWITCH_TYPE", "MOBILE_ROLE", "CALLING_NUMBER", "CALLED_NUMBER", "OVERSEAS_IND", "FEATURES", "MOBILE_NUM", "MOBILE_ESN_MEID", "CALL_CODE", "TERM_CODE", "OA_CODE", "CALL_DURATION", "ORIG_START_DATETIME", "TERM_START_DATETIME", "ANSWER_START_DATETIME", "ANSWER_STOP_DATETIME", "TERM_STOP_DATETIME", "ORIG_STOP_DATETIME", "IX_CARRIER", "DIALED_DIGITS", "FIRST_CELL_SITE", "FIRST_RADIO_MEMBER", "LAST_CELL_SITE", "LAST_RADIO_MEMBER", "TRUNK_GROUP", "TRUNK_MEMBER", "MOD_NUM", "SOURCE", "REC_FORMAT_TYPE", "TERM_NP_QUERY_STATUS", "TERM_LOCATION_ROUTING_NBR", "TERM_LOCATION_SOURCE", "TERM_CALLED_MSID", "TERM_BILLING_MSID", "ORIG_NP_QUERY_STATUS", "ORIG_LOCATION_ROUTING_NBR", "ORIG_LOCATION_SOURCE", "ORIG_CALLED_MSID", "ORIG_BILLING_MSID", "PREPAID_INDICATOR", "BRAND_CODE", "DATE_LOADED", "FILE_NAME", "FILE_DATE", "PRICE_PLAN") AS
  SELECT /*+ PARALLEL(a,6) */ a."BAN",a."SUBSCRIBER_ID",a."NETWORK_ELEMENT_ID",a."SWITCH_TYPE",a."MOBILE_ROLE",a."CALLING_NUMBER",a."CALLED_NUMBER",a."OVERSEAS_IND",a."FEATURES",a."MOBILE_NUM",a."MOBILE_ESN_MEID",a."CALL_CODE",a."TERM_CODE",a."OA_CODE",a."CALL_DURATION",a."ORIG_START_DATETIME",a."TERM_START_DATETIME",a."ANSWER_START_DATETIME",a."ANSWER_STOP_DATETIME",a."TERM_STOP_DATETIME",a."ORIG_STOP_DATETIME",a."IX_CARRIER",a."DIALED_DIGITS",a."FIRST_CELL_SITE",a."FIRST_RADIO_MEMBER",a."LAST_CELL_SITE",a."LAST_RADIO_MEMBER",a."TRUNK_GROUP",a."TRUNK_MEMBER",a."MOD_NUM",a."SOURCE",a."REC_FORMAT_TYPE",a."TERM_NP_QUERY_STATUS",a."TERM_LOCATION_ROUTING_NBR",a."TERM_LOCATION_SOURCE",a."TERM_CALLED_MSID",a."TERM_BILLING_MSID",a."ORIG_NP_QUERY_STATUS",a."ORIG_LOCATION_ROUTING_NBR",a."ORIG_LOCATION_SOURCE",a."ORIG_CALLED_MSID",a."ORIG_BILLING_MSID",a."PREPAID_INDICATOR",a."BRAND_CODE",a."DATE_LOADED",a."FILE_NAME",a."FILE_DATE",a."PRICE_PLAN" FROM BOOSTDAPCDRADM.BOOST_CDMA_IC_CDR_MAST a
WHERE a.BRAND_CODE IN ('BST','VMU','SPP')
AND a.PRICE_PLAN NOT IN (SELECT PRICE_PLAN FROM BOOSTADM.PREPAID_PPF_REF);
SELECT_BOOST_PINADM
SELECT_BOOSTDAPCDRADM_DATA
select p.grantee, p.granted_role , u.account_status, u.created , u.lock_date
from dba_role_privs p join dba_users u on (p.grantee=u.username)
where p.grantee in ( select grantee from dba_role_privs where granted_role='SELECT_BOOSTADM_TPP_DATA')
and p.grantee != 'SYS'
and u.profile='SPRINT_USER_PROFILE'
order by p.grantee;
select p.grantee, p.granted_role
--select distinct p.grantee
from dba_role_privs p
where p.grantee in ( select grantee from dba_role_privs where granted_role='SELECT_BOOSTADM_TPP_DATA')
and p.grantee != 'SYS'
order by p.grantee;
 select 'alter system disconnect session ''' ||  sid || ',' || serial# || ''' immediate;'
    from gv$session
    --where sid = '2597'
    where
    type <> 'BACKGROUND'
    --and event like '%db_link%'
    --and upper(program) like '%SQL DEVELOPER%'
    --and status='ACTIVE'
    --and machine in ('plsaa002')
    and username = 'TESTING_VIEWS'
    --and sql_id in ('ddugwjx4ym53z')
    --and sid in ('1663')
    --and inst_id = 1
   --and lower(machine) like '%870%'
    --and type <> 'BACKGROUND'
    --and sql_id='9kqy8gs6nqtqg'
    --and username != 'SYS'
    --and username = 'SYS'
   -- and sid in ('2790','2907','2021','2535','14')
    --and osuser='ndwadm'
    --and process = '1382'
        /
select /*+ no_merge(b) */ grantee ,granted_role, decode (c.userid,null,'N','Y') Shared, account_status,lock_date,expiry_date from
dba_users a, di156303.shared_service_ids c,
(select grantee ,granted_role from dba_role_privs where grantee in(
select grantee from (
select grantee,count(*) from dba_role_privs where grantee in (
select grantee from dba_role_privs where granted_role in ('SELECT_BOOSTADM_TPP_DATA' )
) and grantee in ( select username from dba_users where profile='SPRINT_USER_PROFILE' )
group by grantee having count(*) >1 order by 2 desc)
)
)b
where a.username=b.grantee
and a.username=c.userid(+)
order by 1,2 ;
select grantee, granted_role
from dba_role_privs
where --granted_role not in ('CONNECT', 'SELECT_BOOSTADM_TPP_DATA')
--and
grantee in (
'AR132966',
'BFROCK01',
'BSHANK01',
'BU072145',
'COBRIE02',
'CR057694',
'CR057694',
'CZ445866',
'CZ445866',
'CZ445866',
'DA313567',
'FM939136',
'FM939136',
'GA156591',
'HA051761',
'HS072953',
'HS072953',
'HS072953',
'HX899809',
'HX899809',
'HX899809',
'JB175472',
'JB175472',
'JJ343751',
'JU431348',
'JU431348',
'KA302261',
'KK652352',
'KK652352',
'KK652352',
'LI195796',
'LI195796',
'LI195796',
'LJ223182',
'MA312262',
'MA312262',
'ME245044',
'OQ153975',
'OQ153975',
'RM625758',
'RP409547',
'RP409547',
'RP409547',
'RP409547',
'RP409547',
'RP409547',
'SP818155',
'SP818155',
'SP818155',
'SS071575',
'ST066130',
'SY130741',
'SY130741',
'SY130741',
'TH168366',
'TM934060',
'TY157511',
'TY157511',
'TY157511',
'TY157511',
'US920293',
'US920293',
'US920293',
'UT787018',
'UT787018',
'UT787018',
'VN920143',
'VN920143',
'VN920143',
'WM243206',
'WM243206',
'WX312194',
'XO606263',
'YF512806',
'ZH367485',
'ZH367485',
'ZN371206',
'ZN371206',
'ZQ470928',
'ZQ470928')
order by granted_role;
CAGCV          AMS2LSW6       Sprint Delivery Billable Braz                     AS0203         On-Going Support                        N         0.0       0.0       8.0       9.0       8.0       9.0       8.0       42.0
L2EIS1,NFS,3391,System,/ifs/8PS_LS1/DATA/LOGS_PRODUCTION_EKS,5.00G,421.60M,plssa594z|plssa595z|plssa596z
L2EIS1,NFS,3240,System,/ifs/8PS_LS1/VAULT/ORACLE_G01_BACKUP02_01,150.00G,38.836G,plssa594z|plssa595z|plssa596z
L2EIS3,NFS,210,PCI-Strong,/ifs/PCI-Strong/8PS_LS3/VAULT/ORACLE_G01_PCI,50.00G,1.09M,plssa594z|plssa595z|plssa596z
L2EIS1-BDT.corp.sprint.com:/ifs/8PS_LS1/VAULT/ORACLE_G01_BKUP01     500.00     55.14    444.86      12% /oracle/g01/bkup01
L2EIS1-BDT.corp.sprint.com:/ifs/8PS_LS1/VAULT/ORACLE_G01_PCI       2.00      0.00      2.00       1% /oracle/g01/PCI
L2EIS1-BDT.corp.sprint.com:/ifs/8PS_LS1/VAULT/LOGS_PRODUCTION_EKS       5.00      0.15      4.85       4% /logs/production/eks
L2EIS1-BDT.corp.sprint.com:/ifs/WS2_LS1/VAULT/ORACLE_G01_STAGE01    2000.00    469.87   1530.13      24% /oracle/g01/stage01
FM939136
VN920143
ZQ470928
FM939136
VN920143
JU431348
ZN371206
ZH367485
JB175472
HX899809
KK652352
SY130741
US920293
LI195796
UT787018
WM243206
TY157511
TY157511
HX899809
KK652352
SY130741
US920293
LI195796
UT787018
WM243206
TY157511
HX899809
KK652352
SY130741
US920293
LI195796
UT787018
WM243206
TY157511
HS072953
CZ445866
HS072953
ME245044
CZ445866
BFROCK01
OQ153975
RM625758
JJ343751
XO606263
AR132966
KA302261
ST066130
COBRIE02
HA051761
LJ223182
CR057694
BSHANK01
GA156591
TM934060
DA313567
OQ153975
MA312262
HS072953
CZ445866
CR057694
RP409547
SP818155
thread 3 sequence 56367
configure CONFIGURE ARCHIVELOG DELETION POLICY TO APPLIED ON ALL STANDBY;
ALTER SYSTEM SET standby_file_management='AUTO' SCOPE=BOTH SID='*';
SQL> set numwidth 20
SQL>  select current_scn from v$database;
         CURRENT_SCN
--------------------
      15919990667000
backup incremental from scn '15919990667000' database format 'plsab612_%d_TS_%T_%s_%p';
backup incremental from scn ‘scn_no’ database format ‘/bkp/standby_%U’;
run {
allocate channel ddd1 type 'sbt_tape' parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.4/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164_nob_rep,BACKUP_HOST=L4ED1164.corp.sprint.com)';
allocate channel ddd2 type 'sbt_tape' parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.4/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164_nob_rep,BACKUP_HOST=L4ED1164.corp.sprint.com)';
allocate channel ddd3 type 'sbt_tape' parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.4/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164_nob_rep,BACKUP_HOST=L4ED1164.corp.sprint.com)';
allocate channel ddd4 type 'sbt_tape' parms='BLKSIZE=1048576,SBT_LIBRARY=/oracle/g01/software/rdbms/11.2.0.4/lib/libddobk.so,ENV=(STORAGE_UNIT=oracle1164_nob_rep,BACKUP_HOST=L4ED1164.corp.sprint.com)';
backup incremental from scn 15919990667000 database format 'plsab612_%d_TS_%T_%s_%p';
release channel ddd1;
release channel ddd2;
release channel ddd3;
release channel ddd4;
}
v_$sesstat, v_$statname and v_$session
grant select on v_$sesstat to plustrace;
grant select on v_$statname to plustrace;
grant select on v_$mystat to plustrace;
grant select on v_$session to plustrace;
grant select on v_$sql_plan to plustrace;
grant select on v_$sql_plan_statistics to plustrace;
grant select on v_$sql to plustrace;
grant select on v_$sql_plan_statistics_all to plustrace;
EMAIL_1=alexander.bufalol@sprint.com
EMAIL_2=patrick.mello@sprint.com
EMAIL_2=rayder.campos@sprint.com
alias -x ddbkp='cd /oracle/g01/software/datadomain/'
alias -x bkplog='cd /oracle/g01/software/datadomain/logs'
alias -x dp='cd /oracle/dbtools/datapoint/dashboard/'
alias -x alog='cd /oracle/g01/admin/$ORACLE_SID/diag/rdbms/`echo ${ORACLE_SID%?} | tr '[A-Z]' '[a-z]'`/$ORACLE_SID/trace'
alias -x hc='cd /oracle/g01/admin/common/scripts/healthcheck'
alias -x sysoper='cd /oracle/g01/admin/sysoper/stage'
alias -x fedmenu='sudo su - oracle -c  /oracle/g01/admin/sysoper/bin/fedmenu.sh'
alias -x gg="sudo su - goldgate"
alias -x orl="sudo su - oracle"
export NLS_DATE_FORMAT="dd-mm-yyyy hh24:mi:ss"
-- SVIP
alias -x alog='cd /oracle/g01/admin/diag/rdbms/`echo ${ORACLE_SID%?} | tr '[A-Z]' '[a-z]'`/$ORACLE_SID/trace'
alias -x ddbkp='cd /oracle/g01/bkup01/SVIP101/DDBOOST/'
alias -x bkplog='cd /oracle/g01/bkup01/SVIP101/DDBOOST/logs'
alias -x ddbkp='cd /oracle/g01/bkup01/SVDP1011/DDBOOST/'
alias -x bkplog='cd /oracle/g01/bkup01/SVDP1011/DDBOOST/logs'
SINGLE INSTANCE
alias -x alog='cd /oracle/g01/admin/diag/rdbms/`echo ${ORACLE_SID} | tr '[A-Z]' '[a-z]'`/$ORACLE_SID/trace'
alias -x alog='cd /oracle/g01/admin/$ORACLE_SID/diag/rdbms/`echo ${ORACLE_SID} | tr '[A-Z]' '[a-z]'`/$ORACLE_SID/trace'
alias -x alog='cd /oracle/g01/admin/$ORACLE_SID/diag/diag/rdbms/`echo ${ORACLE_SID} | tr '[A-Z]' '[a-z]'`/$ORACLE_SID/trace'
[‎4/‎10/‎2020 2:53 PM]
ALTER SYSTEM SET standby_file_management='AUTO' SCOPE=BOTH SID='*';
####House Keeping
30 23 * * 6 /oracle/dbtools/datapoint/scripts/aginglog_server  >/dev/null 2>&1
30 23 * * 6 /oracle/dbtools/datapoint/scripts/aginglog SUSP102 >/dev/null 2>&1
30 23 * * 6 /oracle/dbtools/datapoint/scripts/aginglog +ASM > /dev/null 2>&1
AD ID:
ek923426
 *
Name:
BUFALOL, ALEXANDER D.
 *
Phone #
+5511957789288
 *
Business Justification:
What specific business function will be impacted if the storage is not added?
The WDM database is reponsible for phone activations. IF storage is not added this service will be immediately impacted.
 *
Application ID:
APP-8PS-PROD
 *
Maintenance Window:
22-06AM
 *
Date needed (allow 30 day Implementation period):
5/13/2020
 Select to open a calendar and auto populate your selected date *
If Storage is required sooner than 30 days contact Capacity Management - Diane Hodge
D4C Classification:  *
Server and Support Information
Hostname(s):
plsab612
plsab613
plsab614
pnbab615
pnbab616
pnbab617
 *
This request is for:   *
Note: Any questions contact   ITCISCapacityManagement@sprint.com
SAN Performance Characteristics  *
Is this a server clustered environment? If so list the server names.
PRIMARY DATABASE ORACLE RAC:
plsab612,
plsab613
and
plsab614
 *
Is your request needed for shared storage?
(shared as either failover or active/active or NAS related)  *
Hostname(s) with Shared Storage:
PRIMARY DB ORACLE RAC:
Shared among plsab612, plsab613 and plsab614
 *
Identify any other hosts that must also be considered, such as report server, ORT,DR, etc:
STANDBY DB ORACLE RAC (DR):
Shared among pnbab615,
pnbab616 and
pnbab617
 *
Is this a Database Request?  *
Database Information
DBA Engineer Contact:
Alexander Bufalo
 *
DBA Engineer Contact ADID:
ek923426
 *
DBA Supervisor:
Dana Ferguson
 *
DBA On-Call Roster:
SFWDBS-DS-NOR-NOL-PROD-DBA@sprint.com
 *
Database Name:
WDMP101 and WDMP201 (DR)
 *
Database Instance Name:
WDMP1011, WDMP1012 and WDMP1013
 *
DBMS Vendor:
ORACLE
 *
Date of Last Table Re-org/Defrag:
8/19/2019
Select to open a calendar and auto populate your selected date * Please use the Calendar icon to select a date
Date of Last Index Rebuild:
8/19/2019
Select to open a calendar and auto populate your selected date * Please use the Calendar icon to select a date
Additional FlashCopy required for growth?  *
Type of Database:  *
Oracle Cooked or Raw File Systems:   *
Database Backup Information
Where are RMANs written today:   *
Record Retention Policy:
15 Days
 *
Date of Last Purge or Archive:
4/10/2020
Select to open a calendar and auto populate your selected date * Please use the Calendar icon to select a date
Purge or Archive Method Used:
rman policy
 *
How Many Days of Logs are Retained?
15
 *
How Many Days of Online Backups are Retained?
15
 *
What Method of Backup Compression is being Used?
DD dedup
 *
If this is active dbase space growth, does the database backup need growth?  *If yes, then add to the mount point information below.
Is the database flashcopied?
(not using rman)   *
Are the servers on CPNI, DMZ or PCI?
CPNI
 *
Is this a GOLD APP?  *
Is the DB part of an HA or RAC?  *
Is the database using Oracle ASO (encryption)?   *
Is the data in any way encrypted?  *
Using RMAN encryption?   *
Size of the RMAN file (uncompressed today)?
20TB
 *
If this is a prod database will the data be used to refresh ORT?   *
ORT server names that will be refreshed:
TREAB592
*
System Backup Information
What will be the total size of backups following the storage add?
No changes for sys backup
 *
Example: If /data is 500GB and the request is for 100GB growth the ANSWER would be /data, 600GB
Does the server total size exceed 1TB?
No
 *
Example: C:\ is 100GB, D:\ is 300GB E:\ is 500GB Request is for E:\ to grow 250GB Total Size = 1.12TB ANSWER: Yes, 1.12TB
Please provide estimates for 6 months worth of growth
Complete the following for each host, type "N/A" where applicable:
For database growth include RAW, FRA, and backup requirements.
Remember to grow your backup mount if growing/adding other filesystem mounts.
Owner, Group & Permissions *
(example: oracle:dba,drwxrwxr-x)
Backup Method *
(replace selections)
Volume/Disk Group
(df -k)*
(example: RAW_FRA, RAW_DATA, NAS, F:/, appsvg)
Mount Point *
(example: /oracle/g01/arch01, DATA, /oracle/g01/bkup01, /mysql, /opt/applid) Added Lun Size in GB *
(example: 20GB) (Database ONLY) Existing RAW List
Chunk Size *
(EX: 2 x 10 GB)
crw-rw----
RAW_DATA
DATA
1024G
3x1024G
Do you need more fields?   *
Additional Pertinent Information:
The same amount of disk space (3TB of Tier 0) should be added to the standby database in NOB.
 BZEN7V         8BC05ZVV       PORTO SEGURO S/A OPP 0I-Y...                      GB0020         General Billable                        S         0.0       0.0       12.0      12.0      12.0      12.0      12.0      60.0
New password is 'New202004131649!'.
cdrp
Lixodes3nhadfp!
SQL> select * from  v$sga_target_advice ORDER BY sga_size ASC;
  SGA_SIZE SGA_SIZE_FACTOR ESTD_DB_TIME ESTD_DB_TIME_FACTOR ESTD_PHYSICAL_READS ESTD_BUFFER_CACHE_SIZE ESTD_SHARED_POOL_SIZE     CON_ID
---------- --------------- ------------ ------------------- ------------------- ---------------------- --------------------- ----------
     10240           .0625     10047334               .9475           337218629                 134144                 31232          0
     20480            .125     10047334               .9475           337218629                 134144                 31232          0
     30720           .1875     10047334               .9475           337218629                 134144                 31232          0
     40960             .25     12546707              1.1832          5685067701                  13312                 22528          0
     51200           .3125     11647484              1.0984          3181522877                  26624                 20480          0
     61440            .375     11633699              1.0971          3181522877                  26624                 29184          0
     71680           .4375     11325121               1.068          2324751506                  39936                 27136          0
     81920              .5     11120463              1.0487          1752154274                  53248                 25088          0
     92160           .5625     10943375               1.032          1255094015                  66560                 23552          0
    102400            .625     10812946              1.0197           880815059                  79872                 21504          0
    112640           .6875     10711147              1.0101           580117207                  93184                 18944          0
    122880             .75     10693120              1.0084           580117207                  93184                 29184          0
    133120           .8125     10650704              1.0044           460303429                 106496                 27136          0
    143360            .875     10628435              1.0023           385609502                 119808                 23552          0
    153600           .9375     10614650               1.001           340523372                 133120                 22528          0
    163840               1     10604046                   1           337218629                 134144                 31232          0
    174080          1.0625     10591321               .9988           297426831                 146432                 29184          0
    184320           1.125     10579657               .9977           262794478                 159744                 27136          0
    194560          1.1875     10572234                .997           235816987                 173056                 25088          0
    204800            1.25     10565871               .9964           235816987                 173056                 35328          0
    215040          1.3125     10561630                .996           222732904                 186368                 33280          0
    225280           1.375     10556328               .9955           205366145                 199680                 31232          0
    235520          1.4375     10553147               .9952           205366145                 199680                 39424          0
    245760             1.5     10548905               .9948           194069321                 212992                 39424          0
    256000          1.5625     10546784               .9946           182806219                 226304                 35328          0
    266240           1.625     10543603               .9943           173364097                 239616                 33280          0
    276480          1.6875     10539361               .9939           158627643                 252928                 31232          0
    286720            1.75     10536180               .9936           158627643                 252928                 39424          0
    296960          1.8125     10535120               .9935           154581020                 266240                 39424          0
    307200           1.875     10535120               .9935           154581020                 266240                 39424          0
    317440          1.9375     10535120               .9935           154581020                 266240                 39424          0
    327680               2     10535120               .9935           154581020                 266240                 39424          0
Execute the following commands to drop old/unused objects in the WDMP101.
     drop table OEMADM.TM_BOGX_SESSION_DATA_STG purge;
     drop table OEMADM.TM_THIRD_PARTY_EAI_TX_OLD purge;
     drop tablespace TTS including contents and datafiles;
SQL> select /*+Parallel(6)*/ max(TX_DATE) from oemadm.TM_THIRD_PARTY_EAI_TX_OLD;
MAX(TX_DA
---------
12-APR-19
SQL> select /*+Parallel(6)*/ max(TX_DATE) from oemadm.TM_THIRD_PARTY_EAI_TX_LOG;
MAX(TX_DA
---------
15-APR-20
SQL> select /*+Parallel(6)*/ max(TRANSACTION_DT) from OEMADM.TM_BOGX_SESSION_DATA_STG;
MAX(TRANS
---------
14-MAY-19
SQL> select /*+Parallel(6)*/ max(TRANSACTION_DT) from OEMADM.TM_BOGX_SESSION_DATA;
MAX(TRANS
---------
13-APR-20
 select tablespace_name, status, count(*) from dba_rollback_segs group by tablespace_name, status order by 1;
-- 1 Criar nos novos tablespaces.
create undo tablespace UNDO_01 datafile '+DATA' size 30g autoextend off;
create undo tablespace UNDO_02 datafile '+DATA' size 5g autoextend off;
--2 Alterar os tablespaces. *rodar cada comando em um nó.
alter system set undo_tablespace = UNDO_01 scope=both sid='OOCP1011';
alter system set undo_tablespace = UNDO_02 scope=both sid='OOCP1012';
--3 Verificar, em cada nó, se foi mudado
show parameter undo_tablespace
--4 Verificar se os segmentos nos tablespace UNDOTBS1 e UNDOTBS2 estão TODOS offline.
select tablespace_name, status, count(*) from dba_rollback_segs group by tablespace_name, status order by 1;
--5 Quando estiverem todos offline, pode dropar os tablespaces antigos.
drop tablespace undotbs1 including contents and datafiles;
drop tablespace undotbs2 including contents and datafiles;
-- 6 Depois desfazer a configuração de alternate archive dest:
alter system set log_archive_dest_1='LOCATION=+FRA_01 MANDATORY reopen=60' scope=both;
alter system reset log_archive_dest_4;
alter system set LOG_ARCHIVE_DEST_STATE_4 = enable;
alter system set log_archive_dest_state_1=ENABLE scope=both;
-- 7 Verificar se a 2 está valid.
SELECT DEST_NAME,STATUS,DESTINATION
FROM V$ARCHIVE_DEST
WHERE DESTINATION IS NOT NULL;
log_archive_dest_1
LOCATION=+FRA_01 MANDATORY reopen=60
alter system set log_archive_dest_1='LOCATION=+FRA_01 MANDATORY reopen=60 ALTERNATE=LOG_ARCHIVE_DEST_4' scope=both;
alter system set log_archive_dest_1='LOCATION=+FRA_01 MANDATORY reopen=60' scope=both;
alter system reset log_archive_dest_4 scope=both;
alter system set LOG_ARCHIVE_DEST_STATE_4 = enable;
alter system set log_archive_dest_state_1=ENABLE scope=both;
SELECT DEST_NAME,STATUS,DESTINATION
FROM V$ARCHIVE_DEST
WHERE DESTINATION IS NOT NULL;
/home/oracle/scripts/database_health_clean.sh
/home/oracle/scripts/database_health.sh
#55 00,06,12,18 * * *  /bin/sh /oracle/g01/bkup01/ICEP1011/backup/daily_health_check.sh ICEP101 > /dev/null
find $DD_HOME/logs/hotbackup_MMPP101* -type f -mtime +15 -exec rm -f "{}" \;
00 01,07,13,19 * * * /bin/ksh /oracle/g01/admin/common/scripts/healthcheck/daily_health_check.sh SVIP101 > /dev/null 2>&1
select  distinct
                instance_number,
                db_name,
                version,
                startup_time,
                platform_name
from    dba_hist_database_instance
order by 1;
select  instance_number, db_name, version, startup_time, platform_name,
        RANK() OVER (PARTITION BY instance_number ORDER BY startup_time desc)
from    dba_hist_database_instance
order by 6,1;
--Query
set lines 200
col platform_name for a50
col startup_time for a40
select
                '<tr><td class="pdrncAlt">' || a.instance_number || '</td>',
                '<td class="pdrncAlt">' || a.db_name || '</td>',
                '<td class="pdrncAlt">' || a.version || '</td>',
                '<td class="pdrncAlt">' || a.startup_time || '</td>',
                '<td class="pdrncAlt">' || a.platform_name || '</td></tr>'
from
        (select  instance_number, db_name, version, startup_time, platform_name,
          RANK() OVER (PARTITION BY instance_number ORDER BY startup_time desc) rank
          from    dba_hist_database_instance
          order by 6,1) a
where a.rank < 6
order by 1;
--foot
select '</table>' from dual;
select /*+parallel(8)*/ 'order_master     '              || count(*) || ' rows' from oemadm.order_master  ;
select /*+parallel(8)*/ 'order_line_details     '         || count(*) || ' rows' from oemadm.order_line_details ;
select /*+parallel(8)*/ 'phone_config     '               || count(*) || ' rows' from oemadm.phone_config ;
select /*+parallel(8)*/ 'order_billing     '              || count(*) || ' rows' from oemadm.order_billing ;
select /*+parallel(8)*/ 'order_invoice     '              || count(*) || ' rows' from oemadm.order_invoice ;
select /*+parallel(8)*/ 'order_shipping     '             || count(*) || ' rows' from oemadm.order_shipping ;
select /*+parallel(8)*/ 'phone_and_accessory     '        || count(*) || ' rows' from oemadm.phone_and_accessory ;
select /*+parallel(8)*/ 'extr_ordr_chnl_info     '        || count(*) || ' rows' from oemadm.extr_ordr_chnl_info   ;
select /*+parallel(8)*/ 'order_IB_info     '              || count(*) || ' rows' from oemadm.order_IB_info ;
select /*+parallel(8)*/ 'BUYBACK_DEVICE_INFO     '        || count(*) || ' rows' from oemadm.BUYBACK_DEVICE_INFO ;
select /*+parallel(8)*/ 'ORDER_COMMENTS     '             || count(*) || ' rows' from oemadm.ORDER_COMMENTS ;
select /*+parallel(8)*/ 'ORDER_GIVEBACK_DEVICE_INFO     ' || count(*) || ' rows' from oemadm.ORDER_GIVEBACK_DEVICE_INFO ;
select /*+parallel(8)*/ 'ORDER_LINE_SOC     '             || count(*) || ' rows' from oemadm.ORDER_LINE_SOC ;
select /*+parallel(8)*/ 'ORDER_RMA_INFO     '             || count(*) || ' rows' from oemadm.ORDER_RMA_INFO ;
select /*+parallel(8)*/ 'ORDER_TYPE_DESC     '            || count(*) || ' rows' from oemadm.ORDER_TYPE_DESC ;
select /*+parallel(8)*/ 'ORDER_Shipping_line     '        || count(*) || ' rows' from oemadm.ORDER_Shipping_line ;
order_master
order_line_details
phone_config
order_billing
order_invoice
order_shipping
phone_and_accessory
extr_ordr_chnl_info
order_IB_info
BUYBACK_DEVICE_INFO
ORDER_COMMENTS
ORDER_GIVEBACK_DEVICE_INFO
ORDER_LINE_SOC
ORDER_RMA_INFO
ORDER_TYPE_DESC
ORDER_Shipping_line
L2EIS1-BDT.corp.sprint.com:/ifs/8PS_LS1/VAULT/ORACLE_G01_PCI
L2EIS1-bdt.corp.sprint.com:/ifs/8PS_LS1/VAULT/ORACLE_G01_PCI
L2EIS1-bdt.corp.sprint.com:/ifs/8PS_LS1/VAULT/ORACLE_G01_BACKUP02_01
                       150G     0K   150G     0%    /BKUP02-OLD
l2eis3-pci-strong.corp.sprint.com:/ifs/PCI-Strong/8PS_LS3/VAULT/ORACLE_G01_PCI
                        50G     0K    50G     0%    /PCI-OLD
l2eis3-pci-strong.corp.sprint.com:/ifs/PCI-Strong/EKS_LS3/DATA/LOGS_PRODUCTION
                       5.0G     0K   5.0G     0%    /logs/production/eks
userid="/ as sysdba"
estimate_only=y
directory=TMP
schemas=CLW_P01_EPM
exclude=job
exclude=statistics
exclude=TRIGGER:"= 'TAL_SET_TIME_ZONE'"
exclude=TRIGGER:"= 'TAL_SET_CUR_SCHEMA'"
exclude=TABLE:"= 'TOAD_PLAN_TABLE'"
exclude=TABLE:"= 'PLAN_TABLE'"
exclude=TABLE:"= 'WP_TASKS_WEEKLY_BACKUP'"
exclude=TABLE:"= 'WP_TASKS_MONTHLY_BACKUP'"
exclude=TABLE:"= 'USAGE_LOG_R'"
exclude=TABLE:"= 'CONFIG_VALUE_CLOB_R'"
exclude=INDEX:"IN ('IDX3_AUDIT_LOG','IDX2_AUDIT_LOG','IDX1_AUDIT_LOG','IDX10_AUDIT_LOG','AUDIT_LOG_PK','IDX1_AUDIT_CALL_STACK','PK_AUDIT_CALL_STACK','IDX1_MESSAGE')"
exclude=TABLE:"= 'AUDIT_CALL_STACK'"
exclude=TABLE:"= 'AUDIT_LOG'"
exclude=TABLE:"= 'AUDIT_LOG_CFLITE'"
exclude=TABLE:"= 'AUDIT_LOG_COMP'"
exclude=TABLE:"= 'AUDIT_LOG_COMP_COL'"
exclude=TABLE:"= 'AUDIT_LOG_COMP_COL_UN_VAL'"
exclude=TABLE:"= 'AUDIT_LOG_COMP_MAIN_PK'"
exclude=TABLE:"= 'AUDIT_LOG_COMP_PK'"
exclude=TABLE:"= 'AUDIT_LOG_COMP_REC_UN_VAL'"
exclude=TABLE:"= 'AUDIT_LOG_COMP_SESSION'"
exclude=TABLE:"= 'AUDIT_LOG_TLITE'"
exclude=TABLE:"= 'AUDIT_LOG_RECOVERY_MSG'"
exclude=TABLE:"= 'AUDIT_LOG_RECOVERY_ATTEMPT'"
exclude=TABLE:"= 'CONFIG_FIELD_WIDTH'"
exclude=TABLE:"= 'EXPORT_RUN'"
exclude=TABLE:"= 'FIELD_SEC_PRIVS_LOOKUP'"
exclude=TABLE:"= 'FIELD_PUBLISHED_LOOKUP'"
exclude=TABLE:"= 'GRID_PAGE_FIELD_WIDTH'"
exclude=TABLE:"= 'GLOBAL_TEMP'"
exclude=TABLE:"= 'IMP_RUN'"
exclude=TABLE:"= 'IMP_RUN_DATA_MAP_SQL'"
exclude=TABLE:"= 'IMP_RUN_ENTITY_PK'"
exclude=TABLE:"= 'IMP_RUN_ERROR'"
exclude=TABLE:"= 'IMP_RUN_GRID_DELTAS'"
exclude=TABLE:"= 'IMP_RUN_GRID_INCR'"
exclude=TABLE:"= 'MESSAGE'"
exclude=TABLE:"= 'NOTIF_QUEUE'"
exclude=TABLE:"= 'NOTIF_QUEUE_ATTACHMENT'"
exclude=TABLE:"= 'NOTIF_QUEUE_ATTEMPT'"
exclude=TABLE:"= 'NOTIF_QUEUE_NOTIF_XREF'"
exclude=TABLE:"= 'PROCESS_RUN'"
exclude=TABLE:"= 'REPORT_RUN'"
exclude=TABLE:"= 'REPORT_RUN_EMAILTO'"
exclude=TABLE:"= 'REPORT_RUN_PARAM'"
exclude=TABLE:"= 'REPORT_RUN_SQL'"
exclude=TABLE:"= 'REPORT_RUN_SQL_PARAM'"
exclude=TABLE:"= 'REPORT_RUN_TB_PARAM'"
exclude=TABLE:"= 'RULE_RUN'"
exclude=TABLE:"= 'RULE_RUN_ENTITY_PK'"
exclude=TABLE:"= 'SESSION_TEMP'"
exclude=TABLE:"= 'TMP_CLOB'"
exclude=TABLE:"= 'ULOG_VIEW_OPT'"
exclude=TABLE:"= 'ULOG_VIEW_OPT_COLUMN'"
exclude=TABLE:"= 'USAGE_LOG'"
exclude=TABLE:"= 'ULOG_VIEW_OPT_HIGHLIGHT'"
exclude=TABLE:"= 'ULOG_FILTER_OPT'"
exclude=TABLE:"= 'ULOG_FILTER_OPT_VALUE'"
exclude=TABLE:"= 'ULOG_FILTER_OPT_ATTRIB'"
exclude=TABLE:"= 'ULOG_VIEW_OPT_HIGHLIGHT_USER'"
exclude=TABLE:"= 'ULOG_VIEW_OPT_SORT_COLUMN'"
exclude=TABLE:"= 'ULOG_VIEW_OPT_MAP'"
exclude=TABLE:"= 'ULOG_VIEW_OPT_MAP_INFO_COLUMN'"
exclude=TABLE:"= 'ULOG_VIEW_OPT_MAP_LEG_COLOR'"
exclude=TABLE:"= 'ULOG_VIEW_OPT_TASK_OVER'"
exclude=TABLE:"= 'ULOG_VIEW_OPT_RDE'"
exclude=TABLE:"= 'ULOG_VIEW_OPT_RDE_FIELD'"
exclude=TABLE:"= 'ULOG_VIEW_OPT_RDE_GRID'"
exclude=TABLE:"= 'ULOG_VIEW_OPT_RDE_TASK_COLUMN'"
exclude=TABLE:"= 'USAGE_LOG_LOAD_TAB'"
exclude=TABLE:"= 'USAGE_LOG_BROWSER'"
exclude=TABLE:"= 'USAGE_LOG_SQL_PARAM'"
exclude=TABLE:"= 'USAGE_LOG_GRID_FILTER'"
exclude=TABLE:"= 'USER_USED_PWD'"
exclude=TABLE:"= 'VIEW_OPT_HIGHLIGHT'"
exclude=TABLE:"= 'XITOR_AUDIT'"
exclude=TABLE:"= 'XITOR_COUNT'"
exclude=TABLE:"= 'RULE_HTTP_CALL_LOG'"
exclude=TABLE:"= 'ERROR_LOG'"
select sum(bytes)/1048576 from dba_segments
where segment_type like '%INDEX%'
and segment_name not in
('IDX3_AUDIT_LOG','IDX2_AUDIT_LOG','IDX1_AUDIT_LOG','IDX10_AUDIT_LOG','AUDIT_LOG_PK','IDX1_AUDIT_CALL_STACK','PK_AUDIT_CALL_STACK','IDX1_MESSAGE')
and segment_name not in
( select index_name from dba_indexes where table_name in(
'USAGE_LOG','CONFIG_VALUE_CLOB')
);
          set lin 200 pages 999
    col tim for a15
    col process for a7
    col event for a40
    col machine for a15
    col program for a30
    col username for a15
    select
    inst_id,
    SID,
    serial#,
    username,
    --osuser,
    machine,
    program,
    process,
    --blocking_session as bl,
    to_char(LOGON_TIME, 'DDMM - HH24:MI') as tim,
    LAST_CALL_ET/60 et_min,
    --BLOCKING_SESSION,
    EVENT,
    WAIT_TIME,
    SECONDS_IN_WAIT,
    status,
    sql_id
    from gv$session
    --where sid = '2597'
    where
    sid in (
      select sid from gv$px_session where qcsid = '1724')
      order by tim
    /
MERGE INTO BOOSTADM.BOOST_EVENT_DATA b USING (select /*+ parallel(d,6)
*/        h.TMO_TRANSACION_ID, h.event_id        from
boostadm.boost_event_data d,
app_1wnadm.EVENT_DATA_IM5671011 h        where d.BATCH_DATE between
'04/26/2020' and '04/28/2020'        and d.event_id = h.event_id
) dt ON (b.event_id = dt.event_id) WHEN MATCHED THEN UPDATE SET
b.TMO_TRANSACTION_ID = dt.TMO_TRANSACION_ID WHERE b.BATCH_DATE between
'04/26/2020' and '04/28/2020'
;
select segment_name, segment_type, sum(bytes)/1048576 from dba_segments where segment_name='&minharola'
union all
select segment_name, segment_type, sum(bytes)/1048576  from dba_segments where segment_name in
(select segment_name from dba_lobs where table_name = '&&minharola')
DROP USER SYS CASCADE;
sum(bytes)/power(1024,3)
select round(sum(bytes)/1024/1024/1024, 2) as "GB", segment_name as "OBJECT_NAME", segment_type
from dba_segments
where owner in ('&ownerbibadostar')
and segment_name in (select distinct table_name from dba_lobs where owner='&&ownerbibadostar') group by segment_name, segment_type
union all
select round(sum(bytes)/1024/1024/1024, 2) as "GB", segment_name , segment_type
from dba_segments
where segment_name in (select segment_name from dba_lobs where table_name in (select distinct table_name from dba_lobs where owner='&&ownerbibadostar'))
group by segment_name, segment_type
order by 1;
declare
  TYPE t_name IS REF CURSOR RETURN dba_tables%ROWTYPE;
  c1 cursor is select owner, segment_name from dba_lobs where
begin
end;
tsql := 'select rowid from ' || v_owner || '.' || v_table ||  ' where PORT_IN_BILLING_INFO_ID in ( select PORT_IN_BILLING_INFO_ID from oemadm.ORDER_LINE_PORT_IN_DATA where ORDER_KEY = ''' || okey || ''')';
  FUNCTION test_cursor (tsql IN varchar2) return number
      as
      --cursor c_test_cursor is select 1 from OEMADM. || order_master;
      v_test_cursor varchar2(4000);
      c_test_cursor curtype;
      --v_rows number;
      begin
        OPEN c_test_cursor FOR tsql;
        FETCH c_test_cursor into v_test_cursor;
          if c_test_cursor%NOTFOUND then
            return 0;
          else
            return 1;
          end if;
        CLOSE c_test_cursor;
select t.owner, t.table_name, t.segment_name,
ntile(5) over (PARTITION BY t.table_name order by mb) as total_mb
from (
(select s.owner, l.table_name, s.segment_name, sum(s.bytes)/1048576 as "MB"
from dba_segments s join
(select owner, table_name, segment_name from dba_lobs) l
on (s.owner=l.owner and s.segment_name=l.segment_name)
group by s.owner, l.table_name, s.segment_name)
) t
order by t.owner, t.table_name, total_mb;
Eu_sou_invejos0
New password is 'New202004301442!'.
[root@u1322:/]# strings /usr/lib/methods/udefacfsctl.bin
@(#)23  1.6  src/bos/usr/ccs/lib/libpthreads/init.c, libpth, bos610 6/21/07 15:28:59
@(#)61
1.16  src/bos/usr/ccs/lib/libc/__threads_init.c, libcthrd, bos610 8/2/07 13:09:21
▒▒▒▒▒▒
USM_VERSION-11.2.0.3.0.0
cd /orainfra/app/product/18.0.0/grid/usm/install/cmds/bin
cp cfgacfsctl.bin cfgadvmctl.bin cfgadvmvol.bin defacfsctl.bin defadvmctl.bin ucfgacfsctl.bin ucfgadvmctl.bin ucfgadvmvol.bin udefacfsctl.bin udefadvmctl.bin /usr/lib/methods/
vi /usr/lib/methods/ucfgacfsctl
vi /usr/lib/methods/ucfgadvmctl
vi /usr/lib/methods/udefacfsctl
vi /usr/lib/methods/udefadvmctl
/usr/lib/methods/ucfgacfsctl -l ofsctl (Continue if error states "failed to look up ODM CuDv object class" or "device is already unconfigured")
/usr/lib/methods/ucfgadvmctl -l advmctl (Continue if error states "failed to look up ODM CuDv object class" or "device is already unconfigured")
/usr/lib/methods/udefacfsctl -l ofsctl (Continue if error states "failed to look up ODM CuDv object class")
/usr/lib/methods/udefadvmctl -l advmctl (Continue if error states "failed to look up ODM CuDv object class")
/usr/sbin/rmauth -h oracle
rmrole oracle_devmgmt
setkst
rm /usr/lib/drivers/oracle*
rm /usr/lib/methods/*advm* /usr/lib/methods/*acfs*
rm -rf /sbin/helpers/acfs
rm /usr/sbin/acfsutil* /usr/sbin/advmutil*
rm /sbin/acfsutil* /sbin/advmutil*
  AIX: ROOT.SH FAILS WITH CLSRSC-196: ACFS DRIVER INSTALL ACTIONS FAILED (Doc ID 1929899.1)
  BZEN7V         8BC05ZVV       PORTO SEGURO S/A OPP 0I-Y...                      GB0020         General Billable                        N         4.5       1.5       2.5       0.0       0.0       1.0       1.0       10.5
CREATE DISKGROUP arch EXTERNAL REDUNDANCY
DISK
'/dev/rhdisk4' name ARCH_0001,
'/dev/rhdisk3' name ARCH_0002,
'/dev/rhdisk4' name ARCH_0003,
'/dev/rhdisk5' name ARCh_0004
ATTRIBUTE
   'compatible.asm' = '11.2',
    'compatible.rdbms' = '10.1';
CREATE DISKGROUP olog EXTERNAL REDUNDANCY
DISK
'/dev/rhdisk7' name OLOG_0001
ATTRIBUTE
   'compatible.asm' = '11.2.0.2.0',
    'compatible.rdbms' = '11.2.0.2.0';
/oracle/g01/software/root.sh
  set lin 200 pages 999
  col tim for a15
  col process for a7
  col event for a40
  col machine for a15
  col program for a30
  col username for a15
  select
  'alter system disconnect session ''' || sid || ',' || serial# || ',@' || inst_id || ''' immediate;'
  from gv$session
  where
  type <> 'BACKGROUND'
  and username = 'JU059364'
  /
  CREATE GLOBAL TEMPORARY TABLE OVMADM."PLAN_TABLE"
   (    "STATEMENT_ID" VARCHAR2(30),
        "PLAN_ID" NUMBER,
        "TIMESTAMP" DATE,
        "REMARKS" VARCHAR2(4000),
        "OPERATION" VARCHAR2(30),
        "OPTIONS" VARCHAR2(255),
        "OBJECT_NODE" VARCHAR2(128),
        "OBJECT_OWNER" VARCHAR2(30),
        "OBJECT_NAME" VARCHAR2(30),
        "OBJECT_ALIAS" VARCHAR2(65),
        "OBJECT_INSTANCE" NUMBER(*,0),
        "OBJECT_TYPE" VARCHAR2(30),
        "OPTIMIZER" VARCHAR2(255),
        "SEARCH_COLUMNS" NUMBER,
        "ID" NUMBER(*,0),
        "PARENT_ID" NUMBER(*,0),
        "DEPTH" NUMBER(*,0),
        "POSITION" NUMBER(*,0),
        "COST" NUMBER(*,0),
        "CARDINALITY" NUMBER(*,0),
        "BYTES" NUMBER(*,0),
        "OTHER_TAG" VARCHAR2(255),
        "PARTITION_START" VARCHAR2(255),
        "PARTITION_STOP" VARCHAR2(255),
        "PARTITION_ID" NUMBER(*,0),
        "OTHER" LONG,
        "OTHER_XML" CLOB,
        "DISTRIBUTION" VARCHAR2(30),
        "CPU_COST" NUMBER(*,0),
        "IO_COST" NUMBER(*,0),
        "TEMP_SPACE" NUMBER(*,0),
        "ACCESS_PREDICATES" VARCHAR2(4000),
        "FILTER_PREDICATES" VARCHAR2(4000),
        "PROJECTION" VARCHAR2(4000),
        "TIME" NUMBER(*,0),
        "QBLOCK_NAME" VARCHAR2(30)
   ) ON COMMIT PRESERVE ROWS;
New password is 'New202005011851!'.
Eu_sou_invejos0
OHGRID=/orainfra/app/product/18.0.0/grid
OHRDBMS=/oracle/PDS/18.0.0
IHRDBMS=/oracle/PDS/18.0.0
# work-around for Oracle bug 28352017
$OHGRID/bin/cluutil -ckpt -oraclebase `env ORACLE_HOME=$OHGRID $OHGRID/bin/orabase` -writeckpt -name ROOTCRS_PREPATCH -state START
2990933047
test -d GIMERGEOCW18V2P_1911-70003947 || unzip -qd GIMERGEOCW18V2P_1911-70003947 GIMERGEOCW18V2P_1911-70003947.ZIP
./GIMERGEOCW18V2P_1911-70003947/29939536/29939536/custom/scripts/prepatch.sh -dbhome $IHRDBMS
test -d GIMERGEOCW18V2P_1911-70003947 || unzip -qd GIMERGEOCW18V2P_1911-70003947 GIMERGEOCW18V2P_1911-70003947.ZIP
cp -p GIMERGEOCW18V2P_1911-70003947/29939536/29939536/custom/scripts/prepatch.sh  $IHRDBMS/sapbundle/SBP_18800191015_201911/
cp -p GIMERGEOCW18V2P_1911-70003947/29939536/29939536/custom/scripts/postpatch.sh $IHRDBMS/sapbundle/SBP_18800191015_201911/
./GIMERGEOCW18V2P_1911-70003947/29939536/29939536/custom/scripts/postpatch.sh -dbhome $IHRDBMS
PDS1.audit_file_dest='/oracle/admin/PDS1/adump'
PDS2.audit_file_dest='/oracle/admin/PDS2/adump'
*.audit_sys_operations=FALSE
PDS1.diagnostic_dest='/oracle/admin/PDS1'
PDS2.diagnostic_dest='/oracle/admin/PDS2'
*.cluster_database=FALSE
*.cluster_database_instances=2
*.control_files=(
'+DATA',
'+DATA',
'+DATA')
*.db_block_size=8192
*.db_file_multiblock_read_count=128
*.db_files=200
*.db_name='PDS'
*.db_unique_name='PDS'
PDS1.instance_name='PDS1'
PDS2.instance_name='PDS2'
PDS1.instance_number=1
PDS2.instance_number=2
*.job_queue_processes=1000
*.log_archive_dest_1      = "LOCATION=+ARCH  MANDATORY reopen=60"
*.log_archive_dest_state_1=enable
PDS1.log_archive_format='%t_%s_%r.dbf'
PDS2.log_archive_format='%t_%s_%r.dbf'
*.log_buffer=18612224
*.log_checkpoints_to_alert=false
*.max_dump_file_size='unlimited'
*.open_cursors=300
*.pga_aggregate_target=2G             #was 320M
*.processes=250
*.recyclebin='on'
*.remote_login_passwordfile='EXCLUSIVE'
*.sga_target=6G                       #was 1200M
*.session_cached_cursors=50
*.timed_statistics=TRUE
*.undo_management='AUTO'
*.undo_retention=900
PDS1.undo_tablespace='UNDOTBS1'
PDS2.undo_tablespace='UNDOTBS2'
*.workarea_size_policy=AUTO
*.db_create_file_dest='+DATA'
*.db_create_online_log_dest_1='+OLOG'
*.db_create_online_log_dest_2='+MLOG'
*.db_recovery_file_dest = '+ARCH'
*.db_recovery_file_dest_size = 30G

create database PDS
    character set AL32UTF8
    national character set UTF8
    controlfile reuse
    user sys identified by oadmin0
    user system identified by oadmin0
    maxlogfiles  128
    maxlogmembers 4
    maxloghistory 6300
    maxdatafiles 200
    logfile
      GROUP 1 ('+OLOG', '+MLOG') SIZE 200M,
      GROUP 2 ('+OLOG', '+MLOG') SIZE 200M,
      GROUP 3 ('+OLOG', '+MLOG') SIZE 200M
    datafile SIZE 1G
    EXTENT MANAGEMENT LOCAL
    sysaux datafile SIZE 6G
    default temporary tablespace TEMP TEMPFILE SIZE 32767M AUTOEXTEND ON
    DEFAULT TABLESPACE USERS
    DATAFILE SIZE  500M
    undo tablespace UNDOTBS1 DATAFILE SIZE 5G AUTOEXTEND OFF
noarchivelog;


CREATE TABLESPACE DBA_MAINTENANCE_TBS DATAFILE SIZE 1G AUTOEXTEND OFF
    EXTENT MANAGEMENT LOCAL AUTOALLOCATE
    LOGGING ONLINE SEGMENT SPACE MANAGEMENT AUTO;
+DATA/PDS/CONTROLFILE/current.256.1039452401, +DATA/PDS/CONTROLFILE/current.257.1039452401
                                                 , +DATA/PDS/CONTROLFILE/current.258.1039452401
create undo tablespace UNDOTBS2 DATAFILE SIZE 6G AUTOEXTEND OFF;
alter database add logfile thread 2 group 4 size 200M;
alter database add logfile thread 2 group 5 size 200M;
alter database add logfile thread 2 group 6 size 200M;
data/pds/parameterfile/spfile.266.1039454225
srvctl add database -d PDS -p '+data/pds/parameterfile/spfile.266.1039454225' -o /oracle/PDS/18.0.0 -c RAC -a "data,arch,olog,mlog"
srvctl add instance -d PDS -i PDS1 -n u1322
srvctl add instance -d PDS -i PDS2 -n u1325
u1322 (+ASM1) /oracle/PDS/18.0.0/dbs$ srvctl status database -d PDS
Instance PDS1 is running on node u1322
Instance PDS2 is running on node u1325
 CREATE TABLE "CDRADM"."EVENT_USAGE"
   (    "EVENT_ENTITY_NAME" VARCHAR2(20),
        "CYCLE_CODE" NUMBER(4,0),
        "CYCLE_MONTH" NUMBER(2,0),
        "CYCLE_YEAR" NUMBER(4,0),
        "EVENT_TYPE_ID" NUMBER(9,0),
        "EVENT_ID" NUMBER(18,0),
        "NETWORK_START_TIME" DATE,
        "SERVICE_FILTER" VARCHAR2(7),
        "START_TIME" DATE,
        "SUBSCRIBER_ID" NUMBER(9,0),
        "CUSTOMER_ID" NUMBER(9,0),
        "TARGET_CYCLE_CODE" NUMBER(4,0),
        "SOURCE_ID" NUMBER(15,0),
        "BILLING_ARRANGEMENT" NUMBER(12,0),
        "GUIDING_RESOURCE_ID" VARCHAR2(64),
        "GUIDING_RESOURCE_TYPE" VARCHAR2(4),
        "ACCOUNT" NUMBER(12,0),
        "PAY_CHANNEL" NUMBER(9,0),
        "CHARGE_AMOUNT" NUMBER(17,4),
        "DISCOUNT_AMOUNT" NUMBER(17,4),
        "CHARGE_INCL_FREE_ALLOWANCE" NUMBER(17,4),
        "ADDITIONAL_CHARGE" NUMBER(17,4),
        "OFFER_ID" NUMBER(9,0),
        "PP_OFFER_ID" NUMBER(9,0),
        "PRICING_ITEM_ID" NUMBER(9,0),
        "START_PERIOD_CODE" CHAR(1),
        "GMT_TIME" DATE,
        "ORIG_CHARGE_AMOUNT" NUMBER(17,4),
        "SERVICE_TYPE" VARCHAR2(14),
        "EXT_SUBSCRIBER_ID" VARCHAR2(20),
        "OFFER_EFF_DATE" DATE,
        "EVENT_STATE" CHAR(1),
        "IS_IN_RERATE_PROCESS" CHAR(1),
        "FIRST_PROCESS_DATE" DATE,
        "PAYMENT_CATEGORY" VARCHAR2(4),
        "TARGET_CUSTOMER_ID" NUMBER(9,0),
        "PREV_CHARGE_AMOUNT" NUMBER(17,4),
        "RECYCLE_COUNTER" NUMBER(2,0),
        "AUTO_RECYCLE_COUNTER" NUMBER(2,0),
        "RECORD_TYPE" VARCHAR2(5),
        "ERROR_FILE_ID" NUMBER(15,0),
        "SUBMARKET_CODE" VARCHAR2(3),
        "CALL_DIRECTION" CHAR(1),
        "ROAMING_IND" CHAR(1),
        "CALL_TYPE" CHAR(1),
        "CHARGE_CODE" VARCHAR2(16),
        "COUNTRY_CODE" VARCHAR2(3),
        "CALL_TERM_CODE" CHAR(1),
        "TOTAL_VOLUME" NUMBER(13,4),
        "ROUNDED_VOLUME" NUMBER(13,4),
        "FREE_ALLOWED_VOLUME" NUMBER(13,4),
        "FREE_INCL_ALLOWED_VOLUME" NUMBER(13,4),
        "CHARGED_VOLUME" NUMBER(13,4),
        "CARRIER_ID" VARCHAR2(3),
        "ZONE_NAME" VARCHAR2(13),
        "ZONE_ID" VARCHAR2(3),
        "CONTENT_TYPE_CODE" VARCHAR2(3),
        "NUMBER_OF_OCCURRENCES" NUMBER(9,0),
        "FREE_ALLOWED_OCCURRENCE" NUMBER(9,0),
        "FREE_INCL_ALLOWED_OCCURRENCE" NUMBER(9,0),
        "CHARGED_OCCURRENCES" NUMBER(9,0),
        "CONTENT_PARTNER_ID" VARCHAR2(5),
        "CONTENT_PARTNER_NAME" VARCHAR2(50),
        "CONTENT_NAME" VARCHAR2(100),
        "CONTENT_ID" VARCHAR2(15),
        "TRANSACTION_TYPE" CHAR(1),
        "PACKAGE_ID" VARCHAR2(30),
        "AGGR_PARTNER_ID" VARCHAR2(5),
        "CONTENT_DESCRIPTION" VARCHAR2(20),
        "SPONSORED_CODE" VARCHAR2(20),
        "RESELLER_ID" VARCHAR2(20),
        "SHORT_CODE" VARCHAR2(9),
        "SUBSCRIBER_DOLLAR_AMOUNT" NUMBER(13,4),
        "SPONSORED_DOLLAR_AMOUNT" NUMBER(13,4),
        "CAMPAIGN_ID" VARCHAR2(15),
        "MDN" VARCHAR2(15),
        "PCF_ID" VARCHAR2(39),
        "FILE_NAME" VARCHAR2(100),
        "CREATION_DATETIME" DATE,
        "PARTITION_NO" NUMBER(2,0),
        "SUB_PARTITION_NO" VARCHAR2(20),
        "LOAD_DATE" DATE DEFAULT SYSDATE,
        "CREDIT_INDICATOR" CHAR(1),
        "ORIG_FILE_ID" NUMBER(15,0),
        "SERVICE_OPTION" NUMBER(10,0),
        "ROAMING_TYPE" CHAR(3),
        "IPDR_PROD_TYPE" VARCHAR2(3),
        "USAGE_TYPE" CHAR(1),
        "EVENT_END_TIME" DATE,
        "USAGE_QTY" NUMBER(10,0),
        "RECORD_ID" NUMBER(10,0),
        "CALL_DIRC_CD" CHAR(1),
        "SOURCE_IP" VARCHAR2(50),
        "IP_TECH" CHAR(1),
        "ACTIVE_TIME" NUMBER(11,2),
        "CALL_ID" NUMBER(15,0),
        "NUM_BILL_PARTICIPANT" NUMBER(4,0),
        "NUM_PARTICIPANT" NUMBER(4,0),
        "CITY" VARCHAR2(30),
        "STATE" VARCHAR2(30),
        "PARTICIPANT_ST_TIME" DATE,
        "PARTICIPANT_END_TIME" DATE,
        "INTEROP" NUMBER(1,0),
        "AMT_PARAM1" NUMBER(9,0),
        "EVENT_PARAM2" CHAR(1),
        "EVENT_PARAM3" VARCHAR2(20),
        "DT_PARAM4" DATE,
        "AMT_PARAM5" NUMBER(9,0),
        "EVENT_PARAM6" CHAR(1),
        "EVENT_PARAM7" VARCHAR2(20),
        "DT_PARAM8" DATE,
        "AMT_PARAM9" NUMBER(9,0),
        "EVENT_PARAM10" CHAR(1),
        "EVENT_PARAM11" VARCHAR2(20),
        "DT_PARAM12" DATE,
        "CLIENT_ADDRESS" VARCHAR2(64),
        "PARTICIPANT_RESOURCE" VARCHAR2(64),
        "INTRASTATE_INDICATOR" VARCHAR2(5),
        "CHATROOM_ID" VARCHAR2(15),
        "DEVICE_TYPE" VARCHAR2(20),
        "PROCESS_DATE" DATE,
        "MSC_ID" VARCHAR2(12),
        "COMP_TUNNEL_IND" VARCHAR2(1),
        "RELEASE_IND" VARCHAR2(1),
        "USER_ZONE" VARCHAR2(4),
        "GMT_OFFSET" VARCHAR2(5),
        "MOBILE_STATION_ID" VARCHAR2(15),
        "NETWORK_ACCESS_ID" VARCHAR2(64),
        "NETWORK_ELEMENT_ID" VARCHAR2(6),
        "RPDR_SERVICE_CODE" VARCHAR2(32),
        "NETWORK_OWNER" VARCHAR2(3),
        "RPDR_USAGE_TYPE_CODE" VARCHAR2(2),
        "ADD_PARTICIPANT_NUM" VARCHAR2(64),
        "CONTENT_TYPE_IND" VARCHAR2(4),
        "SERVING_NETWORK" VARCHAR2(1),
        "RATING_TYPE" VARCHAR2(1),
        "ZERO_RATED_USAGE" NUMBER(13,4),
        "CALL_DESTINATION_TYPE" CHAR(1),
        "URL" VARCHAR2(30),
        "TOLL_FREE_NUMBER" VARCHAR2(30),
        "SHORT_CONTENT_TYPE" VARCHAR2(5),
        "DUMMY_CALL_8" VARCHAR2(1),
        "DUMMY_CALL_9" VARCHAR2(1),
        "DUMMY_CALL_10" VARCHAR2(1),
        "DUMMY_CALL_11" VARCHAR2(1),
        "DUMMY_CALL_12" VARCHAR2(1),
        "DUMMY_CALL_13" VARCHAR2(1),
        "DUMMY_CALL_14" VARCHAR2(1),
        "DUMMY_CALL_15" VARCHAR2(1),
        "DUMMY_CALL_16" VARCHAR2(1),
        "DUMMY_CALL_17" VARCHAR2(1),
        "DUMMY_CALL_18" VARCHAR2(1),
        "DUMMY_CALL_19" VARCHAR2(1),
        "DUMMY_CALL_20" VARCHAR2(1)
   ) tablespace WDM_DATA_IDX;
     CREATE TABLE "SPWSCDRADM"."EVENT_USAGE"
   (    "EVENT_ENTITY_NAME" VARCHAR2(20),
        "CYCLE_CODE" NUMBER(4,0),
        "CYCLE_MONTH" NUMBER(2,0),
        "CYCLE_YEAR" NUMBER(4,0),
        "EVENT_TYPE_ID" NUMBER(9,0),
        "EVENT_ID" NUMBER(18,0),
        "NETWORK_START_TIME" DATE,
        "SERVICE_FILTER" VARCHAR2(6),
        "START_TIME" DATE,
        "SUBSCRIBER_ID" NUMBER(9,0),
        "CUSTOMER_ID" NUMBER(9,0),
        "TARGET_CYCLE_CODE" NUMBER(4,0),
        "SOURCE_ID" NUMBER(15,0),
        "BILLING_ARRANGEMENT" NUMBER(12,0),
        "GUIDING_RESOURCE_ID" VARCHAR2(64),
        "GUIDING_RESOURCE_TYPE" VARCHAR2(4),
        "ACCOUNT" NUMBER(12,0),
        "PAY_CHANNEL" NUMBER(9,0),
        "CHARGE_AMOUNT" NUMBER(17,4),
        "DISCOUNT_AMOUNT" NUMBER(17,4),
        "CHARGE_INCL_FREE_ALLOWANCE" NUMBER(17,4),
        "ADDITIONAL_CHARGE" NUMBER(17,4),
        "OFFER_ID" NUMBER(9,0),
        "PP_OFFER_ID" NUMBER(9,0),
        "PRICING_ITEM_ID" NUMBER(9,0),
        "START_PERIOD_CODE" CHAR(1),
        "GMT_TIME" DATE,
        "ORIG_CHARGE_AMOUNT" NUMBER(17,4),
        "SERVICE_TYPE" VARCHAR2(14),
        "EXT_SUBSCRIBER_ID" VARCHAR2(20),
        "OFFER_EFF_DATE" DATE,
        "EVENT_STATE" CHAR(1),
        "IS_IN_RERATE_PROCESS" CHAR(1),
        "FIRST_PROCESS_DATE" DATE,
        "PAYMENT_CATEGORY" VARCHAR2(4),
        "TARGET_CUSTOMER_ID" NUMBER(9,0),
        "PREV_CHARGE_AMOUNT" NUMBER(17,4),
        "RECYCLE_COUNTER" NUMBER(2,0),
        "AUTO_RECYCLE_COUNTER" NUMBER(2,0),
        "RECORD_TYPE" VARCHAR2(5),
        "ERROR_FILE_ID" NUMBER(15,0),
        "SUBMARKET_CODE" VARCHAR2(3),
        "CALL_DIRECTION" CHAR(1),
        "ROAMING_IND" CHAR(1),
        "CALL_TYPE" CHAR(1),
        "CHARGE_CODE" VARCHAR2(16),
        "COUNTRY_CODE" VARCHAR2(3),
        "CALL_TERM_CODE" CHAR(1),
        "TOTAL_VOLUME" NUMBER(13,4),
        "ROUNDED_VOLUME" NUMBER(13,4),
        "FREE_ALLOWED_VOLUME" NUMBER(13,4),
        "FREE_INCL_ALLOWED_VOLUME" NUMBER(13,4),
        "CHARGED_VOLUME" NUMBER(13,4),
        "CARRIER_ID" VARCHAR2(3),
        "ZONE_NAME" VARCHAR2(13),
        "ZONE_ID" VARCHAR2(3),
        "CONTENT_TYPE_CODE" VARCHAR2(3),
        "NUMBER_OF_OCCURRENCES" NUMBER(9,0),
        "FREE_ALLOWED_OCCURRENCE" NUMBER(9,0),
        "FREE_INCL_ALLOWED_OCCURRENCE" NUMBER(9,0),
        "CHARGED_OCCURRENCES" NUMBER(9,0),
        "CONTENT_PARTNER_ID" VARCHAR2(5),
        "CONTENT_PARTNER_NAME" VARCHAR2(50),
        "CONTENT_NAME" VARCHAR2(100),
        "CONTENT_ID" VARCHAR2(15),
        "TRANSACTION_TYPE" CHAR(1),
        "PACKAGE_ID" VARCHAR2(30),
        "AGGR_PARTNER_ID" VARCHAR2(5),
        "CONTENT_DESCRIPTION" VARCHAR2(20),
        "SPONSORED_CODE" VARCHAR2(20),
        "RESELLER_ID" VARCHAR2(20),
        "SHORT_CODE" VARCHAR2(9),
        "SUBSCRIBER_DOLLAR_AMOUNT" NUMBER(13,4),
        "SPONSORED_DOLLAR_AMOUNT" NUMBER(13,4),
        "CAMPAIGN_ID" VARCHAR2(15),
        "MDN" VARCHAR2(15),
        "PCF_ID" VARCHAR2(39),
        "FILE_NAME" VARCHAR2(100),
        "CREATION_DATETIME" DATE,
        "PARTITION_NO" NUMBER(3,0),
        "SUB_PARTITION_NO" VARCHAR2(20),
        "LOAD_DATE" DATE DEFAULT SYSDATE,
        "CREDIT_INDICATOR" CHAR(1),
        "ORIG_FILE_ID" NUMBER(15,0),
        "SERVICE_OPTION" NUMBER(10,0),
        "ROAMING_TYPE" CHAR(3),
        "IPDR_PROD_TYPE" VARCHAR2(3),
        "USAGE_TYPE" CHAR(1),
        "EVENT_END_TIME" DATE,
        "USAGE_QTY" NUMBER(10,0),
        "RECORD_ID" NUMBER(10,0),
        "CALL_DIRC_CD" CHAR(1),
        "SOURCE_IP" VARCHAR2(50),
        "IP_TECH" CHAR(1),
        "ACTIVE_TIME" NUMBER(11,2),
        "CALL_ID" NUMBER(15,0),
        "NUM_BILL_PARTICIPANT" NUMBER(4,0),
        "NUM_PARTICIPANT" NUMBER(4,0),
        "CITY" VARCHAR2(30),
        "STATE" VARCHAR2(30),
        "PARTICIPANT_ST_TIME" DATE,
        "PARTICIPANT_END_TIME" DATE,
        "INTEROP" NUMBER(1,0),
        "AMT_PARAM1" NUMBER(9,0),
        "EVENT_PARAM2" CHAR(1),
        "EVENT_PARAM3" VARCHAR2(20),
        "DT_PARAM4" DATE,
        "AMT_PARAM5" NUMBER(9,0),
        "EVENT_PARAM6" CHAR(1),
        "EVENT_PARAM7" VARCHAR2(20),
        "DT_PARAM8" DATE,
        "AMT_PARAM9" NUMBER(9,0),
        "EVENT_PARAM10" CHAR(1),
        "EVENT_PARAM11" VARCHAR2(20),
        "DT_PARAM12" DATE,
        "CLIENT_ADDRESS" VARCHAR2(64),
        "PARTICIPANT_RESOURCE" VARCHAR2(64),
        "INTRASTATE_INDICATOR" VARCHAR2(5),
        "CHATROOM_ID" VARCHAR2(15),
        "DEVICE_TYPE" VARCHAR2(20),
        "PROCESS_DATE" DATE,
        "MSC_ID" VARCHAR2(12),
        "COMP_TUNNEL_IND" VARCHAR2(1),
        "RELEASE_IND" VARCHAR2(1),
        "USER_ZONE" VARCHAR2(4),
        "GMT_OFFSET" VARCHAR2(5),
        "MOBILE_STATION_ID" VARCHAR2(15),
        "NETWORK_ACCESS_ID" VARCHAR2(64),
        "NETWORK_ELEMENT_ID" VARCHAR2(6),
        "RPDR_SERVICE_CODE" VARCHAR2(6),
        "NETWORK_OWNER" VARCHAR2(3),
        "RPDR_USAGE_TYPE_CODE" VARCHAR2(2),
        "ADD_PARTICIPANT_NUM" VARCHAR2(64),
        "CONTENT_TYPE_IND" VARCHAR2(4),
        "SERVING_NETWORK" VARCHAR2(1),
        "RATING_TYPE" VARCHAR2(1),
        "ZERO_RATED_USAGE" NUMBER(13,4),
        "CALL_DESTINATION_TYPE" CHAR(1),
        "DUMMY_CALL_5" VARCHAR2(1),
        "DUMMY_CALL_6" VARCHAR2(1),
        "DUMMY_CALL_7" VARCHAR2(1),
        "DUMMY_CALL_8" VARCHAR2(1),
        "DUMMY_CALL_9" VARCHAR2(1),
        "DUMMY_CALL_10" VARCHAR2(1),
        "DUMMY_CALL_11" VARCHAR2(1),
        "DUMMY_CALL_12" VARCHAR2(1),
        "DUMMY_CALL_13" VARCHAR2(1),
        "DUMMY_CALL_14" VARCHAR2(1),
        "DUMMY_CALL_15" VARCHAR2(1),
        "DUMMY_CALL_16" VARCHAR2(1),
        "DUMMY_CALL_17" VARCHAR2(1),
        "DUMMY_CALL_18" VARCHAR2(1),
        "DUMMY_CALL_19" VARCHAR2(1),
        "DUMMY_CALL_20" VARCHAR2(1)
   ) tablespace WDM_DATA_IDX;
userid="/ as sysdba"
ESTIMATE_ONLY=yes
schemas=CLW_P01_EPM,CLW_P01_EPM_USER,CLW_P01_EPM_RPT,CLW_P01_EPM_PKG
directory=tmp
exclude=job
exclude=statistics
exclude=TRIGGER:"= 'TAL_SET_TIME_ZONE'"
exclude=TRIGGER:"= 'TAL_SET_CUR_SCHEMA'"
exclude=TABLE:"= 'TOAD_PLAN_TABLE'"
exclude=TABLE:"= 'PLAN_TABLE'"
exclude=TABLE:"= 'WP_TASKS_WEEKLY_BACKUP'"
exclude=TABLE:"= 'WP_TASKS_MONTHLY_BACKUP'"
exclude=TABLE:"= 'USAGE_LOG_R'"
exclude=TABLE:"= 'CONFIG_VALUE_CLOB_R'"
exclude=INDEX:"IN ('IDX3_AUDIT_LOG','IDX2_AUDIT_LOG','IDX1_AUDIT_LOG','IDX10_AUDIT_LOG','AUDIT_LOG_PK','IDX1_AUDIT_CALL_STACK','PK_AUDIT_CALL_STACK','IDX1_MESSAGE')"
query=CLW_P01_EPM.audit_call_stack:"where 1=0"
query=CLW_P01_EPM.audit_log:"where 1=0"
query=CLW_P01_EPM.audit_log_cflite:"where 1=0"
query=CLW_P01_EPM.audit_log_comp:"where 1=0"
query=CLW_P01_EPM.audit_log_comp_col:"where 1=0"
query=CLW_P01_EPM.audit_log_comp_col_un_val:"where 1=0"
query=CLW_P01_EPM.audit_log_comp_main_pk:"where 1=0"
query=CLW_P01_EPM.audit_log_comp_pk:"where 1=0"
query=CLW_P01_EPM.audit_log_comp_rec_un_val:"where 1=0"
query=CLW_P01_EPM.audit_log_comp_session:"where 1=0"
query=CLW_P01_EPM.audit_log_tlite:"where 1=0"
query=CLW_P01_EPM.audit_log_recovery_msg:"where 1=0"
query=CLW_P01_EPM.audit_log_recovery_attempt:"where 1=0"
query=CLW_P01_EPM.config_field_width:"where 1=0"
query=CLW_P01_EPM.export_run:"where 1=0 "
query=CLW_P01_EPM.field_sec_privs_lookup:"where 1=0"
query=CLW_P01_EPM.field_published_lookup:"where 1=0"
query=CLW_P01_EPM.grid_page_field_width:"where 1=0"
query=CLW_P01_EPM.global_temp:"where 1=0"
query=CLW_P01_EPM.imp_run:"where 1=0"
query=CLW_P01_EPM.imp_run_data_map_sql:"where 1=0"
query=CLW_P01_EPM.imp_run_entity_pk:"where 1=0"
query=CLW_P01_EPM.imp_run_error:"where 1=0"
query=CLW_P01_EPM.imp_run_grid_deltas:"where 1=0"
query=CLW_P01_EPM.imp_run_grid_incr:"where 1=0"
#query=CLW_P01_EPM.imp_run_grid_old:"where 1=0"
query=CLW_P01_EPM.message:"where 1=0"
query=CLW_P01_EPM.notif_queue:"where 1=0"
query=CLW_P01_EPM.notif_queue_attachment:"where 1=0"
query=CLW_P01_EPM.notif_queue_attempt:"where 1=0"
query=CLW_P01_EPM.notif_queue_notif_xref:"where 1=0"
query=CLW_P01_EPM.process_run:"where 1=0"
query=CLW_P01_EPM.report_run:"where 1=0"
query=CLW_P01_EPM.report_run_emailto:"where 1=0"
query=CLW_P01_EPM.report_run_param:"where 1=0"
query=CLW_P01_EPM.report_run_sql:"where 1=0"
query=CLW_P01_EPM.report_run_sql_param:"where 1=0"
query=CLW_P01_EPM.report_run_tb_param:"where 1=0"
query=CLW_P01_EPM.rule_run:"where 1=0"
query=CLW_P01_EPM.rule_run_entity_pk:"where 1=0"
query=CLW_P01_EPM.session_temp:"where 1=0"
query=CLW_P01_EPM.tmp_clob:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_column:"where 1=0"
query=CLW_P01_EPM.usage_log:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_highlight:"where 1=0"
query=CLW_P01_EPM.ulog_filter_opt:"where 1=0"
query=CLW_P01_EPM.ulog_filter_opt_value:"where 1=0"
query=CLW_P01_EPM.ulog_filter_opt_attrib:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_highlight_user:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_sort_column:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_map:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_map_info_column:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_map_leg_color:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_task_over:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_rde:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_rde_field:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_rde_grid:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_rde_task_column:"where 1=0"
query=CLW_P01_EPM.usage_log_load_tab:"where 1=0"
query=CLW_P01_EPM.usage_log_browser:"where 1=0"
query=CLW_P01_EPM.usage_log_sql_param:"where 1=0"
query=CLW_P01_EPM.usage_log_grid_filter:"where 1=0"
query=CLW_P01_EPM.user_used_pwd:"where 1=0"
query=CLW_P01_EPM.view_opt_highlight:"where 1=0"
query=CLW_P01_EPM.xitor_audit:"where 1=0"
query=CLW_P01_EPM.xitor_count:"where 1=0"
query=CLW_P01_EPM.RULE_HTTP_CALL_LOG:"where 1=0"
query=CLW_P01_EPM.ERROR_LOG:"where 1=0"
parallel=8
cluster=N
JOB_NAME=EXPDP_T815856
a) RENAME NPI tables with extension and <table_name>_0505 .
b)  REVOKE the  grants on these listed NPI  tables.
TABLE OWNER                  COUNT(TABLES)
NPIAPPC                             348
NPIFEPC                             257
NPILOAD                              28
NPIOGSC                             799
NPIOPERC                            108
NPIOPERO                            108
NPIPUBSEL                            76
NPIREFC                              47
NPIREFREAD01                        645
NPIREFREAD02                        646
NPIREFREADC                           2
NPIREFTRANS                           4
NPIREFWAIT_READ                       1
NPIREFWORK                          680
NPIREFWORK_READ                       2
NPISECC                               8
NPISECO                              43
NPISEL                                1
set serveroutput on
DECLARE
  cursor c1 is select owner, table_name
  from dba_tables
  where owner in
  (
  'NPIAPPC',
  'NPIFEPC',
  'NPILOAD',
  'NPIOGSC',
  'NPIOPERC',
  'NPIOPERO',
  'NPIPUBSEL',
  'NPIREFC',
  'NPIREFREAD01',
  'NPIREFREAD02',
  'NPIREFREADC',
  'NPIREFTRANS',
  'NPIREFWAIT_READ',
  'NPIREFWORK',
  'NPIREFWORK_READ',
  'NPISECC',
  'NPISECO',
  'NPISEL'
  )
  and table_name not like '%0505'
  and table_name not in (
  'SDR432004A_WC_UPD_070_0505',
  'SDR432004A_WC_07010505_0505',
  'SDR432004A_COMP_07010505_0505');
  v_new_name VARCHAR2(100);
  v_rename_table VARCHAR2(4000);
  i NUMBER;
BEGIN
  FOR v_table in c1
    i := 0;
    LOOP
      v_new_name := v_table.table_name || '_0505';
      v_rename_table := 'ALTER TABLE ' || v_table.owner || '.' || v_table.table_name || ' RENAME TO ' || v_new_name  ;
       IF length(v_new_name) > 30
        THEN
          v_new_name := substr(v_table.table_name,1,24) || i || '_0505';
          v_rename_table := 'ALTER TABLE ' || v_table.owner || '.' || v_table.table_name || ' RENAME TO ' || v_new_name  ;
          UTL_FILE.PUTF(f_utl_file,v_rename_table || ' TAMANHO ' || length(v_new_name) );
          i := i+1;
      ELSE
       -- UTL_FILE.PUTF(f_utl_file,v_rename_table || ' TAMANHO ' || length(v_new_name) );
       end if;
      -- UTL_FILE.PUTF(f_utl_file,v_rename_table);
      -- EXECUTE IMMEDIATE v_rename_table;
    END LOOP;
END;
/
select count(*), owner, table from
(select owner, substr(table_name,1,25) table
  from dba_tables
  where owner in
  (
  'NPIAPPC',
  'NPIFEPC',
  'NPILOAD',
  'NPIOGSC',
  'NPIOPERC',
  'NPIOPERO',
  'NPIPUBSEL',
  'NPIREFC',
  'NPIREFREAD01',
  'NPIREFREAD02',
  'NPIREFREADC',
  'NPIREFTRANS',
  'NPIREFWAIT_READ',
  'NPIREFWORK',
  'NPIREFWORK_READ',
  'NPISECC',
  'NPISECO',
  'NPISEL'
  )
  and table_name not like '%0505'
  and table_name not in (
  'SDR432004A_WC_UPD_070_0505',
  'SDR432004A_WC_07010505_0505',
  'SDR432004A_COMP_07010505_0505'))
  group by owner, table
  having count(*) > 1;
ALTER TABLE NPIOGSC.SDR432004A_WC_UPD_07010505 RENAME TO SDR432004A_WC_UPD_070_0505;
ALTER TABLE NPIOGSC.SDR432004A_WC_07010505 RENAME TO SDR432004A_WC_07010505_0505;
ALTER TABLE NPIOGSC.SDR432004A_COMP_07010505 RENAME TO SDR432004A_COMP_07010505_0505;
SQL> ALTER TABLE NPIOGSC.SDR432004A_WC_UPD_07010505 RENAME TO SDR432004A_WC_UPD_070_0505;
Table altered.
SQL> ALTER TABLE NPIOGSC.SDR432004A_WC_07010505 RENAME TO SDR432004A_WC_07010505_0505;
Table altered.
SQL> ALTER TABLE NPIOGSC.SDR432004A_COMP_07010505 RENAME TO SDR432004A_COMP_07010505_0505;
Table altered.
select owner, table_name
  from dba_tables
  where owner in
  (
  'NPIAPPC',
  'NPIFEPC',
  'NPILOAD',
  'NPIOGSC',
  'NPIOPERC',
  'NPIOPERO',
  'NPIPUBSEL',
  'NPIREFC',
  'NPIREFREAD01',
  'NPIREFREAD02',
  'NPIREFREADC',
  'NPIREFTRANS',
  'NPIREFWAIT_READ',
  'NPIREFWORK',
  'NPIREFWORK_READ',
  'NPISECC',
  'NPISECO',
  'NPISEL'
  )
;
Depois do procedimento, atualizar o ticket e enviar Renee
 SFWAPP-BOOST-PLTFRM-OPS
emctl status agent
emctl stop agent
emctl status agent
cd /oracle/g01/software/agent12c/core/12.1.0.2.0/sysman/install
perl ./AgentDeinstall.pl -agentHome /oracle/g01/software/agent12c/core/12.1.0.2.0
select s.username, s.osuser, s.client_identifier, p.spid, machine, case when s.last_call_et > 28800 then 'more than 8 hours' else
       case when s.last_call_et > 14400 then 'more than 4 hours' else
       case when s.last_call_et >  7200 then 'more than 2 hours' else
       case when s.last_call_et >  3600 then 'more than 1 hour' else
       case when s.last_call_et >  1800 then 'more than 30 minutes' else
       case when s.last_call_et >   600 then 'more than 10 minutes' end end end end end end "# Sessions for", count(*)
  from gv$session s join gv$process p on (s.paddr = p.addr AND s.inst_id = p.inst_id)
 where s.status = 'ACTIVE'
   AND s.last_call_et > 600
   AND s.username not in ('SYS','PUBLIC')
   AND s.username is not null
 group by s.username, s.osuser,  s.client_identifier, p.spid, machine , case when s.last_call_et > 28800 then 'more than 8 hours' else
       case when s.last_call_et > 14400 then 'more than 4 hours' else
       case when s.last_call_et > 7200 then 'more than 2 hours' else
       case when s.last_call_et > 3600 then 'more than 1 hour' else
       case when s.last_call_et > 1800 then 'more than 30 minutes' else
       case when s.last_call_et >  600 then 'more than 10 minutes' end end end end end end;
select s.inst_id, s.sid, s.serial#, s.username, s.sql_id, (trunc(s.last_call_et/60/60) ||':'||mod(ROUND(s.last_call_et/60),60) || ':' || MOD(s.last_call_et,60)) as Time_running, machine
FROM gv$session s join gv$process p on (s.paddr = p.addr AND s.inst_id = p.inst_id) where s.status = 'ACTIVE' and s.last_call_et/60/60>=4 and s.username <> 'SYS' and s.type <> 'BACKGROUND'
and s.machine in
('pvmki644.corp.sprint.com','pvmki645.corp.sprint.com','pvmki646.corp.sprint.com','pvmki647.corp.sprint.com','pvmki648.corp.sprint.com','pvmki649.corp.sprint.com')
order by s.last_call_et;
select sql_id, sql_text from DBA_HIST_SQLTEXT
where sql_id in (select distinct sql_id from gv$session where status = 'ACTIVE' and last_call_et/60/60>=4 and username <> 'SYS' and type <> 'BACKGROUND'
and machine in
('pvmki644.corp.sprint.com','pvmki645.corp.sprint.com','pvmki646.corp.sprint.com','pvmki647.corp.sprint.com','pvmki648.corp.sprint.com','pvmki649.corp.sprint.com')
);
lter session set db_file_multiblock_read_count=128;
spool create_missing_idx.log
  CREATE INDEX "CLW_P01_EPM"."IDX1_AUDIT_LOG" ON "CLW_P01_EPM"."AUDIT_LOG" ("TABLE_NAME", "COLUMN_NAME", "PK", "ACTION", "USER_ID")
  PCTFREE 2 INITRANS 10 MAXTRANS 255  LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SVADM_SSD_INDX"  LOCAL
 (PARTITION "PART_INIT"
  PCTFREE 2 INITRANS 10 MAXTRANS 255 LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SVADM_SSD_INDX" )
/
  CREATE INDEX "CLW_P01_EPM"."IDX3_AUDIT_LOG" ON "CLW_P01_EPM"."AUDIT_LOG" ("TS", "FIELD_CODE", "TABLE_NAME", "COLUMN_NAME")
  PCTFREE 2 INITRANS 10 MAXTRANS 255  LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SVADM_SSD_INDX"  LOCAL
 (PARTITION "PART_INIT"
  PCTFREE 2 INITRANS 10 MAXTRANS 255 LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SVADM_SSD_INDX" )
/
  CREATE INDEX "CLW_P01_EPM"."IDX1_AUDIT_CALL_STACK" ON "CLW_P01_EPM"."AUDIT_CALL_STACK" ("ROUTINE_START_TIME")
  PCTFREE 2 INITRANS 10 MAXTRANS 255  LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SVADM_SSD_INDX"  LOCAL
 (PARTITION "PART_INIT"
  PCTFREE 2 INITRANS 10 MAXTRANS 255 LOGGING
  STORAGE( INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SVADM_SSD_INDX" )
/
  CREATE INDEX "CLW_P01_EPM"."IDX10_AUDIT_LOG" ON "CLW_P01_EPM"."AUDIT_LOG" ("TS", "ACTION", "TABLE_NAME", "AUDIT_LOG_ID")
  PCTFREE 2 INITRANS 10 MAXTRANS 255  LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SVADM_SSD_INDX"  LOCAL
 (PARTITION "PART_INIT"
  PCTFREE 2 INITRANS 10 MAXTRANS 255 LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SVADM_SSD_INDX" )
/
  CREATE INDEX "CLW_P01_EPM"."IDX1_MESSAGE" ON "CLW_P01_EPM"."MESSAGE" ("TS")
  PCTFREE 10 INITRANS 2 MAXTRANS 255
  STORAGE(
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT) LOCAL
 (PARTITION "INIT"
  PCTFREE 10 INITRANS 2 MAXTRANS 255 LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SVADM_DATA" )
/
spool off
exit;
SELECT
DISTINCT
TABLE_NAME
FROM DBA_LOG_GROUPS
where table_name in
(
'BUYBACK_DEVICE_INFO',
'EXTR_ORDR_CHNL_INFO',
'ORDER_BILLING', 'ORDER_COMMENTS',
'ORDER_GIVEBACK_DEVICE_INFO',
'ORDER_IB_INFO',
'ORDER_INVOICE',
'ORDER_LINE_DETAILS',
'ORDER_LINE_SOC', 'ORDER_MASTER', 'ORDER_RMA_INFO', 'ORDER_SHIPPING', 'ORDER_SHIPPING_LINE', 'ORDER_TYPE_DESC', 'PHONE_AND_ACCESSORY', 'PHONE_CONFIG'
)
and owner='OEMADM';
                                                DOCUMENT_FACT
                                                P12
                                                SYS_P301
                                                SYS_P341
                                                SYS_P361
                                                SYS_P381
                                                SYS_P421
alter table BRITEBILL.DOCUMENT_FACT drop partition  P12;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P301;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P341;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P361;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P381;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P421;
                                                DOCUMENTMETADATA
                                                P10
                                                SYS_P321
                                                SYS_P344
                                                SYS_P364
                                                SYS_P401
                                                SYS_P442
tables=BRITEBILL.DOCUMENT_FACT:P12, BRITEBILL.DOCUMENT_FACT:SYS_P301, BRITEBILL.DOCUMENT_FACT:SYS_P341, BRITEBILL.DOCUMENT_FACT:SYS_P361, BRITEBILL.DOCUMENT_FACT:SYS_P381,
BRITEBILL.DOCUMENT_FACT:SYS_P421, BRITEBILL.DOCUMENTMETADATA:P9, BRITEBILL.DOCUMENTMETADATA:P10, BRITEBILL.DOCUMENTMETADATA:SYS_P321,
BRITEBILL.DOCUMENTMETADATA:SYS_P344, BRITEBILL.DOCUMENTMETADATA:SYS_P364, BRITEBILL.DOCUMENTMETADATA:SYS_P401, BRITEBILL.DOCUMENTMETADATA:SYS_P442
                                                HISTORICCHARGES
                                                P13
                                                SYS_P223
                                                SYS_P243
                                                SYS_P263
tables=BRITEBILL.HISTORICUSAGE:P10, BRITEBILL.HISTORICUSAGE:SYS_P181, BRITEBILL.HISTORICUSAGE:SYS_P222, BRITEBILL.HISTORICUSAGE:SYS_P242, BRITEBILL.HISTORICUSAGE:SYS_P262,
BRITEBILL.HISTORICCHARGES:P6,BRITEBILL.HISTORICCHARGES:P7, BRITEBILL.HISTORICCHARGES:P13, BRITEBILL.HISTORICCHARGES:SYS_P223,BRITEBILL.HISTORICCHARGES:SYS_P243, BRITEBILL.HISTORICCHARGES:SYS_P263
                                                HISTORICUSAGE
                                                P10
                                                SYS_P181
                                                SYS_P222
                                                SYS_P242
                                                SYS_P262
alter table BRITEBILL.DOCUMENT_FACT truncate partition P12;
alter table BRITEBILL.DOCUMENT_FACT rename partition P12 to INITIAL_EMPTY_PARTITION;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P301;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P341;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P361;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P381;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P421;
alter table BRITEBILL.DOCUMENTMETADATA truncate partition P10;
alter table BRITEBILL.DOCUMENTMETADATA rename partition P10 to INITIAL_EMPTY_PARTITION;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P321;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P344;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P364;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P401;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P442;
alter table BRITEBILL.HISTORICCHARGES truncate partition P13;
alter table BRITEBILL.HISTORICCHARGES rename partition P13 to INITIAL_EMPTY_PARTITION;
alter table BRITEBILL.HISTORICCHARGES drop partition SYS_P223;
alter table BRITEBILL.HISTORICCHARGES drop partition SYS_P243;
alter table BRITEBILL.HISTORICCHARGES drop partition SYS_P263;
alter table BRITEBILL.HISTORICUSAGE truncate partition P10;
alter table BRITEBILL.HISTORICUSAGE rename partition P10 to INITIAL_EMPTY_PARTITION;
alter table BRITEBILL.HISTORICUSAGE drop partition SYS_P181;
alter table BRITEBILL.HISTORICUSAGE drop partition SYS_P222;
alter table BRITEBILL.HISTORICUSAGE drop partition SYS_P242;
alter table BRITEBILL.HISTORICUSAGE drop partition SYS_P262;
ICEP1012:oracle@plsaa972>cat rebuild_indexes_1.sql
alter index BRITEBILL.REF_INDEX_HIST_C_DAC_CODE rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_C_DAC_CODE noparallel logging;
alter index BRITEBILL.REF_INDEX_HIST_CHARGES_DATE rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_CHARGES_DATE noparallel logging;
alter index BRITEBILL.REF_INDEX_HIST_CHARGES_DOC rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_CHARGES_DOC noparallel logging;
alter index BRITEBILL.REF_INDEX_HIST_C_BAN_CODE rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_C_BAN_CODE noparallel logging;
[/oracle/g01/bkup02/T815856]:
ICEP1012:oracle@plsaa972>cat rebuild_indexes_2.sql
alter index BRITEBILL.REF_INDEX_HIST_U_DAC_CODE rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_U_DAC_CODE noparallel logging;
alter index BRITEBILL.REF_INDEX_HIST_USAGE_DATE rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_USAGE_DATE noparallel logging;
alter index BRITEBILL.REF_INDEX_HIST_USAGE_DOC rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_USAGE_DOC noparallel logging;
alter index BRITEBILL.REF_INDEX_HIST_USAGE_BAN rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_USAGE_BAN noparallel logging;
alter index BRITEBILL.REF_INDEX_HIST_U_BAN_CODE rebuild parallel 8 nologging;
alter index BRITEBILL.REF_INDEX_HIST_U_BAN_CODE noparallel logging;
[/oracle/g01/bkup02/T815856]:
ICEP1012:oracle@plsaa972>cat rebuild_indexes_3.sql
alter index BRITEBILL.DOCUMENTMETADATA_PK rebuild parallel 8 nologging;
alter index BRITEBILL.DOCUMENTMETADATA_PK noparallel logging;
alter index BRITEBILL.FK7E61014A2765BF58_IDX rebuild parallel 8 nologging;
alter index BRITEBILL.FK7E61014A2765BF58_IDX noparallel logging;
alter index BRITEBILL.FK_FACT_DOCUMENT_IDX rebuild parallel 8 nologging;
alter index BRITEBILL.FK_FACT_DOCUMENT_IDX noparallel logging;
select sum(bytes)/1048576, segment_name from dba_segments where segment_name in
(select index_name from dba_indexes where table_name= 'DOCUMENTDATASTOREITEM')
group by segment_name order by 1;
CREATE TABLE BILL_STG AS SELECT * FROM BILL WHERE ID > 45000000000;
CREATE TABLE DOCUMENT_STG AS SELECT * FROM DOCUMENT WHERE ID > 45000000000;
CREATE TABLE DOCUMENTDATASTOREITEM_STG AS SELECT * FROM DOCUMENTDATASTOREITEM WHERE ID > 45000000000;
30 + 55 + 15 = 95 = 100
spool ./logs/initial_drop.log
alter table BRITEBILL.DOCUMENTDATASTOREITEM drop constraint 'SECTION_IDX';
alter table BRITEBILL.DOCUMENTDATASTOREITEM drop constraint 'SYS_C00486500';
alter table BRITEBILL.DOCUMENTDATASTOREITEM drop constraint 'SYS_C00486600';
alter table BRITEBILL.DOCUMENTDATASTOREITEM drop constraint 'SYS_C00486700';
alter table BRITEBILL.DOCUMENTDATASTOREITEM drop primary key;
alter table BRITEBILL.DOCUMENT drop constraint 'FK_40R9FU217EOHO6Y84FJN9QAUD';
alter table BRITEBILL.DOCUMENT drop constraint 'FK_L6OM9J438E4F08KLRPMKUDT8L';
alter table BRITEBILL.DOCUMENT drop constraint 'FK_O87KX3FG7NDCGI5L9ETBEASDE';
alter table BRITEBILL.DOCUMENT drop constraint 'SYS_C0050190';
alter table BRITEBILL.DOCUMENT drop constraint 'SYS_C0050200';
alter table BRITEBILL.DOCUMENT drop constraint 'SYS_C0050210';
alter table BRITEBILL.DOCUMENT drop constraint 'SYS_C0050220';
alter table BRITEBILL.DOCUMENT drop constraint 'SYS_C0050230';
alter table BRITEBILL.DOCUMENT drop constraint 'SYS_C0050240';
alter table BRITEBILL.DOCUMENT drop constraint 'SYS_C0050590';
alter table BRITEBILL.DOCUMENT drop constraint 'SYS_C0050860';
alter table BRITEBILL.DOCUMENT drop constraint 'UK_L6OM9J438E4F08KLRPMKUDT8L';
alter table BRITEBILL.DOCUMENT drop constraint 'UK_N3TST0E3E5F6CKRKK1G5RASB9';
alter table BRITEBILL.DOCUMENT drop constraint 'UK_N3TST0E3E5F6CKRKK1G5RASB9';
alter table BRITEBILL.BILL drop constraint 'SYS_C0038720';
alter table BRITEBILL.BILL drop primary key;
drop index BRITEBILL.SECTION_IDX;
drop index BRITEBILL.SUBTYP_FOR_DOCS_IDX;
drop index BRITEBILL.DOCUMENTDATASTOREITEM_PK;
drop index BRITEBILL.FK87F93DCF2765BF58_IDX;
drop index BRITEBILL.TYPE_FOR_DOC_IDX;
drop index BRITEBILL.FK335CD11BE40A3BAC_IDX;
drop index BRITEBILL.INGESTSTATUS_SC_INDEX;
drop index BRITEBILL.FK_DOCUMENT_BATCH_IDX;
drop index BRITEBILL.SYS_C004080;
drop index BRITEBILL.UK_L6OM9J438E4F08KLRPMKUDT8L;
drop index BRITEBILL.CONTENTID_SC_INDEX;
drop index BRITEBILL.UK_N3TST0E3E5F6CKRKK1G5RASB9;
drop index BRITEBILL.ISSUE_DATE_SC_INDEX;
drop index BRITEBILL.BILL_PK;
spool off
exit;
*/
--BILL
--CTAS
create table BRITEBILL.BILL_STG tablespace BB_DATA AS SELECT /*+parallel(8) */ * FROM BRITEBILL.BILL WHERE ID > 45000000000;
--Create Indexes
 CREATE UNIQUE INDEX "BRITEBILL"."BILL_PK_STG" ON "BRITEBILL"."BILL_STG" ("ID")
 PCTFREE 10 INITRANS 10 MAXTRANS 255
 NOLOGGING PARALLEL 8
 TABLESPACE "BB_INDX";
 ALTER INDEX "BRITEBILL"."BILL_PK_STG" LOGGING NOPARALLEL;
 CREATE INDEX "BRITEBILL"."ISSUE_DATE_SC_INDEX_STG" ON "BRITEBILL"."BILL_STG" ("ISSUE_DATE")
 PCTFREE 10 INITRANS 2 MAXTRANS 255
 NOLOGGING PARALLEL 8
 TABLESPACE "BB_INDX";
 ALTER INDEX "BRITEBILL"."ISSUE_DATE_SC_INDEX_STG" LOGGING NOPARALLEL;
-- Create Constraints
ALTER TABLE "BRITEBILL"."BILL_STG" MODIFY ("ID" CONSTRAINT "BILL_ID_NN" NOT NULL ENABLE NOVALIDATE);
ALTER TABLE "BRITEBILL"."BILL_STG" ADD CONSTRAINT "BILL_PK_STG" PRIMARY KEY ("ID") USING INDEX ;
--DOCUMENT
create table BRITEBILL.DOCUMENT_STG  tablespace BB_DATA AS SELECT /*+parallel(8) */ * FROM BRITEBILL.DOCUMENT WHERE ID > 45000000000;
--Create Indexes
CREATE UNIQUE INDEX "BRITEBILL"."SYS_C004080_STG" ON "BRITEBILL"."DOCUMENT_STG" ("ID")
PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
NOLOGGING PARALLEL 8
TABLESPACE "BB_INDX";
ALTER INDEX BRITEBILL.SYS_C004080_STG LOGGING NOPARALLEL;
CREATE UNIQUE INDEX "BRITEBILL"."UK_N3TST0E3E5F6CKRKK1G5RASB9_S" ON "BRITEBILL"."DOCUMENT_STG" ("CONTENTID", "BATCH")
PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
NOLOGGING PARALLEL 8
TABLESPACE "BB_INDX";
ALTER INDEX BRITEBILL.UK_N3TST0E3E5F6CKRKK1G5RASB9_S LOGGING NOPARALLEL;
CREATE UNIQUE INDEX "BRITEBILL"."UK_L6OM9J438E4F08KLRPMKUDT8L_S" ON "BRITEBILL"."DOCUMENT_STG" ("BILL_DOCUMENT_ID")
PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
NOLOGGING PARALLEL 8
TABLESPACE "BB_INDX";
ALTER INDEX BRITEBILL.UK_L6OM9J438E4F08KLRPMKUDT8L_S LOGGING NOPARALLEL;
CREATE INDEX "BRITEBILL"."INGESTSTATUS_SC_INDEX_STG" ON "BRITEBILL"."DOCUMENT_STG" ("INGESTSTATUS")
PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
NOLOGGING PARALLEL 8
TABLESPACE "BB_INDX";
ALTER INDEX BRITEBILL.INGESTSTATUS_SC_INDEX_STG LOGGING NOPARALLEL;
CREATE INDEX "BRITEBILL"."FK335CD11BE40A3BAC_IDX_STG" ON "BRITEBILL"."DOCUMENT_STG" ("SERVICE_DOCUMENT_ID")
PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
NOLOGGING PARALLEL 8
TABLESPACE "BB_INDX";
ALTER INDEX BRITEBILL.FK335CD11BE40A3BAC_IDX_STG LOGGING NOPARALLEL;
CREATE INDEX "BRITEBILL"."CONTENTID_SC_INDEX_STG" ON "BRITEBILL"."DOCUMENT_STG" ("CONTENTID")
PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
NOLOGGING PARALLEL 8
TABLESPACE "BB_INDX";
ALTER INDEX BRITEBILL.CONTENTID_SC_INDEX_STG LOGGING NOPARALLEL;
CREATE INDEX "BRITEBILL"."FK_DOCUMENT_BATCH_IDX_STG" ON "BRITEBILL"."DOCUMENT_STG" ("BATCH")
PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
NOLOGGING PARALLEL 8
TABLESPACE "BB_INDX";
ALTER INDEX BRITEBILL.FK_DOCUMENT_BATCH_IDX_STG LOGGING NOPARALLEL;
-- Create Constraints
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" MODIFY ("ID" CONSTRAINT "DOCUMENT_ID_NN" NOT NULL ENABLE NOVALIDATE);
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" MODIFY ("FIDELITY" CONSTRAINT "DOCUMENT_FID_NN" NOT NULL ENABLE NOVALIDATE);
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" MODIFY ("INGESTSTATUS" CONSTRAINT "DOCUMENT_INGES_NN" NOT NULL ENABLE NOVALIDATE);
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" MODIFY ("BATCH" CONSTRAINT "DOCUMENT_BATCH_NN" NOT NULL ENABLE NOVALIDATE);
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" MODIFY ("SERVICE_DOCUMENT_ID" CONSTRAINT "DOCUMENT_SDID_NN" NOT NULL ENABLE NOVALIDATE);
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" MODIFY ("DUPLICATES" CONSTRAINT "DOCUMENT_DUP_NN" NOT NULL ENABLE NOVALIDATE);
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" ADD CONSTRAINT "UK_L6OM9J438E4F08KLRPMKUDT8L_S" UNIQUE ("BILL_DOCUMENT_ID") USING INDEX ENABLE NOVALIDATE;
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" ADD CONSTRAINT "UK_N3TST0E3E5F6CKRKK1G5RASB9_S" UNIQUE ("CONTENTID", "BATCH") USING INDEX ENABLE NOVALIDATE;
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" MODIFY ("LARGE" CONSTRAINT "DOCUMENT_LARGE_NN" NOT NULL ENABLE NOVALIDATE);
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" MODIFY ("VERSIONEDCONTENTFOLDER" CONSTRAINT "DOCUMENT_VERCONT_NN" NOT NULL ENABLE NOVALIDATE);
--DOCUMENTDATSTOREITEM
create table BRITEBILL.DOCUMENTDATASTOREITEM_STG tablespace BB_DATA AS SELECT /*+parallel(8) */  * FROM BRITEBILL.DOCUMENTDATASTOREITEM WHERE ID > 45000000000;
-- Indexes
CREATE INDEX "BRITEBILL"."TYPE_FOR_DOC_IDX_STG" ON "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" ("DOCUMENT_ID", "type")
PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
NOLOGGING PARALLEL 8
TABLESPACE "BB_INDX";
ALTER INDEX BRITEBILL.TYPE_FOR_DOC_IDX_STG LOGGING NOPARALLEL;
CREATE INDEX "BRITEBILL"."SUBTYP_FOR_DOCS_IDX_STG" ON "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" ("subtype")
PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
NOLOGGING PARALLEL 8
TABLESPACE "BB_INDX";
ALTER INDEX BRITEBILL.SUBTYP_FOR_DOCS_IDX_STG LOGGING NOPARALLEL;
CREATE INDEX "BRITEBILL"."SECTION_IDX_STG" ON "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" ("SECTION_ID")
PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
NOLOGGING PARALLEL 8
TABLESPACE "BB_INDX";
ALTER INDEX BRITEBILL.SECTION_IDX_STG LOGGING NOPARALLEL;
CREATE UNIQUE INDEX "BRITEBILL"."DOCUMENTDATASTOREITEM_PK_STG" ON "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" ("ID")
PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
NOLOGGING PARALLEL 8
TABLESPACE "BB_INDX";
ALTER INDEX BRITEBILL.DOCUMENTDATASTOREITEM_PK_STG LOGGING NOPARALLEL;
CREATE INDEX "BRITEBILL"."FK87F93DCF2765BF58_IDX_STG" ON "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" ("DOCUMENT_ID")
PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
NOLOGGING PARALLEL 8
TABLESPACE "BB_INDX";
ALTER INDEX BRITEBILL.FK87F93DCF2765BF58_IDX_STG LOGGING NOPARALLEL;
-- Constraints
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" MODIFY ("ID" CONSTRAINT "DDS_ID_NN" NOT NULL ENABLE NOVALIDATE);
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" MODIFY ("COMPRESSED" CONSTRAINT "DDS_COMPRESSED_NN" NOT NULL ENABLE NOVALIDATE);
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" MODIFY ("ENCRYPTED" CONSTRAINT "DDS_ENCRYPTED_NN" NOT NULL ENABLE NOVALIDATE);
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" MODIFY ("IS_ACTIVE" CONSTRAINT "DDS_ISACTIVE_NN" NOT NULL ENABLE NOVALIDATE);
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" ADD CONSTRAINT "SECTION_IDX_STG" UNIQUE ("SECTION_ID")  USING INDEX  ENABLE NOVALIDATE;
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" ADD CONSTRAINT "DOCUMENTDATASTOREITEM_PK_STG" PRIMARY KEY ("ID") USING INDEX  ENABLE NOVALIDATE;
-- FKs
ALTER TABLE "BRITEBILL"."DOCUMENT"
ADD CONSTRAINT "FK_L6OM9J438E4F08KLRPMKUDT8L" FOREIGN KEY ("BILL_DOCUMENT_ID")
REFERENCES "BRITEBILL"."BILL" ("ID") ENABLE NOVALIDATE;
ALTER TABLE "BRITEBILL"."DOCUMENT"
ADD CONSTRAINT "FK_O87KX3FG7NDCGI5L9ETBEASDE" FOREIGN KEY ("SERVICE_DOCUMENT_ID")
REFERENCES "BRITEBILL"."SERVICE" ("ID") ENABLE NOVALIDATE;
ALTER TABLE "BRITEBILL"."DOCUMENT"
ADD CONSTRAINT "FK_40R9FU217EOHO6Y84FJN9QAUD" FOREIGN KEY ("BATCH")
REFERENCES "BRITEBILL"."BATCH" ("ID") ENABLE NOVALIDATE;
set lin 200 pages 49999 long  49999
col ddl for a180
select dbms_metadata.get_ddl('INDEX', index_name, owner) ddl
from dba_indexes where index_name in
('IDX3_AUDIT_LOG','IDX2_AUDIT_LOG','IDX1_AUDIT_LOG','IDX10_AUDIT_LOG','AUDIT_LOG_PK','IDX1_AUDIT_CALL_STACK','PK_AUDIT_CALL_STACK','IDX1_MESSAGE');
a
 ALTER TABLE "BRITEBILL"."DOCUMENT" MODIFY ("ID" CONSTRAINT "SYS_C0050190" NOT NULL ENABLE NOVALIDATE)
  ALTER TABLE "BRITEBILL"."DOCUMENT" MODIFY ("FIDELITY" CONSTRAINT "SYS_C0050200" NOT NULL ENABLE NOVALIDATE)
  ALTER TABLE "BRITEBILL"."DOCUMENT" MODIFY ("INGESTSTATUS" CONSTRAINT "SYS_C0050210" NOT NULL ENABLE NOVALIDATE)
  ALTER TABLE "BRITEBILL"."DOCUMENT" MODIFY ("BATCH" CONSTRAINT "SYS_C0050220" NOT NULL ENABLE NOVALIDATE)
  ALTER TABLE "BRITEBILL"."DOCUMENT" MODIFY ("SERVICE_DOCUMENT_ID" CONSTRAINT "SYS_C0050230" NOT NULL ENABLE NOVALIDATE)
  ALTER TABLE "BRITEBILL"."DOCUMENT" MODIFY ("DUPLICATES" CONSTRAINT "SYS_C0050240" NOT NULL ENABLE NOVALIDATE)
  ALTER TABLE "BRITEBILL"."DOCUMENT" ADD CONSTRAINT "UK_L6OM9J438E4F08KLRPMKUDT8L" UNIQUE ("BILL_DOCUMENT_ID")
  USING INDEX PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "BB_INDX"  ENABLE NOVALIDATE
  ALTER TABLE "BRITEBILL"."DOCUMENT" ADD CONSTRAINT "UK_N3TST0E3E5F6CKRKK1G5RASB9" UNIQUE ("CONTENTID", "BATCH")
  USING INDEX PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "BB_INDX"  ENABLE NOVALIDATE
  ALTER TABLE "BRITEBILL"."DOCUMENT" MODIFY ("LARGE" CONSTRAINT "SYS_C0050590" NOT NULL ENABLE NOVALIDATE)
  ALTER TABLE "BRITEBILL"."DOCUMENT" MODIFY ("VERSIONEDCONTENTFOLDER" CONSTRAINT "SYS_C0050860" NOT NULL ENABLE NOVALIDATE)
set lin 200 pages 999
col COLUMN_NAME for a30
col OWNER for a10
SELECT 'STG TABLES ' from dual;
select owner, table_name from dba_tables where owner = 'BRITEBILL' and table_name in ('BILL_STG', 'DOCUMENT_STG', 'DOCUMENTDATASTOREITEM_STG');
select table_name, constraint_name, constraint_type, index_name, status from dba_constraints where table_name in ('BILL_STG', 'DOCUMENT_STG', 'DOCUMENTDATASTOREITEM_STG')
and owner='BRITEBILL' order by constraint_type, constraint_name;
select i.owner, index_name, c.column_name, i.table_name, i.uniqueness, i.status, i.status, i.visibility
from dba_indexes i join dba_ind_columns c using(index_name)
where i.table_name in  ('BILL_STG', 'DOCUMENT_STG', 'DOCUMENTDATASTOREITEM_STG') and owner='BRITEBILL'
order by table_name, index_name;
SELECT 'CURRENT TABLES ' from dual;
select owner, table_name from dba_tables where owner = 'BRITEBILL' and table_name in ('BILL', 'DOCUMENT', 'DOCUMENTDATASTOREITEM');
select table_name, constraint_name, constraint_type, index_name, status from dba_constraints where table_name in ('BILL', 'DOCUMENT', 'DOCUMENTDATASTOREITEM')
and owner='BRITEBILL' order by constraint_type, constraint_name;
select i.owner, index_name, c.column_name, i.table_name, i.uniqueness, i.status, i.status, i.visibility
from dba_indexes i join dba_ind_columns c using(index_name)
where i.table_name in  ('BILL', 'DOCUMENT', 'DOCUMENTDATASTOREITEM') and owner='BRITEBILL'
order by table_name, index_name;
-- Indexes
ALTER INDEX BRITEBILL.SYS_C004080_STG rename to SYS_C004080;
ALTER INDEX BRITEBILL.UK_N3TST0E3E5F6CKRKK1G5RASB9_S rename to UK_N3TST0E3E5F6CKRKK1G5RASB9;
ALTER INDEX BRITEBILL.UK_L6OM9J438E4F08KLRPMKUDT8L_S rename to UK_L6OM9J438E4F08KLRPMKUDT8L;
ALTER INDEX BRITEBILL.INGESTSTATUS_SC_INDEX_STG rename to INGESTSTATUS_SC_INDEX;
ALTER INDEX BRITEBILL.FK335CD11BE40A3BAC_IDX_STG rename to FK335CD11BE40A3BAC_IDX;
ALTER INDEX BRITEBILL.CONTENTID_SC_INDEX_STG rename to CONTENTID_SC_INDEX;
ALTER INDEX BRITEBILL.FK_DOCUMENT_BATCH_IDX_STG rename to FK_DOCUMENT_BATCH_IDX;
ALTER INDEX BRITEBILL.TYPE_FOR_DOC_IDX_STG rename to TYPE_FOR_DOC_IDX;
ALTER INDEX BRITEBILL.SUBTYP_FOR_DOCS_IDX_STG rename to SUBTYP_FOR_DOCS_IDX;
ALTER INDEX BRITEBILL.SECTION_IDX_STG rename to SECTION_IDX;
ALTER INDEX BRITEBILL.DOCUMENTDATASTOREITEM_PK_STG rename to DOCUMENTDATASTOREITEM_PK;
ALTER INDEX BRITEBILL.FK87F93DCF2765BF58_IDX_STG rename to FK87F93DCF2765BF58_IDX;
-- Constraints
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" rename CONSTRAINT "SECTION_IDX_STG" to SECTION_IDX ;
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG"  rename CONSTRAINT "DOCUMENTDATASTOREITEM_PK_STG" to DOCUMENTDATASTOREITEM_PK;
ALTER TABLE "BRITEBILL"."DOCUMENT_STG"  rename CONSTRAINT "UK_L6OM9J438E4F08KLRPMKUDT8L_S" to UK_L6OM9J438E4F08KLRPMKUDT8L;
ALTER TABLE "BRITEBILL"."DOCUMENT_STG"  rename CONSTRAINT "UK_N3TST0E3E5F6CKRKK1G5RASB9_S" to UK_N3TST0E3E5F6CKRKK1G5RASB9;
-- Tables
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM" rename to DOCUMENTDATASTOREITEM_OLD;
ALTER TABLE "BRITEBILL"."DOCUMENT" rename to DOCUMENT_OLD;
ALTER TABLE "BRITEBILL"."BILL" rename to BILL_OLD;
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" rename to DOCUMENTDATASTOREITEM;
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" rename to DOCUMENT;
ALTER TABLE "BRITEBILL"."BILL_STG" rename to BILL;
SELECT 'OLD TABLES ' from dual;
select owner, table_name from dba_tables where owner = 'BRITEBILL' and table_name in ('BILL_OLD', 'DOCUMENT_OLD', 'DOCUMENTDATASTOREITEM_OLD');
select table_name, constraint_name, constraint_type, index_name, status from dba_constraints where table_name in ('BILL_OLD', 'DOCUMENT_OLD', 'DOCUMENTDATASTOREITEM_OLD')
and owner='BRITEBILL' order by constraint_type, constraint_name;
select i.owner, index_name, c.column_name, i.table_name, i.uniqueness, i.status, i.status, i.visibility
from dba_indexes i join dba_ind_columns c using(index_name)
where i.table_name in  ('BILL_OLD', 'DOCUMENT_OLD', 'DOCUMENTDATASTOREITEM_OLD') and owner='BRITEBILL'
order by table_name, index_name;
SELECT 'NEW TABLES ' from dual;
select owner, table_name from dba_tables where owner = 'BRITEBILL' and table_name in ('BILL', 'DOCUMENT', 'DOCUMENTDATASTOREITEM');
select table_name, constraint_name, constraint_type, index_name, status from dba_constraints where table_name in ('BILL', 'DOCUMENT', 'DOCUMENTDATASTOREITEM')
and owner='BRITEBILL' order by constraint_type, constraint_name;
select i.owner, index_name, c.column_name, i.table_name, i.uniqueness, i.status, i.status, i.visibility
from dba_indexes i join dba_ind_columns c using(index_name)
where i.table_name in  ('BILL', 'DOCUMENT', 'DOCUMENTDATASTOREITEM') and owner='BRITEBILL'
order by table_name, index_name;
drop table BRITEBILL.DOCUMENTDATASTOREITEM_OLD ;
drop table BRITEBILL.DOCUMENT_OLD ;
drop table BRITEBILL.BILL_OLD ;
query=CLW_P01_EPM.audit_log_cflite:"where 1=0"
query=CLW_P01_EPM.audit_log_comp:"where 1=0"
query=CLW_P01_EPM.audit_log_comp_col:"where 1=0"
query=CLW_P01_EPM.audit_log_comp_col_un_val:"where 1=0"
query=CLW_P01_EPM.audit_log_comp_main_pk:"where 1=0"
query=CLW_P01_EPM.audit_log_comp_pk:"where 1=0"
query=CLW_P01_EPM.audit_log_comp_rec_un_val:"where 1=0"
query=CLW_P01_EPM.audit_log_comp_session:"where 1=0"
query=CLW_P01_EPM.audit_log_tlite:"where 1=0"
query=CLW_P01_EPM.audit_log_recovery_msg:"where 1=0"
query=CLW_P01_EPM.audit_log_recovery_attempt:"where 1=0"
query=CLW_P01_EPM.config_field_width:"where 1=0"
query=CLW_P01_EPM.export_run:"where 1=0 "
query=CLW_P01_EPM.field_sec_privs_lookup:"where 1=0"
query=CLW_P01_EPM.field_published_lookup:"where 1=0"
query=CLW_P01_EPM.grid_page_field_width:"where 1=0"
query=CLW_P01_EPM.imp_run:"where 1=0"
query=CLW_P01_EPM.imp_run_data_map_sql:"where 1=0"
query=CLW_P01_EPM.imp_run_entity_pk:"where 1=0"
query=CLW_P01_EPM.imp_run_error:"where 1=0"
query=CLW_P01_EPM.imp_run_grid_deltas:"where 1=0"
query=CLW_P01_EPM.imp_run_grid_incr:"where 1=0"
query=CLW_P01_EPM.message:"where 1=0"
query=CLW_P01_EPM.notif_queue:"where 1=0"
query=CLW_P01_EPM.notif_queue_attachment:"where 1=0"
query=CLW_P01_EPM.notif_queue_attempt:"where 1=0"
query=CLW_P01_EPM.notif_queue_notif_xref:"where 1=0"
query=CLW_P01_EPM.process_run:"where 1=0"
query=CLW_P01_EPM.report_run:"where 1=0"
query=CLW_P01_EPM.report_run_emailto:"where 1=0"
query=CLW_P01_EPM.report_run_param:"where 1=0"
query=CLW_P01_EPM.report_run_sql:"where 1=0"
query=CLW_P01_EPM.report_run_sql_param:"where 1=0"
query=CLW_P01_EPM.report_run_tb_param:"where 1=0"
query=CLW_P01_EPM.rule_run:"where 1=0"
query=CLW_P01_EPM.rule_run_entity_pk:"where 1=0"
query=CLW_P01_EPM.session_temp:"where 1=0"
query=CLW_P01_EPM.tmp_clob:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_column:"where 1=0"
query=CLW_P01_EPM.usage_log:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_highlight:"where 1=0"
query=CLW_P01_EPM.ulog_filter_opt:"where 1=0"
query=CLW_P01_EPM.ulog_filter_opt_value:"where 1=0"
query=CLW_P01_EPM.ulog_filter_opt_attrib:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_highlight_user:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_sort_column:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_map:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_map_info_column:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_map_leg_color:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_task_over:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_rde:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_rde_field:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_rde_grid:"where 1=0"
query=CLW_P01_EPM.ulog_view_opt_rde_task_column:"where 1=0"
query=CLW_P01_EPM.usage_log_load_tab:"where 1=0"
query=CLW_P01_EPM.usage_log_browser:"where 1=0"
query=CLW_P01_EPM.usage_log_sql_param:"where 1=0"
query=CLW_P01_EPM.usage_log_grid_filter:"where 1=0"
query=CLW_P01_EPM.user_used_pwd:"where 1=0"
query=CLW_P01_EPM.view_opt_highlight:"where 1=0"
query=CLW_P01_EPM.xitor_audit:"where 1=0"
query=CLW_P01_EPM.xitor_count:"where 1=0"
query=CLW_P01_EPM.RULE_HTTP_CALL_LOG:"where 1=0"
query=CLW_P01_EPM.ERROR_LOG:"where 1=0"
dbms_advisor.create_object('Task_Name', 'INDEX','SAPSR3DB','BC_SLD_ASSINST_NU1',NULL, NULL, NULL, 113300);
begin
dbms_advisor.create_object(Task_Name => 'Test_task', object_type => 'INDEX', object_id => 113300, ATTR1 => 'SAPSR3DB',ATTR2 => 'BC_SLD_ASSINST_NU1',ATTR3 =>' ', ATTR4 => NULL, ATTR5 =>' ', ATTR6 =>NULL,ATTR7 => NULL,ATTR8 => NULL,ATTR9 => NULL,ATTR10 => NULL, NULL); end;
begin
dbms_advisor.create_object(Task_Name => 'Test_task', object_type => 'INDEX', obect_id => 113300, ATTR1 => 'SAPSR3DB',ATTR2 => 'BC_SLD_ASSINST_NU1',ATTR3 =>NULL, ATTR4 => NULL, ATTR5 =>NULL, ATTR6 =>NULL,ATTR7 => NULL,ATTR8 => NULL,ATTR9 => NULL,ATTR10 => NULL, NULL); end;
OOCP1021
LSNR_G01_CDRP101=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=IPC)(KEY=LSNR_G01_CDRP101))))            # line added by Agent
LSNR_G01=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=IPC)(KEY=LSNR_G01))))            # line added by Agent
################################################################
#
#  FILENAME: listener.ora
#
################################################################
log_directory_listener=/oracle/g01/admin/common/sqlnet
#trace_level_listener=admin
trace_directory_listener=/oracle/g01/admin/common/sqlnet
DIAG_ADR_ENABLED_lsnr_g01_cdrp101=off
listener=
(ADDRESS=
    (PROTOCOL=TCP)
    (HOST=plslb215.corp.sprint.com)
    (PORT=1521))
#sid_list_listener=(SID_LIST=
#    (SID_DESC=(SID_NAME=test)
#        (ORACLE_HOME=/oracle/g01/software/rdbms/11.2.0.4)
#        (ORACLE_SID=test)))
lsnr_g01_cdrp101=
(ADDRESS=
        (PROTOCOL=TCP)
        (HOST=plslb215.corp.sprint.com)
        (PORT=1521)
)
sid_list_lsnr_g01_cdrp101=(SID_LIST=
        (SID_DESC=(SID_NAME=CDRP101)
                (ORACLE_HOME=/oracle/g01/software/rdbms/11.2.0.4)
                (ORACLE_SID=CDRP101)
        )
)
ENABLE_GLOBAL_DYNAMIC_ENDPOINT_LSNR_G01=ON              # line added by Agent
ENABLE_GLOBAL_DYNAMIC_ENDPOINT_LSNR_G01_CDRP101=ON              # line added by Agent
SECURE_REGISTER_lsnr_g01_cdrp101 = (IPC,TCP)
GRANTEE                        OWNER            TABLE_NAME           GRANTOR      PRIVILEGE  GRA HIE
------------------------------ ------------------------------------- ------------ ---------- --- ---
JFARME04                       CLW_P01_EPM      RULE_HTTP_CALL_LOG   CLW_P01_EPM  SELECT     NO  NO
SVDM_APP_R_ROLE                CLW_P01_EPM      RULE_HTTP_CALL_LOG   CLW_P01_EPM  SELECT     NO  NO
SELECT_CLW_P01_EPM             CLW_P01_EPM      RULE_HTTP_CALL_LOG   CLW_P01_EPM  SELECT     NO  NO
CLW_P01_EPM_PKG                CLW_P01_EPM      RULE_HTTP_CALL_LOG   CLW_P01_EPM  SELECT     NO  NO
18G
12
1G
24G
17179869184
1677721600

Select sum(bytes/1024/1024) Free_Memory_In_MB
 From V$sgastat
 Where Name Like '%free memory%';

Select POOL, Round(bytes/1024/1024,0) Free_Memory_In_MB
  From V$sgastat
  Where Name Like '%free memory%';


SELECT i.instance_name instance,
 -- b.ksppstvl "Session_Value",
 c.ksppstvl value,c.ksppstvl/1024/1024 meg,c.ksppstvl/1024/1024/1024 gig,
 -- above is instance_value
 a.ksppinm "PARAMETER",KSPPDESC "DESCRIPTION"
 FROM
 x$ksppi a,
 x$ksppcv b,
 x$ksppsv c,
 v$instance i
 WHERE
 a.indx = b.indx
 AND
 a.indx = c.indx
 AND
 (a.ksppinm LIKE '/_/_%' escape '/' or a.ksppinm LIKE 'db_keep_cache_size' or a.ksppinm LIKE 'db_recycle_cache_size')
 and a.ksppinm not in ('__oracle_base')
 and c.ksppstvl not in ('TRUE','FALSE')
 order by 3
 /


-- get SGA in use
SELECT sum(value)/1048576 "TOTAL SGA (MB)" FROM v$sga;
-- get memory in use size of procs
set lin 200 pages 999
compute sum of MAX on report
compute sum of ALLOC on report
compute sum of USED on report
compute sum of FREE on report
break on report
SELECT spid, program,
            pga_max_mem/1048576      max,
            pga_alloc_mem/1048576    alloc,
            pga_used_mem/1048576     used,
            pga_freeable_mem/1048576 free
FROM V$PROCESS;
-- CPU in use by active sessions per user.
SET PAUSE ON
SET PAUSE 'Press Return to Continue'
SET PAGESIZE 60
SET LINESIZE 300
COLUMN username FORMAT A30
COLUMN sid FORMAT 999,999,999
COLUMN serial# FORMAT 999,999,999
COLUMN "cpu usage (seconds)"  FORMAT 999,999,999.0000
SELECT
   s.username,
   t.sid,
   s.serial#,
   SUM(VALUE/100) as "cpu usage (seconds)"
FROM
   v$session s,
   v$sesstat t,
   v$statname n
WHERE
   t.STATISTIC# = n.STATISTIC#
AND
   NAME like '%CPU used by this session%'
AND
   t.SID = s.SID
AND
   s.status='ACTIVE'
AND
   s.username is not null
GROUP BY username,t.sid,s.serial#
/
SET PAUSE ON
SET PAUSE 'Press Return to Continue'
SET PAGESIZE 60
SET LINESIZE 300
COLUMN username FORMAT A30
--COLUMN sid FORMAT 999,999,999
COLUMN serial# FORMAT 999,999,999
COLUMN "cpu usage (seconds)"  FORMAT 999,999,999.0000
SELECT
   s.username,
   t.sid,
   s.serial#,
   SUM(VALUE/100) as "cpu usage (seconds)"
FROM
   v$session s,
   v$sesstat t,
   v$statname n
WHERE
   t.STATISTIC# = n.STATISTIC#
AND
   NAME like '%CPU used by this session%'
AND
   t.SID = s.SID
AND
   s.status='ACTIVE'
AND
   s.username is not null
GROUP BY username,t.sid,s.serial#
order by 4
/
[‎5/‎11/‎2020 6:16 PM]  Krishnamurthy, Lakshman K [IT]:
SQL> SQL> SQL> BEGIN DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => SUBSTR('ndwadm.service_agreement',1,INSTR('ndwadm.service_agreement','.')-1) ,
  TABNAME => SUBSTR('ndwadm.service_agreement',INSTR('ndwadm.service_agreement','.')+1) ,
  estimate_percent => 10 ,
  CASCADE => TRUE ,
  method_opt => 'FOR ALL INDEXED COLUMNS SIZE 1',
  DEGREE=>8 ,no_invalidate=>false); END;
*
ERROR at line 1:
ORA-02149: Specified partition does not exist
ORA-06512: at "SYS.DBMS_STATS", line 23829
DBA Steps:
0) Create the schema:
create_tmoadm_user.sql
1) export the WDM tables with SCN from OEMADM and import into TMOADM - 16 tables – parfiles:  expo_tmo.par & imp_tmo.par
WDM -
userid="/ as sysdba"
directory=EXP_TMO
logfile=expdp_WDM_C259395.log
dumpfile=WDM_C259395_%u.dmp
parallel=8
cluster=N
exclude=STATISTICS
FLASHBACK_SCN=
tables=OEMADM.BUYBACK_DEVICE_INFO,OEMADM.EXTR_ORDR_CHNL_INFO,OEMADM.ORDER_BILLING,OEMADM.ORDER_COMMENTS,OEMADM.ORDER_GIVEBACK_DEVICE_INFO,
OEMADM.ORDER_IB_INFO,OEMADM.ORDER_INVOICE,OEMADM.ORDER_LINE_DETAILS,OEMADM.ORDER_LINE_SOC,OEMADM.ORDER_MASTER,OEMADM.ORDER_RMA_INFO,
OEMADM.ORDER_SHIPPING,OEMADM.ORDER_SHIPPING_LINE,OEMADM.ORDER_TYPE_DESC,OEMADM.PHONE_AND_ACCESSORY,OEMADM.PHONE_CONFIG
remap_schema=OEMADM:TMOADM
remap_tablespace=OEMADM_DATA:TMO_DATA,OEMADM_IDX:TMO_DATA
transform=STORAGE:N
OEGP
userid="/ as sysdba"
directory=EXP_TMO
logfile=expdp_OEG_C259395.log
dumpfile=OEG_C259395_%u.dmp
parallel=4
cluster=N
exclude=STATISTICS
FLASHBACK_SCN=
tables=OEMADM.BUYBACK_DEVICE_INFO,OEMADM.EXTR_ORDR_CHNL_INFO,OEMADM.ORDER_BILLING,OEMADM.ORDER_COMMENTS,OEMADM.ORDER_GIVEBACK_DEVICE_INFO,
OEMADM.ORDER_IB_INFO,OEMADM.ORDER_INVOICE,OEMADM.ORDER_LINE_DETAILS,OEMADM.ORDER_LINE_SOC,OEMADM.ORDER_MASTER,OEMADM.ORDER_RMA_INFO,
OEMADM.ORDER_SHIPPING,OEMADM.ORDER_SHIPPING_LINE,OEMADM.ORDER_TYPE_DESC,OEMADM.PHONE_AND_ACCESSORY,OEMADM.PHONE_CONFIG
remap_schema=OEMADM:TMOADM
remap_tablespace=OEM_DATA:TMO_DATA,OEM_IDX:TMO_DATA
transform=STORAGE:N
2) Add Order_channel_cd column to TMOADM tables – To be populated with value of prepaid or postpaid (based on order_key) - alter_tmo_add_cols.sql
3) Populate the order_channel_cd for existing data using update - update_tmo_tables.sql
4) Verify the data is updated - data_check.sql
5) setup replicat to replicate data from OEMADM to TMOADM which populates the order_channel_cd for any new rows – Special parameter files provided – rtmo1.prm
6) ADD schema trandata for all 16 tables under TMOADM – Alex will provide script
7) Send mail to Sashi Yeratha, Jerry Brown, Dinakar Kudum, NOR_NOL DBA team.
select partition_name from dba_tab_partitions
where table_owner='CLW_P01_EPM' and table_name='CONFIG_VALUE_NUMBER';
alter trigger CLW_P01_EPM.Z_TIUDA_IMP_ENTITY_PARAM disable;
alter trigger CLW_P01_EPM.TIBP_IMP_ENTITY_PARAM    disable;
alter trigger CLW_P01_EPM.TIB_IMP_ENTITY_PARAM     disable;
userid="/ as sysdba"
dumpfile=exp_T815856_%U.dmp
logfile=IMPORT_TEST.log
directory=T815856_DATAONLY
tables=CLW_P01_EPM.IMP_ENTITY_PARAM
cluster=N
TABLE_EXISTS_ACTION=APPEND
JOB_NAME=JOB_TEST
parallel=8
alter trigger CLW_P01_EPM.Z_TIUDA_IMP_ENTITY_PARAM enable;
alter trigger CLW_P01_EPM.TIBP_IMP_ENTITY_PARAM    enable;
alter trigger CLW_P01_EPM.TIB_IMP_ENTITY_PARAM     enable;
alter table CLW_P01_EPM.IMP_ENTITY_PARAM disable novalidate constraint FK3_IMP_ENTITY_PARAMY;
alter table CLW_P01_EPM.IMP_ENTITY_PARAM disable novalidate constraint FK02_IMP_ENTITY_PARAM;
alter table CLW_P01_EPM.IMP_ENTITY_PARAM disable novalidate constraint FK01_IMP_ENTITY_PARAM;
alter table CLW_P01_EPM.IMP_ENTITY_PARAM enable novalidate constraint FK3_IMP_ENTITY_PARAMY;
alter table CLW_P01_EPM.IMP_ENTITY_PARAM enable novalidate constraint FK02_IMP_ENTITY_PARAM;
alter table CLW_P01_EPM.IMP_ENTITY_PARAM enable novalidate constraint FK01_IMP_ENTITY_PARAM;
T815465
drop user TMOADM cascade;
CREATE TABLESPACE TMO_DATA DATAFILE '+DATA_01' size 32767M;
CREATE USER TMOADM IDENTIFIED BY VALUES 'S:9D26A9203780293F221F32B49A6004319F6865B5A4350ABFEFDE845A8954;ACC68EF264445B3A'
DEFAULT TABLESPACE "TMO_DATA" TEMPORARY TABLESPACE "TEMP_01" PROFILE "SPRINT_APP_PROFILE";
GRANT CONNECT to TMOADM;
GRANT RESOURCE to TMOADM;
GRANT UNLIMITED TABLESPACE to TMOADM;
GRANT WRITE on SYS.EXP_TMO to TMOADM;
GRANT READ on  SYS.EXP_TMO to TMOADM;
MAP OEMARCH.TM_ACTIVATION, TARGET OEMARCH.TM_ACTIVATION, KEYCOLS (ORDER_KEY);
/ggdata/pho/trail1/tmo/TM
ADD TRANDATA TMOADM.BUYBACK_DEVICE_INFO
ADD TRANDATA TMOADM.EXTR_ORDR_CHNL_INFO
ADD TRANDATA TMOADM.ORDER_BILLING
ADD TRANDATA TMOADM.ORDER_COMMENTS
ADD TRANDATA TMOADM.ORDER_GIVEBACK_DEVICE_INFO
ADD TRANDATA TMOADM.ORDER_IB_INFO
ADD TRANDATA TMOADM.ORDER_INVOICE
ADD TRANDATA TMOADM.ORDER_LINE_DETAILS
ADD TRANDATA TMOADM.ORDER_LINE_SOC
ADD TRANDATA TMOADM.ORDER_MASTER
ADD TRANDATA TMOADM.ORDER_RMA_INFO
ADD TRANDATA TMOADM.ORDER_SHIPPING
ADD TRANDATA TMOADM.ORDER_SHIPPING_LINE
ADD TRANDATA TMOADM.ORDER_TYPE_DESC
ADD TRANDATA TMOADM.PHONE_AND_ACCESSORY
ADD TRANDATA TMOADM.PHONE_CONFIG
CREATE OR REPLACE PROCEDURE  sys.alter_triggers_fks (p_owner IN varchar2, p_table IN varchar2, p_operation IN char) as
  type type_constraints is REF CURSOR;
  type type_triggers is REF CURSOR;
  t_constraints type_constraints;
    r_constraint dba_constraints%ROWTYPE;
  t_triggers type_triggers;
    r_trigger dba_triggers%ROWTYPE;
  v_owner  VARCHAR2(100) := p_owner;
  v_table VARCHAR2(100) := p_table;
  v_operation VARCHAR2(100) := p_operation;
  v_owner_table VARCHAR2(4000);
  v_command VARCHAR2(4000);
  v_command2 VARCHAR2(4000);
  i NUMBER;
BEGIN
  --v_owner := 'CLW_P01_EPM';
  --v_table := 'IMP_ENTITY_PARAM';
  v_owner_table := v_owner || '.' || v_table;
  IF v_operation = 'D' THEN
      UTL_FILE.PUTF(f_utl_file,CHR(10));
      UTL_FILE.PUTF(f_utl_file,'CONSTRAINTS');
      UTL_FILE.PUTF(f_utl_file,CHR(10));
-- CONSTRAINTS
      OPEN t_constraints FOR
      select *
      from dba_constraints
      where constraint_type='R'
      and owner=v_owner
      and table_name=v_table
      and STATUS='ENABLED';
    LOOP
    FETCH t_constraints INTO r_constraint;
    EXIT WHEN t_constraints%NOTFOUND;
      v_command :='alter table '  || v_owner_table || ' disable novalidate constraint ' || r_constraint.CONSTRAINT_NAME || ';';
      UTL_FILE.PUTF(f_utl_file,v_command);
      execute immediate v_command;
    END LOOP;
    CLOSE  t_constraints;
  UTL_FILE.PUTF(f_utl_file,CHR(10));
  UTL_FILE.PUTF(f_utl_file,'TRIGGERS');
  UTL_FILE.PUTF(f_utl_file,CHR(10));
--TRIGGERS
    OPEN t_triggers FOR
      select *
      from dba_triggers
      where table_owner=v_owner
      and table_name=v_table
      and status='ENABLED';
    LOOP
    FETCH t_triggers INTO r_trigger;
    EXIT WHEN t_triggers%NOTFOUND;
      v_command2 :='alter trigger '  || v_owner || '.' || r_trigger.TRIGGER_NAME || ' disable;';
      UTL_FILE.PUTF(f_utl_file,v_command2);
      execute immediate v_command2;
    END LOOP;
    CLOSE  t_triggers;
  ELSIF v_operation = 'E' THEN
      UTL_FILE.PUTF(f_utl_file,CHR(10));
      UTL_FILE.PUTF(f_utl_file,'CONSTRAINTS');
      UTL_FILE.PUTF(f_utl_file,CHR(10));
-- CONSTRAINTS
      OPEN t_constraints FOR
      select *
      from dba_constraints
      where constraint_type='R'
      and owner=v_owner
      and table_name=v_table;
    LOOP
    FETCH t_constraints INTO r_constraint;
    EXIT WHEN t_constraints%NOTFOUND;
      v_command :='alter table '  || v_owner_table || ' enable novalidate constraint ' || r_constraint.CONSTRAINT_NAME || ';';
      UTL_FILE.PUTF(f_utl_file,v_command);
      execute immediate v_command;
    END LOOP;
    CLOSE  t_constraints;
  UTL_FILE.PUTF(f_utl_file,CHR(10));
  UTL_FILE.PUTF(f_utl_file,'TRIGGERS');
  UTL_FILE.PUTF(f_utl_file,CHR(10));
--TRIGGERS
    OPEN t_triggers FOR
      select *
      from dba_triggers
      where table_owner=v_owner
      and table_name=v_table;
    LOOP
    FETCH t_triggers INTO r_trigger;
    EXIT WHEN t_triggers%NOTFOUND;
      v_command2 :='alter trigger '  || v_owner || '.' || r_trigger.TRIGGER_NAME || ' enable;';
      UTL_FILE.PUTF(f_utl_file,v_command2);
      execute immediate v_command2;
    END LOOP;
    CLOSE  t_triggers;
  ELSE
   UTL_FILE.PUTF(f_utl_file,'This procedure should be called using 3 parameters');
   UTL_FILE.PUTF(f_utl_file,'Parameter 1 is owner, Parameter 2 is table name and Parameter 3 can be E for ENABLE or D for Disable');
   UTL_FILE.PUTF(f_utl_file,'exec sys.alter_triggers_fks(Parameter1,Parameter2,Parameter3);');
  END IF;
END;
/
DECLARE
cursor c1 is select owner, table_name
              from dba_tables
              where owner='CLW_P01_EPM'
              and table_name in ('IMP_ENTITY_PARAM','CONFIG_VALUE_NUMBER');
v1 c1%ROWTYPE;
BEGIN
  FOR v1 IN c1
  LOOP
-- Edit the third parameter to E to enable triggers and constraints and D to disable.
    sys.alter_triggers_fks(v1.owner, v1.table_name, 'D');
  END LOOP;
END;
/
userid="/ as sysdba"
directory=EXP_TMO
logfile=expdp_WDM_T819809.log
dumpfile=tmoadm_%u.dmp
parallel=4
cluster=N
exclude=STATISTICS
FLASHBACK_SCN=15935219055599
tables=OEMADM.ORDER_RMA_INFO
cat rungpg_hjs
echo " Start time for encryption := `date` " > time_scp_tmus6.txt
cd /oracle/g01/bkup01/T819809
gpg2 --always-trust --output /oracle/g01/bkup01/T819809/tmoadm_01.dmp.pgp --encrypt --recipient SVC_PRD_SprintGGHub /oracle/g01/bkup01/T819809/tmoadm_01.dmp &
gpg2 --always-trust --output /oracle/g01/bkup01/T819809/tmoadm_01.dmp.pgp --encrypt --recipient SVC_PRD_SprintGGHub /oracle/g01/bkup01/T819809/tmoadm_02.dmp &
wait
cksum /oracle/g01/bkup01/T819809/tmoadm_01.dmp.pgp > /oracle/g01/bkup01/T819809/cksum.tmoadm_01.dmp.pgp
cksum /oracle/g01/bkup01/T819809/tmoadm_02.dmp.pgp > /oracle/g01/bkup01/T819809/cksum.tmoadm_02.dmp.pgp
cd /oracle/g01/bkup01/GPG_PROD/SEND_TO_TMUS
echo " Start time for scp SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org(opens in new tab):= `date` " > time_scp_tmus6.txt
scp /oracle/g01/bkup01/T819809/tmoadm_01.dmp.pgp  SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org(opens in new tab):/goldengate/HJS/dump_files/prod01/ &
scp /oracle/g01/bkup01/T819809/tmoadm_02.dmp.pgp  SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org(opens in new tab):/goldengate/HJS/dump_files/prod01/ &
ALTER DISKGROUP data_01 ADD DISK
     '/dev/ora-1048576-21' NAME DATA_01_0021,
     '/dev/ora-1048576-22' NAME DATA_01_0022,
     '/dev/ora-1048576-23' NAME DATA_01_0023
     rebalance power 5;
1) On Hadoop Hub - setup IE extract for TMOADM tables – config files to be created by Alex
    Note:  We will NOT setup Data pump to TMUS GG HUB at this time
2) export the 4 TMOADM tables with query clause of POST Paid data only using SCN –  exp_tmoadmmig01.par
                 Note: no need to stop GG
expdp parfile=T819809.par
userid="/as sysdba"
dumpfile=tmoadm_%U.dmp
directory=EXP_TMO
flashback_scn=
parallel=8
logfile=tmoadm_exp.log
tables=(TMOADM.ORDER_SHIPPING_LINE, TMOADM.PHONE_CONFIG, TMOADM.ORDER_LINE_DETAILS, TMOADM.ORDER_MASTER)
QUERY=TMOADM.ORDER_SHIPPING_LINE:"WHERE ORDER_CHANNEL_CD ='POST'"
QUERY=TMOADM.PHONE_CONFIG:"WHERE ORDER_CHANNEL_CD ='POST'"
QUERY=TMOADM.ORDER_LINE_DETAILS:"WHERE ORDER_CHANNEL_CD ='POST'"
QUERY=TMOADM.ORDER_MASTER:"WHERE ORDER_CHANNEL_CD ='POST'"
3) zip the export files on WDM
    mv tmoadm*.dmp T819809
    zip -r -7 T819809.zip T819809/*
    chmod 777 T819809.zip
4) transfer the data dumps to NOR3 server - estimated 20 gig – create a directory on /oracle/g01/bkup01
    scp /oracle/g01/stage01/tmo/T819809.zip plsab677:/oracle/g01/bkup01/
5.1) unzip folder on NOR3
file: unzip_T819809.sh
cd /oracle/g01/bkup01/
unzip T819809.zip
5.2) encrypt the files on NOR3
file encrypt_T819809.sh
touch /oracle/g01/admin/sysoper/log/encrypt_files.log
chmod 777 /oracle/g01/admin/sysoper/log/encrypt_files.log
ksh /oracle/g01/admin/sysoper/ddl/encrypt_files.sh > /oracle/g01/admin/sysoper/log/encrypt_files.log 2>&1
file encrypt_files.sh
cd /oracle/g01/bkup01/C263309
for i in WDM*.dmp ; do echo "ENCRYPTING FILE $i"; gpg2 --always-trust --output $i.pgp --encrypt --recipient SVC_PRD_SprintGGHub $i; done;
for i in WDM*.dmp.pgp ; do echo "VERIFYNG CHECKSUM FOR  FILE $i"; cksum $i > cksum.$i; done;
for i in WDM*.dmp.pgp ; do echo "COPYING FILE $i TO THE DESTINATION"; scp $i SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org:/goldengate/FAST_CUST/data_files ; done;
gpg2 --always-trust --output tmoadm_02.dmp.pgp --encrypt --recipient SVC_PRD_SprintGGHub /oracle/g01/bkup01/T819809/tmoadm_02.dmp &
gpg2 --always-trust --output tmoadm_03.dmp.pgp --encrypt --recipient SVC_PRD_SprintGGHub /oracle/g01/bkup01/T819809/tmoadm_03.dmp &
gpg2 --always-trust --output tmoadm_04.dmp.pgp --encrypt --recipient SVC_PRD_SprintGGHub /oracle/g01/bkup01/T819809/tmoadm_04.dmp &
gpg2 --always-trust --output tmoadm_05.dmp.pgp --encrypt --recipient SVC_PRD_SprintGGHub /oracle/g01/bkup01/T819809/tmoadm_05.dmp &
gpg2 --always-trust --output tmoadm_06.dmp.pgp --encrypt --recipient SVC_PRD_SprintGGHub /oracle/g01/bkup01/T819809/tmoadm_06.dmp &
gpg2 --always-trust --output tmoadm_07.dmp.pgp --encrypt --recipient SVC_PRD_SprintGGHub /oracle/g01/bkup01/T819809/tmoadm_07.dmp &
gpg2 --always-trust --output tmoadm_08.dmp.pgp --encrypt --recipient SVC_PRD_SprintGGHub /oracle/g01/bkup01/T819809/tmoadm_08.dmp &
wait
cksum tmoadm_01.dmp.pgp > /oracle/g01/bkup01/T819809/cksum.tmoadm_01.dmp.pgp
cksum tmoadm_02.dmp.pgp > /oracle/g01/bkup01/T819809/cksum.tmoadm_02.dmp.pgp
cksum tmoadm_03.dmp.pgp > /oracle/g01/bkup01/T819809/cksum.tmoadm_03.dmp.pgp
cksum tmoadm_04.dmp.pgp > /oracle/g01/bkup01/T819809/cksum.tmoadm_04.dmp.pgp
cksum tmoadm_05.dmp.pgp > /oracle/g01/bkup01/T819809/cksum.tmoadm_05.dmp.pgp
cksum tmoadm_06.dmp.pgp > /oracle/g01/bkup01/T819809/cksum.tmoadm_06.dmp.pgp
cksum tmoadm_07.dmp.pgp > /oracle/g01/bkup01/T819809/cksum.tmoadm_07.dmp.pgp
cksum tmoadm_08.dmp.pgp > /oracle/g01/bkup01/T819809/cksum.tmoadm_08.dmp.pgp
6) SFTP from NOR3 to TMUS Hub server - estimated 20 gig
   prdpaggsi0001.unix.gsm1900.org   /goldengate/FAST_CUST/data_files
file scp_T819809.sh
touch /oracle/g01/admin/sysoper/log/scp_files.log
chmod 777 /oracle/g01/admin/sysoper/log/scp_files.log
ksh /oracle/g01/admin/sysoper/ddl/scp_files.sh > /oracle/g01/admin/sysoper/log/scp_files.log  2>&1
file scp_files.sh
cd /oracle/g01/bkup01/T819809
scp tmoadm_01.dmp.pgp  SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org:/goldengate/FAST_CUST/data_files &
scp tmoadm_02.dmp.pgp  SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org:/goldengate/FAST_CUST/data_files &
scp tmoadm_03.dmp.pgp  SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org:/goldengate/FAST_CUST/data_files &
scp tmoadm_04.dmp.pgp  SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org:/goldengate/FAST_CUST/data_files &
scp tmoadm_05.dmp.pgp  SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org:/goldengate/FAST_CUST/data_files &
scp tmoadm_06.dmp.pgp  SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org:/goldengate/FAST_CUST/data_files &
scp tmoadm_07.dmp.pgp  SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org:/goldengate/FAST_CUST/data_files &
scp tmoadm_08.dmp.pgp  SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org:/goldengate/FAST_CUST/data_files &
wait
7) Send mail to Sashi Yeratha, Jerry Brown, Dinakar Kudum, NOR_NOL DBA team.
gpg2 --always-trust --output tmoadm_01.dmp.pgp --encrypt --recipient SVC_PRD_SprintGGHub/oracle/g01/bkup01/C263309/tmoadm_01.dmp
PDS_PRI.WORLD =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = clspdspr)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = PDS)
    )
  )
PDS_VIP.WORLD =
  (DESCRIPTION =
     (ADDRESS_LIST =
     (LOAD_BALANCE=YES)
     (FAILOVER=YES)
        (ADDRESS = (PROTOCOL = TCP)(HOST = u1322-vip) (PORT = 1521))
        (ADDRESS = (PROTOCOL = TCP)(HOST = u1325-vip) (PORT = 1521))
      )
     (CONNECT_DATA =
        (SERVICE_NAME = PDS)
        (FAILOVER_MODE = (TYPE = SELECT) (METHOD = BASIC) (RETRIES = 180) (DELAY = 5))
     )
  )
ECP_SEC.WORLD =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = u643)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = ECP)
    )
  )
ECP_DR.WORLD =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = u643dr)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = ECP)
    )
  )
DUP_ECP_PRI.WORLD =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = u612)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = ECP)
      (UR=A)
    )
  )
DUP_ECP_DR.WORLD =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = u643dr)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = ECP)
      (SID=ECP)
      (UR=A)
    )
  )
cd /home/goldgate
. .profile
Install GG 19c on both GG Prod Hubs and NDW for VAD:
PLSS5006 - /goldengate/ggsoracle/6qsvad/ora191
PLSAB586 - /goldengate/ggsoracle/6qsvad/ora191
PNBAB160 - /goldengate/ggsoracle/6QSVAD/ora191
Uninstall / remove old unused versions on NDW:
PLSS5006 -
ora111_old
ora111_old_10g
ora102_old
Send mail when completed to GG distro & J/Cohen & Frank H.
ALTER REPLICAT R6QV11C1 , EXTSEQNO 888 EXTRBA 0
ALTER REPLICAT R6QV21C1 , EXTSEQNO 888 EXTRBA 0
5006
alias 6qsvad='cd /goldengate/ggsoracle/6qsvad/ora191;pwd;LD_LIBRARY_PATH=/oracle/g01/software/rdbms/11.2.0.4/lib:/usr/lib:/oracle/g01/software/grid/11.2.0.4/lib:/oracle/g01/software/grid/11.2.0.4/lib:/opt/ORCLcluster/lib:/usr/lib:/usr/ucblib:/goldengate/ggsoracle/6qs/ora191'
cp -rp /goldengate/ggsoracle/6qsvad/ora112/dir* /goldengate/ggsoracle/6qsvad/ora191
cp -rp /goldengate/ggsoracle/6qsvad/ora112/scripts /goldengate/ggsoracle/6qsvad/ora191
mv /goldengate/ggsoracle/6qsvad/ora112 /goldengate/ggsoracle/6qsvad/ora112_old_T820055
cp /home/goldgate/scripts/mon_dmls.ksh /home/goldgate/scripts/mon_dmls.ksh_old_T820055
cp /home/goldgate/scripts/mon_dmls.ksh_new /home/goldgate/scripts/mon_dmls.ksh
cp /code/prod/dba/repl_check/ksh/chk_hc_replicates.ksh /code/prod/dba/repl_check/ksh/chk_hc_replicates.ksh_old_T820055
cp /code/prod/dba/repl_check/ksh/chk_hc_replicates.ksh_new /code/prod/dba/repl_check/ksh/chk_hc_replicates.ksh
cp /code/prod/dba/eodcop/ksh/m027dedvad /code/prod/dba/eodcop/ksh/m027dedvad_old_T820055
cp /code/prod/dba/eodcop/ksh/m027dedvad_new /code/prod/dba/eodcop/ksh/m027dedvad
cp /goldengate/ggsoracle/6qsvad/ora191/scripts/get_replicat_lag.sh /goldengate/ggsoracle/6qsvad/ora191/scripts/get_replicat_lag.sh_old_T820055
cp /goldengate/ggsoracle/6qsvad/ora191/scripts/get_replicat_lag.sh_new /goldengate/ggsoracle/6qsvad/ora191/scripts/get_replicat_lag.sh
cp /code/prod/dba/repl_check/ksh/start_replicats_v1.ksh /code/prod/dba/repl_check/ksh/start_replicats_v1.ksh_old_T820055
cp /code/prod/dba/repl_check/ksh/start_replicats_v1.ksh_new /code/prod/dba/repl_check/ksh/start_replicats_v1.ksh
586
alias prod-vad='cd /goldengate/ggsoracle/6QSVAD/ora191; pwd; LD_LIBRARY_PATH=/oracle/g01/software/rdbms/11.2.0.4/lib:/usr/lib:/oracle/g01/software/grid/11.2.0.4/lib:/oracle/g01/software/grid/11.2.0.4/lib:/opt/ORCLcluster/lib:/usr/lib:/usr/ucblib:/goldengate/ggsoracle/6QSVAD/ora191'
cp -rp /goldengate/ggsoracle/6QSVAD/ora112/dir* /goldengate/ggsoracle/6QSVAD/ora191
cp -rp /goldengate/ggsoracle/6QSVAD/ora112/scripts /goldengate/ggsoracle/6QSVAD/ora191
mv /goldengate/ggsoracle/6QSVAD/ora112 /goldengate/ggsoracle/6QSVAD/ora112_old_T820055
cp /goldengate/ggsoracle/6QSVAD/ora191/scripts/get_pump_lag_vad.sh /goldengate/ggsoracle/6QSVAD/ora191/scripts/get_pump_lag_vad.sh_old_T820055
cp /goldengate/ggsoracle/6QSVAD/ora191/scripts/get_pump_lag_vad.sh_new /goldengate/ggsoracle/6QSVAD/ora191/scripts/get_pump_lag_vad.sh
160
alias prod-vad='cd /goldengate/ggsoracle/6QSVAD/ora191; pwd; LD_LIBRARY_PATH=/oracle/g01/software/rdbms/11.2.0.4/lib:/usr/lib:/oracle/g01/software/grid/11.2.0.4/lib:/oracle/g01/software/grid/11.2.0.4/lib:/opt/ORCLcluster/lib:/usr/lib:/usr/ucblib:/goldengate/ggsoracle/6QSVAD/ora191'
cp -rp /goldengate/ggsoracle/6QSVAD/ora112/dir* /goldengate/ggsoracle/6QSVAD/ora191
cp -rp /goldengate/ggsoracle/6QSVAD/ora112/scripts /goldengate/ggsoracle/6QSVAD/ora191
mv /goldengate/ggsoracle/6QSVAD/ora112 /goldengate/ggsoracle/6QSVAD/ora112_old_T820055
LIBPATH=${GG_HOME}:${ORACLE_HOME}/lib;  export LIBPATH
PATH=${GG_HOME}:${TMP_PATH};    export PATH
C260092/T822046
set lin 200 pages 999
set echo on feedback on
spool kill_sessions.out
set serveroutput on
  DECLARE
    cursor c1 is select * from gv$session where type <> 'BACKGROUND';
    v1 gv$session%ROWTYPE;
    v_command varchar2(4000);
  BEGIN
        FOR v1 in c1 LOOP
        v_command := 'alter system disconnect session ''' || v1.sid || ',' || v1.serial# || ',@' || v1.inst_id || ''' immediate;';
        UTL_FILE.PUTF(f_utl_file,v_command);
        --execute immediate exec_sql;
        END LOOP;
  END;
  /
  spool off;
  exit
select /*+Parallel(8)*/ METRIC_NAME,avg(AVERAGE) value
from dba_hist_sysmetric_summary
where begin_time between to_date('22-MAY-20 00:00:00', 'dd-MON-yy hh24:mi:ss')
and to_date(sysdate, 'dd-MON-yy hh24:mi:ss')
and end_time like '%22-MAY-20%'
and METRIC_NAME in ('Physical Read Total IO Requests Per Sec','Physical Write Total IO Requests Per Sec')
group by METRIC_NAME;
PSAPPDS_DATA
PSAPPDS_AUDIT
remap_tablespace=PSAPPDS_AUDIT:PSAPQDS_AUDIT,PSAPPDS_DATA:PSAPQDS_DATA
about 19c
I am running 18c dbs on another client
and found out that oratab is no longer being populated in RAC
then I found this post:
select owner, object_name, object_type, created, last_ddl_time from dba_objects
where object_name like 'WH%STG';
SVDMADM.WH_AUG_ATTR_T2_STG
SVDMADM.WH_AUG_TASK_AF_STG
SVDMADM.WH_AUG_TASK_PF_STG
SVDMADM.WH_AUG_TASK_NA_STG
  select owner, object_name, object_type, created, last_ddl_time from dba_objects
  where object_name in ('WH_AUG_ATTR_T2_STG','WH_AUG_TASK_AF_STG','WH_AUG_TASK_PF_STG','WH_AUG_TASK_NA_STG');
  Create and start GG Pumps to Magenta target for RMS & FAST.
Use the following Obey files which are staged on GG Hadoop Hub
--wdm
add_pwdm02t1.oby
--oeg
add_poeg02t1.oby
--rms
add_prhs02c1.oby
add_pvwi02c1.oby
add_plfo02c1.oby
Once Pumps are added use alter pump xxx begin now and start the pumps
Verify checkpoint updated and use stats command to verify
Keep mind for OEG pump there may not be any transactions since DB is empty.
ggsci < ./dirprm/add_plfo02c1.oby > add_lfo.log 2>&1
ggsci < ./dirprm/add_prhs02c1.oby > add_rhs.log 2>&1
ggsci < ./dirprm/add_pvwi02c1.oby > add_vwi.log 2>&1
zip LFO.zip /oracle/g01/bkup02/T822458/LFO*.dmp
scp LFO.zip plsab677:/oracle/g01/bkup01/C263309
scp SCN_LFO.txt plsab677:/oracle/g01/bkup01/C263309
 
zip RHS.zip /oracle/g01/bkup02/T822447/RHS_T822447*.dmp
scp RHS.zip plsab677:/oracle/g01/bkup01/C263309
scp SCN_RHS.txt plsab677:/oracle/g01/bkup01/C263309
zip VWI.zip /oracle/g01/bkup02/T822453/VWI_T822453*.dmp
scp VWI.zip plsab677:/oracle/g01/bkup01/C263309
scp SCN_VWI.txt plsab677:/oracle/g01/bkup01/C263309
for i in /oracle/g01/admin/sysoper/stage/DDLs/* ; do echo "Copying $i so as to Oracle takes ownership.";  done;
-- List files
#!/bin/ksh
cd /oracle/g01/bkup01/C263309
ls -la > /oracle/g01/admin/sysoper/log/C263309_files_list.txt
-- copy
#!/bin/ksh
cd /oracle/g01/bkup01/C263309
$(for i in WDM*.dmp ; do echo "Copying $i so as to Oracle takes ownership."; cp $i /oracle/g01/bkup01/C263309/dmp; done;) &
$(for i in OEG*.dmp ; do echo "Copying $i so as to Oracle takes ownership."; cp $i /oracle/g01/bkup01/C263309/dmp; done;) &
$(for i in RHS*.dmp ; do echo "Copying $i so as to Oracle takes ownership."; cp $i /oracle/g01/bkup01/C263309/dmp; done;) &
$(for i in LFO*.dmp ; do echo "Copying $i so as to Oracle takes ownership."; cp $i /oracle/g01/bkup01/C263309/dmp; done;) &
$(for i in VWI*.dmp ; do echo "Copying $i so as to Oracle takes ownership."; cp $i /oracle/g01/bkup01/C263309/dmp; done;) &
wait
exit
-- WDM
#!/bin/ksh
cd /oracle/g01/bkup01/C263309/dmp
for i in WDM*.dmp ; do echo "ENCRYPTING FILE $i"; gpg2 --always-trust --output i.pgp --encrypt --recipient SVC_PRD_SprintGGHub $i; done;
for i in WDM*.dmp.pgp ; do echo "VERIFYNG CHECKSUM FOR  FILE $i"; cksum $i > cksum.$i; done;
for i in WDM*.dmp.pgp ; do echo "COPYING FILE $i TO THE DESTINATION"; scp $i SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org:/goldengate/FAST_CUST/data_files ; done;
-- OEG
#!/bin/ksh
cd /oracle/g01/bkup01/C263309/dmp
for i in OEG*.dmp ; do echo "ENCRYPTING FILE $i"; gpg2 --always-trust --output $i.pgp --encrypt --recipient SVC_PRD_SprintGGHub $i; done;
for i in OEG*.dmp.pgp ; do echo "VERIFYNG CHECKSUM FOR  FILE $i"; cksum $i > cksum.$i; done;
for i in OEG*.dmp.pgp ; do echo "COPYING FILE $i TO THE DESTINATION"; scp $i SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org:/goldengate/FAST_FED/data_files ; done;
-- RHS
#!/bin/ksh
cd /oracle/g01/bkup01/C263309/dmp
for i in RHS*.dmp ; do echo "ENCRYPTING FILE $i"; gpg2 --always-trust --output $i.pgp --encrypt --recipient SVC_PRD_SprintGGHub $i; done;
for i in RHS*.dmp.pgp ; do echo "VERIFYNG CHECKSUM FOR  FILE $i"; cksum $i > cksum.$i; done;
for i in RHS*.dmp.pgp ; do echo "COPYING FILE $i TO THE DESTINATION"; scp $i SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org:/goldengate/RMS_RHS/data_files ; done;
-- LFO
#!/bin/ksh
cd /oracle/g01/bkup01/C263309/dmp
for i in LFO*.dmp ; do echo "ENCRYPTING FILE $i"; gpg2 --always-trust --output $i.pgp --encrypt --recipient SVC_PRD_SprintGGHub $i; done;
for i in LFO*.dmp.pgp ; do echo "VERIFYNG CHECKSUM FOR  FILE $i"; cksum $i > cksum.$i; done;
for i in LFO*.dmp.pgp ; do echo "COPYING FILE $i TO THE DESTINATION"; scp $i SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org:/goldengate/RMS_LFO/data_files ; done;
-- VWI
#!/bin/ksh
cd /oracle/g01/bkup01/C263309/dmp
for i in VWI*.dmp ; do echo "ENCRYPTING FILE $i"; gpg2 --always-trust --output $i.pgp --encrypt --recipient SVC_PRD_SprintGGHub $i; done;
for i in VWI*.dmp.pgp ; do echo "VERIFYNG CHECKSUM FOR  FILE $i"; cksum $i > cksum.$i; done;
for i in VWI*.dmp.pgp ; do echo "COPYING FILE $i TO THE DESTINATION"; scp $i SVC_PRD_SprintGGHub@prdpaggsi0001.unix.gsm1900.org:/goldengate/RMS_VWI/data_files ; done;
-- VWI
#!/bin/ksh
cd /oracle/g01/bkup01/C263309
for i in OEG*dmp; do chmod 777 $i ; done;
SQL> select current_scn from v$database;
         CURRENT_SCN
--------------------
      15939989396485
echo "flashback_scn=15939989396485" >> T822890.par
nls
sessconf.sql
set sqlprompt "_user'@'_connect_identifier'> '"
set lin 200 pages 49999 long 49999
set echo on feedback on timing on tim on trimspool on
set serveroutput on
alter session set nls_date_format='dd-mon-rr hh24:mi';
alter session set ddl_lock_timeout=10;
col column_name for a30
col owner for a15
pvmki650.corp.sprint.com
pvmki649.corp.sprint.com
pvmkj156.corp.sprint.com
pvmkj154.corp.sprint.com
pvmki644.corp.sprint.com
pvmki645.corp.sprint.com
pvmkj153.corp.sprint.com
pvmki646.corp.sprint.com
pvmki648.corp.sprint.com
pvmk0069.corp.sprint.com
pvmki647.corp.sprint.com
pvmkh904.corp.sprint.com
pvmkj155.corp.sprint.com
https://imoveisaguiar.com.br/imovel/BA024410-barracao-aluguel-vila-sao-cristovao-valinhos-sp
https://imoveisaguiar.com.br/imovel/BA024410-barracao-aluguel-vila-sao-cristovao-valinhos-sp
https://www.vivareal.com.br/imovel/galpao-deposito-armazem-vila-olivo-bairros-valinhos-com-garagem-320m2-aluguel-RS7500-id-2473024779/?__vt=vt:b&utm_referrer=https%3A%2F%2Fwww.vivareal.com.br%2Faluguel%2Fsp%2Fvalinhos%2Fgalpao_comercial%2F%3F__vt%3Dvt%3Ab%26utm_referrer%3Dhttps%253A%252F%252Fwww.google.com%252F
https://www.vivareal.com.br/imovel/galpao-deposito-armazem-roncaglia-bairros-valinhos-com-garagem-250m2-aluguel-RS2500-id-2484982622/?__vt=vt:b
https://www.vivareal.com.br/imovel/galpao-deposito-armazem-jardim-santo-antonio-bairros-valinhos-com-garagem-120m2-aluguel-RS2600-id-2442285788/?__vt=vt:b
6qbc863zah9x0
fk9ma9m28vzzm
while true
do
echo "info E72NS1T2" | ggsci
date
echo "Files in BR directory: $(ls -ltr /oracle/g01/bkup01/goldgate/BR/E72NS1T2/* | grep -cv total)"
sleep 300
done
/home/oracle/scripts/queries_more_4_hours.ksh
/home/oracle/scripts/lock_report.ksh
set lines 500 pages 1000 trimspool on
set long 9999
spool /home/oracle/scripts/locks_script.log
col username for a22
col "Holder machine" for a26
col event for a32
col "Holder event" for a32
set feedback on
select distinct a.inst_id, a.sid, a.username, a.sql_id, a.prev_sql_id, a.row_wait_obj#, a.row_wait_file#, a.row_wait_block#, a.row_wait_row#, a.status, a.state, a.event,
b.inst_id "Holder_Node",
b.sid "Holder_sid",
p.spid "OS PID",
a.client_identifier "Client Ident",
p.program "Program",
b.machine "Holder machine",
b.row_wait_obj# "Holder_obj#",
b.row_wait_file# "Holder_file#",
b.row_wait_block# "Holder_block#",
b.row_wait_row# "Holder_row#",
b.sql_id "Holder sql_id",
b.event "Holder event",
b.state "Holder state"
from gv$session a left outer join gv$session b on a.blocking_session=b.sid and a.blocking_instance=b.inst_id
join gv$process p on (a.paddr = p.addr AND a.inst_id = p.inst_id)
where
a.BLOCKING_SESSION_STATUS in ('VALID')
/
select u.un "APP_USER",s.machine,s.client_identifier,s.program, s.inst_id, s.sid,s.serial#,s.status,s.logon_time,s.last_call_et,s.sql_id,s.event
from gv$session s join users u on (u.user_id=s.client_identifier)
where s.status='ACTIVE' and s.username is not null and s.machine like 'pvmk%' order by 1,2;
 select 'alter system disconnect session ''' || sid || ',' || serial# || ',' || '@' || inst_id || ''' immediate;'
    from gv$session
    --where sid = '2597'
    where
   type <> 'BACKGROUND'
    --and event like '%db_link%'
    --and upper(program) like '%SQL DEVELOPER%'
    and status='ACTIVE'
    --and machine in ('plsaa002')
    and username = 'CH134255'
    --and sql_id in ('ddugwjx4ym53z')
     --sid in ('390')
    and inst_id = 3
   --and lower(machine) like '%870%'
    --and type <> 'BACKGROUND'
    --and sql_id='9kqy8gs6nqtqg'
    --and username != 'SYS'
    --and username = 'JU059364'
   -- and sid in ('176','2907','2021','2535','14')
    --and osuser='ndwadm'
    --and process = '1382'
       /
ITEMS Primary DBA Oncall Team ATTRIBUTE
1 PEREIRA, VICTOR SFWDBS-DMPCS-CS ExportAsciiUnload
2 CAMPOS, RAYDER  SFWDBS-DS-NOR-NOL-PROD-DBA  MonitorJobErrors
1 EDWARD, MICHAEL SFWDBS-DS-NOR-NOL-PROD-DBA  ExportAsciiUnload
1 EDWARD, MICHAEL SFWDBS-DS-NOR-NOL-PROD-DBA  Space Errors
1 KHALIQ, ABDUL SFWDBS-DS-NOR-NOL-PROD-DBA  ExportAsciiUnload
1 KHALIQ, ABDUL SFWDBS-DS-NOR-NOL-PROD-DBA  TerminatedAccounts
2 PEREIRA, FERNANDO SFWDBS-DS-NOR-NOL-PROD-DBA  Space Errors
2 PIMENTEL, ALEXANDRE SFWDBS-DS-NOR-NOL-PROD-DBA  BackupErrors
9 PIMENTEL, ALEXANDRE SFWDBS-DS-NOR-NOL-PROD-DBA  MonitorJobErrors
3 TOLENTINO, SAMUEL SFWDBS-DS-NOR-NOL-PROD-DBA  MonitorJobErrors
1 TOLENTINO, SAMUEL SFWDBS-DS-NOR-NOL-PROD-DBA  Space Errors
Hi All,
Oracle provided a patch for the mview refresh issue as well (SR 3-23196151471 : ORA-30438: unable to access named pipe 'MV_RF JPIPE_265: operation timed out'):
To implement the solution, please execute the following steps:
1) Please download and review the readme for Patch 30032484.
2) Please apply Patch 30032484 in a test environment.
3) Please retest the issue.
4) If the issue is resolved, please migrate the solution as appropriate to other environments.
Thanks and Regards
1 - DTG installs binaries
2 - DTG configs cluster
3 - DBA upgrades all 3 dbs (Save services and DataDomain scripts beforehand)
select owner, segment_name, sum(bytes)/1048576 as total_mb
from dba_segments
where segment_name in
(
'BUYBACK_DEVICE_INFO',
'EXTR_ORDR_CHNL_INFO',
'ORDER_BILLING',
'ORDER_COMMENTS',
'ORDER_GIVEBACK_DEVICE_INFO',
'ORDER_IB_INFO',
'ORDER_INVOICE',
'ORDER_LINE_DETAILS',
'ORDER_LINE_SOC',
'ORDER_MASTER',
'ORDER_RMA_INFO',
'ORDER_SHIPPING',
'ORDER_SHIPPING_LINE',
'ORDER_TYPE_DESC',
'PHONE_AND_ACCESSORY',
'PHONE_CONFIG'
) and owner not like '%ARCH%'
group by owner, segment_name order by 1,2 ;
select owner, segment_name, sum(bytes)/1048576 as total_mb
from dba_segments
where segment_name in
(
'SYS_LOB0002216669C00004$$',
'SYS_LOB0007195570C00004$$'
) and owner not like '%ARCH%'
group by owner, segment_name order by 1,2 ;
select owner, table_name, segment_name from dba_lobs where table_name in
(
'BUYBACK_DEVICE_INFO',
'EXTR_ORDR_CHNL_INFO',
'ORDER_BILLING',
'ORDER_COMMENTS',
'ORDER_GIVEBACK_DEVICE_INFO',
'ORDER_IB_INFO',
'ORDER_INVOICE',
'ORDER_LINE_DETAILS',
'ORDER_LINE_SOC',
'ORDER_MASTER',
'ORDER_RMA_INFO',
'ORDER_SHIPPING',
'ORDER_SHIPPING_LINE',
'ORDER_TYPE_DESC',
'PHONE_AND_ACCESSORY',
'PHONE_CONFIG'
) and owner not like '%ARCH%'
order by 1,2;
create restore point PRIMARY_EPROD_20211228 guarantee flashback database;
  create restore point PRIMARY_STDBY_20211228 guarantee flashback database;
create restore point PRE_CREATE_TABLE guarantee flashback database;
create restore point PRE_INSERT guarantee flashback database;
create restore point PRE_IDX guarantee flashback database;



  create restore point PRE_RENAME guarantee flashback database;
  flashback database to restore point PRE_RENAME;

set numwidth 20
col name for a30
col time for a30
SELECT NAME, SCN, TIME, DATABASE_INCARNATION#, GUARANTEE_FLASHBACK_DATABASE,STORAGE_SIZE FROM V$RESTORE_POINT;



  uuencode NBXQ.zip NBXQ.zip | mailx -s "NBXQ Scripts and Logs" HORIZON_BR@sprint.com
  HORIZON_BR <HORIZON_BR@sprint.com>
 As-emplaca-2020
 New202006241246!
select owner, object_name, subobject_name , created from dba_objects where owner = 'PEGADATAP74' and object_name = 'PR_DATA_IH_FACT' and CREATED > sysdate -8/24;
select 'INSERT /*+ NOLOGGING */ INTO PEGADATAP74.PR_DATA_IH_FACT_NEW SELECT /*+ PARALLEL(A,16) */ * FROM PEGADATAP74.PR_DATA_IH_FACT PARTITION (' || subobject_name || ') A;' ddl
from dba_objects where owner = 'PEGADATAP74' and object_name = 'PR_DATA_IH_FACT' and CREATED > sysdate -8/24;
commit;
New password is 'New202006241655!'.
RELEASE NOR - MURANI
NOR3
/oracle/g01/bkup01/Releases_New
criar diretório com nome da release
rodar script para gerar lista de jobs a parar e a iniciar
parar os jobs com o script gerado (exec...)
Parar crontab do oracle (fedmenu) e do goldgate (manual)
set lin 999 pages 999
col OWNER            for a20
col NAME             for a30
col TYPE             for a15
col REFERENCED_OWNER for a20
select
   OWNER
 , NAME
 , TYPE
 , REFERENCED_OWNER
from dba_dependencies
  where -- REFERENCED_OWNER IN ('NXTAPPO','NXTREFWAIT') and
     REFERENCED_NAME  in ('INVOICE_TYPE','ITEM_DEFINITION','CSM_TRANSACTIONS');
     OWNER                NAME                           TYPE            REFERENCED_OWNER
-------------------- ------------------------------ --------------- --------------------
ATG_MASTER_APP       ITEM_DEFINITION                SYNONYM         NXTREFWAITSNP
APP_OVM              ITEM_DEFINITION                SYNONYM         NXTREFWAITSNP
APP_3YL              ITEM_DEFINITION                SYNONYM         NXTREFWAITSNP
APP_EKS              ITEM_DEFINITION                SYNONYM         NXTREFWAITSNP
PUBLIC               ITEM_DEFINITION                SYNONYM         NXTREFWAITSNP
NXTL_APP_OVMCM       ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
APP_EKS_MASK         ITEM_DEFINITION                SYNONYM         NXTREFWAITSNP
NXTL_APP_OVMEKS      ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
EKS2ADM              ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
NXTL_APP             ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
DBAPIADM             ITEM_DEFINITION                SYNONYM         NXTREFWAITSNP
IVRADM               ITEM_DEFINITION                SYNONYM         NXTREFWAITSNP
WHOLESALE_APP        ITEM_DEFINITION                SYNONYM         SPWSREFWAITSNP
APP2DL               ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
EAIAPP               ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
PAL_APP              ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
WIAT_RO              ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
APPSNMS              ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
APP_6LN              ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
APP_7CL              ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
APP_LWS              ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
APP_IIN              ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
APP_6WN              ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
APP_9NN              ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
IWS                  ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
WEB_SERVICES         ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
NXTL_APP_FASTFG      ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
NXTL_APP_OVMBG       ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
NXTL_APP_FASTBG      ITEM_DEFINITION                SYNONYM         NXTREFWAITSNPEDM
OWNER                NAME                           TYPE            REFERENCED_OWNER
-------------------- ------------------------------ --------------- --------------------
NXTL_APP             INVOICE_TYPE                   SYNONYM         NXTREFWAITSNPEDM
PUBLIC               INVOICE_TYPE                   SYNONYM         NXTREFWAITSNP
DBA pre work task  - Oracle 19c upgrade = PJ024644 = XNG Production
1. Take Binary backups
"DBA to run following commands and save off the results, should they be needed for any issue resolution support:
1)  crsctl stat res -t
2)  srvctl config listener -l  <LSNR NAME>  From resource list given in 1), do for all listener resources.
3)  srvctl config database -d SVDP101  From resource list given in 1), do for all database resources."
3. Revalidate that free Space in /oracle/g01/software has enough space
4. Schedule a one time CRON RMAN (pre-upgrade) so it completes just before the 8pm Friday event start - SVIP101 & SVDP101
sudo /usr/local/scripts/BackupBinaries /11.2.0.4 /oracle/g01/software
[ek923426@plsli640 ~]$ sudo /usr/local/scripts/Backup_GI_Binaries "11.2.0.4 /oracle/g01/software"
UPGRADE 19C Steps
0- Remove crontab after backing it up.
*backup
crontab -l > crontab_bkp_C262939
*verify
cat crontab_bkp_C262939
*remove
crontab -r
Set ORATAB to N
vi /etc/oratab
1- Stop DB (leave GI)
*Before stopping DBAS, please get a list of invalid objects with the query:
set lin 200 pages 999
col object_name for a30
select owner, object_name, object_type, created, last_ddl_time from dba_objects where status <> 'VALID' order by owner;
select * from dba_jobs;
alter system switch logfile all;
select current_scn from v$database;
***take note of this value for every db.
Manually run an archive backup.
create pfile 1
alter trigger DATAPOINT_AUDIT.TR_SPRINT_USER_LOGON enable;
alter system set resource_limit=false scope=spfile sid='*';
alter system reset SEC_CASE_SENSITIVE_LOGON scope=spfile sid='*';
create pfile '/home/oracle/
**LEAVE THE GI UP, but if they request it to be stopped, use the following command with your own userid:
/oracle/g01/software/grid/11.2.0.4/bin/crsctl stop crs –all –f
SVIP
SVIP101
as oracle
srvctl stop database -d SVIP101
srvctl stop listener -l LISTENER
*LEAVE THE GI UP, but if they request it to be stopped, use the following command with your own userid:
sudo /bin/su - root -c "/oracle/g01/software/grid/11.2.0.4/bin/crsctl stop crs –all –f"
SVIP201
check if database is in sync.
AS ORACLE
$ dgmgrl
DGMGRL for Linux: Version 11.2.0.4.0 - 64bit Production
Copyright (c) 2000, 2009, Oracle. All rights reserved.
Welcome to DGMGRL, type "help" for information.
DGMGRL> connect
Username: /
Connected.
DGMGRL> show configuration
Configuration - DG_SprintVizion
  Protection Mode: MaxPerformance
  Databases:
    SVIP101 - Primary database
    SVIP201 - Physical standby database
Fast-Start Failover: DISABLED
Configuration Status:
SUCCESS
STOP REPLICATION
DGMGRL> EDIT DATABASE 'SVIP201' SET STATE='APPLY-OFF' ;
DGMGRL> EDIT DATABASE 'SVIP101' SET STATE='TRANSPORT-OFF' ;
STOP DATABASE
srvctl stop database -d SVIP201
srvctl stop listener -l LISTENER
SVDP
AS ORACLE
srvctl stop database -d SVDP101
srvctl stop listener -l LISTENER
2- DTG will work on it.
alter system set resource_limit=false scope=spfile sid='*';
alter system reset SEC_CASE_SENSITIVE_LOGON scope=spfile sid='*';
alter system set compatible='11.2.0.4' scope=spfile sid='*';
==================
PREUPGRADE SUMMARY
==================
  /oracle/g01/admin/SVDP1011/upgrade/preupgrade.log
  /oracle/g01/admin/SVDP1011/upgrade/preupgrade_fixups.sql
  /oracle/g01/admin/SVDP1011/upgrade/postupgrade_fixups.sql
col elapsed_time for a20
col cpu_used for a20
SELECT owner, job_name, session_id, running_instance, elapsed_time, cpu_used
FROM dba_scheduler_running_jobs;
  BEGIN
dbms_scheduler.STOP_JOB(job_name=>'SVDMADM.MV_RF$J_29114_28' ,force=>true);
dbms_scheduler.STOP_JOB(job_name=>'SVDMADM.MV_RF$J_29114_18' ,force=>true);
dbms_scheduler.STOP_JOB(job_name=>'SVDMADM.MV_RF$J_29114_26' ,force=>true);
dbms_scheduler.STOP_JOB(job_name=>'SVDMADM.MV_RF$J_29114_2' ,force=>true);
END;
/
SELECT o.name FROM sys.obj$ o, sys.user$ u, sys.sum$ s WHERE o.type# = 42 AND bitand(s.mflags, 8) =8;
select USERNAME
         from DBA_USERS
        where ( PASSWORD_VERSIONS = '10G '
               or PASSWORD_VERSIONS = '10G HTTP ')
          and USERNAME <> 'ANONYMOUS';
SQLNET.ALLOWED_LOGON_VERSION_SERVER=11
 USERNAME
------------------------------
APP_TRP_READ
create pfile='/oracle/g01/admin/$ORACLE_SID/upgrade/init$ORACLE_SID.ora' from spfile;
SET SERVEROUTPUT ON;
set lines 200
EXECUTE DBMS_PREUP.INVALID_OBJECTS;
alter trigger DATAPOINT_AUDIT.TR_SPRINT_USER_LOGON enable;
alter system set cluster_database=false sid='*' scope=spfile;
SPFILE='+ocrvot/SVDP101/PARAMETERFILE/spfile.256.949400853'
cp /oracle/g01/software/rdbms/11.2.0.4/dbs/initSVDP1012.ora  \
/oracle/g01/software/rdbms/19.0.0.0/dbs/initSVDP1012.ora
export SHLIB_PATH=/oracle/g01/software/rdbms/19.0.0.0/lib:/usr/lib
nohup $ORACLE_HOME/bin/dbupgrade > /oracle/g01/admin/$ORACLE_SID/upgrade/upgrade.log &
+DATA_01/SVDP101/PARAMETERFILE/spfile.319.1044157175
srvctl upgrade database -d SVDP101 -o /oracle/g01/software/rdbms/19.0.0.0
srvctl config database -d SVDP101
alter system set job_queue_processes=0 sid='*' scope=spfile;
SQL> show parameter job
NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
job_queue_processes                  integer     25
/oracle/g01/admin/SVIP1011/upgrade/preupgrade.log
/oracle/g01/admin/SVIP1011/upgrade/preupgrade_fixups.sql
/oracle/g01/admin/SVIP1011/upgrade/postupgrade_fixups.sql
 - Copy the $ORACLE_HOME/rdbms/admin/emremove.sql script from the target
      19 ORACLE_HOME into the source 11.2.0.4.0 ORACLE_HOME.
        SET ECHO ON;
        SET SERVEROUTPUT ON;
        @emremove.sql
NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
_ash_size                            big integer 200M
AME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
event                                string      10298 trace name context forev
                                                 er, level 32
alter system reset "_ash_size" scope=spfile sid='*';
alter system reset "event" scope=spfile sid='*';
alter system reset "sec_case_sensitive_logon" scope=spfile sid='*';
 cluster_database_instances
      sec_case_sensitive_logon
@?/olap/admin/catnoamd.sql
 SELECT
      OWNER, TRIGGER_NAME FROM DBA_TRIGGERS WHERE
      TRIM(BASE_OBJECT_TYPE)='DATABASE' AND OWNER NOT IN (SELECT GRANTEE FROM
      DBA_SYS_PRIVS WHERE PRIVILEGE='ADMINISTER DATABASE TRIGGER');
@/oracle/g01/software/rdbms/19.0.0.0/rdbms/admin/catnoexf.sql
alter user CLW_P01_EPM password expire;
alter user CLW_P01_EPM_RPT password expire;
alter user VQADMIN password expire;
alter user DWISEMAN password expire;
alter user ORACLE_OCM password expire;
alter user XDB password expire;
alter user OLAPSYS password expire;
alter user SI_INFORMTN_SCHEMA password expire;
alter user DMSYS password expire;
alter user DIP password expire;
alter user CTXSYS password expire;
alter user MDDATA password expire;
alter system set java_pool_size=512m scope=spfile;
log_archive_dest_1                   string      LOCATION=+FRA_01 VALID_FOR=(ALL_LOGFILES,ALL_ROLES) DB_UNIQUE_NAME=SVIP101
log_archive_dest_2                   string      SERVICE=SVIP201 VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE) DB_UNIQUE_NAME=SVIP201
ALTER SYSTEM SET log_archive_dest_state_2='DEFER' SCOPE=BOTH SID='*';
ALTER SYSTEM SET log_archive_dest_state_2='ENABLE' SCOPE=BOTH SID='*';
@$ORACLE_HOME/rdbms/admin/utlprp.sql 6
15952183576368
15952182981919
alter database recover managed standby database using current logfile disconnect from session;
alter system set local_listener="(ADDRESS=(PROTOCOL=TCP)(HOST=)(PORT=1530))"
SPFILE='+OCRVOT/SVIP101/PARAMETERFILE/spfile.257.930158827'             # line added by Agent
cp /oracle/g01/software/rdbms/11.2.0.4/dbs/init* \
/oracle/g01/software/rdbms/19.0.0.0/dbs/
cp /oracle/g01/software/rdbms/11.2.0.4/dbs/orapw* \
/oracle/g01/software/rdbms/19.0.0.0/dbs/
nohup $ORACLE_HOME/bin/dbupgrade > /oracle/g01/admin/$ORACLE_SID/upgrade/upgrade.log &
create pfile='/oracle/g01/software/rdbms/19.0.0.0/dbs/initSVIP2011.ora' from spfile;
alter system set OPTIMIZER_FEATURES_ENABLE='19.1.0' scope=spfile sid='*';
alter system set cluster_database=false scope=spfile sid='*';
alter system set cluster_database=true scope=spfile sid='*';
srvctl upgrade database -d SVIP101 -o /oracle/g01/software/rdbms/19.0.0.0
srvctl config database -d SVIP101
srvctl start database -d SVIP101
srvctl status database -d SVIP101
+DATA_01/SVIP101/PARAMETERFILE/spfile.275.1044186001
alter user CLW_P01_EPM      identified by "MagentaV1s10nPr0d";
alter user CLW_P01_EPM_USER profile SPRINT_APP_PROFILE  ;
alter user CLW_P01_EPM_USER identified by "bu4Lret9";
alter user CLW_P01_EPM_RPT  identified by "Mag3ntaV1s10nPr0d";
alter user CLW_P01_EPM_PKG  identified by "bu4Lret9";
what is that
APP_TRP_READ
i never heard of it
+DATA_01/SVIP201/PARAMETERFILE/spfile.761.1044188737
srvctl upgrade database -d SVIP201 -o /oracle/g01/software/rdbms/19.0.0.0
srvctl config database -d SVIP201
SELECT thread#, max(SEQUENCE#) FROM V$ARCHIVED_LOG
where applied='YES'
group by thread#
order by 1,2;
SELECT thread#, max(SEQUENCE#) FROM V$ARCHIVED_LOG
--where applied='YES'
group by thread#
order by 1,2;
-- AWR Retention
SELECT retention FROM dba_hist_wr_control;
New password is 'New202006290734!'.
/oracle/g01/admin/sysoper/log/sysoper_expdp.log
New password is 'New202006290936!'.
/
Magenta contacts:
Bonifacio.Ale1@T-Mobile.com;
Ramarao.Unnam@T-Mobile.com;
Triveni.Ganta2@T-Mobile.com;
srinivas.surakanti1@T-Mobile.com;
Brian.Wilson30@T-Mobile.com;
Randy.Covert1@T-Mobile.com;
Audrey.Chisholm@T-Mobile.com;
ESSEOBONG.AKPAIDEM@T-Mobile.com
SELECT * FROM NLS_DATABASE_PARAMETERS;
SELECT value$ FROM sys.props$ WHERE name= 'NLS_CHARACTERSET';
drop package sys.PKG_CIQ_ERC_UTIL;
drop package body sys.PKG_CIQ_MM_UTIL;
drop package sys.PKG_CIQ_MM_UTIL;
drop package body sys.PKG_REPO ;
drop package body sys.PKG_RF2_CAPSTAN_API_JSON_UTIL;
alter database recover managed standby database using current logfile disconnect from session;
 EXPORT CONFIGURATION TO 'upgrade.txt';
ALTER SYSTEM SWITCH ALL LOGFILE;
./dirprm/password.prm
info trandata CHUB_BASE.ADDRESS_DATA
info trandata CHUB_BASE.ADDRESS_NAME_LINK
info trandata CHUB_BASE.BANKRUPTCY
info trandata CHUB_BASE.BILLING_ACCOUNT
info trandata CHUB_BASE.CONTRACT
info trandata CHUB_BASE.CREDIT_HISTORY
info trandata CHUB_BASE.CUSTOMER
info trandata CHUB_BASE.EMAIL_DATA
info trandata CHUB_BASE.MAC_SCHEDULE
info trandata CHUB_BASE.NAME_DATA
info trandata CHUB_BASE.PAYMENT_ATTRIBUTES
info trandata CHUB_BASE.PAY_ARR
info trandata CHUB_BASE.PHYSICAL_DEVICE
info trandata CHUB_BASE.SERVICE_AGREEMENT
info trandata CHUB_BASE.SUBSCRIBER
info trandata CHUB_BASE.SUBSCRIBER_RSOURCE
info trandata CHUB_BASE.PORT_REQUEST
info trandata CHUB_BASE.SERIAL_ITEM_INV
info trandata CHUB_BASE.ACT_PORT_REQUEST
info trandata CHUB_BASE.SUB_PORT_REQUEST
info trandata CHUB_AUX.SPR_MS_MEMBER_ROLES
info trandata CHUB_AUX.ADDRESS_DATA
info trandata CHUB_AUX.ADDRESS_NAME_LINK
info trandata CHUB_AUX.BANKRUPTCY
info trandata CHUB_AUX.BILLING_ACCOUNT
info trandata CHUB_AUX.CONTRACT
info trandata CHUB_AUX.CREDIT_HISTORY
info trandata CHUB_AUX.CUSTOMER
info trandata CHUB_AUX.EMAIL_DATA
info trandata CHUB_AUX.MAC_SCHEDULE
info trandata CHUB_AUX.NAME_DATA
info trandata CHUB_AUX.PAYMENT_ATTRIBUTES
info trandata CHUB_AUX.PAY_ARR
info trandata CHUB_AUX.PHYSICAL_DEVICE
info trandata CHUB_AUX.SERVICE_AGREEMENT
info trandata CHUB_AUX.SUBSCRIBER
info trandata CHUB_AUX.SUBSCRIBER_RSOURCE
info trandata CHUB_AUX.PORT_REQUEST
info trandata CHUB_AUX.SERIAL_ITEM_INV
info trandata CHUB_AUX.ACT_PORT_REQUEST
info trandata CHUB_AUX.SUB_PORT_REQUEST
https://labor-advisor.w3ibm.mybluemix.net/dashboard/country/631/employee/043105/timecard
Extract Trail: /ggsCUST/repl5/c5
LOAN_ITEM_HISTORY
set lin 999 pages 999
col OWNER            for a20
col NAME             for a30
col TYPE             for a10
col REFERENCED_OWNER for a20
select
   OWNER
 , NAME
 , TYPE
 , REFERENCED_OWNER
from dba_dependencies
  where -- REFERENCED_OWNER IN ('NXTAPPO','NXTREFWAIT') and
     REFERENCED_NAME  in ('INVOICE_TYPE','ITEM_DEFINITION','CSM_TRANSACTIONS')
     order by 3;
DBAPIADM             VADOPS_VIEW1                   VIEW                NXTREFWAIT
DBAPIADM             RTRN_ITEM_LDESC                FUNCTION             DBAPIADM
DBAPIADM             GETBT_SUBSINFO                 PACKAGE BODY         DBAPIADM
CCOMMADM             PKG_POS_ORDER                  PACKAGE BODY         PUBLIC
DBAPIADM             GETBT_CUST                     PACKAGE BODY         DBAPIADM
CCOMMADM             PKG_POS_ORDER                  PACKAGE BODY         CCOMMADM
DBAPIADM             GETAPI_QUERYDEVICEINFO         PACKAGE BODY         DBAPIADM
DBAPIADM             GETBT_UNITDETAIL               PACKAGE BODY         DBAPIADM
DBAPIADM             GETBT_ORDERINFO                PACKAGE BODY         DBAPIADM
DBAPIADM             NORBT_SPLIB                    PACKAGE BODY         DBAPIADM
DBAPIADM             GETBT_ORDERINFO_NEW            PACKAGE BODY         DBAPIADM
DBAPIADM             GETEQUIPMENTINFO               PROCEDURE            DBAPIADM
insert into ip_WLNP_FO@"52P_POC0600"
select * from
(select t1.case_dt,
       t1.case_id,
       t2.case_history_id, 
       t2.trans_type,
       t2.date_time,
       dbms_lob.substr(remarks,1,5) 
  from 
       iport_owner.case t1,
       iport_owner.history t2
where t1.case_dt = t2.case_dt and 
       t1.case_id = t2.case_id  and
       t1.case_type ='PB' and t1.trans_type='CANCELLED' and
       t2.message = 'SOA1021I' and
       t2.date_time between trunc(sysdate-1) and trunc(sysdate) and
       t1.case_dt > trunc(sysdate-30));
insert into star_viado
select id, dbms_lob.substr(remarks,1,5),
 cg_dt, id2, id3, trans, cg_dt2,
'TEST'
from  test1.TESTPAT2;
insert into testpat@"TESTPATDBL"
select * from star_viado;
rollba
SQL> create global temporary table star_viado
( id number(30), remarks CLOB, CG_DT Date, id2 number, id3 number, trans varchar2(30), cg_dt2 date, message varchar2(40)) on commit delete rows;
ij471001
yy034287
pw478838
grant
grant SELECT_OVMADM      to wt196021;
grant SELECT_OEMADM      to wt196021;
grant SELECT_OEMADM_ONLY to wt196021;
grant CREATE SESSION     to wt196021;
  -- create dblink FED
CREATE or replace PROCEDURE HTRS.recreate_db_link AS
temp VARCHAR2(200);
BEGIN
select global_name into temp from global_name@SV;
UTL_FILE.PUTF(f_utl_file,temp);
select DUMMY into temp from dual@SV;
UTL_FILE.PUTF(f_utl_file,temp);
END ;
/
dure created.
SQL> execute HTRS.recreate_db_link;
SVDP101
X
PL/SQL procedure successfully completed.
SQL> drop procedure HTRS.recreate_db_link;
Procedure dropped.
SQL>
orapwd file=/oracle/g01/software/rdbms/19.0.0.0/dbs/orapwSVIP1011 entries=15 force=y password=July030720.sp format=12
orapwd file=/oracle/g01/software/rdbms/19.0.0.0/dbs/orapwSVIP1011 entries=15 password=July030720.sp force=y format=12 input_file=/oracle/g01/software/rdbms/19.0.0.0/dbs/orapwSVIP1011_bkp
/oracle/g01/admin/diag/rdbms/svip201/SVIP2011/trace
ALTER TABLE NXTAPPO.BILLING_ACCOUNT ADD SUPPLEMENTAL LOG GROUP group_MG
  (BAN) ALWAYS;
stop ECHB01T1
stop ECHB01T2
stop PCHB01T2
ALTER TABLE "CHUB_BASE"."BILLING_ACCOUNT" drop SUPPLEMENTAL LOG GROUP GGS_8531656;
add trandata CHUB_BASE.BILLING_ACCOUNT
info trandata CHUB_BASE.BILLING_ACCOUNT
start ECHB01T1
start ECHB01T2
start PCHB01T2
sftp nxtndw@10.7.126.22
/usr/bin/sftp nxtndw@10.7.126.22
IP: 10.7.126.22 (cmihx076)
nxtndw/unix11
/nor2/NXTCU01/oracle/GBL20_06/SDF
NXTCU01_dbschema_GBL_19c.def
BZEN7V – PORTO SEGURO S/A OPP 0I-Y...
8BC05ZVV – PORTO SEGURO S/A OPP 0I-Y...
pvmkms097.corp.sprint.com
pvmkms098.corp.sprint.com
pvmkms099.corp.sprint.com
pvmkms100.corp.sprint.com
select count(*), to_char(trunc(sample_time,'HH24'), 'dd-mon-yyyy hh24:mi' )
from dba_hist_active_sess_history
  where sample_time >  sysdate-10
group by to_char(trunc(sample_time,'HH24'), 'dd-mon-yyyy hh24:mi' )
  order by 1;
  select count(*) from DBA_HIST_ACTIVE_SESS_HISTORY where
   lower(machine) in (
      'pvmkms097.corp.sprint.com',
      'pvmkms098.corp.sprint.com',
      'pvmkms099.corp.sprint.com',
      'pvmkms100.corp.sprint.com')
   ;
   New password is 'New202007081028!'.
select sql_id, sql_fulltext from gv$sql where sql_text like 'select ba.ban as "ban"
      ,ba.ban_status as "banStatus"
      ,ba.account_type as "accountType"
      ,ba.account_sub_type as "accountSubType"
      ,act.description as "atstLongDescription"
      ,case%'
          when act.acc_type = 'C'
           and act.def_cas_appl_type = 'BUSIN'
           and act.prepay_ind = 'N'
           and act.federal_account_ind is null
             then  'CORP'
          when act.acc_type = 'G'
           and act.def_cas_appl_type = 'BUSIN'
           and (   act.federal_account_ind is null
                or act.federal_account_ind = 'N')
             then  'GOV'
          else
             'OTHER'
       end as "atstClassification"
      ,act.def_cas_appl_type as "defCasApplType"
      ,act.prepay_ind as "prepayInd"
      ,act.federal_account_ind as "federalAccountInd"
      ,act.d1_sync_ind as "d1SyncInd"
      ,(bc.cdma_actv_cnt + bc.iden_actv_cnt) as "nbrActiveSubs"
      ,(bc.cdma_resrv_cnt + bc.iden_resrv_cnt) as "nbrReservedSubs"
      ,(bc.cdma_suspend_cnt + bc.iden_suspend_cnt) as "nbrSuspendedSubs"
      ,(bc.cdma_cancel_cnt + bc.iden_cancel_cnt) as "nbrCancelledSubs"
  select sql_id, sql_fulltext from gv$sql where lower(sql_text) like '%from billing_account ba, account_type act, ban_sub_count bc%';
 where ba.ban = $(customerId)
   and ba.account_type = act.acc_type
   and ba.account_sub_type = act.acc_sub_type
   and ba.ban = bc.ban(+)%';
sprintws-external-service-7645bcf6f8-dsqwd
sprintws-external-service-7645bcf6f8-l8tw7
sprintws-external-service-7645bcf6f8-fhztn
grep 10.118.68.83 listener.log
grep 10.118.68.84 listener.log
grep 10.118.68.85 listener.log
grep 10.118.68.86 listener.log
alter diskgroup DATA_01  add disk '/dev/oracle/disk100','dev/oracle/disk101','dev/oracle/disk102'
drop disk '/dev/oracle/disk197','dev/oracle/disk198','dev/oracle/disk199'
rebalance power 4;
-- Table added on IRP 20.7.1
MAP NXTAPPO.LOAN_ITEM_HISTORY           ,TARGET NXTAPPO.LOAN_ITEM_HISTORY      ,FILTER (@RANGE(,6));
for i in *.prm ; do echo "MAP NXTAPPO.LOAN_ITEM_HISTORY           ,TARGET NXTAPPO.LOAN_ITEM_HISTORY      ,FILTER (@RANGE(,6));" >> $i; done;
for i in *.prm ; do echo "-- Table added on IRP 20.7.1" >> $i; done;
dirprm/tables_pnor03c5.prm
 create user ec049104 identified by "ec049104_Initial_PWD" default tablespace USERS temporary tablespace TEMP_01 profile SPRINT_USER_PROFILE;
select owner, segment_name, sum(bytes)/1048576
from dba_segments
where segment_name = 'UPDATE_LOAN_RSN_CD_MAP'
group by owner, segment_name;
select inst_id, machine, status, count(*) from gv$session where username is not null group by inst_id, machine, status order by 2,1,3;
expdp.par
userid="/ as sysdba"
directory=IRP2007
dumpfile=IRP2007_LIH_%u.dmp
logfile=IRP2007_LIH.log
tables=NXTAPPO.LOAN_ITEM_HISTORY
flashback_time=systimestamp
cluster=N
exclude=STATISTICS
parallel=4
impdp.par
userid="/ as sysdba"
directory=IRP2007
dumpfile=IRP2007_LIH_%u.dmp
logfile=IRP2007_LIH.log
tables=NXTAPPO.LOAN_ITEM_HISTORY
parallel=4
cluster=N
content=DATA_ONLY
#!/usr/bin/ksh
mkdir -p /oracle/g01/stage03/IRP2007/export
sqlplus / as sysdba << EOF
set echo on feedback on
spool /oracle/g01/admin/sysoper/log/IRP2007_create.log
create or replace directory IRP2007 as '/oracle/g01/stage03/IRP2007/export';
exit
EOF
#!/usr/bin/ksh
chmod -R 777 /oracle/g01/stage03/IRP2007/export
/etc/init.tfa shutdown
New password is 'New202007101515!'.
#!/usr/bin/ksh
mkdir -p /oracle/g01/bkup05/IRP2007
chmod -R 777 /oracle/g01/bkup01/IRP2007
sqlplus / as sysdba << EOF
set echo on feedback on
spool /oracle/g01/admin/sysoper/log/IRP2007_create.log
create or replace directory IRP2007 as '/oracle/g01/bkup05/IRP2007';
exit
EOF
pnbsa579
chmod 777 /oracle/g01/bkup05/IRP2007
plssa510
chmod 777 /oracle/g01/bkup05/IRP2007
select owner, table_name from dba_tables where table_name in (
'NPA_NXX_CSA',
'ADJUSTMENT_REASON',
'CHARGE_INFO',
'CORP_DETAILS',
'DE_DISCOUNT_PLANS',
'DEALER_CLASS',
'DEALER_COMP_ATTR',
'DEALER_PROFILE',
'DISCOUNT_CORP_LINK',
'DISCOUNT_SOC_RELN',
'FEATURE',
'PRICING_EXCEPTION',
'SOC_COMBINATION',
'SOC_CORP_LINK',
'SOC_RULE_LINK',
'ACC_SOC_COMBINATION',
'DE_CONDITIONS',
'DE_DP_COMPONENTS',
'DE_STEPS',
'PROMOTION_TERMS',
'DAILY_PACKAGE_LINK',
'DATA_RC_RANK'
) --and owner = 'NXTREFWAIT'
order by 2
;
NXTOPERO.LOGICAL_DATE
NXTSECO.USERS
NXTSECO.DEALER_USER_LINK
NXTLOAD.LERG6
NXTREFWAIT.NPA_NXX_CSA
NXTREFWAIT.CORP_DETAILS
NXTREFWAIT.ADJUSTMENT_REASONal
NXTREFWAIT.CHARGE_INFO
NXTREFWAIT.DE_DISCOUNT_PLANS
NXTREFWAIT.DEALER_CLASS
NXTREFWAIT.DEALER_COMP_ATTR
NXTREFWAIT.DEALER_PROFILE
NXTREFWAIT.DISCOUNT_CORP_LINK
NXTREFWAIT.DISCOUNT_SOC_RELN
NXTREFWAIT.FEATURE
NXTREFWAIT.PRICING_EXCEPTION
NXTREFWAIT.SOC_COMBINATION
NXTREFWAIT.SOC_CORP_LINK
NXTREFWAIT.SOC_RULE_LINK
NXTREFWAIT.ACC_SOC_COMBINATION
NXTREFWAIT.DE_CONDITIONS
NXTREFWAIT.DE_DP_COMPONENTS
NXTREFWAIT.DE_STEPS
NXTREFWAIT.PROMOTION_TERMS
NXTREFWAIT.DAILY_PACKAGE_LINK
NXTREFWAIT.DATA_RC_RANK
select owner, segment_name, sum(bytes)/1048576
from dba_segments
where owner='SPWSREFWAIT'
and
segment_name in (
'SUBSCRIBER_RSOURCE',
'CSM_PRM_DATA',
'PHYSICAL_DEVICE',
'CYCLE_CONTROL',
'SERIAL_ITEM_INV',
'BILLING_ACCOUNT',
'SUBSCRIBER_RSOURCE',
'CSM_PRM_DATA',
'PHYSICAL_DEVICE',
'CYCLE_CONTROL',
'SERIAL_ITEM_INV',
'BILLING_ACCOUNT',
'SUBSCRIBER_RSOURCE',
'CSM_PRM_DATA',
'PHYSICAL_DEVICE',
'CYCLE_CONTROL',
'SERIAL_ITEM_INV',
'SOC',
'SOC_SALE_CHANNEL',
'RATED_FEATURE',
'CSA_SUBMARKET',
'DEALER_PROFILE',
'DEALER_SUBMARKET',
'SOC_DISTRICT',
'RESELLER_INFO',
'AGREEMENT_ATTR',
'FEATURE',
'NUMBER_GROUP',
'ITEM_DEFINITION',
'FEATURE',
'NUMBER_GROUP',
'ITEM_DEFINITION'
)
group by owner, segment_name
order by 2;
SAREFWAIT
SA
SPWSAPPO.CSM_PRM_DATA
-------------------------------------
PROD Installations Steps:
-------------------------------------
Instructions for SDBA:
A. If new tables to be created as import skip this, else Connect to eaip101@PLSSA510 database and run Prod_add_new_table.sql
B. Connect to eaip101@PLSSA510 database and run PROD_Amdocs_NOR1_DDL.sql
C. If any queries please contact  On-Call DBA Mayank Singh @ +91 9611191724
D.Email log to:
        SFWDBS-DS-NOR-NOL-PROD-DBA
        SFWDBS-IBM-TEST-DBA
    SFWDBS-INFRA-DBA
    As-emplaca-2020
    PROD_Amdocs_NOR3_DDL.sql
    select 'alter system disconnect session ''' || sid || ',' || serial# || ',@' || inst_id || ''' immediate;'
    from gv$session
    where
    type <> 'BACKGROUND'
    and logon_time <= to_date ('16-jul-2020 00:00','dd-mon-yyyy hh24:mi') and event like 'gc current%'
     /
    select 'alter system disconnect session ''' || sid || ',' || serial# || ',@' || inst_id || ''' immediate;'
    from
    (select inst_id, machine, username, sid, serial#, event, to_char(logon_time,'dd-mon-yyyy hh24:mi') from  gv$session
    where
    type <> 'BACKGROUND'
    and logon_time <= to_date ('16-jul-2020 00:00','dd-mon-yyyy hh24:mi') and event like 'gc current%' )
     /
SECURE_REGISTER_listener = (IPC,TCP)
07/12/2020 19:16:30
US/Central 07/12/2020 19:16:29: Incident IM5772689 has been opened by ek923426
Hi All,
It looks like what is needed here is to reach TRELH505z and not DRELI643z.
In this case, The SVIP db server (PLSLI640) has access to TRELH505z and we should be good.
SVDP server (PLSAB407) does not have a direct route to TRELH505z but we can use SVIP server as a first hop.
TVMKL006
30524762
30866988
select /*+Parallel(8)*/ u.username, h.machine, count(*)
from dba_hist_active_sess_history h join dba_users u using (user_id)
where u.username != 'SYS'
group by u.username, h.machine
order by 1,2;
PEGADATAP74                    PART_MAINTENANCE_JOB           SYS                            TRUE  SCHEDULED       15-JUL-20 01.00.00.100000 AM - PEGADATAP74.PARTITION_MAINTENA
                                                                                                                   05:00                          NCE
19-MAR-19 01.00.00.000000 AM -05:00                                         14-JUL-20 01.00.00.064492 AM - freq=daily; byhour=1; byminute
                                                                            05:00                          =0
BEGIN
DBMS_SCHEDULER.CREATE_JOB (
   job_name             => 'CDRADM.PART_MAINTENANCE_JOB',
   job_type             => 'PLSQL_BLOCK',
   job_action           => 'BEGIN CDRADM.PARTITION_MAINTENANCE; END;',
   start_date           => '15-JUL-2020 1.00.00AM US/Central',
   repeat_interval      => 'freq=daily; byhour=1; byminute=0;',
   enabled              =>  TRUE,
   comments             => 'Daily drop of partitions');
END;
/
Step-1: Verify no lag
Apps are stopped, switch log few times on source and verify they are processed by GG and there is no lag for all EXTRACTS
Step-2: Stop extract/replicats/manager
-- Stop all extracts
ggsci> stop extract E72NS1T2
ggsci> stop extract E72P01T1
ggsci> stop extract E72P02C2
-- Make sure there is no lag for the replicats
-- Stop Replicats
ggsci> stop replicat R72NS1T2
ggsci> stop replicat R72P01T1    -- should already be down as it is once-a-day replicat
ggsci> stop replicat R72NS1C2
ggsci> stop replicat R72P01C2    -- should already be down as it is once-a-day replicat
ggsci> stop manager
Step-3: Changed extract E72NS1T2 from classic to integrated (PS_DIST_LN):
Update parm file for extract E72NS1T2 to integrated. What changes need to make ? No change required as I could see
dblogin USERID ggsadm@NDWFP201 PASSWORD AACAAAAAAAAAAAIADDKHHAJBUJQCHFEI, ENCRYPTKEY DEFAULT
REGISTER EXTRACT E72NS1T2 DATABASE
INFO EXTRACT E72NS1T2  UPGRADE
ALTER EXTRACT E72NS1T2 UPGRADE INTEGRATED TRANLOG
START EXTRACT E72NS1T2
Step-4: Add tables PS_Z_PR_REQ_HDR and PS_Z_PR_REQ_LINE
•    Make note of SCN
• export datapump two tables on source database(PFNP1011) -  PS_Z_PR_REQ_HDR and PS_Z_PR_REQ_LINE (/oracle/g01/bkup01/PFNP1011/export/expdp_ggtabs_#task.par)
• Import tables to 72P database NDWFP2011 - /oracle/g01/admin/NDWFP2011/create/MNT/impdp_new_gg_tables_#Task.sql (Hemanth Aatipamula)
cd /goldengate/ggsoracle/72P/12.3/dirprm
-- Copy extract and replicate from prepared files
cp temp_task_e72p01t1.prm e72p01t1.prm
cp temp_taks_e72p01t1_tabs.prm e72p01t1_tabs.prm
cp temp_task_ r72p01t1.prm r72p01t1.prm
Files differences:
> diff temp_task_e72p01t1.prm e72p01t1.prm
3c3
< -- Replicats: r72p01t1
---
> -- Replicats: r72p01c1
> diff temp_task_e72p01t1_tabs.prm e72p01t1_tabs.prm
diff: 0653-827 Missing newline at the end of file e72p01t1_tabs.prm.
543,546c543
< -- 2 tables PS_Z_PR_REQ_HDR and PS_Z_PR_REQ_LINE added as part of task# on 07/19/2020
< TABLE SYSADM.PS_Z_PR_REQ_HDR;
< TABLE SYSADM.PS_Z_PR_REQ_LINE;
< TABLE GGSREAD.GG_NDWFP201_EOD;
---
> TABLE GGSREAD.GG_NDWFP201_EOD;
> diff temp_task_r72p01t1.prm r72p01t1.prm
612,614d611
< --Added tables PS_Z_PR_REQ_HDR and PS_Z_PR_REQ_LINE added as part of task# on 07/19/2020
< MAP SYSADM.PS_Z_PR_REQ_HDR, TARGET SYSADM.PS_Z_PR_REQ_HDR;
< MAP SYSADM.PS_Z_PR_REQ_LINE, TARGET SYSADM.PS_Z_PR_REQ_LINE;
ggsci> dblogin USERID ggsadm@NDWFP201 PASSWORD AACAAAAAAAAAAAIADDKHHAJBUJQCHFEI, ENCRYPTKEY DEFAULT
Step-5: Star Manager/extract/replicats:
-- start manager/all extracts
ggsci> start manager
ggsci> start extract E72NS1T2
ggsci> start extract E72P01T1
ggsci> start extract E72P02C2
-- Start Replicats
ggsci> start replicat R72NS1T2
ggsci> start replicat R72NS1C2
We won’t start once-a-day replicats. They remain stopped
replicat R72P01T1     -- should already be down as it is once-a-day replicat
replicat R72P01C2     -- should already be down as it is once-a-day replicat
e72ns1t2
GGSCI (plsaa887) 1> info all
Program     Status      Group       Lag at Chkpt  Time Since Chkpt
MANAGER     RUNNING
EXTRACT     RUNNING     E72NS1T2    00:00:00      00:00:04
EXTRACT     RUNNING     E72P01T1    00:00:01      00:00:06
EXTRACT     RUNNING     E72P02C2    00:00:03      00:00:06
REPLICAT    RUNNING     R72NS1C2    00:00:00      00:00:09
REPLICAT    RUNNING     R72NS1T2    00:00:00      00:00:02
REPLICAT    STOPPED     R72P01C2    00:00:00      16:48:24
REPLICAT    STOPPED     R72P01T1    00:00:00      16:48:18
PPARGLO                        AR9_GL_EVENT_TMP_6
PPARGLO                        AR9_GL_EVENT_TMP_4
PPARGLO                        AR9_GL_EVENT_TMP_1
PPARGLO                        AR9_GL_EVENT_TMP_0
PPARGLO                        AR9_GL_EVENT_TMP_8
PPARGLO                        AR9_GL_EVENT_TMP_9
PPARGLO                        AR9_GL_EVENT_TMP_2
  break on username on sql_id
select count(1) qty, count(1)*100/sum(count(1)) over() pctload
  from DBA_HIST_ACTIVE_SESS_HISTORY a, dba_users b
  group by SAMPLE_TIME
  order by 1,2;
  insert into oemarch.ident_address_info ( SELECT  *
FROM
  oemadm.ident_address_info
WHERE
  ident_addr_info_id IN
  (
    SELECT
      payer_addr_info_id
    FROM
      oemarch.order_payments
    WHERE
      order_key             = 'aw-toma-6833298'
    AND payer_addr_info_id IS NOT NULL
    UNION
    SELECT
      contact_addr_info_id
    FROM
      oemarch.order_master
    WHERE
      order_key               = 'aw-toma-6833298'
    AND contact_addr_info_id IS NOT NULL
    UNION
    SELECT
      shipping_addr_info_id
    FROM
      oemarch.order_shipping
    WHERE
      order_key                = 'aw-toma-6833298'
    AND shipping_addr_info_id IS NOT NULL
    UNION
    SELECT
      billing_addr_info_id
    FROM
      oemarch.order_billing
    WHERE
      order_key               = 'aw-toma-6833298'
    AND billing_addr_info_id IS NOT NULL
    UNION
    SELECT
      sub_ident_info_id
    FROM
      oemarch.phone_config
    WHERE
      order_key            = 'aw-toma-6833298'
    AND sub_ident_info_id IS NOT NULL
)  ) ;
commit;
select * from (select /*+parallel(8)*/  distinct order_key , ORDER_STATUS_CREATE_DT
from oemadm.order_master
where(order_status_cd ='CANCELLED' or order_status_cd = 'CLOSED') and trunc(updated_dt) < trunc(sysdate-120))
where rownum <11;
select /*+parallel(8)*/
count(distinct order_key)
from oemadm.order_master
where(order_status_cd ='CANCELLED' or order_status_cd = 'CLOSED') and trunc(updated_dt) < trunc(sysdate-120)
;
RMS (3 apps) = 13 gig
DBA Steps
1) SFTP from NOR3 to TMUS Hub server (6 threads)
   prdpaggsi0001.unix.gsm1900.org
  /goldengate/FAST_CUST/data_files
  /goldengate/FAST_FED/data_files
  /goldengate/RMS_RHS/data_files
  /goldengate/RMS_VWI/data_files
  /goldengate/RMS_LFO/data_files
2)  Append to the spreadsheet info from RMS DBA's  (provided by Sashi on 6/19) with the following info:
   Environment/App
   Tablespace names (tables)
   Tablespace names (indexes)   SCN   Timestamp   Schema name
3) Send mail with spreadsheet info and LIST OF THE FILES to Sashi Yeratha, Jerry Brown, Dinakar Kudum, NOR_NOL DBA team & Mary Boldridge + these Magenta contacts:
Ale, Bonifacio <Bonifacio.Ale1@T-Mobile.com>;
Unnam, RAMARAO <Ramarao.Unnam@T-Mobile.com>;
Ganta, Triveni <Triveni.Ganta2@T-Mobile.com>;
surakanti, srinivas <srinivas.surakanti1@T-Mobile.com>;
Wilson, Brian <Brian.Wilson30@T-Mobile.com>;
Covert, Randy <Randy.Covert1@T-Mobile.com>;
Chisholm, Audrey <Audrey.Chisholm@T-Mobile.com>
Akpaidem, Esseobong ESSEOBONG.AKPAIDEM@T-Mobile.com
change_dmp_perm.sh
drelj761:oracle:/home/oracle:SVID201
select sql_id, sql_fulltext
from gv$sql where sql_id='b8u4a6vthjk8s';
select sql_id, hash_value, plan_hash_value from gv$sql_plan
where hash_value in ('27046860650','4077439256');
-- SQL STATS
col c1 heading 'Begin|Interval|time'    format a15
col c2 heading 'SQL|ID'                 format a15
col c3 heading 'Exec|Delta'             format 999,999
col c4 heading 'Buffer|Gets|Delta'      format 999,999
col c5 heading 'Disk|Reads|Delta'       format 999,999
col c6 heading 'IO Wait|Delta'          format 999,999
col c7 heading 'Application|Wait|Delta' format 999,999
col c8 heading 'Concurrency|Wait|Delta' format 999,999
break on c1
select
  to_char(s.begin_interval_time,'mm-dd hh24:mi')  c1,
  sql.sql_id               c2,
  sql.executions_delta     c3,
  sql.buffer_gets_delta    c4,
  sql.disk_reads_delta     c5,
  sql.iowait_delta         c6,
  sql.apwait_delta         c7,
  sql.ccwait_delta         c8
from
   dba_hist_sqlstat        sql,
   dba_hist_snapshot         s
where
   s.snap_id = sql.snap_id
   and sql.sql_id='b8u4a6vthjk8s'
   and s.begin_interval_time > sysdate -1
order by
   c1,
   c2
   /
    EXCLUDE=SCHEMA:"in ('SYS','SYSTEM','DATAPOINT_EM','DATAPOINT','DATAPOINT_AUDIT','DBTUNE')"
    EXCLUDE=AUDIT
    EXCLUDE=DIRECTORY
--  expdp for SVIP
    EXCLUDE = REF_CONSTRAINTS
    EXCLUDE = DIRECTORY
    TABLE_EXISTS_ACTION = IGNORE
    CLW_P01_EPM, CLW_P01_EPM_PKG, CLW_P01_EPM_USER, CLW_P01_EPM_RPT, SVDMADM
    AZUL
    #0033ab
    select count(*), event from gv$session
    where username is not null and username not in ('SYS','SYSTEM') and status = 'ACTIVE'
    group by event order by count(*);
select /*+Parallel(8)*/ count(*), trunc(GENERATED_DT)
from tmoadm.ORDER_LINE_DETAILS
where trunc(GENERATED_DT) > sysdate - 27
group by trunc(GENERATED_DT)
order by trunc(GENERATED_DT);
tmoadmORDER_SHIPPING_LINE.txt
STORMADM."HC_CREDIT_CLASS_SUBPRIME_LKUPB"
STORMADM.HC_CREDIT_CLASS_SUBPRIME_LKUP
set lin 200 pages 999
col owner for a20
col object_name for a20
col object_type for a20
select /*+NO_MERGE*/ owner, object_name, object_type, last_ddl_time from dba_objects
where object_name = 'PKG_SEC'
or (owner, object_name)
in (
select REFERENCED_OWNER, REFERENCED_NAME from dba_dependencies where OWNER='CLW_P01_EPM' and  NAME='PKG_SEC')
order by 4;
OWNER                NAME       TYPE                REFERENCED_OWNER     REFERENCED_NAME                REFERENCED REFERENCED DEPE
-------------------- ---------- ------------------- -------------------- ------------------------------ ---------- ---------- ----
CLW_P01_EPM          PKG_SEC    PACKAGE             SYS                  STANDARD                       PACKAGE               HARD
CLW_P01_EPM          PKG_SEC    PACKAGE BODY        SYS                  STANDARD                       PACKAGE               HARD
CLW_P01_EPM          PKG_SEC    PACKAGE BODY        PUBLIC               USER_OBJECTS                   SYNONYM               HARD
CLW_P01_EPM          PKG_SEC    PACKAGE BODY        PUBLIC               USER_PROCEDURES                SYNONYM               HARD
CLW_P01_EPM          PKG_SEC    PACKAGE BODY        PUBLIC               DBMS_SESSION                   SYNONYM               HARD
CLW_P01_EPM          PKG_SEC    PACKAGE BODY        PUBLIC               DBMS_UTILITY                   SYNONYM               HARD
CLW_P01_EPM          PKG_SEC    PACKAGE             CLW_P01_EPM          APP_LANGUAGES                  TABLE                 HARD
CLW_P01_EPM          PKG_SEC    PACKAGE BODY        CLW_P01_EPM          APP_LANGUAGES                  TABLE                 HARD
CLW_P01_EPM          PKG_SEC    PACKAGE BODY        CLW_P01_EPM          PKG_SEC                        PACKAGE               HARD
CLW_P01_EPM          PKG_SEC    PACKAGE             CLW_P01_EPM          USERS                          TABLE                 HARD
CLW_P01_EPM          PKG_SEC    PACKAGE BODY        CLW_P01_EPM          USERS                          TABLE                 HARD
CLW_P01_EPM          PKG_SEC    PACKAGE BODY        CLW_P01_EPM          PKG_CONST                      PACKAGE               HARD
CLW_P01_EPM          PKG_SEC    PACKAGE BODY        CLW_P01_EPM          PKG_AUDIT                      PACKAGE               HARD
CLW_P01_EPM          PKG_SEC    PACKAGE BODY        CLW_P01_EPM          PARAM_PROGRAM_VALUE            TABLE                 HARD
CLW_P01_EPM          PKG_SEC    PACKAGE BODY        CLW_P01_EPM          PKG_OBJREF                     PACKAGE               HARD
CLW_P01_EPM          PKG_SEC    PACKAGE BODY        CLW_P01_EPM          PROGRAM                        TABLE                 HARD
spool

EXECUTE dbms_stats.gather_system_stats;
EXECUTE dbms_stats.gather_dictionary_stats;
EXECUTE DBMS_STATS.GATHER_FIXED_OBJECTS_STATS;
LOAN_DEVICE_ACCESSORY_IND_NN_STG
'LOAN_DEVICE_ACCESSORY_IND_NN_STG',
LOAN_DEVICE_ACCESSORY_IND_NN_2
LOAN_DEVICE_ACCESSORY_IND_NN_2
ALTER TABLE NXTAPPONRT.ASL_ADMINS MOVE TABLESPACE DATA_A02 PARALLEL 12;
ALTER TABLE NXTAPPONRT.ASL_ADMINS NOPARALLEL;
ALTER TABLE NXTAPPONRT.MAC_SCHEDULE MOVE TABLESPACE DATA_A02 PARALLEL 12;
ALTER TABLE NXTAPPONRT.MAC_SCHEDULE NOPARALLEL;
ALTER INDEX NXTAPPONRT.MAC_SCHEDULE_PK REBUILD PARALLEL 12 TABLESPACE IX01;
ALTER INDEX NXTAPPONRT.MAC_SCHEDULE_PK NOPARALLEL;
ALTER INDEX NXTAPPONRT.MAC_SCHEDULE_1IX REBUILD PARALLEL 12 TABLESPACE IX01;
ALTER INDEX NXTAPPONRT.MAC_SCHEDULE_1IX NOPARALLEL;
ALTER INDEX NXTAPPONRT.ASL_ADMINS_1UQ REBUILD PARALLEL 12 TABLESPACE IX01;
ALTER INDEX NXTAPPONRT.ASL_ADMINS_1UQ  NOPARALLEL ;
ALTER INDEX NXTAPPONRT.ASL_ADMINS_9IX REBUILD PARALLEL 12 TABLESPACE IX01;
ALTER INDEX NXTAPPONRT.ASL_ADMINS_9IX NOPARALLEL;
ALTER INDEX NXTAPPONRT.ASL_ADMINS_PK REBUILD PARALLEL 12 TABLESPACE IX01;
ALTER INDEX NXTAPPONRT.ASL_ADMINS_PK NOPARALLEL;
stop rnrtt1c2
stop rnrtt2c2
select owner, table_name, max(last_analyzed)
from dba_tab_statistics
where lower(table_name) in
(
'config_value_number',
'config_value_char',
'ancestor_p',
'ancestor_c',
'xitor',
'wp_tasks',
'wp_workplan'
)
group by owner, table_name;
CONFIG_VALUE_NUMBER
WP_TASKS
CONFIG_VALUE_NUMBER
('CONFIG_VALUE_NUMBER','WP_TASKS','CONFIG_VALUE_NUMBER')
OWNER                TABLE_NAME                     MAX(LAST_
-------------------- ------------------------------ ---------
CLW_P01_EPM          CONFIG_VALUE_NUMBER            29-JUL-20
CLW_P01_EPM          WP_WORKPLAN                    18-JUN-20
CLW_P01_EPM           XITOR                          06-MAY-20
CLW_P01_EPM          WP_TASKS                       10-JUL-20
CLW_P01_EPM          CONFIG_VALUE_CHAR              15-JUN-20
select sql_id , sql_text from dba_hist_sqltext
where sql_text like '
SELECT
  "A"."BUKRS","A"."HKONT","A"."AUGDT","A"."AUGBL","A"."ZUONR",
  "A"."BLDAT","A"."WAERS","A"."XBLNR","A"."BLART","A"."MONAT",
  "A"."SHKZG","A"."GSBER","A"."MWSKZ","A"."DMBTR","A"."WRBTR",
  "A"."SGTXT","A"."AUFNR","A"."WERKS","A"."KOSTL","A"."ZFBDT",
  "A"."XOPVW","A"."VALUT","A"."BDIFF","A"."BDIF2","A"."VBUND",
  "A"."PSWSL","A"."WVERW","A"."DMBE2","A"."DMBE3","A"."BDIF3",
  "A"."XRAGL","A"."PROJK","A"."XARCH","A"."PSWBT","A"."XNEGP",
  "A"."RFZEI","A"."CCBTC","A"."XREF3","A"."BUPLA","A"."BEWAR",
  "A"."IMKEY","A"."DABRZ","A"."GRANT_NBR","A"."FKBER","A"."GEBER",
  "A"."PPRCT","A"."BUZID","A"."AUGGJ","A"."UZAWE","A"."PGEBER",
  "A"."PGRANT_NBR","A"."KIDNO","B"."RCLNT","B"."RYEAR","B"."DOCNR",
  "B"."RLDNR","B"."RBUKRS","B"."DOCLN","B"."ACTIV","B"."RMVCT",
  "B"."RTCUR","B"."RUNIT","B"."AWTYP","B"."RRCTY","B"."RVERS",
  "B"."LOGSYS","B"."RACCT","B"."COST_ELEM","B"."RCNTR","B"."PRCTR",
  "B"."RBUSA","B"."KOKRS","B"."SEGMENT","B"."ZZZZLRSC","B"."SCNTR",
  "B"."PPRCTR","B"."SBUSA","B"."PSEGMENT","B"."TSL","B"."HSL","B"."KSL",
  "B"."OSL","B"."MSL","B"."WSL","B"."DRCRK","B"."POPER","B"."RWCUR",
  "B"."GJAHR","B"."BUDAT","B"."BELNR","B"."BUZEI","B"."BSCHL",
  "B"."BSTAT","B"."LINETYPE","B"."XSPLITMOD","B"."USNAM",
  "B"."TIMESTAMP"
FROM
  "BSIS" "A" INNER JOIN "FAGLFLEXA" "B" ON "B"."RBUKRS"="A"."BUKRS" AND
  "B"."BELNR"="A"."BELNR" AND "B"."GJAHR"="A"."GJAHR" AND "B"."BUZEI"="A
  "."BUZEI" AND "B"."RCLNT"="A"."MANDT"
WHERE
  "A"."BUKRS"=:A0 AND "A"."HKONT"=:A1 AND "A"."BLART"=:A2 AND
  "A"."XARCH"=:A3 AND "A"."MANDT"=:A4 AND "B"."RACCT"=:A5 AND
  "B"."RLDNR"=:A6 AND ("B"."BSTAT"=:A7 OR "B"."BSTAT"=:A8) AND
  "B"."BUDAT" BETWEEN :A9 AND :A10 AND "B"."RCLNT"=:A11
  select sql_id , sql_text from gv$sql where sql_text like '%FROM%BSIS%A%INNER%JOIN%FAGLFLEXA%B%ON%RBUKRS%=%BUKRS%' AND
  "B"."BELNR"="A"."BELNR" AND "B"."GJAHR"="A"."GJAHR" AND "B"."BUZEI"="A
  "."BUZEI" AND "B"."RCLNT"="A"."MANDT"%'
  /
  select sql_id , sql_text from dba_hist_sqltext
  where sql_text like
  '%FROM%BSIS%A%INNER%JOIN%FAGLFLEXA%B%ON%RBUKRS%=%BUKRS%AND%BELNR%=%BELNR%AND%GJAHR%=%GJAHR%AND%BUZEI%AND%RCLNT%MANDT%BUKRS%:A0%HKONT%:A1%BLART%:A2%XARCH%:A3%:A4%:A5%:A6%:A7%:A8%:A9%:A10%:A11';
  SELECT "A"."BUKRS",
       "A"."HKONT",
       "A"."AUGDT",
       "A"."AUGBL",
       "A"."ZUONR",
       "A"."
BLDAT",
       "A"."WAERS",
       "A"."XBLNR",
       "A"."BLART",
       "A"."MONAT",
       "A"."SHKZG",
       "A"."
GSBER",
       "A"."MWSKZ",
       "A"."DMBTR",
       "A"."WRBTR",
       "A"."SGTXT",
       "A"."AUFNR",
       "A"."
WERKS",
       "A"."KOSTL",
       "A"."ZFBDT",
       "A"."XOPVW",
       "A"."VALUT",
       "A"."BDIFF",
       "A"."
BDIF2",
       "A"."VBUND",
       "A"."PSWSL",
       "A"."WVERW",
       "A"."DMBE2",
       "A"."DMBE3",
       "A"."
BDIF3",
       "A"."XRAGL",
       "A"."PROJK",
       "A"."XARCH",
       "A"."PSWBT",
       "A"."XNEGP",
       "A"."
RFZEI",
       "A"."CCBTC",
       "A"."XREF3",
       "A"."BUPLA",
       "A"."BEWAR",
       "A"."IMKEY",
       "A"."
DABRZ",
       "A"."GRANT_NBR",
       "A"."FKBER",
       "A"."GEBER",
       "A"."PPRCT",
       "A"."BUZID",
       "
A"."AUGGJ",
       "A"."UZAWE",
       "A"."PGEBER",
       "A"."PGRANT_NBR",
       "A"."KIDNO",
       "B"."RC
LNT",
       "B"."RYEAR",
       "B"."DOCNR",
       "B"."RLDNR",
       "B"."RBUKRS",
       "B"."DOCLN",
       "B"."A
CTIV",
       "B"."RMVCT",
       "B"."RTCUR",
       "B"."RUNIT",
       "B"."AWTYP",
       "B"."RRCTY",
       "B"."R
VERS",
       "B"."LOGSYS",
       "B"."RACCT",
       "B"."COST_ELEM",
       "B"."RCNTR",
       "B"."PRCTR",
       "
B"."RBUSA",
       "B"."KOKRS",
       "B"."SEGMENT",
       "B"."ZZZZLRSC",
       "B"."SCNTR",
       "B"."PPR
CTR",
       "B"."SBUSA",
       "B"."PSEGMENT",
       "B"."TSL",
       "B"."HSL",
       "B"."KSL",
       "B"."OSL",
       "B"."MSL",
       "B"."WSL",
       "B"."DRCRK",
       "B"."POPER",
       "B"."RWCUR",
       "B"."GJAHR",
       "B". "BUDAT",
       "B"."BELNR",
       "B"."BUZEI",
       "B"."BSCHL",
       "B"."BSTAT",
       "B"."LINETYPE",
       "
B"."XSPLITMOD",
       "B"."USNAM",
       "B"."TIMESTAMP"
FROM "BSIS" "A"
INNER JOIN "FAGLFLEXA" "B" ON "B"."RBUKRS"="A"."BUKRS"
AND "B"."BELNR"="A"."BELNR"
AND "B"."GJAHR"="A"."GJAHR"
AND "B"."BUZEI"="A"."BUZEI"
AND "B"."RCLNT"="A"."MANDT"
WHERE "A"."BUKRS"=:A0
  AND "A"."HKONT"=:A1
  AND "A"."BLART"=:A2
  AND "A"."XARCH"=:A3
  AND "A"."MANDT"=:A4
  AND "B"."RACCT"=:A5
  AND "B"."RLDNR"=:A6
  AND ("B"."BSTAT"=:A7
       OR "B"."BSTAT"=:A8)
  AND "B"."BUDAT" BETWEEN :A9 AND :A10
  AND "B"."RCLNT"=:A11
select * from DBA_PART_KEY_COLUMNS;
delete /*+Parallel(6)*/ from WRH$_SQL_BIND_METADATA tab
  where ( tab.snap_id <= 201228 and dbid = 2122743911)
  and not exists (select 1 from WRM$_BASELINE b
    where (tab.dbid = b.dbid)
    and  (tab.snap_id >= b.start_snap_id)
    and  (tab.snap_id <= b.end_snap_id));
commit;
'STS_SVIP_SPA');
set lin 200 pages 999
col USERNAME for a20
col DB_LINK for a30
col OWNER for a20
CREATE DATABASE LINK DBTUNE_ON_SVIP101
CONNECT TO DBTUNE IDENTIFIED BY Dbtune_n3w_9ijiji
USING 'SVIP101';
create table RECOVER1.configuration  as
SELECT * FROM sprint_model.configuration
AS OF TIMESTAMP
TO_TIMESTAMP('2020-AUG-02 18:00:00', 'YYYY-MON-DD HH24:MI:SS');
SELECT count(*) FROM sprint_model.configuration
AS OF TIMESTAMP
TO_TIMESTAMP('2020-JUL-31 08:00:00', 'YYYY-MON-DD HH24:MI:SS');
IIDUSER.DEVICE_CONTEXT
select count(distinct sql_id) from SYS.dba_hist_sqlstat where parsing_schema_name like 'CLW_P01_EPM%' ;
-- drop the STS' task, if it exists
BEGIN
  DBMS_SQLTUNE.DROP_TUNING_TASK(task_name => 'STS_SVIP_SPA_CACHE');
END;
/
-- drop the STS, if it exists
BEGIN
DBMS_SQLTUNE.DROP_SQLSET(sqlset_name => 'STS_SVIP_SPA_CACHE');
END;
/
-- create the STS
BEGIN
DBMS_SQLTUNE.CREATE_SQLSET(
    sqlset_name => 'STS_SVIP_SPA_CACHE',
    description => 'STS for SQL PA for new AIX db');
END;
/
-- checking the STS
select count(*) from dba_sqlset_statements where sqlset_name = 'STS_SVIP_SPA_CACHE';
-- load the STS from node1's memory
BEGIN
    dbms_sqltune.capture_cursor_cache_sqlset(
      sqlset_name=>'nor1022720_cacheiterative',
      time_limit=>'600',
      repeat_interval=>'300',
      basic_filter=>bf,
      sqlset_owner=>'SYS');
END;
/
echo "---------------------------" >> /home/goldgate/scripts/info_detail_hub.out
echo "6qsWS" >> /home/goldgate/scripts/info_detail_hub.out
echo "---------------------------" >> /home/goldgate/scripts/info_detail_hub.out
echo "info *"|/goldengate/ggsoracle/6QSWSHIST/ora191/ggsci >> /home/goldgate/scripts/info_detail_hub.out
echo " " >> /home/goldgate/scripts/info_detail_hub.out
dbms_sqltune.capture_cursor_cache_sqlset(
-- senha wifi
Nossaprimeirarede08.
-- senha modem
As-emplaca-2020

-- certificado
tricolo4

/goldengate/ggsoracle/6QSVAD/ora191/scripts/get_pump_lag_vad.sh
GG_VAD_PUMP_LAG
GG_VAD_PUMP_SEQ
#monitoring scripts
edit crontab to replace /home/goldgate/scripts/chk_hub.sh by /home/goldgate/scripts/chk_hub.sh_11g and /home/goldgate/scripts/chk_hub.sh_19c
cp /goldengate/ggsoracle/6QSHIST/ora112/scripts/get_pump_lag_6qshist.sh /goldengate/ggsoracle/6QSHIST/ora112/scripts/get_pump_lag_6qshist.sh_11g
cp /goldengate/ggsoracle/6QSHIST/ora112/scripts/get_pump_lag_6qshist.sh_19c /goldengate/ggsoracle/6QSHIST/ora191/scripts/get_pump_lag_6qshist.sh
cp /goldengate/ggsoracle/6QSARCH/ora112/scripts/get_pump_lag_6qsarch.sh /goldengate/ggsoracle/6QSARCH/ora112/scripts/get_pump_lag_6qsarch.sh_11g
cp /goldengate/ggsoracle/6QSARCH/ora112/scripts/get_pump_lag_6qsarch.sh_19c /goldengate/ggsoracle/6QSARCH/ora191/scripts/get_pump_lag_6qsarch.sh
cp /goldengate/ggsoracle/7IS/ora112/scripts/get_pump_lag_7is.sh /goldengate/ggsoracle/7IS/ora112/scripts/get_pump_lag_7is.sh_11g
cp /goldengate/ggsoracle/7IS/ora112_old/scripts/get_pump_lag_7is.sh_19c /goldengate/ggsoracle/7IS/ora191/scripts/get_pump_lag_7is.sh
cp /goldengate/ggsoracle/7JL/ora112/scripts/get_pump_lag_7jl.sh /goldengate/ggsoracle/7JL/ora112/scripts/get_pump_lag_7jl.sh_11g
cp /goldengate/ggsoracle/7JL/ora112/scripts/get_pump_lag_7jl.sh_19c /goldengate/ggsoracle/7JL/ora191/scripts/get_pump_lag_7jl.sh
ls -l *.prm | grep -i include *.prm | grep -v - | awk -F: '{print $2}'| sort -u
tar xvf /oracle/g01/software/gg_19c_solaris_11g/gg19c_sun_11g.tar
hub:
tar xvf /oracle/g01/bkup01/gg_19c_aix_oracle11g/gg19c_aix_11g.tar
/goldengate/ggsoracle/7IS/ora112/scripts/get_pump_lag_7is.sh
/goldengate/ggsoracle/6QSHIST/ora112/scripts/get_pump_lag_6qshist.sh
/goldengate/ggsoracle/7JL/ora112/scripts/get_pump_lag_7jl.sh
/goldengate/ggsoracle/6QSARCH/ora112/scripts/get_pump_lag_6qsarch.sh
/home/goldgate/scripts/environment_abended_rep/monitor_abd_hub.sh
/goldengate/ggsoracle/6qsWS/ora112/scripts/get_pump_lag_norsnap_ws.sh
prod-arch='cd /goldengate/ggsoracle/6QSARCH/ora191; ORACLE_SID=NDW-ARCH-hub; export ORACLE_SID; export LIBPATH=/oracle/g01/software/rdbms/11.2.0.4/lib:/goldengate/ggsoracle/6QSARCH/ora191:/opt/tdicu/lib_64:/usr/odbc/drivers:/usr/odbc/lib:/usr/teragss/aix-power/client/lib:/usr/lib'
prod-argl='cd /goldengate/ggsoracle/7IS/ora191; ORACLE_SID=NDW-ARGL-hub; export ORACLE_SID; export LIBPATH=/oracle/g01/software/rdbms/11.2.0.4/lib:/goldengate/ggsoracle/7IS/ora191:/opt/tdicu/lib_64:/usr/odbc/drivers:/usr/odbc/lib:/usr/teragss/aix-power/client/lib:/usr/lib'
prod-hist='cd /goldengate/ggsoracle/6QSHIST/ora191; ORACLE_SID=NDW-HIST-hub; export ORACLE_SID; export LIBPATH=/oracle/g01/software/rdbms/11.2.0.4/lib:/goldengate/ggsoracle/6QSHIST/ora191:/opt/tdicu/lib_64:/usr/odbc/drivers:/usr/odbc/lib:/usr/teragss/aix-power/client/lib:/usr/lib'
prod-sview='cd /goldengate/ggsoracle/7JL/ora191; ORACLE_SID=NDW-sview-hub; export ORACLE_SID; export LIBPATH=/oracle/g01/software/rdbms/11.2.0.4/lib:/goldengate/ggsoracle/7JL/ora191:/opt/tdicu/lib_64:/usr/odbc/drivers:/usr/odbc/lib:/usr/teragss/aix-power/client/lib:/usr/lib'
prod-sview-arch='cd /goldengate/ggsoracle/7JLARCH/ora191; ORACLE_SID=NDW-sview-arch-hub; export ORACLE_SID; export LIBPATH=/oracle/g01/software/rdbms/11.2.0.4/lib:/goldengate/ggsoracle/7JLARCH/ora191:/opt/tdicu/lib_64:/usr/odbc/drivers:/usr/odbc/lib:/usr/teragss/aix-power/client/lib:/usr/lib'
LD_LIBRARY_PATH=/oracle/g01/software/rdbms/11.2.0.4/lib:/usr/lib:/oracle/g01/software/grid/11.2.0.4/lib:/oracle/g01/software/grid/11.2.0.4/lib:/opt/ORCLcluster/lib:/usr/lib:/usr/ucblib:/goldengate/ggsoracle/6QSVAD/ora191'
export LIBPATH=/oracle/g01/software/rdbms/11.2.0.4/lib:/goldengate/ggsoracle/6qshis/ora191:/opt/tdicu/lib_64:/usr/odbc/drivers:/usr/odbc/lib:/usr/teragss/aix-power/client/lib:/usr/lib
export LIBPATH=$ORACLE_HOME/lib:/goldengate/ggsoracle/6qshist/ora191:/opt/tdicu/lib_64:/usr/odbc/drivers:/usr/odbc/lib:/usr/teragss/aix-power/client/lib:/usr/lib
Install GG 19c on both GG Prod Hubs and NDW for VAD:
PLSS5006 - /goldengate/ggsoracle/6qshist/ora191
PLSAB586 - /goldengate/ggsoracle/6qshist/ora191
PNBAB160 - /goldengate/ggsoracle/6qshist/ora191
EDIT GLOBALS
ALLOWOUTPUTDIR /ggsCUST/6QSHIST/Trail1/
HEARTBEATTABLE GGSADM.GG_HEARTBEAT
ALLOWOUTPUTDIR /ggsCUST/6QSHIST/Trail1
Uninstall / remove old unused versions on NDW:
PLSS5006 -
rm -f /goldengate/ggsoracle/6qshist/ora111_old
ora111_old_10g
ora102_old
Send mail when completed to GG distro & J/Cohen & Frank H.
ALTER REPLICAT R6QV11C1 , EXTSEQNO 888 EXTRBA 0
ALTER REPLICAT R6QV21C1 , EXTSEQNO 888 EXTRBA 0
5006
alias 6qshist='cd /goldengate/ggsoracle/6qshist/ora191;pwd; export LIBPATH=/oracle/g01/software/rdbms/11.2.0.4/lib:/usr/lib:/oracle/g01/software/grid/11.2.0.4/lib:/goldengate/ggsoracle/6qshist/ora191:/opt/ORCLcluster/lib:/usr/lib:/usr/ucblib'
export LIBPATH=/oracle/g01/software/rdbms/11.2.0.4/lib:/goldengate/ggsoracle/6QSVAD/ora191:/opt/tdicu/lib_64:/usr/odbc/drivers:/usr/odbc/lib:/usr/teragss/aix-power/client/lib:/usr/lib
cp -rp /goldengate/ggsoracle/6qshist/ora112/dir* /goldengate/ggsoracle/6qshist/ora191
cp -rp /goldengate/ggsoracle/6qshist/ora112/scripts /goldengate/ggsoracle/6qshist/ora191
mv /goldengate/ggsoracle/6qshist/ora112 /goldengate/ggsoracle/6qshist/ora112_old_T820055
cp /home/goldgate/scripts/mon_dmls.ksh /home/goldgate/scripts/mon_dmls.ksh_old_T820055
cp /home/goldgate/scripts/mon_dmls.ksh_new /home/goldgate/scripts/mon_dmls.ksh
cp /code/prod/dba/repl_check/ksh/chk_hc_replicates.ksh /code/prod/dba/repl_check/ksh/chk_hc_replicates.ksh_old_T820055
cp /code/prod/dba/repl_check/ksh/chk_hc_replicates.ksh_new /code/prod/dba/repl_check/ksh/chk_hc_replicates.ksh
cp /code/prod/dba/eodcop/ksh/m027dedvad /code/prod/dba/eodcop/ksh/m027dedvad_old_T820055
cp /code/prod/dba/eodcop/ksh/m027dedvad_new /code/prod/dba/eodcop/ksh/m027dedvad
cp /goldengate/ggsoracle/6qshist/ora191/scripts/get_replicat_lag.sh /goldengate/ggsoracle/6qshist/ora191/scripts/get_replicat_lag.sh_old_T820055
cp /goldengate/ggsoracle/6qshist/ora191/scripts/get_replicat_lag.sh_new /goldengate/ggsoracle/6qshist/ora191/scripts/get_replicat_lag.sh
cp /code/prod/dba/repl_check/ksh/start_replicats_v1.ksh /code/prod/dba/repl_check/ksh/start_replicats_v1.ksh_old_T820055
cp /code/prod/dba/repl_check/ksh/start_replicats_v1.ksh_new /code/prod/dba/repl_check/ksh/start_replicats_v1.ksh
586
alias prod-vad='cd /goldengate/ggsoracle/6qshist/ora191; pwd; LD_LIBRARY_PATH=/oracle/g01/software/rdbms/11.2.0.4/lib:/usr/lib:/oracle/g01/software/grid/11.2.0.4/lib:/oracle/g01/software/grid/11.2.0.4/lib:/opt/ORCLcluster/lib:/usr/lib:/usr/ucblib:/goldengate/ggsoracle/6qshist/ora191'
cp -rp /goldengate/ggsoracle/6qshist/ora112/dir* /goldengate/ggsoracle/6qshist/ora191
cp -rp /goldengate/ggsoracle/6qshist/ora112/scripts /goldengate/ggsoracle/6qshist/ora191
mv /goldengate/ggsoracle/6qshist/ora112 /goldengate/ggsoracle/6qshist/ora112_old_T820055
cp /goldengate/ggsoracle/6qshist/ora191/scripts/get_pump_lag_vad.sh /goldengate/ggsoracle/6qshist/ora191/scripts/get_pump_lag_vad.sh_old_T820055
cp /goldengate/ggsoracle/6qshist/ora191/scripts/get_pump_lag_vad.sh_new /goldengate/ggsoracle/6qshist/ora191/scripts/get_pump_lag_vad.sh
160
alias prod-vad='cd /goldengate/ggsoracle/6qshist/ora191; pwd; LD_LIBRARY_PATH=/oracle/g01/software/rdbms/11.2.0.4/lib:/usr/lib:/oracle/g01/software/grid/11.2.0.4/lib:/oracle/g01/software/grid/11.2.0.4/lib:/opt/ORCLcluster/lib:/usr/lib:/usr/ucblib:/goldengate/ggsoracle/6qshist/ora191'
cp -rp /goldengate/ggsoracle/6qshist/ora112/dir* /goldengate/ggsoracle/6qshist/ora191
cp -rp /goldengate/ggsoracle/6qshist/ora112/scripts /goldengate/ggsoracle/6qshist/ora191
mv /goldengate/ggsoracle/6qshist/ora112 /goldengate/ggsoracle/6qshist/ora112_old_T820055
LIBPATH=${GG_HOME}:${ORACLE_HOME}/lib;  export LIBPATH
PATH=${GG_HOME}:${TMP_PATH};    export PATH
LORENZOJAMESMARIE.DEGUZMAN@SPRINT.COM - 2+ hours ago    [Update from Customer]
thank you! Let me know if you need anything else aside from what I gave.
for i in r*.prm; do echo $i; tr \ALLOWDUPTARGETMAP \--ALLOWDUPTARGETMAP' < $i > $i"_new" ; done;
for i in r*.prm; do echo $i"_new"; mv $i"_new" $i; done;
cp /goldengate/ggsoracle/gvn/ora112/dirchk/* /goldengate/ggsoracle/gvn/ora191/dirchk
mv /goldengate/ggsoracle/gvn/ora112 cp /goldengate/ggsoracle/gvn/ora112_old
dblogin useridalias GGADMIN
upgrade checkpointtable GGSADM.GGSCHKPT
add HEARTBEATTABLE
cp
upgrade checkpointtable GGSADM.GGSCHKPT_7IS
 cp /goldengate/ggsoracle/7is/ora112/dirprm/r7isi5c1.prm /goldengate/ggsoracle/7is/ora191/dirprm/r7isi5c1.prm
 cp /goldengate/ggsoracle/7is/ora112/dirprm/r7isi6c1.prm /goldengate/ggsoracle/7is/ora191/dirprm/r7isi6c1.prm
 cp /goldengate/ggsoracle/7is/ora112/dirprm/r7istrc1.prm /goldengate/ggsoracle/7is/ora191/dirprm/r7istrc1.prm
 cp /goldengate/ggsoracle/7is/ora112/dirprm/rrgl01c1.prm /goldengate/ggsoracle/7is/ora191/dirprm/rrgl01c1.prm
for i in rrgl01c1.prm; do echo $i; tr \ALLOWDUPTARGETMAP \--ALLOWDUPTARGETMAP < $i > $i"_new" ; done;
for i in r*.prm; do echo $i"_new"; mv $i"_new" $i; done;
rrgl01c1
for i in *.inc; do echo $i; sed 's/^ALLOWDUPTARGETMAP/--ALLOWDUPTARGETMAP/g' $i > $i"_new" ; done;
sed 's/^ALLOWDUPTARGETMAP/--ALLOWDUPTARGETMAP/g' < r6qs1pc2.prm
for i in *; do echo $i"_new"; mv $i"_new" $i; done;
for i in *; do echo $i; sed 's/^DYNAMICRESOLUTION/--DYNAMICRESOLUTION/g' $i > $i"_new" ; done;
for i in /goldengate/ggsoracle/*/ora191/scripts/get_pump_lag*sh; do echo $i; sed 's/ora112/ora191/g' $i > $i"_new" ; done;
for i in /goldengate/ggsoracle/*/ora191/scripts/get_pump_lag*sh; do echo $i"_new"; mv $i"_new" $i; done;
/goldengate/ggsoracle/7jlarch/ora191/dirprm
INCLUDE dirprm/norsnap_process_parms.inc
INCLUDE dirprm/norsnap_common_maps.inc
ADD EXTTRAIL /data/apps/ggscust1/6QSRHIST1/h1, EXTRACT PHADHIC1
MAP NXTHISTO.AIR_SUMMARY,          TARGET NXTHISTO.AIR_SUMMARY          ,FILTER (@RANGE(1,6));
MAP NXTHISTO.AIR_SUMMARY,         TARGET NXTHISTO.AIR_SUMMARY         ,FILTER (@RANGE(1,6)) KEYCOLS(CYCLE_CODE,CYCLE_RUN_MONTH,CYCLE_RUN_YEAR,GROUP_NO,SUB_MARKET,PRODUCT_TYPE,AIR_TYPE,PP_NAME,PERIOD_NUMBER,FREE_CHG_IND,TOLL_TYPE,FEATURE_CODE,RATE,TIER_CODE);
19 3871 8851
19 99222 1044
--Inter
NB2020as
As*Emp80
--wordpress
-- vivo empresas
Borapraia80
=hHa6Y2q
carol
>SCX8adB
/oracle/g01/admin/diag/rdbms/svip101/SVIP1011/trace/SVIP1011_tt04_32491.trc
bN=qA3jM
Source: plsab611
Tables: Below listed 19 tables from CLCSADM schema in Production OEGP101 DB (o4H)
DestinatiDestination: DVMK8071 /data/appdba/Task number opened with (via: plsab612/13/14)
Method: SEN using EXPDP command for the data dump
Time: 08/13 0 2 AM to 08/13 4 AM
size of transport: 1.25 MB
size of import: 1.25 MB
Additional Instructions....
No outage or bounce is needed for this task.
a. Get dump of structure and data from Production (OEGP101) of below listed tables from CLCSADM schema.  Please use EXPDP when getting the dump.

select owner, segment_name, tablespace_name, sum(bytes)/1048576 from dba_segments where owner in (
'CLW_P01_EPM')
group by owner, segment_name, tablespace_name order by 4;

userid="/ as sysdba"
directory=T846002
dumpfile=T846002.dmp
logfile=T846002.log
tables=CLCSADM.CLCS_STORE, CLCSADM.STG_ACC_TEAM_USER, CLCSADM.CLCS_ACC_TEAM_USER, CLCSADM.STG_STORE_CONF2, CLCSADM.CLCS_STORE_CONF2, CLCSADM.STG_STORE_CONF, CLCSADM.CLCS_STORE_CONF, CLCSADM.STG_STORE, CLCSADM.STG_STORE_AUTH_DOMAINS, CLCSADM.CLCS_STORE_AUTH_DOMAINS, CLCSADM.STG_STORE_ALLOWED_IPS, CLCSADM.CLCS_STORE_ALLOWED_IPS, CLCSADM.STG_APP_LOGIN, CLCSADM.STG_ACTIVATOR_LOGIN_GROUP, CLCSADM.STG_ADMINISTRATOR_LOGIN, CLCSADM.CLCS_ADMINISTRATOR_LOGIN, CLCSADM.CLCS_ACTIVATOR_LOGIN_GROUP,CLCSADM.CLCS_APP_LOGIN,CLCSADM.CLCS_CONFIG_PROPS
for i in r*.prm; do echo $i; sed 's/DYNAMICRESOLUTION/--DYNAMICRESOLUTION/g' $i > $i"_new" ; done;
for i in r6qg5*2.prm ; do sed 's/EOFDELAYCSECS/--EOFDELAYCSECS/g' < $i > $i"_new" ; done;
for i in r6qgg*c4*.prm ; do sed 's/TARGET.*NXTAPPO_G.BILLING_ACCOUNT,/TARGET   NXTAPPO_G.BILLING_ACCOUNT,          COLCHARSET( PASSTHRU,CRD_LIMIT_SPANC_AMT),/g' < $i ; done;
for i in r6qg5*2.prm; do echo $i"_new"; mv $i"_new" $i; done;
ls -l r6qg5*
NXTAPPO BILLING_ACCOUNT CRD_LIMIT_SPANC_AMT /goldengate/ggsoracle/6qs/ora112/dirprm/r6qs0*c5 (range 8)
NXTAPPO SUBSCRIBER  SPANC_CODE  /goldengate/ggsoracle/6qs/ora112/dirprm/r6qg5*c2 (range 8)
NXTAPPO SUBSCRIBER_HISTORY  SPANC_CODE  /goldengate/ggsoracle/6qs/ora112/dirprm/r6qs0*c5(range 8)
NXTAPPO_G BILLING_ACCOUNT CRD_LIMIT_SPANC_AMT /goldengate/ggsoracle/6qs/ora112/dirprm/r6qgg1c4(range 8)
NXTAPPO_G SUBSCRIBER  SPANC_CODE  /goldengate/ggsoracle/6qs/ora112/dirprm/r6qtg1c2
NXTAPPO_G SUBSCRIBER_HISTORY  SPANC_CODE  /goldengate/ggsoracle/6qs/ora112/dirprm/r6qtg1c5
PNBAB518
KEYCOLS(CUSTOMER_ID, SUBSCRIBER_NO, PRODUCT_TYPE, UNIT_ESN, ESN_SEQ_NO)
echo "---------------------------" >> /home/goldgate/scripts/info_detail_hub.out
echo "6qs" >> /home/goldgate/scripts/info_detail_hub.out
echo "---------------------------" >> /home/goldgate/scripts/info_detail_hub.out
echo "info *"|/goldengate/ggsoracle/6qs/ora191/ggsci >> /home/goldgate/scripts/info_detail_hub.out
echo " " >> /home/goldgate/scripts/info_detail_hub.out
KEYCOLS(BAN,BILL_SEQ_NO,SUBSCRIBER_NO, PRODUCT_TYPE)
NXTAPPO                        BILL_SUBSCRIBER_PK             NORMAL
KEYCOLS(SUB_APPL_ID,SUB_TRX_ID,SYS_CREATION_DATE,SYS_UPDATE_DATE,OPERATOR_ID,APPLICATION_ID,DL_SERVICE_CODE,DL_UPDATE_STAMP,SOURCE_COMP_ID,MASTER_TRX_ID,GROUP_TRX_SEQ_NO,ACTV_CODE_ID,REQ_NOTIFY_CD,REQ_SEQ_NO,LEN_BEFORE_COMP,GENERAL_DATA,TRX_STATUS,TREATMENT_COUNT,ENTITY_TYPE,ENTITY_ID,AUDIT_INTERVAL,UNI_LOB_ACT_SIZE,DEPEN_IND,PUB_TRX_ID,BUFFER_ID,CORRELATION_ID,AUDIT_INDICATOR,ORIG_MST_TRX_ID,GENERAL_FIELD_NUM,GENERAL_FIELD_STRING,ERROR_CODE,ERROR_DESC,PART_DEP_ENT,CRE_DEP_ENT,ORIG_SUB_TRX_ID,DAY_OF_MONTH,QUEUE_ID,ASYNC_IND)
regis
993373409
find /oracle/* -type f \(  -name "*.par" \) -mtime +3 -exec grep -i compress "{}" \;
find /oracle/* -type f \(  -name "*.par" \) -mtime +3 -exec grep -iH compress "{}" \;
possible slowness points:
7363_DB-148188.sql :
alter session force parallel ddl parallel 12;
alter table usage_log drop column not_limited_sql;
6506_Conf-88633.sql :
490
log:
6821_Err-143603.sql :
create index idx1_rule_run_entity_pk on idx1_rule_run_entity_pk(pk) parallel 12;
alter index idx1_rule_run_entity_pk  noparallel;
7054_Rule-145298.sql :
create index idxfk4_rule_http_call_log on rule_http_call_log(rule_queue_id) parallel 12;
alter index idxfk4_rule_http_call_log noparallel;
6661_DB-136685.sql :
delete /*+parallel(12)*/ from config_value_char   where value_char is null;
commit;
delete /*+parallel(12)*/ from config_value_number where value_number is null;
commit;
delete /*+parallel(12)*/ from config_value_date   where value_date is null;
commit;
6753_DB-136686.sql :
alter session force parallel query parallel 12;
alter session force parallel ddl parallel 12;
alter session force parallel dml parallel 12;
7989_BPL-157736.sql :
delete /*+parallel(12)*/ from view_opt_column where view_opt_id in (
    select v.view_opt_id
      from grid_page p
      join view_opt v on v.grid_page_id = p.grid_page_id
     where p.module_name = 'BPL_IMPORT_COMP_LOG_IMPORT'
);
 Set line 150 pages 999;
    set long 90000;
    COL "META" FOR A300 word_wrapped
begin
   dbms_metadata.set_transform_param (dbms_metadata.session_transform, 'SQLTERMINATOR', true);
   dbms_metadata.set_transform_param (dbms_metadata.session_transform, 'PRETTY', true);
end;
/
select dbms_metadata.get_granted_ddl('OBJECT_GRANT', 'CLW_P01_EPM') meta from dual;
select dbms_metadata.get_granted_ddl('OBJECT_GRANT', 'CLW_P01_EPM_PKG') meta from dual;
'CREATE OR REPLACE PUBLIC SYNONYM ' ||
spool create_public_synonyms.sql
SELECT  'CREATE OR REPLACE PUBLIC SYNONYM ' || synonym_name || ' for ' || table_owner ||'.' || table_name ||  ';'
from dba_synonyms where owner= 'PUBLIC' and table_owner not in ('SI_INFORMTN_SCHEMA','QUEST','ANONYMOUS','APPQOSSYS','ORDDATA','VOUCHERADM'
  ,'AWR_STAGE','CSMIG','CTXSYS','DBSNMP','DEMO','DIP','DMSYS','DSSYS','EXFSYS','HR','OE','SH','LBACSYS','MDSYS','ORACLE_OCM','ORDPLUGINS','ORDSYS','OUTLN'
  ,'PERFSTAT','SCOTT','ADAMS','JONES','CLARK','BLAKE','SYS','SYSTEM','TRACESVR','TSMSYS','XDB','ORABACK','SYSMAN','WMSYS','XS$NULL','CTLCTR_APP_USER'
  ,'DDMA_APP_USER','DBSPI_USER','DATAPOINT_AUDIT','DATAPOINT_EM','SECURITY_AUDIT','DATAPOINT') order by table_name;
spool off;
/oracle/ECP/saptrace/diag/rdbms/ecp/ECP2/trace/ECP2_lmd0_43712624.trc.
0592115056
0592115056
grep -il "^alter table.*wp_.*add.*default.*" ./*/*.sql | grep -vi pkg | grep -vi rollback
grep -il "^alter table.*wp_.*drop.*" ./*/*.sql | grep -vi pkg | grep -vi rollback
grep -il ^delete.*ANCESTOR.*where.* ./*/*.sql | grep -vi pkg | grep -vi rollback
grep -il ^insert.*select.*ANCESTOR.* ./*/*.sql | grep -vi pkg | grep -vi rollback
grep -il ^update.*ANCESTOR.*set.*where.* ./*/*.sql | grep -vi pkg | grep -vi rollback
WP_TASKS_WEEKLY_BACKUP
WP_TASKS_MONTHLY_BACKUP
USAGE_LOG
CONFIG_VALUE_CLOB
MESSAGE
AUDIT_CALL_STACK
AUDIT_LOG
('IDX3_AUDIT_LOG','IDX2_AUDIT_LOG','IDX1_AUDIT_LOG','IDX10_AUDIT_LOG','AUDIT_LOG_PK','IDX1_AUDIT_CALL_STACK','PK_AUDIT_CALL_STACK','IDX1_MESSAGE'
AUDIT_LOG_CFLITE
AUDIT_LOG_TLITE
AUDIT_LOG_RECOVERY_MSG
AUDIT_LOG_RECOVERY_ATTEMPT
CONFIG_FIELD_WIDTH
EXPORT_RUN:
FIELD_SEC_PRIVS_LOOKUP
FIELD_PUBLISHED_LOOKUP
GRID_PAGE_FIELD_WIDTH
IMP_RUN
IMP_RUN_DATA_MAP_SQL
IMP_RUN_ENTITY_PK
IMP_RUN_ERROR
IMP_RUN_GRID_DELTAS
IMP_RUN_GRID_INCR
NOTIF_QUEUE
NOTIF_QUEUE_ATTACHMENT
NOTIF_QUEUE_ATTEMPT
NOTIF_QUEUE_NOTIF_XREF
PROCESS_RUN
REPORT_RUN
REPORT_RUN_EMAILTO
REPORT_RUN_PARAM
REPORT_RUN_SQL
REPORT_RUN_SQL_PARAM
REPORT_RUN_TB_PARAM
RULE_RUN
RULE_RUN_ENTITY_PK
SESSION_TEMP
TMP_CLOB
ULOG_VIEW_OPT
ULOG_VIEW_OPT_COLUMN
USAGE_LOG
ULOG_VIEW_OPT_HIGHLIGHT
ULOG_FILTER_OPT
ULOG_FILTER_OPT_VALUE
ULOG_FILTER_OPT_ATTRIB
ULOG_VIEW_OPT_HIGHLIGHT_USER
ULOG_VIEW_OPT_SORT_COLUMN
ULOG_VIEW_OPT_MAP
ULOG_VIEW_OPT_MAP_INFO_COLUMN
ULOG_VIEW_OPT_MAP_LEG_COLOR
ULOG_VIEW_OPT_TASK_OVER
ULOG_VIEW_OPT_RDE
ULOG_VIEW_OPT_RDE_FIELD
ULOG_VIEW_OPT_RDE_GRID
ULOG_VIEW_OPT_RDE_TASK_COLUMN
USAGE_LOG_LOAD_TAB
USAGE_LOG_BROWSER
USAGE_LOG_SQL_PARAM
USAGE_LOG_GRID_FILTER
USER_USED_PWD
VIEW_OPT_HIGHLIGHT
XITOR_AUDIT
XITOR_COUNT
RULE_HTTP_CALL_LOG
ERROR_LOG
ANCESTOR
ERROR_LOG
WP_TASKS
CONFIG_VALUE_NUMBER
WF_STEP
WP_LINKS
./19.12.13/6894_Err-144108_fix_na_tasks.sql
./19.19.0/6894_Err-144108_fix_na_tasks.sql
set parallel to : update wp_tasks
./19.19.0/6661_DB-136685.sql
set parallel to : delete config_value...
./20.6/7541_DB-151057.sql
set parallel to : update AUDIT_LOG_COMP_COL
./19.19.0/7363_DB-148188.sql
this will take some time: alter table usage_log drop column not_limited_sql;
T847490
08/23/2020 00:01:00
08/23/2020 00:15:00
/oracle/g01/admin/common/sqlnet/tnsnames.ora
comment line 22
uncomment line 23
test tnsping
> tnsping TELP101
TNS Ping Utility for IBM/AIX RISC System/6000: Version 11.2.0.4.0 - Production on 21-AUG-2020 16:41:00
Copyright (c) 1997, 2013, Oracle.  All rights reserved.
Used parameter files:
/oracle/g01/software/client/11.2.0.4/network/admin/sqlnet.ora
Used TNSNAMES adapter to resolve the alias
Attempting to contact (DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(COMMUNITY=tcp.world)(PROTOCOL=TCP)(Host=rai.corp.sprint.com)(Port=1521)))(CONNECT_DATA=(SID=TELP101)))
OK (0 msec)
ERAI01C1
rhs
/goldengate/ggsoracle/rhs/ora122
Program     Status      Group       Lag at Chkpt  Time Since Chkpt
MANAGER     RUNNING
...
EXTRACT     RUNNING     ERAI01C1    00:00:57      00:00:01
...
Export/Transport IRP20.11 - Prod to Jumpbox to ITE1 - WDM (9NN/4BN) - PLSAB612 to pvmke292 to TREAB592 - 2 GB Uncompressed via SEN
PLSAB612 L5SVC3 PROD
TREAB592 RESVC3 ITE1
pvmke292  (Jump box) (Data to be transported to Jump box under Minor change and then to test server under non prod change)
4BN OEMARCH
Need to VERIFY the entire structure (tables, synonyms, sequences, stored procedures, foreign/primary key constraints, indexes etc.) of this schema in ITE1 against Production
9NN (TOES) + 4BN (Fast) OEMADM We only want data from specific tables and structures, indexes, grants and synonyms for all tables
Need to VERIFY the entire structure (tables, synonyms, sequences, stored procedures, foreign/primary key constraints, indexes etc.) of this schema in ITE1 against Production. If there are any differences then ITE1 needs to be fixed to reflect the production (unless the changes themselves belong to the current release).
*********** 4BN Checklist for OEMARCH & OEMADM *********
Look up tables should be in sync
Constraints/ Indexes should be created and compared for correctness
DBMS jobs has to be started after the refresh
Analyze Tables once the refresh is over
******************************************
*********** 4BN REF Tables in OEMADM - Total of 112 tables *********
*********** Structures and Data *********
ACCESSORY_HOUSE_ACCOUNT
ACK_STATUS_DESC
ACTION_INFO
ACTION_LOOK_UP
ACTIVITY_STATUSES
ASI_ERROR_DESC
ASW_EQUIPMENT_PRIORITY
AUDIT_HISTORY_LOOKUP
AUDIT_STATUS_DESC
AUTO_ACTIVITY_WRKFLW_TASK
BOLTON_DETAILS
BUSINESS_ENTITY_INFO
BUSINESS_RULE
CATEGORY_ITEM
COLLATERAL_DETAILS
COMMENTS_LOOKUP
CONFIG_DATA
CORP_GOV_LOOKUP
CREDIT_POLICY_DETAILS
CREDIT_SCORE_DETAILS
DECISION_CODE_LOOKUP
DYNAMIC_CONTENT
EMAIL_TAX_FEE_DETAILS
EMAIL_TEMPLATE_TAG_DETAILS
EMAIL_TEMPLATES
ENSEMBLE_API_ROUTING
EQUIPMENT_ALLOCATION
ERROR_CODE_DETAILS
ERROR_DESC
EVENT_TYPE_LOOKUP
FALLOUT_COUNTS
FAST_AUTO_ACTIVITY
FAST_AUTO_ACTIVITY_INFO
FAST_AUTO_ACTIVITY_INFO_HISTRY
FAST_HB_RULE_DATA
FAST_HB_RULES
FAST_ROLE_DESC
FAST_SLA_DISTRO
FAST_SLA_RULE_CRITERIA
FAST_SLA_RULE_LOG
FAST_SLA_RULES
FAST_UAFLDTYPE_CHNL_LOOKUP
FAST_USER_DETAILS
FAST_USER_ROLE
FE_API_STATUS_DATA
FE_BT_STATUS_DATA
FE_ERROR_DESC
FE_ERROR_DESC_LOOKUP
HOUSE_ACCOUNT_INFO
INVENTORY_CATEGORY
INVENTORY_ITEM
LOOK_UP_DEF
ORDER_PRIORITY
ORDER_PRIORITY_HISTORY
ORDER_STATUS_MSG
OS_ACTIVITY_LOOK_UP
OS_AT_AST_RULES
OS_AT_AST_RULES_HISTORY
OS_ATTEMPT_LOOKUP
OS_CLOSED_REASONS_LOOKUP
OS_CLOSEDREASON_LOOKUPHISTRY
OS_EXIT_POINT_LOOKUP
OS_EXT_SCHEDULE_INFO
OS_IMMD_ATTN_RULES
OS_IMMD_ATTN_RULES_HISTRY
OS_ORDER_RESULT_LOOKUP
OS_ORDER_RESULT_LOOKUP_HISTORY
OS_ORDER_TYPE_RULES
OS_PRIORITY_DETAIL
OS_PRIORITY_DETAIL_HISTORY
OS_PRIORITY_DETAIL_LOOKUP
OS_QUEUE_ID_ROLE_MAPPING
OS_QUEUE_LOOKUP
OS_QUEUE_LOOKUP_HISTORY
OS_QUEUE_PRIORITY_LOOKUP
OS_QUEUE_ROLES_LOOKUP
OS_SCHEDULING_INFO
OS_SCHEDULING_INFO_HISTRY
OS_SCHEDULING_RULES
OS_SCHEDULING_RULES_HISTORY
OS_SITE_LOOKUP
OS_SLA_LOOKUP
OS_SLA_LOOKUP_HISTRY
OS_STATE_TIMEZONE_LOOKUP
OS_TIMEZONE_LOOKUP
OS_USER_QUEUE_RULE_PRIORITY
OS_WORK_HOURS_LOOKUP
OS_WORK_HOURS_LOOKUP_HISTRY
OS_WSGROUP_LOOKUP_HISTORY
OS_WSTATUS_DESC_HISTRY
OS_WSTATUS_GROUP_DESC
OS_WSTATUS_GROUP_LOOKUP
OS_WSTATUS_SRULES
OS_WSTATUS_SRULES_HISTORY
OTM_ORDER_RETURN
OTM_RETURN_DEF
PAYMENT_RESP_CODE_DESC
PREPAID_ORDER_SUBTYPE_DESC
PREPAID_ORDER_TYPE_SUBTYPE
PSI_LICENSE
QUEUE_ARCHIVE
QUEUE_CUSTOMIZATION
QUEUE_CUSTOMIZATION
QUEUE_DESC
QUEUE_EMAILS
REASON_DESC
SUBMARKET_BUSENTITY_REF
USER_ROLE_DESC
USER_ROLE_PRIVILEGES
USER_ROLE_QUEUE_RESTRICTIONS
WORKING_STATUS_DESC
WRITE_TRANS_FN
*********** End of 4BN REF Tables in OEMADM *********
*********** 4BN/9NN Shared REF Tables in OEMADM - Total of 30 tables *********
*********** Structures and Data *********
ACCOUNT_TYPE_DESC
AIRLINE_DESC
ATTRIBUTE_DESC
ATTRIBUTE_TYPE_DESC
BILLING_TYPE_DESC
CC_TYPE_DESC
CHANNEL_DETAILS
CHARGE_CODE_DESC
COUNTRY
CREDIT_POLICY
CUST_TYPE_DESC
DONOTSELL_BAN_LIST
FEATURE
FORM_OF_PAYMENT_DESC
FRAUD_STATUS_DESC
ORDER_CHANNEL_DESC
ORDER_LINE_WORKING_STATUS_DESC
ORDER_STATUS_DESC
ORDER_TYPE_DESC
PAYMENT_TYPE_DESC
PHONE_AND_ACCESSORY
PHONE_TO_ACCESSORY
PHONE_TO_FEATURE
PROGRAM_DESC
SERVICE_DESC
SHIPPING_CHARGES
SHIPPING_METHOD_DESC
SHIPPING_TYPE_DESC
STATE_DESC
VENDOR_DESC
*********** End of 4BN/9NN Shared REF Tables in OEMADM *********
************ 9NN REF Tables in OEMADM - Total of 54 tables *********
*********** Structures and Data *********
ACCT_TYPES
AFFILIATE_DESCRIPTION
AISLE_DNIS_MAPPING
AUTHORIZATION_TYPE_DESC
CUSTOMER_FRAUD_INFO
CUSTTYPE_NWK_LOOKUP
DNIS
EQUIPMENT_REBATE
FRAUD_CONDITION_LOOKUP
FRAUD_LIMITS
FRAUD_LIMITS
FRAUD_LIMITS_ATTRIBUTE
FRAUD_LIMITS_LOOKUP
FRAUD_RULE_COMMON_ATTR
FRAUD_RULE_SCENARIO_ATTR
FRAUD_RULE_SCENARIO_HANDLER
FRAUD_RULES
INDUSTRY_DESC
INVALID_DATA
MARKET_CHURN_MAP
MEDIA_SOURCE
NOTES_LOOKUP
P2K_ACCT_MTRX
P2K_AFFILIATE_LOOKUP
P2K_CORP_GOV_LOOKUP
PREPAID_PRICING
PREPAID_RETURN_REASONS
PREPAID_SHIPPING
PREPAID_WAIVE_SHIPPING_REASON
PRICE_CODES
PRICING
PRIMARY_DISPOSITION
SAC
SECONDARY_DISPOSITION
SENSITIVE_DATA_TYPE_DESC
SHIPPING_METHOD_LOOKUP
SKU_OST_MAPPING
TM_ATTR_DEFAULT and TM_ATTRIB
* these 2 tables use tm_attrib_default_seq sequence
* sequence number needs to be set to match sequence number in production
TM_BUNDLE_TO_EQUIPMENT
TM_CAMPAIGN
TM_DNIS_TO_PRIORITY_CODE
TM_INSTRUCTION
TM_INSTRUCTION_TYPE
TM_PAGE_TAB
TM_PHONE_TO_ACCESSORY
TM_PREFERRED_SOCS
TM_RECOMENDED_EQUIPMENT
TM_VENDOR_DESC
TM_VENDOR_PROGRAM_DETAIL
TMP_P2K_AFFILIATE_LOOKUP
TMP_P2K_CORP_GOV_LOOKUP
VENDOR_AGENCY_CDE
ZIPCODE_DEALERCODE
ZIPCODE_TO_MARKET
************ End of 9NN REF Tables in OEMADM **************
/apps/C265847/
cd /oracle/g01/bkup01/T841395
expdp parfile=OEMADM_4BN_9NN_SHARED_REF_TABS.par &
expdp parfile=OEMADM_4BN_REF_TABLES.par &
expdp parfile=OEMADM_9NN_REF_TABLES.par &
expdp parfile=OEMADM_OEMARCH_Structure.par &
expdp parfile=PROD_OEMADM_OEMARCH_OEMARCH_STG_STRU.par &
wait
alter user ek923426 identified by "Sim-vaidarcert0" replace "Bora-emplacar80";
conn ek923426/Sim-vaidarcert0
Xandao_seu_fdp9
Mike_bibinha_24
Samukita_4_e_20
MG_vtnc_pqp_100
Murangus_bbq_69
New password is 'New202101121514!'.
ticket # 29712428
NTID
GSM1900.org\ABufalo1
gK*56pR!B!m3d4*SN!q2*t9Jy7L!Y*
Cu_de_1ntranet1
ppolamgvs0000f.unix.gsm1900.org
reppldfrh0052.unix.gsm1900.org
ADM ID
GSM1900.org\ADM_ABufalo1
Mike_bibinha_24
S.SoJm.8DwXBoUyOV
REQ0875837,REQ0875838
EQUIPMENT_ID = CP3648TNPB
000000: 43 50 33 36 34 38 54 4e 50 42                   |CP3648TNPB      |
PRIORITY = 3
000000: 33                                              |3               |
HANDSET_CHOICE_IND = A
000000: 41                                              |A               |
ACTIVE_YN = Y
000000: 59                                              |Y               |
STATE_ID = *
000000: 2a                                              |*               |
HANDSET_TYPE = LTE
000000: 4c 54 45                                        |LTE             |
MODFD_BY_ID = SYSTEM
000000: 53 59 53 54 45 4d                               |SYSTEM          |
MODFD_DT = 2020-09-28 07:18:10
000000: 32 30 32 30 2d 30 39 2d 32 38 20 30 37 3a 31 38 |2020-09-28 07:18|
000010: 3a 31 30                                        |:10             |
488095773
ggsci < /home/goldgate/scripts/tmp/6qs_increment_rep_seq.oby > 6qs_alter.log
alter replicat RNGGT1C2, extseqno 284435, extrba 0
alter replicat RARCH1C3, extseqno 194056, extrba 0
alter replicat RNRGG1C4, extseqno 261595, extrba 0
alter replicat RGGTG1C5, extseqno 100535, extrba 0
alter replicat RNRT01C6, extseqno 181913, extrba 0
rnrt09c4.prm
PLSS5005(6qs):
REPLICAT    RUNNING     R6QSTRC3    00:00:00      00:00:03
REPLICAT    RUNNING     R6QSTRG3    00:00:00      00:00:01
info R6QG5*C3
start R6QS01*
 info R6QS01*
alter replicat R6QSTRG3 extseqno 194092 extrba 0
194055
2020-08-23 19:18:51  WARNING OGG-01154  SQL error 1400 mapping NXTAPPO.CSM_TRX_LOG to NXTAPPO.CSM_TRX_LOG OCI Error ORA-01400: cannot insert NULL into ("NXTAPPO"."CSM_TRX_LOG"."SYS_CREATION
_DATE") (status = 1400), SQL <INSERT INTO "NXTAPPO"."CSM_TRX_LOG" ("TRX_SEQ_NO","BAN","HANDLED_BY_PROCESS","CRM_UPDATE_DATE") VALUES (:a4,:a5,:a6,:a7)>.
REPLICAT    ABENDED     R6QTG1C6    12:59:44      00:32:58
REPLICAT    ABENDED     RG7101C2    10:22:30      00:05:59
REPLICAT    ABENDED     RG7102C2    10:16:35      00:06:06
REPLICAT    ABENDED     R6QTG1C3    13:15:14      00:50:13
REPLICAT    ABENDED     R6QSS2C6    12:37:38      01:06:24
REPLICAT    ABENDED     R6QG53C6    12:04:57      01:49:37
REPLICAT    ABENDED     R6QG55C2    09:28:39      01:52:28
REPLICAT    ABENDED     R6QG56C2    09:31:09      01:52:23
REPLICAT    ABENDED     R6QS06C3    09:13:53      01:40:57
select * from (select
   log_date,
   job_name,
   status,
   req_start_date,
   actual_start_date,
   run_duration,
   ADDITIONAL_INFO
from
   dba_scheduler_job_run_details
where
   owner='CLW_P01_EPM'
   --job_name = 'IMP_10024387643'
   --job_name like 'ORA$%'
   --and status <> 'SUCCEEDED'
   --and actual_start_date > sysdate -2
order by
   actual_start_date desc )
   where rownum < 10;
[‎8/‎25/‎2020 4:13 PM]  Pereira, Fernando M [IBM Contractor for Sprint]:
lol
https://techapps.t-mobile.com/pier
0800 775 1212
0800 774 1515
CLW_P01_EPM/MagentaV1s10nPr0d
Mag3ntaV1s10nPr0d
nohup sh testUpgrade_20_6_3.sh > just_a_test.txt
  without the & at the end
  CLW_P01_EPM/Mag3ntaV1s10nPr0d@plsli640.corp.sprint.com:1525:SVIP1011 --user-schema=CLW_P01_EPM_USER/bu4Lret9@plsli640.corp.sprint.com:1525:SVIP1011 --rpt-schema=CLW_P01_EPM_RPT/Mag3ntaV1s10nPr0d@plsli640.corp.sprint.com:1525:SVIP1011  --pkg-schema=CLW_P01_EPM_PKG/bu4Lret9@plsli640.corp.sprint.com:1525:SVIP1011 --scripts-dir=19.12.13 --exec --no-color --omit-changed --ignore-errors
Mag3ntaV1s10nPr0d
select segment_name,segment_type
from dba_extents
where file_id = 3
and 49433 between block_id and block_id + blocks - 1 ;
[‎8/‎25/‎2020 6:46 PM]  Tolentino, Samuel S [IBM Contractor for Sprint]:
RE: PLSS5005 - Replicats Status Report
New password is 'New202008260749!
ID DAEV 10311668@15
' .
@$ORACLE_HOME/rdbms/admin/ashrpti.sql
08/28/20 01:30:00
variable dbid       number;
variable inst_num   number;
variable inst_lst   varchar2(1023);
begin
  :dbid      :=  1792714422;
  :inst_num := 2;
  :inst_lst := NULL;
  if (instr('&inst_num',',') > 0) then
    :inst_lst := '&inst_num';
  elsif('&inst_num' = 'ALL') then
    :inst_lst := NULL;
  else
    :inst_num := to_number('&inst_num');
  end if;
end;
/
 SERVICE=SVIP201 VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE) DB_UNIQUE_NAME=SVIP201
 alter system set log_archive_dest_state_2 = DEFER sid='*' scope=both;
Post Upgrade changes:
1. Rerun 7524_DB-151263.sql on CLW_P01_EPM schema
2. Please run attached Post Upgrade Scripts on CLW_P01_EPM schema.
  a. pkg_audit_spec
  b. pkg_audit_body
  c. pkg_ruleator_body
  d. pkg_sec_body
  e. util_body
  f. PROC_CLEANUP_TMP_TABLES.sql
  g. PKG_IMP_RUN Body.sql
  h. pkg_ext_imp Body.sql
3. ALTER TABLE "CLW_P01_EPM"."AUDIT_LOG_CFLITE" MODIFY TS DEFAULT on null sysdate;
4. ALTER TABLE "CLW_P01_EPM"."AUDIT_LOG_CFLITE" enable row movement;
5. ALTER TABLE "CLW_P01_EPM"."AUDIT_LOG_TLITE" MODIFY TS DEFAULT on null sysdate;
6. ALTER TABLE "CLW_P01_EPM"."AUDIT_LOG_TLITE" enable row movement;
7. update param_system set value = '20.6.8' where name = 'Version';
   commit;
   SELECT 'X' FROM subscriber WHERE  customer_id =:ban AND xprov_ind = 'Y'
   2d9zay67fz9m2 SELECT :"SYS_B_0" FROM subscriber WHERE  customer_id =:ban AND xprov_ind = :"SYS_B_1"
Release Issue: LogIn Failed getting text "Something went wrong. Please try again later."
Requester:
   Name: MOLLY, CHANDRA X.
   Email: chandra.molly@sprint.com
   Phone: undefined
Preferred Contact Email: chandra.molly@sprint.com
Preferred Contact Phone: 8745001992
Release Information
  Release Name: PRP20.8.4 Release
  Date Issue Occured: 08/30/2020 7:21 PM
  Application: Boost Prepaid Consumer Portal (OWO)
  Suggested Priority: Priority 3
Issue Information
   Brief Description (Title): LogIn Failed getting text "Something went wrong. Please try again later."
  Test Case Name/Business Transaction #:
  Impacted Platform:
  No. Users Impacted: 100
Detailed Issue Description: Boost web Login Failed getting text "Something went wrong. Please try again later."
DATA:
URL: https://myaccount.boostmobile.com/sign-in.html
PTN: 240-498-1747/1357, 518-847-6586/1357, 913-575-8162/1357
STEPS TO REPRODUCE:
1. Launch the provided URL.
2. Tru to login using providec PTN and PIN.
ACTUAL:
LogIn Failed getting text "Something went wrong. Please try again later."
EXPECTED:
User should login Successfully.
LOGS:
RESPONSE:
{
  "error":"invalid_request",
  "error_description":"The request failed due to some unknown reason"
}
HEADERS
Request URL: https://aka-apiservices.boostmobile.com/api/prepaid/authentication/1.0/login
Request Method: POST
Status Code: 500 Internal Server Error
Remote Address: 104.103.45.2:443
Referrer Policy: no-referrer-when-downgrade
Access-Control-Allow-Credentials: true
Access-Control-Allow-Headers: X-Requested-With, Content-Type, Authorization, Accept, Client-Security-Token, Accept-Encoding, applicationId, messageDateTimeStamp, brandCode, conversationId, enterpriseMessageId, messageId, consumerid, accountSubType,accountType,applicationUserId,access_token,locale,timeToLive,X-Tealeaf-SaaS-TLTSID,X-Tealeaf-SaaS-AppKey,x-ep-user-id,x-ep-user-scopes,x-ep-user-roles,refresh_token,x-ep-user-traits,retailer_token,jsessionId,step_no,apiVersion,is_portin,referenceIds,stepNo,channelRequestId,activationId,splitPayment,activationStatusKey,c_token,isportin,transactionId,transactionCorrelationId,correlationId,previousEquipmentStatus
Access-Control-Allow-Methods: POST, PUT, GET, DELETE, OPTIONS, PATCH
Access-Control-Allow-Origin: https://myaccount.boostmobile.com
Connection: close
Content-Length: 105
Content-Type: application/json
Date: Sun, 30 Aug 2020 13:42:42 GMT
Set-Cookie: TS01445ed9=017ea1d44cfbd19263d1b70c9b5baa50aaea5e68c5ad3726fe9c2aff2bc1da6fb42c748c7a582ff869229a980cf2f27404adc3e51d; Path=/
Set-Cookie: TSe2a47b06027=085f469810ab200073c26995f4eeef883d26eb5907dfc3d3d600c29dcca790a716d4952e40fe23b40872b28249113000348393fa2bc6759573f72a279119becdc560a4a3b25233cefa63c5ae8a004cd6eaf8bca6e466128e416c92fa16323c26;Path=/
Vary: Origin
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
Accept: application/json, text/plain, */*
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
accountSubType: C
accountType: I
applicationId: OWO
applicationUserId: OWO
brandCode: BST
Connection: keep-alive
consumerId: PROD
Content-Length: 67
content-type: application/json
conversationId: ACT
Cookie: ref_type=A; at_check=true; akamai_force_asapp=true; AMCVS_EABE1CFE5329F88B0A490D45%40AdobeOrg=1; s_ecid=MCMID%7C84512755022846578432586871631248249834; s_cc=true; _ga=GA1.2.369770206.1598787314; _gid=GA1.2.491586175.1598787314; akacd_aka_apiservices_boostmobile_com=3776240130~rv=82~id=8e6bc2edbf07f4125f4c6b95ab6649a3; aam_uuid=89016750871800244343253716677161536811; _scid=2e078739-8d5c-4fd7-a466-edac50fdbf71; _gcl_au=1.1.1450346232.1598787322; _pin_unauth=dWlkPU5HRmtNMkkxT1RjdE9UUTBZaTAwTTJGbExUaGhORFl0TURKaFpEUTFPVEEzTlRJMiZycD1abUZzYzJV; _sctr=1|1598725800000; safloggingsession=e523099b-9cba-262e-b3e5-49f03913a424; TLTSID=3714138a5e24540bc79e9f7be0aea075; WCXSID=3038305851222541912477386326; aamSubId=BjsKqLokpna+aV/W+ckMNa33UIwsZ3k/rWI+GzS84Rk=; naf=saf.debugLevel~0%7ClogInStatus~false%7Csdto_subscriberId~78845473221%7Csdto_deviceId~885909741717%7Csdto_autoPay~N%7Csdto_planId~BSTOLH50%7Csdto_planType~I%7Csdto_loginStatus~not%20logged-in%7Cpv_pageName~BoostMyAccount%20%3A%20Login%20%3A%20Login%7CibEligible~false; TS01445ed9=017ea1d44c866358b23668b1a2ae95469958183ee71b1d5a90ce0fbb2826597b17a547d74693b6f7958ca6fdd01967f7164c6f105c; TSe2a47b06027=085f469810ab200066e2d0d089dd76de86074d825ed6a8bdc86e444a0c4003565c7cc04ceb0c40df089c12eddf1130004fd0a6e89508f48ba6306f20d370c7a76d8c52115c8bc1d012dbdf82928a93e13cf9f61a7d9b9133feeb0a36c4e78d88; login-flow={"value": true, "expires_in":"600"}; mbox=session#9004d49bd7d54080830c17c0bd2fd3af#1598796780|PC#9004d49bd7d54080830c17c0bd2fd3af.35_0#1662032117; _gat=1; AMCV_EABE1CFE5329F88B0A490D45%40AdobeOrg=-408604571%7CMCIDTS%7C18505%7CMCMID%7C84512755022846578432586871631248249834%7CMCAAMLH-1599399721%7C7%7CMCAAMB-1599399721%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1598802121s%7CNONE%7CMCAID%7CNONE%7CvVersion%7C4.6.0%7CMCCIDH%7C1593445523; _uetsid=5dfd70c0f807b8d1496d528b98f5fd9b; _uetvid=ecaa5e8d75e1fbf7b9c93b567fca146b; s_sq=sprintprepaidprod%3D%2526c.%2526a.%2526activitymap.%2526page%253DBoostMyAccount%252520%25253A%252520Login%252520%25253A%252520Login%2526link%253DSIGN%252520IN%2526region%253DBODY%2526pageIDType%253D1%2526.activitymap%2526.a%2526.c%2526pid%253DBoostMyAccount%252520%25253A%252520Login%252520%25253A%252520Login%2526pidt%253D1%2526oid%253DSIGN%252520IN%2526oidt%253D3%2526ot%253DSUBMIT
enterpriseMessageId: OWOuuXPuzhhbNdHVVdUfPxxRC
Host: aka-apiservices.boostmobile.com
messageDateTimeStamp: 2020-08-30T13:42:24.303Z
messageId: uuXPuzhhbNdHVVdUfPxxRC
Origin: https://myaccount.boostmobile.com
Referer: https://myaccount.boostmobile.com/sign-in.html
Sec-Fetch-Dest: empty
Sec-Fetch-Mode: cors
Sec-Fetch-Site: same-site
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.135 Safari/537.36
X-Tealeaf-SaaS-AppKey: 3c51c159cd60481881faff3824fcbe29
X-Tealeaf-SaaS-TLTSID: 3714138a5e24540bc79e9f7be0aea075
{mdn: "2404981747", pin: "1357", scope: "login_auth"}
mdn: "2404981747"
pin: "1357"
scope: "login_auth"
Business Impact: LogIn Failed getting text "Something went wrong. Please try again later."
Error Message: {
  "error":"invalid_request",
  "error_description":"The request failed due to some unknown reason"
}
Expected Results: User should login Successfully.
avenida independencia 4218, vinhedo
1+3
6+2+5.5+2.5+7.5+3.5+8.5
Bachat@2019.
set long 49999 pages 49999 lin 200
set heading off echo off feedback off trimspool on
col ddl for a190
spool oegp101_ddls.sql
select dbms_metadata.get_ddl('TABLE','AUTH_MODEL_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_ACC_TEAM_USER','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_ACCESSORY_PER_PHONE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_ACTIVATOR_LOGIN_GROUP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_ADDRESS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_ADMIN_AUDIT_ENTRY','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_ADMIN_AUDIT_TRAIL','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_ADMINISTRATOR_LOGIN','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_APP_LOGIN','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_ARIBA_MAPPING','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_AUTO_ADD_ACCESSORIES','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_AUTO_ASSIGN_ACTIVATOR','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_BULK_ORDER','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_BULK_REQUESTOR_INFO','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_BUZDASH_PERMISSIONS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_CHANGE_REQUEST','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_CHANGE_SET','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_CLE_CACHE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_CLOSED_EMAIL_FLAG','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_CONFIG_PROPS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_CONTACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_CORP_ID_NAME_REQUESTS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_CREDIT_CARD','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_CUSTOM_REPORT_QUERY','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_CUSTOM_REPORT_SCHEDULER','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_CUSTOM_REPORT_STATUS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_DISCOUNT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_DISCOUNT_REQUEST','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_DYNAMIC_FIELD','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_DYNAMIC_FIELD_EXTENSION','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_EOL_ACCESSORIES','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_EOL_EQUIPMENTS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_EQUIPMENT_ORDER_DETAILS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_EVENT_STORE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_EXCLUDE_EQUIP_SERVICE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_GLOBAL_PROMO_ACCESSORY','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_GLOBAL_PROMO_EQUIP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_GLOBAL_PROMO_PP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_GLOBAL_PROMO_SERVICE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_GROUP_CUST_REPORT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_GROUP_MASTER_CUST_REP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LINE_ITEM','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LINK_PORT_INFO','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_ACT_USR_STORE_ACCESS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_BUZDASH_LOGIN_STORE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_COMPANY_MEMBERSHIP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_DYNFLDVAL_CORP_ID','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_LINE_ITEM_LINE_ITEM','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_MUTUAL_ACCESSORIES','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_ORDER_DYNAMIC_FIELD','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_OVRRDE_EQUIP_FTR','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_PP_SERVICE_STORE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_RCCP_EMAILS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_RELATED_SUBDYNFIELD','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_ACCESSORY','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_ACCR_ONLY_EQUIP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_ACCSRY_EXCLUDE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_AT_USER','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_BAN','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_BILLING_ADDR','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_BOGN_EQUIP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_BOGN_EQUIPFAM','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_CREDIT_CARDS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_DYNAMIC_FIELD','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_DYNFLD_CORP_ID','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_EQUIP_PP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_EQUIPMENT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_EQUIPMENT_OLD','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_LABELS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_LOGIN_BAN_SHIP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_PRESEL_ACCRY','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_PRICEPLAN','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_PRICEPLAN_OLD','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_SERVICE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_SHIP_CHARGE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STORE_SHIP_TO_ADDRESS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STR_EQUIP_ACCESSORY','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LNK_STR_EQUIP_PP_SRVCE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LOGIN_DYNAMIC_FIELD_EXCP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_LOGIN_HISTORY','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_MANAGER_APPROVAL_LIST','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_ORDER','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_ORDER_ACTIVATION_DETAILS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_ORDER_EQUIP_DYNFIELDS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_ORDER_HISTORY','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_ORDER_RECEIPT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_OVERRIDE_EQUIP_SERVICE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_OVERRIDE_RECOMMEND_ACCRYS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PARTNER_ENTERPRISE_PAGING','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PCR_ATTACHMENT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PREORDER_AUDIT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PRODUCT_CATALOG','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PROMO_ACCESSORY','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PROMO_ACCESSORY_OLD','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PROMO_EQP_SERV_TH_AMT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PROMO_EQUIP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PROMO_EQUIP_OLD','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PROMO_EQUIP_PP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PROMO_EQUIP_PP_SERVICE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PROMO_EQUIP_SERVICE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PROMO_PP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PROMO_PP_OLD','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PROMO_SERVICE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PROMO_SERVICE_OLD','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PROMO_SERVICE_SERVICE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_PTN_LIABILITY','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_REPORTING_FLAG','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_REPORTING_HEADER','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_REPORTS_STATUS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_SD_TRGTD_RTNTN_OFFER','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_SD_TRGTD_RTNTN_PTN','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_SERVICE_GRP_NONE_CFG','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_SERVICE_GRP_NONE_CFG_OLD','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_SFS_REPORTING_CUSTOM','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_SFS_REPORTING_FLAGS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_SHIP_TO_ADDRESS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_SKIP_PLAN_PAGE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_SKIP_SERVICE_PAGE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_ALLOWED_IPS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_AUTH_DOMAINS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_CONF','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_CONF2','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_DISCOUNT_LINKS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_EMAIL_MESSAGE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_EQUIP_SUPP_PROPS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_LOGIN','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_MESSAGE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_ORDER_INSTRUCTION','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_ORDER_PATH_APPRL','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_PROMO_MESSAGE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_PROMOTION_MESSAGE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_REFERRERS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_REPORT_FREQ_CONF','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_SECURITY_ANSWER','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_SHIP_TO_ADDRESS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STORE_SND_APPR_MANAGER','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STR_EQUIP_PP_SRVCE_TYPE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_STR_EQUIP_PP_TYPE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_SUBDYNAMIC_FIELD','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_TOKEN','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_TOKEN_CAMPUS_CONNECT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_TRACK_HOMEPAGE_HITS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_TRGTD_RTNTN_OFFER','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_TRGTD_RTNTN_PTN','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CLCS_UPG_PTN_ELGBLTY','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_ACCESSORY_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_ACTIVATOR_PLATFORM_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_CATEGORY_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_CORP_AISLE_PROMO_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_DUMMY_PRICEPLAN_MAPPING','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_DUMMY_SERVICE_MAPPING','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_EQUIP_ACCSR_ASSN_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_EQUIP_FAMILY_ASSN_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_EQUIP_FAMILY_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_EQUIP_SOC_TYPE_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_EQUIP_SPEC_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_EQUIP_TO_FEATURES_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_EQUIPMENT_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_FAMILY_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_FEATURE_ASSN_MAX_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_FEATURE_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_GRID_KEYS_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_GROUP_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_LNK_FMLY_ADDONSOC_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_LNK_PP_DEV_TYPE_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_LNK_PP_EQUIPMENT_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_LNK_PP_SERVICE_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_PP_FAMILY_TYPE_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_PP_TEXT_PROPS_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_PRICEPLAN_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_PROMO_VALUE_TYPE_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_REF_DEVICE_MFG_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_REF_DEVICE_TYPE_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_REF_EQUIP_FTR_TYPE_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_REF_EQUIPASSN_TYPE_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_REF_FAMILY_TYPE_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_REF_FTR_ASSN_TYPE_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_REF_FTR_ITEM_TYPE_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_REF_NETWORK_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_REF_SPECIAL_FEATURE_TYPE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_REF_WH_STATUS_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_SERVICE_DEV_TYPE_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_SERVICE_DISP_ORDER_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_SERVICE_EQUIPMENT_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_SERVICE_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_SPECIAL_FEATURES_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EMT_STORE_CHKOUT_TYPE_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','ORDER_STATUS_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','QRTZ_BLOB_TRIGGERS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','QRTZ_CALENDARS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','QRTZ_CRON_TRIGGERS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','QRTZ_FIRED_TRIGGERS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','QRTZ_JOB_DETAILS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','QRTZ_JOB_LISTENERS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','QRTZ_LOCKS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','QRTZ_PAUSED_TRIGGER_GRPS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','QRTZ_SCHEDULER_STATE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','QRTZ_SIMPLE_TRIGGERS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','QRTZ_TRIGGER_LISTENERS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','QRTZ_TRIGGERS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','REPORTS_TYPE_EXTRACT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_ACC_TEAM_USER','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_ACTIVATOR_LOGIN_GROUP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_ADMINISTRATOR_LOGIN','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_APP_LOGIN','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_DYNAMIC_FIELD','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_DYNAMIC_FIELD_EXTENSION','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_LNK_ACT_USR_STORE_ACCESS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_LNK_BUZDASH_LOGIN_STORE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_LNK_PP_SERVICE_STORE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_LNK_STORE_ACCESSORY','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_LNK_STORE_ACCR_ONLY_EQUIP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_LNK_STORE_AT_USER','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_LNK_STORE_BAN','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_LNK_STORE_DYNAMIC_FIELD','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_LNK_STORE_EQUIPMENT','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_LNK_STORE_PRICEPLAN','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_LNK_STORE_SERVICE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_LNK_STORE_SHIP_CHARGE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_OVERRIDE_EQUIP_SERVICE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_PROMO_ACCESSORY','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_PROMO_EQUIP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_PROMO_EQUIP_PP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_PROMO_EQUIP_SERVICE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_PROMO_PP','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_PROMO_SERVICE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_PUBLISH_LOG','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_STORE','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_STORE_ALLOWED_IPS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_STORE_AUTH_DOMAINS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_STORE_CONF','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_STORE_CONF2','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_STORE_REFERRERS','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_USER_SESSION','CLCSADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','TMP_APP_LOGINS','CLCSADM') ddl from dual;
spool off;
tables=BRITEBILL.HISTORICUSAGE:SYS_P302, BRITEBILL.HISTORICUSAGE:SYS_P342, BRITEBILL.HISTORICUSAGE:SYS_P362, BRITEBILL.HISTORICUSAGE:SYS_P382, BRITEBILL.HISTORICU
SAGE:SYS_P422, BRITEBILL.HISTORICUSAGE:SYS_P462, BRITEBILL.HISTORICUSAGE:SYS_P482, BRITEBILL.HISTORICCHARGES:SYS_P303,BRITEBILL.HISTORICCHARGES:SYS_P343, BRITEBILL.HISTORICCHARGES:P13, BRITEBILL.HISTORICCHARGES:SYS_P223,BRITEBILL.HISTORI
CCHARGES:SYS_P363, BRITEBILL.HISTORICCHARGES:SYS_P383, BRITEBILL.HISTORICCHARGES:SYS_P441, BRITEBILL.HISTORICCHARGES:SYS_P463, BRITEBILL.HISTORICCHARGES:SYS_P483
alter table BRITEBILL.DOCUMENTDATASTOREITEM drop constraint SECTION_IDX;
alter table BRITEBILL.DOCUMENTDATASTOREITEM drop constraint DDS_COMPRESSED_NN;
alter table BRITEBILL.DOCUMENTDATASTOREITEM drop constraint DDS_ENCRYPTED_NN;
alter table BRITEBILL.DOCUMENTDATASTOREITEM drop constraint DDS_ID_NN;
alter table BRITEBILL.DOCUMENTDATASTOREITEM drop constraint DDS_ISACTIVE_NN;
alter table BRITEBILL.DOCUMENTDATASTOREITEM drop constraint DOCUMENTDATASTOREITEM_PK;
alter table BRITEBILL.DOCUMENTDATASTOREITEM drop primary key;
alter table BRITEBILL.DOCUMENT drop constraint FK_40R9FU217EOHO6Y84FJN9QAUD;
alter table BRITEBILL.DOCUMENT drop constraint FK_L6OM9J438E4F08KLRPMKUDT8L;
alter table BRITEBILL.DOCUMENT drop constraint FK_O87KX3FG7NDCGI5L9ETBEASDE;
alter table BRITEBILL.DOCUMENT drop constraint DOCUMENT_BATCH_NN;
alter table BRITEBILL.DOCUMENT drop constraint DOCUMENT_DUP_NN;
alter table BRITEBILL.DOCUMENT drop constraint DOCUMENT_FID_NN;
alter table BRITEBILL.DOCUMENT drop constraint DOCUMENT_ID_NN;
alter table BRITEBILL.DOCUMENT drop constraint DOCUMENT_INGES_NN;
alter table BRITEBILL.DOCUMENT drop constraint DOCUMENT_LARGE_NN;
alter table BRITEBILL.DOCUMENT drop constraint DOCUMENT_SDID_NN;
alter table BRITEBILL.DOCUMENT drop constraint DOCUMENT_VERCONT_NN;
alter table BRITEBILL.DOCUMENT drop constraint UK_L6OM9J438E4F08KLRPMKUDT8L;
alter table BRITEBILL.DOCUMENT drop constraint UK_N3TST0E3E5F6CKRKK1G5RASB9;
alter table BRITEBILL.BILL drop constraint BILL_ID_NN;
alter table BRITEBILL.BILL drop primary key;
drop index BRITEBILL.SECTION_IDX;
drop index BRITEBILL.SUBTYP_FOR_DOCS_IDX;
drop index BRITEBILL.DOCUMENTDATASTOREITEM_PK;
drop index BRITEBILL.FK87F93DCF2765BF58_IDX;
drop index BRITEBILL.TYPE_FOR_DOC_IDX;
drop index BRITEBILL.FK335CD11BE40A3BAC_IDX;
drop index BRITEBILL.INGESTSTATUS_SC_INDEX;
drop index BRITEBILL.FK_DOCUMENT_BATCH_IDX;
drop index BRITEBILL.SYS_C004080;
drop index BRITEBILL.UK_L6OM9J438E4F08KLRPMKUDT8L;
drop index BRITEBILL.CONTENTID_SC_INDEX;
drop index BRITEBILL.UK_N3TST0E3E5F6CKRKK1G5RASB9;
drop index BRITEBILL.ISSUE_DATE_SC_INDEX;
drop index BRITEBILL.BILL_PK;
ALTER TABLE "BRITEBILL"."BILL_STG" rename CONSTRAINT "BILL_ID_NN_STG" to "BILL_ID_NN_STG";
ALTER TABLE "BRITEBILL"."BILL_STG" rename CONSTRAINT "BILL_PK_STG" to "BILL_PK"  ;
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" rename CONSTRAINT "UK_L6OM9J438E4F08KLRPMKUDT8L_S" to UK_L6OM9J438E4F08KLRPMKUDT8L;
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" rename CONSTRAINT "UK_N3TST0E3E5F6CKRKK1G5RASB9_S" to UK_N3TST0E3E5F6CKRKK1G5RASB9;
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" rename CONSTRAINT "DOCUMENT_ID_NN_S" to "DOCUMENT_ID_NN";
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" rename CONSTRAINT "DOCUMENT_FID_NN_S" to "DOCUMENT_FID_NN";
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" rename CONSTRAINT "DOCUMENT_INGES_NN_S" to "DOCUMENT_INGES_NN";
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" rename CONSTRAINT "DOCUMENT_BATCH_NN_S" to "DOCUMENT_BATCH_NN";
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" rename CONSTRAINT "DOCUMENT_SDID_NN_S" to "DOCUMENT_SDID_NN";
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" rename CONSTRAINT "DOCUMENT_DUP_NN_S" to "DOCUMENT_DUP_NN";
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" rename CONSTRAINT "UK_L6OM9J438E4F08KLRPMKUDT8L_S" to "UK_L6OM9J438E4F08KLRPMKUDT8L";
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" rename CONSTRAINT "UK_N3TST0E3E5F6CKRKK1G5RASB9_S" to "UK_N3TST0E3E5F6CKRKK1G5RASB9";
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" rename CONSTRAINT "DOCUMENT_LARGE_NN_S" to "DOCUMENT_LARGE_NN";
ALTER TABLE "BRITEBILL"."DOCUMENT_STG" rename CONSTRAINT "DOCUMENT_VERCONT_NN_S" to "DOCUMENT_VERCONT_NN";
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" rename CONSTRAINT "SECTION_IDX_STG" to SECTION_IDX ;
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG"  rename CONSTRAINT "DOCUMENTDATASTOREITEM_PK_STG" to DOCUMENTDATASTOREITEM_PK;
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" rename CONSTRAINT "DDS_ID_NN_S" to "DDS_ID_NN";
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" rename CONSTRAINT "DDS_COMPRESSED_NN_S" to "DDS_COMPRESSED_NN";
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" rename CONSTRAINT "DDS_ENCRYPTED_NN_S" to "DDS_ENCRYPTED_NN";
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" rename CONSTRAINT "DDS_ISACTIVE_NN_S" to "DDS_ISACTIVE_NN";
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" rename CONSTRAINT "SECTION_IDX_STG" to "SECTION_IDX";
ALTER TABLE "BRITEBILL"."DOCUMENTDATASTOREITEM_STG" rename CONSTRAINT "DOCUMENTDATASTOREITEM_PK_STG" to "DOCUMENTDATASTOREITEM_PK";
--ORDER_MASTER
create table tmoarch.order_master as
select /*+PARALLEL(8)*/ * from OEMARCH.order_master where created_dt >= to_timestamp(to_timestamp('01-JAN-18 00:00:00:0000', 'DD-MON-YY HH24:MI:SS:FF') , 'DD-MON-YY HH24:MI:SS:FF')
and order_channel not in ('PP','BM');
create table tmoarch.ORDER_LINE_DETAILS as
select /*+PARALLEL(8)*/ old.* from OEMARCH.order_line_details old INNER JOIN OEMARCH.order_master om ON old.order_key = om.order_key where
om.created_dt >= to_timestamp('01-JAN-18 00:00:00:0000', 'DD-MON-YY HH24:MI:SS:FF')  and om.order_channel not in ('PP','BM');
create table tmoarch.PHONE_CONFIG as
select /*+PARALLEL(8)*/ pc.* from OEMARCH.phone_config pc INNER JOIN OEMARCH.order_master om ON pc.order_key = om.order_key where
om.created_dt >= to_timestamp('01-JAN-18 00:00:00:0000', 'DD-MON-YY HH24:MI:SS:FF')  and om.order_channel not in ('PP','BM');
create table tmoarch.ORDER_BILLING as
select /*+PARALLEL(8)*/ ob.* from OEMARCH.order_billing ob INNER JOIN OEMARCH.order_master om ON ob.order_key = om.order_key where
om.created_dt >= to_timestamp('01-JAN-18 00:00:00:0000', 'DD-MON-YY HH24:MI:SS:FF')  and om.order_channel not in ('PP','BM');
create table tmoarch.ORDER_INVOICE as
select /*+PARALLEL(8)*/ oi.* from OEMARCH.order_invoice oi INNER JOIN OEMARCH.order_master om on oi.order_key = om.order_key where
om.created_dt >= to_timestamp('01-JAN-18 00:00:00:0000', 'DD-MON-YY HH24:MI:SS:FF')  and om.order_channel not in ('PP','BM');
create table tmoarch.ORDER_SHIPPING as
select /*+PARALLEL(8)*/ os.* from OEMARCH.order_shipping os INNER JOIN OEMARCH.order_master om ON os.order_key = om.order_key where
om.created_dt >= to_timestamp('01-JAN-18 00:00:00:0000', 'DD-MON-YY HH24:MI:SS:FF')  and om.order_channel not in ('PP','BM');
create table tmoarch.EXTR_ORDR_CHNL_INFO as
select /*+PARALLEL(8)*/ eoci.* from OEMARCH.extr_ordr_chnl_info eoci INNER JOIN OEMARCH.order_master om ON eoci.order_key = om.order_key where
om.created_dt >= to_timestamp('01-JAN-18 00:00:00:0000', 'DD-MON-YY HH24:MI:SS:FF')  and om.order_channel not in ('PP','BM');
create table tmoarch.ORDER_IB_INFO as
select /*+PARALLEL(8)*/ oib.* from OEMARCH.order_ib_info oib INNER JOIN OEMARCH.order_master om ON oib.order_key = om.order_key where
om.created_dt >= to_timestamp('01-JAN-18 00:00:00:0000', 'DD-MON-YY HH24:MI:SS:FF')  and om.order_channel not in ('PP','BM');
create table tmoarch.BUYBACK_DEVICE_INFO as
select /*+PARALLEL(8)*/ bdi.* from OEMARCH.buyback_device_info bdi INNER JOIN OEMARCH.order_master om ON bdi.order_key = om.order_key where
om.created_dt >= to_timestamp('01-JAN-18 00:00:00:0000', 'DD-MON-YY HH24:MI:SS:FF')  and om.order_channel not in ('PP','BM');
create table tmoarch.ORDER_COMMENTS as
select /*+PARALLEL(12)*/ oc.* from OEMARCH.order_comments oc INNER JOIN OEMARCH.order_master om ON oc.order_key = om.order_key where
om.created_dt >= to_timestamp('01-JAN-18 00:00:00:0000', 'DD-MON-YY HH24:MI:SS:FF')  and om.order_channel not in ('PP','BM');
create table tmoarch.ORDER_GIVEBACK_DEVICE_INFO as
select /*+PARALLEL(8)*/ odi.* from OEMARCH.order_giveback_device_info odi INNER JOIN OEMARCH.order_master om ON odi.order_key = om.order_key where
om.created_dt >= to_timestamp('01-JAN-18 00:00:00:0000', 'DD-MON-YY HH24:MI:SS:FF')  and om.order_channel not in ('PP','BM');
create table tmoarch.ORDER_LINE_SOC as
select /*+PARALLEL(8)*/ ols.* from OEMARCH.order_line_soc ols INNER JOIN OEMARCH.order_master om ON ols.order_key = om.order_key where
om.created_dt >= to_timestamp('01-JAN-18 00:00:00:0000', 'DD-MON-YY HH24:MI:SS:FF')  and om.order_channel not in ('PP','BM');
create table tmoarch.ORDER_RMA_INFO as
select /*+PARALLEL(8)*/ ori.* from OEMARCH.order_rma_info ori INNER JOIN OEMARCH.order_master om ON ori.order_key = om.order_key where
om.created_dt >= to_timestamp('01-JAN-18 00:00:00:0000', 'DD-MON-YY HH24:MI:SS:FF')  and om.order_channel not in ('PP','BM');
create table tmoarch.ORDER_SHIPPING_LINE as
select /*+PARALLEL(8)*/ osl.* from OEMARCH.order_shipping_line osl INNER JOIN OEMARCH.order_master om ON osl.order_key = om.order_key where
om.created_dt >= to_timestamp('01-JAN-18 00:00:00:0000', 'DD-MON-YY HH24:MI:SS:FF')  and om.order_channel not in ('PP','BM');
2020-09-01 17:19:09  ERROR   OGG-01296  Error mapping from CORE_B.SPR_MS_USER to REGADM.SPR_MS_USER.
sed 's/^SQL>.*//g' < oegp101_ddls.sql > oegp101_ddls.sql_new
goldgate@plsab586:/goldengate/ggsoracle/6qs/ora191[ndw-hub]
> vi /home/goldgate/scripts/ggstrailpurge.txt
goldgate@plsab586:/goldengate/ggsoracle/6qs/ora191[ndw-hub]
> vi /home/goldgate/scripts/ggstrailpurge.sh
+OLOG/SMP/ONLINELOG/group_1.256.1006877273
+MLOG/SMP/ONLINELOG/group_1.256.1006877275
+OLOG/SMP/ONLINELOG/group_2.257.1006877277
+MLOG/SMP/ONLINELOG/group_2.257.1006877277
+OLOG/SMP/ONLINELOG/group_3.258.1006877279
+MLOG/SMP/ONLINELOG/group_3.258.1006877281
+OLOG/SMP/ONLINELOG/group_4.259.1006877283
+MLOG/SMP/ONLINELOG/group_4.259.1006877285
+MLOG/SMP/ONLINELOG/group_11.268.1023476145
+MLOG/SMP/ONLINELOG/group_12.267.1023476147
+MLOG/SMP/ONLINELOG/group_13.266.1023476149
+MLOG/SMP/ONLINELOG/group_14.265.1023476151
+MLOG/SMP/ONLINELOG/group_15.264.1023476151
log_archive_dest_2                   string      service="(DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL
                                                  = TCP)(HOST = u1295.portoseguro.brasil)(PORT = 1521))) (CONNECT_DATA = (SERVER = DEDICATED)
                                                  (SERVICE_NAME = smp_sec) (UR = A)))", ASYNC NOAFFIRM delay=0 mandatory
                                                  compression=disable max_failure=0 max_connections=1 reopen=300 db_unique_name="smp_sec" net_timeout=120, valid_for=(online_logfile,all_roles)
ALTER TABLE "BRITEBILL"."BILL_STG" MODIFY ("ID" NULL);
ALTER TABLE "BRITEBILL"."BILL_STG" MODIFY ("ID" CONSTRAINT "BILL_ID_NN_STG" NOT NULL ENABLE NOVALIDATE);
DOCUMENTDATASTOREITEM_OLD920
INSERT INTO "OEMADM"."ASW_EQUIPMENT_PRIORITY"
("EQUIPMENT_ID","PRIORITY","HANDSET_CHOICE_IND","ACTIVE_YN","STATE_ID","HANDSET_TYPE","MODFD_BY_ID","MODFD_DT")
VALUES (:a0,:a1,:a2,:a3,:a4,:a5,:a6,:a7)
select count(*) from oemadm.ASW_EQUIPMENT_PRIORITY where equipment_id='ANS307ASNPB';
  COUNT(*)
----------
         1
OCI Error ORA-02291: integrity constraint (OEMADM.FK01_ASW_EQUIPMENT_PRIORITY) violated
DB up and running and restarted at 29-sep-2020 08:56:22.
8BC05ZVV
AMS2LSW6
 excluded_diskgroups="'GG_DATA_01','REDO_01'"
PLSAB751
ALTER SYSTEM SET COMPATIBLE = '18.0.0' SCOPE=SPFILE SID='*';
select owner, table_name from dba_tables where table_name = 'FAST_USER_DETAILS';
New password is 'New202010051254!'.
CR000682335
select * from dba_role_privs where granted_role in
(select grantee from dba_tab_privs where table_name='FAST_USER_DETAILS' and owner='OEMADM');
select role from dba_roles where role in (select grantee from dba_tab_privs where table_name='FAST_USER_DETAILS' and owner='OEMADM')
ARCH_USER_APP_ROLE
APP_IIN_R
APP_OVM_RW
APP_OVM_R
APP_FAST_RW
APP_FAST_R
APP_9NN_RW
APP_9NN_R
APP_6WN_RW
APP_6WN_R
APP_6LN_RW
APP_6LN_R
APP_6DS_R
APP_1XN_RW
APP_1XN_R
APP2DL_R
SELECT_1XN_OEMADM
APP_IIN_RW
SELECT_OEMADM_ONLY
SELECT_OEMADM
IDU_OEMADM
CR000705554
  select /*+parallel(8)*/
  from OEMARCH.phone_config pc INNER JOIN OEMARCH.order_master om ON pc.order_key = om.order_key
  where om.created_dt >= to_date('01-JAN-18 00:00:00','dd-mon-yy hh24:mi:ss') and om.order_channel not in ('PP','BM');
 select /*+parallel(8)*/  min(om.created_dt),  max(om.created_dt)
  from OEMARCH.order_master om INNER JOIN TMOARCH.phone_config pc ON om.order_key = pc.order_key ;
"/oracle/g01/software/grid/11.2.0.4/log/plsab476/agent/crsd/oraagent_oracle//oraagent_oracle.log"
 CREATE TABLE "CLW_P01_EPM"."PROCESS"
   (    "PROCESS_ID" NUMBER NOT NULL ENABLE,
        "USER_ID" NUMBER,
        "PROCESS_TYPE_ID" NUMBER NOT NULL ENABLE,
        "PROCESS_SCHEDULER_ID" NUMBER DEFAULT 1 NOT NULL ENABLE,
        "PROGRAM_ID" NUMBER NOT NULL ENABLE,
        "SUBMISSION_DATE" DATE NOT NULL ENABLE,
        "START_DATE" DATE NOT NULL ENABLE,
        "START_DAY" NUMBER,
        "ACTUAL_START_DATE" DATE,
        "END_DATE" DATE,
        "SCHEDULER_START" DATE,
        "SCHEDULER_END" DATE,
        "REFRESH_FREQUENCY_ID" NUMBER,
        "STATUS_ID" NUMBER NOT NULL ENABLE,
        "RUNTIME" NUMBER,
        "ERROR_MESSAGE_FULL" CLOB,
        "ARCHIVED" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "ERROR_MESSAGE" VARCHAR2(4000),
        "COMMENTS" VARCHAR2(2000),
        "UN" VARCHAR2(50),
        "PROCESS_CHAIN_ID" NUMBER,
        "IS_TRACKED" NUMBER(1,0) DEFAULT 1 NOT NULL ENABLE,
         CONSTRAINT "PK_PROCESS" PRIMARY KEY ("PROCESS_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "WDM_DATA_IDX"  ENABLE) SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "WDM_DATA_IDX"
 LOB ("ERROR_MESSAGE_FULL") STORE AS BASICFILE (
  TABLESPACE "WDM_DATA_IDX" ENABLE STORAGE IN ROW CHUNK 8192 RETENTION
  NOCACHE LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT))  ENABLE ROW MOVEMENT
/
 CREATE TABLE "CLW_P01_EPM"."PROGRAM_STATUS"
   (    "PROGRAM_STATUS_ID" NUMBER NOT NULL ENABLE,
        "STATUS" VARCHAR2(50) NOT NULL ENABLE,
         CONSTRAINT "PK_PROGRAM_STATUS" PRIMARY KEY ("PROGRAM_STATUS_ID")
  USING INDEX PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "WDM_DATA_IDX"  ENABLE
   ) SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 10 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "WDM_DATA_IDX"
  /
  CREATE TABLE "CLW_P01_EPM"."PROGRAM"
   (    "PROGRAM_ID" NUMBER NOT NULL ENABLE,
        "DESCRIPTION" VARCHAR2(2000),
        "USER_ID" NUMBER,
        "PROGRAM_NAME" VARCHAR2(50) NOT NULL ENABLE,
        "CUSTOMER_ID" NUMBER,
        "PROGRAM_STATUS_ID" NUMBER DEFAULT 1 NOT NULL ENABLE,
        "PROGRAM_LEVEL_ID" NUMBER DEFAULT 1 NOT NULL ENABLE,
        "CAN_BE_SOURCE" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "BPL_COMP_LOG_ID" NUMBER,
         CONSTRAINT "PK_PROGRAM" PRIMARY KEY ("PROGRAM_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "WDM_DATA_IDX"  ENABLE
   ) SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "WDM_DATA_IDX"  ENABLE ROW MOVEMENT
  /
  CREATE TABLE "CLW_P01_EPM"."PROGRAM_LEVEL"
   (    "PROGRAM_LEVEL_ID" NUMBER NOT NULL ENABLE,
        "LEVEL_NAME" VARCHAR2(50) NOT NULL ENABLE,
         CONSTRAINT "PK_PROGRAM_LEVEL" PRIMARY KEY ("PROGRAM_LEVEL_ID")
  USING INDEX PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "WDM_DATA_IDX"  ENABLE
   ) SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 10 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "WDM_DATA_IDX"
  /
  CREATE TABLE "CLW_P01_EPM"."PROCESS_STATUS"
   (    "PROCESS_STATUS_ID" NUMBER NOT NULL ENABLE,
        "STATUS" VARCHAR2(50) NOT NULL ENABLE,
        "LABEL_ID" NUMBER NOT NULL ENABLE,
         CONSTRAINT "PK_PROCESS_STATUS" PRIMARY KEY ("PROCESS_STATUS_ID")
  USING INDEX PCTFREE 10 INITRANS 10 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "WDM_DATA_IDX"  ENABLE
   ) SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 10 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "WDM_DATA_IDX"  ENABLE ROW MOVEMENT
/
 CREATE TABLE "CLW_P01_EPM"."USERS"
   (    "USER_ID" NUMBER NOT NULL ENABLE,
        "UN" VARCHAR2(50) NOT NULL ENABLE,
        "PWD" VARCHAR2(255),
        "IS_DISABLED" NUMBER DEFAULT 0 NOT NULL ENABLE,
        "MUST_CHANGE_PASSWORD" NUMBER DEFAULT 0 NOT NULL ENABLE,
        "PWD_LAST_CHANGED" DATE,
        "XITOR_ID" NUMBER,
        "EMAIL" VARCHAR2(100) NOT NULL ENABLE,
        "LAST_LOGIN_DATE" DATE,
        "IS_SUPERUSER" NUMBER DEFAULT 0 NOT NULL ENABLE,
        "LOCK_EXPIRES" DATE,
        "IS_ADD_QUOTE_DELIM" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "IS_AUTO_SAVE_TB_GRID_CHANGES" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "CLICK_ON_PHOTO_MODE_ID" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "IS_COMMENTS_ON_MOUSE_OVER" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "DATE_FORMAT" VARCHAR2(10) DEFAULT 'MM/DD/YYYY' NOT NULL ENABLE,
        "GRID_EDIT_MODE_ID" NUMBER(1,0) DEFAULT 1 NOT NULL ENABLE,
        "IS_GROUP_NOTIF_EMAILS" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "IS_HIDE_START_DATE" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "APP_LANG_ID" NUMBER,
        "IS_REORDER_TASKS_IN_CSV" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "IS_SHOW_FORM_NUMBERS" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "SKIN_ID" NUMBER DEFAULT 10 NOT NULL ENABLE,
        "THOUSANDS_SEPARATOR" VARCHAR2(1) DEFAULT ',' NOT NULL ENABLE,
        "TIME_FORMAT" VARCHAR2(20) DEFAULT 'HH:mm:ss' NOT NULL ENABLE,
        "PROGRAM_ID" NUMBER NOT NULL ENABLE,
        "FONT_SMOOTHING" NUMBER(1,0) DEFAULT 1 NOT NULL ENABLE,
        "TZ_OFFSET" NUMBER,
        "COORDINATE_MODE_ID" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "CHECKBOX_MODE_ID" NUMBER(1,0) DEFAULT 1 NOT NULL ENABLE,
        "IS_EXACT_SEARCH_CLIPBOARD" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "IS_SHOW_TIP_OF_THE_DAY" NUMBER(1,0) DEFAULT 1 NOT NULL ENABLE,
        "FV_LIST_MODE_ID" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "IS_EXTERNAL_LOGIN" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "IS_MUTE_NEW_EVENTS" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "COLLECT_PERFORMANCE_DATA" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "USER_PICTURE" BLOB,
        "MAXIMIZE_NEW_WINDOW" NUMBER(1,0) DEFAULT 0 NOT NULL ENABLE,
        "FILE_COMPACT_GRID_VIEW" NUMBER(1,0) DEFAULT 1 NOT NULL ENABLE,
        "DEFAULT_MENU_ITEM_ID" NUMBER,
        "DEFAULT_FAVORITE_PAGE_ID" NUMBER,
         CONSTRAINT "CHK1_USERS" CHECK (date_format in ('DD.MM.YY','DD.MM.YYYY','DD/MM/YY','DD/MM/YYYY','MM.DD.YY','MM.DD.YYYY','MM/DD/YY','MM/DD/YYYY')) ENABLE,
         CONSTRAINT "CHK2_USERS" CHECK (thousands_separator in (',',' ')) ENABLE,
         CONSTRAINT "CHK3_USERS" CHECK (time_format in ('HH:mm:ss','hh:mm:ss aa')) ENABLE,
         CONSTRAINT "CHK4_USERS" CHECK (Nvl(IS_DISABLED, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK5_USERS" CHECK (Nvl(MUST_CHANGE_PASSWORD, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK6_USERS" CHECK (Nvl(IS_SUPERUSER, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK7_USERS" CHECK (Nvl(IS_ADD_QUOTE_DELIM, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK8_USERS" CHECK (Nvl(IS_AUTO_SAVE_TB_GRID_CHANGES, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK9_USERS" CHECK (Nvl(IS_COMMENTS_ON_MOUSE_OVER, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK11_USERS" CHECK (Nvl(IS_GROUP_NOTIF_EMAILS, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK12_USERS" CHECK (Nvl(IS_HIDE_START_DATE, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK13_USERS" CHECK (Nvl(IS_REORDER_TASKS_IN_CSV, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK14_USERS" CHECK (Nvl(IS_SHOW_FORM_NUMBERS, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK15_USERS" CHECK (Nvl(FONT_SMOOTHING, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK16_USERS" CHECK (Nvl(COORDINATE_MODE_ID, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK17_USERS" CHECK (Nvl(CHECKBOX_MODE_ID, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK18_USERS" CHECK (Nvl(FV_LIST_MODE_ID, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK19_USERS" CHECK (Nvl(IS_EXACT_SEARCH_CLIPBOARD, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK20_USERS" CHECK (Nvl(IS_SHOW_TIP_OF_THE_DAY, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK21_USERS" CHECK (nvl(collect_performance_data, 0) in (0,1)) ENABLE,
         CONSTRAINT "CHK22_USERS" CHECK ((default_menu_item_id is null) or (default_favorite_page_id is null)) ENABLE,
          ) SEGMENT CREATION IMMEDIATE
  PCTFREE 40 PCTUSED 40 INITRANS 1 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 540672 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SVADM_DATA"
 LOB ("USER_PICTURE") STORE AS SECUREFILE "USER_PICTURE"(
  TABLESPACE "SVADM_DATA" DISABLE STORAGE IN ROW CHUNK 8192 RETENTION AUTO
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT))  ENABLE ROW MOVEMENT
  CREATE UNIQUE INDEX "CLW_P01_EPM"."PK_USERS" ON "CLW_P01_EPM"."USERS" ("USER_ID")
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 262144 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SVADM_INDX"
ALTER TABLE "CLW_P01_EPM"."USERS" ADD CONSTRAINT "PK_USER" PRIMARY KEY ("USER_ID")
  USING INDEX "CLW_P01_EPM"."PK_USERS"  ENABLE
  report_run
    CREATE TABLE "CLW_P01_EPM"."REPORT_RUN"
   (    "REPORT_RUN_ID" NUMBER NOT NULL ENABLE,
        "REPORT_FILE_ID" NUMBER NOT NULL ENABLE,
        "PARAMETERS" CLOB,
        "REPORT_PARAMETERS" CLOB,
        "REPORT_FILE_HEADER" VARCHAR2(300),
        "FORMAT_ID" NUMBER,
        "ENCRYPTION_ID" NUMBER,
        "MAX_EXEC_TIME" NUMBER(3,0),
        "PROBLEMS_NOTIFICATION_EMAIL" VARCHAR2(100),
        "PROBLEMS_NOTIFICATION_STATUS" NUMBER(1,0),
        "IMP_PROCESS_ID" NUMBER DEFAULT null,
        "REPORT_BLOB_DATA_ID" NUMBER DEFAULT null,
        "SFTP_HOST" VARCHAR2(100),
        "SFTP_PORT" NUMBER(6,0),
        "SFTP_FINGERPRINT" VARCHAR2(200),
        "SFTP_USERNAME" VARCHAR2(100),
        "SFTP_PASSWORD" VARCHAR2(100),
        "SFTP_PATH" VARCHAR2(200),
        "SFTP_PRIVATEKEY" VARCHAR2(4000),
        "SFTP_PRIVATEKEY_PASS_PHRASE" VARCHAR2(100),
        "SFTP_AUTH_METHOD_ID" NUMBER,
        "POST_PROCESSOR_CMD" VARCHAR2(1000),
        "POST_PROCESSOR_REP_EXT" VARCHAR2(10),
        "EMAIL_SUBJECT" VARCHAR2(1000),
        "EMAIL_BODY" VARCHAR2(4000),
        "CSV_QUOTES_ID" NUMBER,
        "IS_ADD_FILE_NAME_TIMESTAMP" NUMBER(1,0) DEFAULT null,
        "EFILE_FIELD_ID" NUMBER,
        "DELIVERY" VARCHAR2(2000),
        "CSV_LINE_END_ID" NUMBER,
        "PGP_PUBLIC_KEY" CLOB,
        "IS_EXCLUDE_HEADER" NUMBER(1,0),
        "REPORT_EXEC_ARGS" VARCHAR2(4000),
        "PROCESS_ID" NUMBER NOT NULL ENABLE,
        "OMIT_BOM" NUMBER(1,0) DEFAULT 0,
        "PROGRAM_ID" NUMBER DEFAULT null NOT NULL ENABLE
   ) SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 10 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "WDM_DATA_IDX"
 LOB ("PARAMETERS") STORE AS BASICFILE (
  TABLESPACE "WDM_DATA_IDX" ENABLE STORAGE IN ROW CHUNK 8192 PCTVERSION 25
  NOCACHE LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT))
 LOB ("REPORT_PARAMETERS") STORE AS BASICFILE (
  TABLESPACE "WDM_DATA_IDX" ENABLE STORAGE IN ROW CHUNK 8192 RETENTION
  NOCACHE LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT))
 LOB ("PGP_PUBLIC_KEY") STORE AS BASICFILE (
  TABLESPACE "WDM_DATA_IDX" ENABLE STORAGE IN ROW CHUNK 8192 RETENTION
  NOCACHE LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT))  ENABLE ROW MOVEMENT
  /
userid="/as sysdba"
dumpfile=WDM_FAST_%U.dmp
directory=EXP_TMO
flashback_scn=
parallel=12
logfile=tmoexp2.log
tables=(TMOADM.ORDER_TYPE_DESC,TMOADM.BUYBACK_DEVICE_INFO,TMOADM.PHONE_AND_ACCESSORY,TMOADM.ORDER_RMA_INFO,TMOADM.ORDER_GIVEBACK_DEVICE_INFO,TMOADM.ORDER_IB_INFO,
TMOADM.ORDER_SHIPPING,TMOADM.ORDER_SHIPPING_LINE,TMOADM.EXTR_ORDR_CHNL_INFO,TMOADM.ORDER_BILLING,TMOADM.ORDER_INVOICE,TMOADM.PHONE_CONFIG,TMOADM.ORDER_LINE_SOC,
TMOADM.ORDER_LINE_DETAILS,TMOADM.ORDER_MASTER,TMOADM.ORDER_COMMENTS)
QUERY=TMOADM.BUYBACK_DEVICE_INFO:"WHERE ORDER_CHANNEL_CD ='POST' " ,
QUERY=TMOADM.ORDER_RMA_INFO:"WHERE ORDER_CHANNEL_CD ='POST' " ,
QUERY=TMOADM.ORDER_GIVEBACK_DEVICE_INFO:"WHERE ORDER_CHANNEL_CD ='POST' " ,
QUERY=TMOADM.ORDER_IB_INFO:"WHERE ORDER_CHANNEL_CD ='POST' " ,
QUERY=TMOADM.ORDER_SHIPPING:"WHERE ORDER_CHANNEL_CD ='POST' " ,
QUERY=TMOADM.ORDER_SHIPPING_LINE:"WHERE ORDER_CHANNEL_CD ='POST' " ,
QUERY=TMOADM.EXTR_ORDR_CHNL_INFO:"WHERE ORDER_CHANNEL_CD ='POST' " ,
QUERY=TMOADM.ORDER_BILLING:"WHERE ORDER_CHANNEL_CD ='POST' " ,
QUERY=TMOADM.ORDER_INVOICE:"WHERE ORDER_CHANNEL_CD ='POST' " ,
QUERY=TMOADM.PHONE_CONFIG:"WHERE ORDER_CHANNEL_CD ='POST' " ,
QUERY=TMOADM.ORDER_LINE_SOC:"WHERE ORDER_CHANNEL_CD ='POST' " ,
QUERY=TMOADM.ORDER_LINE_DETAILS:"WHERE ORDER_CHANNEL_CD ='POST' " ,
QUERY=TMOADM.ORDER_MASTER:"WHERE ORDER_CHANNEL_CD ='POST' " ,
QUERY=TMOADM.ORDER_COMMENTS:"WHERE ORDER_CHANNEL_CD ='POST' "
/oracle/g01/bkup01/tmo
New202010261621!
b: caixa
ag: 0316
cc: 013
14276-0
9 4542 7999
!"%&'()*+,-./:;<=>?@[\]^`{|}~
Sprint4YOU!
orapwd file=orapwSVIP1011 entries=10 force=y password=s398$aZ#tZCM6bf force=y format=12 input_file=<input-fname>
find  /oracle/g01/admin -type f \( ! -name "*.*" \) -mtime +3 -exec grep -i "SYSREAD" "{}" \;
WDMggsadm2019,.
New password is 'New202010301838!'.
NOTE: ASMB terminating
Errors in file /oracle/g01/admin/diag/rdbms/eaip102/EAIP1021/trace/EAIP1021_asmb_18307.trc:
ORA-15064: communication failure with ASM instance
ORA-03113: end-of-file on communication channel
Process ID:
Session ID: 838 Serial number: 49
Errors in file /oracle/g01/admin/diag/rdbms/eaip102/EAIP1021/trace/EAIP1021_asmb_18307.trc:
ORA-15064: communication failure with ASM instance
ORA-03113: end-of-file on communication channel
New password is 'New202010311402!'.
select owner, table_name from dba_tables where table_name like 'ADDRESS_NAME_LINK_TEMP%';
select owner, table_name from dba_tables where table_name like 'CHARGE_TEMP%';
select owner, table_name from dba_tables where table_name like 'INV_TEMP_1%';
select owner, table_name from dba_tables where table_name like 'INV_TEMP_2%';
select owner, table_name from dba_tables where table_name like 'TEMP_INV_CVRG%';
alter table HISTORICALDATA_ADM.TEMP_INV_CVRG_1020 rename to TEMP_INV_CVRG;
 alter tablespace NDW_DATA01 add datafile '+DATA_NDW_05' size 32767m
r6qsdec2.prm:MAP NXTAPPO.ATB_ARAT01_REP,           TARGET   NXTAPPO.ATB_ARAT01_REP;
r6sc2.prm:MAP NXTAPPO.ATB_ARAT01_REP,           TARGET   NXTAPPO.ATB_ARAT01_REP;
Hi Alex
Oracle note 2525596.1 patch 29213893 is not related to this issue
This bug is only relevant when using Active Data Guard (ADG)
For interim patches use Patch 27314206.
Thanks
Thiyagu
select /*+ parallel (a,6) parallel (sn,6) */ trunc(sn.end_interval_time) sql_snapshot_date,a.sql_id,
         p.owner, p.name, t.num_rows,t.last_analyzed,p.operation,p.options,a.parsing_schema_name,a.sql_profile,a.plan_hash_value,p.id plan_step_id,sn.INSTANCE_NUMBER,a.module,u.username PARSING_USER_NAME,
     max(a.executions_total) executions_total, sum(buffer_gets_delta) buffer_gets_delta, sum(executions_delta) executions_delta,
         sum(disk_reads_delta) disk_reads_delta, sum(elapsed_time_delta) elapsed_time_delta, max(a.snap_id) max_snap_id
    from dba_tables t, dba_hist_sqlstat a, dba_hist_snapshot sn, dba_users u,
       (select distinct pl.sql_id,pl.PLAN_HASH_VALUE,object_owner owner, object_name name,operation,options,pl.id
          from  dba_hist_sql_plan pl
          where object_owner = ('CLCSADM')
            and object_name in ('CLCS_STORE_REFERRERS','STG_STORE_REFERRERS')
            and operation = 'TABLE ACCESS' and options = 'FULL') p
    where a.snap_id = sn.snap_id
      and a.instance_number=sn.instance_number
      and a.sql_id = p.sql_id
    and a.plan_hash_value=p.plan_hash_value
      and t.table_name = p.name
      and t.owner = p.owner
    and a.PARSING_USER_ID=u.user_id
      and t.owner not in ('SYS','SYSTEM')
      and sn.BEGIN_INTERVAL_TIME>=sysdate-7
    --and a.snap_id>p_max_snap_id
   group by trunc(sn.end_interval_time),a.sql_id,p.owner, p.name, t.num_rows,t.last_analyzed,p.operation,p.options,
            a.parsing_schema_name,a.SQL_PROFILE,a.plan_hash_value,p.id,sn.INSTANCE_NUMBER,a.MODULE,a.PARSING_SCHEMA_NAME,u.username
  union
  select /*+ parallel (a,6) parallel (sn,6) */ trunc(sn.end_interval_time) sql_snapshot_date,a.sql_id,
         p.owner, p.name, t.num_rows,t.last_analyzed,p.operation,p.options,a.parsing_schema_name,a.sql_profile,a.plan_hash_value,p.id plan_step_id,sn.INSTANCE_NUMBER,a.module,u.username PARSING_USER_NAME,
     max(executions_total) executions_total, sum(buffer_gets_delta) buffer_gets_delta, sum(executions_delta) executions_delta,
         sum(disk_reads_delta) disk_reads_delta, sum(elapsed_time_delta) elapsed_time_delta, max(a.snap_id) max_snap_id
    from dba_indexes t, dba_hist_sqlstat a, dba_hist_snapshot sn, dba_users u,
       (select distinct pl.sql_id,pl.PLAN_HASH_VALUE,object_owner owner, object_name name,operation,options,pl.id
          from  dba_hist_sql_plan pl
          where object_owner = ('CLCSADM')
            and object_name in ('CLCS_STORE_REFERRERS','STG_STORE_REFERRERS')
            and operation = 'INDEX' and options in ('FULL SCAN','FAST FULL SCAN')) p
    where a.snap_id = sn.snap_id
      and a.instance_number=sn.instance_number
      and a.sql_id = p.sql_id
    and a.plan_hash_value=p.plan_hash_value
      and t.index_name = p.name
      and t.owner = p.owner
    and a.PARSING_USER_ID=u.user_id
      and t.owner not in ('SYS','SYSTEM')
      and sn.BEGIN_INTERVAL_TIME>=sysdate-7
    --and a.snap_id>p_max_snap_id
   group by trunc(sn.end_interval_time),a.sql_id,p.owner, p.name, t.num_rows,t.last_analyzed,p.operation,p.options,
            a.parsing_schema_name,a.SQL_PROFILE,a.plan_hash_value,p.id,sn.INSTANCE_NUMBER,a.MODULE,a.PARSING_SCHEMA_NAME,u.username;
            144.229.210.159
            [‎11/‎5/‎2020 10:59 AM]  Matos, Pedro H [IBM Contractor for Sprint]:
No Title
SELECT
  *
FROM
  oemadm.ident_address_info
WHERE
  ident_addr_info_id IN
  (
    SELECT
      payer_addr_info_id
    FROM
      oemarch.order_payments
    WHERE
      order_key             = 'aw-toma-6990664'
    AND payer_addr_info_id IS NOT NULL
    UNION
    SELECT
      contact_addr_info_id
    FROM
      oemarch.order_master
    WHERE
      order_key               = 'aw-toma-6990664'
    AND contact_addr_info_id IS NOT NULL
    UNION
    SELECT
      shipping_addr_info_id
    FROM
      oemarch.order_shipping
    WHERE
      order_key                = 'aw-toma-6990664'
    AND shipping_addr_info_id IS NOT NULL
    UNION
    SELECT
      billing_addr_info_id
    FROM
      oemarch.order_billing
    WHERE
      order_key               = 'aw-toma-6990664'
    AND billing_addr_info_id IS NOT NULL
    UNION
    SELECT
      sub_ident_info_id
    FROM
      oemarch.phone_config
    WHERE
      order_key            = 'aw-toma-6990664'
    AND sub_ident_info_id IS NOT NULL
  ) ;
SELECT /*+parallel(6)*/
  count(*)
FROM
  oemadm.ident_address_info iai
  join oemadm.order_master om
  on (om.CONTACT_ADDR_INFO_ID <> iai.IDENT_ADDR_INFO_ID)
 WHERE
  om.CREATED_DT < sysdate - 120
--  and om.order_key like 'aw-toma%'
 ;
alter system disconnect session '4613,25099' immediate;
select sample_time, machine,session_id, session_serial#, user_id, SQL_ID , TOP_LEVEL_SQL_ID from gv$active_session_history
where machine='pvmkk563' and to_char(sample_time,'dd-mm-yy hh24:mi') >= '05-11-20 05:03' and session_id = 2113 order by sample_time;
select distinct SQL_ID from gv$active_session_history
where  session_id = '2113' and session_serial#='405'
select plan_table_output from table(dbms_xplan.display_cursor('1s4r36sj6bamw'));
cxrgr12cws1hp
4zg0tfx6kntg8
1s4r36sj6bamw
4zg0tfx6kntg8
86jjpt4dbhxc5
9rp8a6pxv5whw
c55dy6f181h8s
a9qn7gwqxmpxd
9vw2t8h78zpz3
4c2pu0xbdp9na
3xmfmtmzp5n2h
select order_key from oemarch.order_master where CONTACT_ADDR_INFO_ID in (
(select /*+parallel(8)*/ distinct((IDENT_ADDR_INFO_ID))
from oemadm.ident_address_info iai
where exists
(select order_key from oemarch.order_master om
where om.CONTACT_ADDR_INFO_ID = iai.IDENT_ADDR_INFO_ID
and om.order_key like 'aw-toma%'
and om.updated_dt < (sysdate - 120) and om.updated_dt > (sysdate -360))));
select order_key, updated_dt from oemarch.order_master where CONTACT_ADDR_INFO_ID in ('7446012785','7341951051','7341889907','7338891817');
-- Pedro
create table oemarch.ident_address_info_val2 as (
select /*+parallel(6)*/ order_key from oemarch.order_master where CONTACT_ADDR_INFO_ID in (
(select /*+parallel(6)*/ distinct((IDENT_ADDR_INFO_ID))
from oemadm.ident_address_info iai
where exists
(select order_key from oemarch.order_master om
where om.CONTACT_ADDR_INFO_ID = iai.IDENT_ADDR_INFO_ID
and om.order_key like 'aw-toma%'
and om.updated_dt > (sysdate - 120) and om.updated_dt < (sysdate -455)))));
grant select on oemarch.ident_address_info_val1 to WEFAST_OVMBG;
grant select on oemarch.ident_address_info_val1 to WEFAST_OVMWS;
grant select on oemarch.ident_address_info_val1 to WEFAST_FASTBG;
grant select on oemarch.ident_address_info_val1 to WEFAST_FASTFG;
select  sid, serial#,
inst_id, blocking_session, blocking_session_status, sql_id, status, last_call_et, event
from gv$session
where blocking_session is not null order by 5;
/goldengate/ggsoracle/72P/software/fbo_ggs_AIX_ppc_shiphome/Disk1
export TMP=/goldengate/ggsoracle/72p/tmp;
export TMPDIR=/goldengate/ggsoracle/72p/tmp;
./runInstaller -silent -showProgress -responseFile /goldengate/ggsoracle/72P/software/fbo_ggs_AIX_ppc_shiphome/Disk1/gg_19c.rsp
#adding extracts
dblogin useridalias ggsread@PFNP101
register extract E72NS1T2, database
register extract E72P01T1, database
register extract E72P02C2, database
add extract E72NS1T2, integrated tranlog, begin now
add extract E72P01T1, integrated tranlog, begin now
add extract E72P02C2, integrated tranlog, begin now
add exttrail /ggsPSFIN/Trail1/PS_DIST_LN/t2  extract e72ns1t2, megabytes 500
add exttrail /ggsPSFIN/Trail1/PSFIN/t1  extract e72p01t1, megabytes 500
add exttrail /ggsPSFIN/Trail2/PSFIN/c2  extract e72p02c2, megabytes 500
start E72NS1T2, atcsn 16129943746738
start E72P01T1, atcsn 16129943746747
start E72P02C2, atcsn 16129943746740
#adding replicats
dblogin useridalias ggsadm@NDWFP201
Add replicat R72NS1C2, Integrated,  exttrail /ggsPSFIN/Trail2/PSFIN/c2 , checkpointtable GGSADM.GGSCHKPT , begin now
Add replicat R72NS1T2, Integrated,  exttrail /ggsPSFIN/Trail1/PS_DIST_LN/t2 ,checkpointtable GGSADM.GGSCHKPT , begin now
Add replicat R72P01C2, Integrated,  exttrail /ggsPSFIN/Trail2/PSFIN/c2 , checkpointtable GGSADM.GGSCHKPT , begin now
Add replicat R72P01T1, Integrated,  exttrail /ggsPSFIN/Trail1/PSFIN/t1 , checkpointtable GGSADM.GGSCHKPT ,begin now
for i in *.par; do echo $i; tr \^DIRECTORY.* \DIRECTORY=EXPORT_8PS < $i > $i"_new" ; done;
for i in r*.prm; do echo $i"_new"; mv $i"_new" $i; done;
for i in *.par; do echo $i; tr \^DIRECTORY.* \DIRECTORY=EXPORT_8PS < $i > $i"_new" ; done;
select segment_name, sum(bytes)/1048576 from dba_segments where owner = 'LCREP'
and segment_name like 'OMB_MESSAGE%' group by segment_name;
aws dynamodb put-item --table-name Music --item file://musicdata.json
aws dynamodb put-item --table-name Music  --item '{"Artist": {"S": "No One You Know"}, "SongTitle": {"S": "Call Me Today"}, "AlbumTitle": {"S": "Somewhat Famous"}}' --return-consumed-capacity TOTAL
aws dynamodb put-item \
    --table-name Music \
    --item '{ \
        "Artist": {"S": "Acme Band"}, \
        "SongTitle": {"S": "Happy Day"}, \
        "AlbumTitle": {"S": "Songs About Life"} }' \
    --return-consumed-capacity TOTAL
    0- Configurar acesso ao AWS
      C:\Users\AlexanderDavidsonBuf>aws configure
        AWS Access Key ID [None]: AKIAYMK4MPYT3A6XVZNS
        AWS Secret Access Key [None]: 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
        Default region name [None]: us-west-2
        Default output format [None]: json
        C:\Users\AlexanderDavidsonBuf\Documents\AWS>aws configure import --csv file://NoSQLUser_credentials.csv
    1- criar tabelas
    aws dynamodb create-table --table-name Music --attribute-definitions AttributeName=Artist,AttributeType=S AttributeName=SongTitle,AttributeType=S --key-schema AttributeName=Artist,KeyType=HASH AttributeName=SongTitle,KeyType=RANGE --provisioned-throughput ReadCapacityUnits=25,WriteCapacityUnits=25
    aws dynamodb list-tables
    2- carregar dados
    3- query
    aws dynamodb describe-table --table-name Music
    aws dynamodb query --table-name Music --key-conditions file://key-conditions.json
    4- delete table
    aws dynamodb delete-table --table-name Music
Sim-vaidarcert0
New202011170822!
aws dynamodb delete-item --table-name Music --key "{\"Artist\": {\"S\": \"No One You Know\"}, \"SongTitle\": {\"S\": \"Call Me Today\"}}"
CH145343  D2S_APP_ROLE
SYS D2S_APP_ROLE
AG766849  SELECT_CLCSADM
CH145343  SELECT_CLCSADM
KA139562  SELECT_CLCSADM
LY995352  SELECT_CLCSADM
TW506191  SELECT_CLCSADM
Oracle Duty Manager
 Oracle 0800 891 5899 option 2
 Dana 816 304 4960 is mine
 set feed on time on timing on trim on
--
spoll create db_link_T820198.log
--
conn EPIC521RO/&pass
show user
--
select name from v$database;
--
CREATE DATABASE LINK "DBLINK_DPN_NDW_TO_LFO_SSS_EPIC"
CONNECT TO EPIC521RO IDENTIFIED BY "RAloan2016#" USING 'SSSP201';
--
select * from global_name@DBLINK_DPN_NDW_TO_LFO_SSS_EPIC;
select * from dual@DBLINK_DPN_NDW_TO_LFO_SSS_EPIC;
select sysdate from dual@DBLINK_DPN_NDW_TO_LFO_SSS_EPIC;
--
spool off
exit
-- Active session history based on SQL # execs
col SQL_OPNAME for a20
select to_char(trunc(SAMPLE_TIME, 'MI'), 'hh24:mi'),sql_id, count(*)
from gv$active_session_history
where sql_id is not null and user_id=84
and SAMPLE_TIME > sysdate - 1/24
group by to_char(trunc(SAMPLE_TIME, 'MI'), 'hh24:mi'),sql_id
having count(*) > 10
order by 1;
select sql_id, count(*)
from gv$active_session_history
where sql_id is not null and user_id=84
and SAMPLE_TIME > sysdate - 1/24
group by sql_id
having count(*) > 10
order by 1;
select username, account_status, PROFILE, CREATED, default_tablespace, temporary_tablespace from dba_users where lower(username)=lower('&nome');
APP_D2S_R
BSTCLC
CLCADM
CLCROADM
CLCROADIM
CLCAPP
APP_D2S_R
BSTCLC
CLCADM
CLCROADM
CLCROADIM
CLCAPP
select username, account_status, lock_date, created
from dba_users
where lower(username) in
('arre_app',
'arre_owner',
'arre_read',
'arre_ui',
'as_app',
'as_owner',
'as_read',
'as_ui',
'dpli_app',
'dpli_owner',
'dpli_read',
'dpli_ui',
'dplo_app',
'dplo_owner',
'dplo_read',
'dplo_ui',
'lae_app',
'lae_owner',
'lae_read',
'lae_ui',
'microstrategy',
'rdr_app',
'rdr_owner',
'rdr_read',
'rdr_ui')
group by owner;
select owner, count(*)
from dba_objects
where lower(owner) in
('arre_app',
'arre_owner',
'arre_read',
'arre_ui',
'as_app',
'as_owner',
'as_read',
'as_ui',
'dpli_app',
'dpli_owner',
'dpli_read',
'dpli_ui',
'dplo_app',
'dplo_owner',
'dplo_read',
'dplo_ui',
'lae_app',
'lae_owner',
'lae_read',
'lae_ui',
'microstrategy',
'rdr_app',
'rdr_owner',
'rdr_read',
'rdr_ui')
group by owner;
send E72NS1T2 showtrans tabular
select sequence#, thread# , first_time, first_change#, next_time, next_change#, completion_time
from v$archived_log
where (sequence#, thread#) in
(select min(sequence#) seq, thread# t
from v$archived_log
where deleted = 'NO'
and dest_id = 1
group by thread#)
order by 2;
SQL> select t.xidusn||'.'||t.xidslot||'.'||t.xidsqn xid from v$transaction t;
no rows selected
ALTER DATABASE REGISTER OR REPLACE LOGICAL LOGFILE '+FRA_01/oracle/g01/arch01/arch_1_284659_911605484.dbf' for 'OGG$CAP_E72NS1T2';
ALTER DATABASE REGISTER OR REPLACE LOGICAL LOGFILE '+FRA_01/oracle/g01/arch01/arch_1_284657_911605484.dbf' for 'OGG$CAP_E72NS1T2';
set lin 200 pages 999
col file_name for a60
col tablespace_name for a20
set numwidth 15
select FILE_NAME, FILE_ID, TABLESPACE_NAME,
BYTES/1048576 as MB, MAXBYTES/1048576 as MB
from dba_temp_file where tablespace_name='&tbs'
/
Atenção!
gerenciacredveiculos@detran.sp.gov.br
IBTA Avenida Paulista 2200 sexto andar
PASTAS COM A DOCUMENTAÇÃO PARA SATISFAZER AS EXIGÊNCIAS JURÍDICAS.
Juridico-ItemA-Requerimento para Credenciamento.zip
    Requerimento_Detran_As_Emplaca.pdf
Juridico-ItemB-Contrato Social.zip
    Contrato_social_As_Emplaca.pdf
Juridico-ItemC-Alvara.zip
    Alvara_As_Emplaca.pdf
Juridico-ItemD-CNPJ.zip
    CNPJ_As_Emplaca.pdf
    Inscricao_Estadual_As_Emplaca.pdf
Juridico-ItemE-Prova de Regularidade na Fazenda.zip
    Certidao_Negativa_Estadual_Inscritos_na_DA_As_Emplaca.pdf
    Certidao_Negativa_Estadual_Nao_Inscritos_na_DA_As_Emplaca.pdf
    Certidao_Negativa_Federal_As_Emplaca.pdf
    Certidao_Negativa_Municipal_As_Emplaca.pdf
Juridico-ItemF-Prova de Regularidade FGTS e INSS.zip
    Certidao_Regularidade_FGTS_As_Emplaca.pdf
    Certidao_Regularidade_INSS_As_Emplaca.pdf
Juridico-ItemsGHIJ-Declaracao Geral.zip
    Declaracao_Geral_As_emplaca.pdf
PASTAS COM A DOCUMENTAÇÃO PARA SATISFAZER AS EXIGÊNCIAS TÉCNICAS.
Tecnico-ItemA-Relacao de Equipamentos.zip
    NF_bancada.pdf
    NF_Bits_parafusadeira.pdf
    NF_Instalacao_CFTV.pdf
    NF_Entrada_Equipamentos_Doados.pdf
    NF_Impressora.pdf
    NF_Leitor_QRCode.pdf
    NF_Maquinas.pdf
    NF_Parafusadeira.pdf
    NF_Tesoura.pdf
    Relacao_de_Equipamentos_As_Emplaca.pdf
Tecnico-ItemB-Comprovante Certificado Digital.zip
    NF_Certificado_Digital_As_Emplaca.pdf
    Termo_de_Titularidade_Certificado_DIgital_As_Emplaca.pdf
Tecnico-ItemC-Planta Baixa e Imagens.zip
    Foto_Fachada_As_Emplaca.JPG
    Foto_Ferramentas_As_Emplaca.JPG
    Foto_Guilhotina_As_Emplaca.JPG
    Foto_HotStamping_As_Emplaca.JPG
    Foto_Leitor_QRCODE_As_Emplaca.JPG
    Foto_Matrizes_As_Emplaca.JPG
    Foto_Moldes_As_Emplaca.JPG
    Foto_Prensa_As_Emplaca.JPG
    Foto_SalaConfeccao_1_As_Emplaca.JPG
    Foto_SalaConfeccao_2_As_Emplaca.JPG
    Planta_Baixa_As_Emplaca.pdf
    Foto_Computador_As_Emplaca.jpg
Tecnico-ItemD-Planejamento e Rastreabilidade.zip
    Alex_FichaCadastral.pdf
    fluxograma 1.pdf
    fluxograma 2.pdf
    fluxograma 3.pdf
    VALINHOS.pdf
Tecnico-ItemE-Declaracao de Instalador e Imagens.zip
    Foto_CameraExterna_As_Emplaca.JPG
    Foto_CameraInterna1_aberto_As_Emplaca.JPG
    Foto_CameraInterna1_zoom_As_Emplaca.JPG
    Foto_CameraInterna2_aberto_As_Emplaca.JPG
    Foto_CameraInterna2_zoom_As_Emplaca.JPG
    Foto_CameraInterna3_aberto_As_Emplaca.JPG
    Foto_CameraInterna3_zoom_As_Emplaca.JPG
    Foto_CFTV_DVR_As_Emplaca.JPG
    Foto_CFTV_Monitoramento_As_Emplaca.JPG
    Foto_CFTV_NoBreak_As_Emplaca.JPG
    Declaracao_Instalador_As_Emplaca.pdf
    Foto_SalaCFTV_As_Emplaca.JPG
Tecnico-ItemF-Atestado de Idoneidade Financeira.zip
    Atestado_de_Idoneidade_Financeira_As_Emplaca.pdf
Tecnico-ItemG-Certidao Negativa de Protesto.zip
    Certidao_Negativa_Empresa_As_Emplaca.pdf
    Certidao_Negativa_Sócio_As_Emplaca.pdf
AMS2LSW6
select
You do not have permission to view this report
Available to managers only.
APP_75E_RW
select * from (
select upper('&username'),'(object priv) '||privilege||' on '||owner||'.'||table_name||decode(grantable,'YES',' WITH GRANT OPTION','') priv , 'Granted directly ' role_name from dba_tab_privs where grantee in (upper('&&username'))
union all
select upper('&&username'),'(object priv) '||privilege||' on '||owner||'.'||table_name||decode(grantable,'YES',' WITH GRANT OPTION','') priv , grantee role_name from dba_tab_privs where grantee in (select granted_role from dba_role_privs start with grantee=upper('&&username') connect by prior granted_role=grantee)
union all
select upper('&&username'),'(system priv) '||privilege priv , 'Granted directly' role_name from dba_sys_privs where grantee in (upper('&&username'))
union all
select upper('&&username'),'(system priv) '||privilege priv , grantee role_name from dba_sys_privs where grantee in (select granted_role from dba_role_privs start with grantee=upper('&&username') connect by prior granted_role=grantee)
union all
select upper('&&username'),'(role without privs)' priv, granted_role from (select granted_role from dba_role_privs start with grantee=upper('&&username') connect by prior granted_role=grantee) where granted_role not in (select grantee from dba_tab_privs union all select grantee from dba_sys_privs)
) where priv not like '%SELECT%'
;
New202012181703!
-- PDL SA
ISTOPSSupport@t-mobile.com
EIT Inf Ops Support Unix
/oracle/dbtools/datapoint/scripts/aginglog_server > /dev/null 2>&1
/oracle/dbtools/datapoint/scripts/aginglog MAC5T101 > /dev/null 2>&1
/oracle/dbtools/datapoint/scripts/aginglog MAC5T201 > /dev/null 2>&1
/oracle/dbtools/datapoint/scripts/aginglog MAC5T301 > /dev/null 2>&1
/oracle/dbtools/datapoint/scripts/aginglog MAC5T401 > /dev/null 2>&1
/oracle/dbtools/datapoint/scripts/aginglog MAC5B101 > /dev/null 2>&1
/oracle/dbtools/datapoint/scripts/aginglog +ASM > /dev/null 2>&1
col object_name for a30
col owner for a15
set serveroutput on
DECLARE
      cursor c1 is SELECT object_name, object_type, owner, status, to_char(last_ddl_time,'dd-mon-yy hh24:mi:ss') last_ddl
                   FROM dba_objects
                   WHERE object_name = 'PKG_SEC' and owner='CLW_P01_EPM';
      cursor c2 is SELECT object_name, object_type, owner, status, to_char(last_ddl_time,'dd-mon-yy hh24:mi:ss') last_ddl
                   FROM dba_objects
                   WHERE ( object_name, object_type ) IN (SELECT referenced_name, referenced_type
                   FROM dba_dependencies
                   WHERE name = 'PKG_SEC' and owner='CLW_P01_EPM');
      loop_control boolean := TRUE;
      run_query_after boolean := FALSE;
      f_dir varchar2(50) := 'STBY_OUTPUT'  ;
      f_utl_file UTL_FILE.FILE_TYPE;
      v_f_name varchar2(1000);
      f_open_type char(1);
BEGIN
v_f_name := 'SR_3-24342661851_' || TO_CHAR(SYSDATE, 'YYYY-MM-DD_HH24')  || '_output_as_before_error.log' ;
f_open_type := 'W';
f_utl_file := UTL_FILE.FOPEN(f_dir,v_f_name,f_open_type,32767);
while loop_control
loop
  UTL_FILE.PUTF(f_utl_file,chr(10));
  UTL_FILE.PUTF(f_utl_file,chr(10));
  UTL_FILE.PUTF(f_utl_file,'Query 1 - BEFORE');
  for row in c1
  loop
    UTL_FILE.PUTF(f_utl_file,chr(10));
    UTL_FILE.PUTF(f_utl_file,chr(10));
    UTL_FILE.PUTF(f_utl_file,systimestamp);
    UTL_FILE.PUTF(f_utl_file,chr(10));
    UTL_FILE.PUTF(f_utl_file,'Object Name       :      ' || row.object_name);
    UTL_FILE.PUTF(f_utl_file,chr(10));
    UTL_FILE.PUTF(f_utl_file,'Object Type       :      ' || row.object_type);
    UTL_FILE.PUTF(f_utl_file,chr(10));
    UTL_FILE.PUTF(f_utl_file,'Status            :      ' || row.status);
    UTL_FILE.PUTF(f_utl_file,chr(10));
    UTL_FILE.PUTF(f_utl_file,'Last DDL Time     :      ' || row.last_ddl);
    if row.status = 'INVALID' then
      loop_control    := FALSE;
      run_query_after := TRUE;
    end if;
  end loop;
  UTL_FILE.PUTF(f_utl_file,chr(10));
  UTL_FILE.PUTF(f_utl_file,chr(10));
  UTL_FILE.PUTF(f_utl_file,'Query 2 - BEFORE');
  for row in c1
  loop
    UTL_FILE.PUTF(f_utl_file,chr(10));
    UTL_FILE.PUTF(f_utl_file,chr(10));
    UTL_FILE.PUTF(f_utl_file,systimestamp);
    UTL_FILE.PUTF(f_utl_file,chr(10));
    UTL_FILE.PUTF(f_utl_file,'Object Name       :      ' || row.object_name);
    UTL_FILE.PUTF(f_utl_file,chr(10));
    UTL_FILE.PUTF(f_utl_file,'Object Type       :      ' || row.object_type);
    UTL_FILE.PUTF(f_utl_file,chr(10));
    UTL_FILE.PUTF(f_utl_file,'Owner             :      ' || row.owner);
    UTL_FILE.PUTF(f_utl_file,chr(10));
    UTL_FILE.PUTF(f_utl_file,'Status            :      ' || row.status);
    UTL_FILE.PUTF(f_utl_file,chr(10));
    UTL_FILE.PUTF(f_utl_file,'Last DDL Time     :      ' || row.last_ddl);
  end loop;
  UTL_FILE.FCLOSE(f_utl_file);
  if run_query_after then
      v_f_name := 'SR_3-24342661851_' || TO_CHAR(SYSDATE, 'YYYY-MM-DD_HH24')  || '_output_as_after_error.log' ;
      f_open_type := 'W';
      f_utl_file := UTL_FILE.FOPEN(f_dir,v_f_name,f_open_type,32767);
      UTL_FILE.PUTF(f_utl_file,chr(10));
      UTL_FILE.PUTF(f_utl_file,chr(10));
      UTL_FILE.PUTF(f_utl_file,'Query 1 - AFTER');
      for row in c1
      loop
        UTL_FILE.PUTF(f_utl_file,chr(10));
        UTL_FILE.PUTF(f_utl_file,chr(10));
        UTL_FILE.PUTF(f_utl_file,systimestamp);
        UTL_FILE.PUTF(f_utl_file,chr(10));
        UTL_FILE.PUTF(f_utl_file,'Object Name       :      ' || row.object_name);
        UTL_FILE.PUTF(f_utl_file,chr(10));
        UTL_FILE.PUTF(f_utl_file,'Object Type       :      ' || row.object_type);
        UTL_FILE.PUTF(f_utl_file,chr(10));
        UTL_FILE.PUTF(f_utl_file,'Status            :      ' || row.status);
        UTL_FILE.PUTF(f_utl_file,chr(10));
        UTL_FILE.PUTF(f_utl_file,'Last DDL Time     :      ' || row.last_ddl);
      end loop;
      UTL_FILE.PUTF(f_utl_file,chr(10));
      UTL_FILE.PUTF(f_utl_file,chr(10));
      UTL_FILE.PUTF(f_utl_file,'Query 2 - AFTER');
      for row in c1
      loop
        UTL_FILE.PUTF(f_utl_file,chr(10));
        UTL_FILE.PUTF(f_utl_file,chr(10));
        UTL_FILE.PUTF(f_utl_file,systimestamp);
        UTL_FILE.PUTF(f_utl_file,chr(10));
        UTL_FILE.PUTF(f_utl_file,'Object Name       :      ' || row.object_name);
        UTL_FILE.PUTF(f_utl_file,chr(10));
        UTL_FILE.PUTF(f_utl_file,'Object Type       :      ' || row.object_type);
        UTL_FILE.PUTF(f_utl_file,chr(10));
        UTL_FILE.PUTF(f_utl_file,'Owner             :      ' || row.owner);
        UTL_FILE.PUTF(f_utl_file,chr(10));
        UTL_FILE.PUTF(f_utl_file,'Status            :      ' || row.status);
        UTL_FILE.PUTF(f_utl_file,chr(10));
        UTL_FILE.PUTF(f_utl_file,'Last DDL Time     :      ' || row.last_ddl);
      end loop;
  UTL_FILE.FCLOSE(f_utl_file);
  end if;
  dbms_session.sleep(1);
end loop;
END;
/
SELECT OWNER,JOB_NAME,SESSION_ID,SLAVE_PROCESS_ID,RUNNING_INSTANCE,ELAPSED_TIME,CPU_USED FROM DBA_SCHEDULER_RUNNING_JOBS
where job_name like  '%JOB_MV_DEVICE_CONTEXT%';
alter table BRITEBILL.HISTORICUSAGE drop partition SYS_P602;
alter table BRITEBILL.HISTORICUSAGE drop partition SYS_P582;
alter table BRITEBILL.HISTORICUSAGE drop partition SYS_P562;
alter table BRITEBILL.HISTORICUSAGE drop partition SYS_P542;
alter table BRITEBILL.HISTORICUSAGE drop partition SYS_P522;
alter table BRITEBILL.HISTORICUSAGE drop partition SYS_P502;
alter table BRITEBILL.HISTORICCHARGES drop partition SYS_P603;
alter table BRITEBILL.HISTORICCHARGES drop partition SYS_P583;
alter table BRITEBILL.HISTORICCHARGES drop partition SYS_P563;
alter table BRITEBILL.HISTORICCHARGES drop partition SYS_P543;
alter table BRITEBILL.HISTORICCHARGES drop partition SYS_P523;
alter table BRITEBILL.HISTORICCHARGES drop partition SYS_P503;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P561;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P581;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P601;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P621;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P643;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P663;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P683;
alter table BRITEBILL.DOCUMENT_FACT drop partition SYS_P703;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P564;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P584;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P604;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P624;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P644;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P664;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P684;
alter table BRITEBILL.DOCUMENTMETADATA drop partition SYS_P704;
tables=BRITEBILL.DOCUMENT_FACT:SYS_P561, BRITEBILL.DOCUMENT_FACT:SYS_P581, BRITEBILL.DOCUMENT_FACT:SYS_P601, BRITEBILL.DOCUMENT_FACT:SYS_P621,
BRITEBILL.DOCUMENT_FACT:SYS_P643, BRITEBILL.DOCUMENT_FACT:SYS_P663, BRITEBILL.DOCUMENT_FACT:SYS_P683, BRITEBILL.DOCUMENT_FACT:SYS_P703,
BRITEBILL.DOCUMENTMETADATA:SYS_P564, BRITEBILL.DOCUMENTMETADATA:SYS_P584, BRITEBILL.DOCUMENTMETADATA:SYS_P604, BRITEBILL.DOCUMENTMETADATA:SYS_P624,
BRITEBILL.DOCUMENTMETADATA:SYS_P644, BRITEBILL.DOCUMENTMETADATA:SYS_P664, BRITEBILL.DOCUMENTMETADATA:SYS_P684, BRITEBILL.DOCUMENTMETADATA:SYS_P704
tables=BRITEBILL.HISTORICUSAGE:SYS_P602, BRITEBILL.HISTORICUSAGE:SYS_P582, BRITEBILL.HISTORICUSAGE:SYS_P562, BRITEBILL.HISTORICUSAGE:SYS_P542,
BRITEBILL.HISTORICUSAGE:SYS_P522, BRITEBILL.HISTORICUSAGE:SYS_P502, BRITEBILL.HISTORICCHARGES:SYS_P603, BRITEBILL.HISTORICCHARGES:SYS_P583,
BRITEBILL.HISTORICCHARGES:SYS_P363, BRITEBILL.HISTORICCHARGES:SYS_P383, BRITEBILL.HISTORICCHARGES:SYS_P441,
BRITEBILL.HISTORICCHARGES:SYS_P463, BRITEBILL.HISTORICCHARGES:SYS_P483
FOUR_MONTH_CUT_VALUE  SEVEN_MONTH_CUT_VALUE FOURTEEN_MONTH_CUT_VALUE
76000000000 71000000000 60000000000
select * from DOCUMENTMETADATA where  DOCUMENT < 76000000000;
select * from DOCUMENT_FACT where DOCUMENT_ID < 76000000000;
select * from HISTORICUSAGE where DOCUMENTID < 71000000000;
select * from HISTORICCHARGES where DOCUMENTID < 71000000000;
select * from DOCUMENTDATASTOREITEM where DOCUMENT_ID < 60000000000;
select * from DOCUMENT where  ID < 60000000000;
select * from BILL where  ID < 60000000000;
hp929277
grant CREATE SESSION to hp929277;
grant DIHDBADM_RO_ROLE to hp929277;
grant LEASEADM_READONLY to hp929277;
grant NRTADM_R_ROLE to hp929277;
grant REVENUEASSURANCE_SELECT_ROLE to hp929277;
grant SELECT_CSTADM to hp929277;
grant SELECT_NARLOADADM_DATA to hp929277;
grant SELECT_NCI_STORMDM to hp929277;
grant SELECT_NORSNAPADM_SPRINT_DATA to hp929277;
grant SELECT_NORSNAPADM_SPRINT_HS_DT to hp929277;
grant SELECT_NRTADM_SPRINT_DATA to hp929277;
grant SELECT_NRTADM_SPRINT_HS_DATA to hp929277;
sp847422
grant SELECT_EPPADM_ROLE to leverh02;
grant SELECT_NCI_STORMDM to leverh02;
grant SELECT_NCI_STORMDM_HS to leverh02;
grant SELECT_NORSNAPADM_DATA to leverh02;
grant SELECT_NORSNAPADM_TPP_DATA to leverh02;
grant SELECT_NORSNAPADM_SPRINT_DATA to leverh02;
grant CREATE SESSION to leverh02;
DNS
TCP
IP subneting
-- Fila storage ITSM
HDWSRV-SANC
 -- PORTO AUDITORIA
select username, account_status, created
from dba_users u
join dba_sys_privs p on (u.username=p.grantee)
where p.privilege = 'CREATE SESSION';
('DBA_MAINTENANCE',
'SAPSR3',
'SYSTEM',
'SYS',
'ACNDBA',
'OPS$SAPSERVICEBIP',
'F0104124',
'OPS$ORACLE',
'BOPTTUOL',
'OPS$BIPADM',
'DBSNMP')
  select GRANTEE, GRANTED_ROLE, ADMIN_OPTION as TABNAME from dba_role_privs where grantee in
('DBA_MAINTENANCE',
'SAPSR3',
'SYSTEM',
'SYS',
'ACNDBA',
'OPS$SAPSERVICEBIP',
'F0104124',
'OPS$ORACLE',
'BOPTTUOL',
'OPS$BIPADM',
'DBSNMP')
 union all
  select GRANTEE, PRIVILEGE, ADMIN_OPTION from dba_sys_privs where grantee in
('DBA_MAINTENANCE',
'SAPSR3',
'SYSTEM',
'SYS',
'ACNDBA',
'OPS$SAPSERVICEBIP',
'F0104124',
'OPS$ORACLE',
'BOPTTUOL',
'OPS$BIPADM',
'DBSNMP')
  union all
  select GRANTEE, PRIVILEGE, OWNER||'.'||TABLE_NAME from dba_tab_privs where grantee in
('DBA_MAINTENANCE',
'SAPSR3',
'SYSTEM',
'SYS',
'ACNDBA',
'OPS$SAPSERVICEBIP',
'F0104124',
'OPS$ORACLE',
'BOPTTUOL',
'OPS$BIPADM',
'DBSNMP')
  order by grantee;
;
select * from dba_role_privs where grantee in
(
'SYS',
'SYSTEM',
'DBA_MAINTENANCE',
'BOPTTUOL',
'OPS$SAPSR3',
'OPS$ECPADM',
'ACNDBA',
'SAPSR3',
'AVDF_USER',
'OPS$ORACLE',
'OPS$SAPSERVICEECP',
'OPS$ORAECP',
'F0104124'
) order by grantee;
select * from dba_tab_privs where grantee in
(
select granted_role from dba_role_privs where grantee in
(
'SYS',
'SYSTEM',
'DBA_MAINTENANCE',
'BOPTTUOL',
'OPS$SAPSR3',
'OPS$ECPADM',
'ACNDBA',
'SAPSR3',
'AVDF_USER',
'OPS$ORACLE',
'OPS$SAPSERVICEECP',
'OPS$ORAECP',
'F0104124'
)) order by grantee;
select dbms_metadata.get_ddl('TABLE','HR_DATA','DBSTAT') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CMP_OPERATOR','STORMADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','HR_DATA','STORMADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','HR_OPERATOR','STORMADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','HR_OPERATOR_ACTION','STORMADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','HR_OPERATOR_DMP','STORMADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','OPERATOR','STORMADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','STG_OPERATOR','STORMADM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','HR_OPERATOR_ACTION','STORMDM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','OPERATOR_DM','STORMDM') ddl from dual;
sql_fulltext for a70
select ss.sid, ss.serial#, ss.machine, ss.username, s.sql_fulltext
 from gv$session ss join gv$sql s using(sql_id)
    where
    ss.type <> 'BACKGROUND'
    --and event like '%db_link%'
    --and upper(program) like '%SQL DEVELOPER%'
    and ss.status='ACTIVE'
    --and machine in ('pvmkk563')
    --and username = 'CH134255'
    --and sql_id in ('dykcs2qk17fud')
    --and sid in ('863')
    --and inst_id = 3
   --and lower(machine) like '%870%'
    --and type <> 'BACKGROUND'
    --and sql_id='9kqy8gs6nqtqg'
    and ss.username != 'SYS'
   --and username = 'ARCH_USER'
   --and sid in ('1506')
    --and osuser='ndwadm'
    --and process = '12217'
--    order by tim
    /
select plan_table_output from table(dbms_xplan.display_cursor('brtr3d92n3cbj'));
SELECT * FROM TABLE(dbms_xplan.display_awr('86fr11dmvxm7m'));
select ADDRESS, HASH_VALUE from V$SQLAREA where SQL_ID='brtr3d92n3cbj';
exec DBMS_SHARED_POOL.PURGE ('07000109C3FE2978, 1161933169', 'C');
[‎1/‎11/‎2021 8:52 AM]  Kunchala, Suresh X [IBM Contractor for Sprint]:
for ICEP101 db clean up saying below taking time is it normal ?
Suresh, for these 2 queries it took longer than the other
select
from Vyzon Ruzgal to everyone:    4:54 PM
select /*+INDEX(DOCUMENTMETADATA DOCUMENTMETADATA_PK) */* from DOCUMENTMETADATA where DOCUMENT > (select max(id) from billrun);
select sql_id from gv$sql where sql_text like 'select * from DOCUMENT where ID > (select max(id) from billrun)';
-------------------------------------------------------------------------------------------
| Id  | Operation                   | Name        | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT            |             |       |       |   668K(100)|          |
|   1 |  TABLE ACCESS FULL          | DOCUMENT    |  7740K|   959M|   668K  (1)| 02:13:37 |
|   2 |   SORT AGGREGATE            |             |     1 |     8 |            |          |
|   3 |    INDEX FULL SCAN (MIN/MAX)| SYS_C004050 |     1 |     8 |     2   (0)| 00:00:01 |
-------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------
| Id  | Operation                    | Name             | Rows  | Bytes | Cost (%CPU)| Time     | Pstart| Pstop |
-----------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT             |                  |       |       |  2870K(100)|          |       |       |
|   1 |  PARTITION RANGE ITERATOR    |                  |    99M|  3696M|  2870K  (2)| 09:34:02 |   KEY |1048575|
|   2 |   TABLE ACCESS FULL          | DOCUMENTMETADATA |    99M|  3696M|  2870K  (2)| 09:34:02 |   KEY |1048575|
|   3 |    SORT AGGREGATE            |                  |     1 |     8 |            |          |       |       |
|   4 |     INDEX FULL SCAN (MIN/MAX)| SYS_C004050      |     1 |     8 |     2   (0)| 00:00:01 |       |       |
-----------------------------------------------------------------------------------------------------------------
OWNER      INDEX_NAME                     COLUMN_NAME                    TABLE_NAME                     UNIQUENES STATUS   STATUS   VISIBILIT
---------- ------------------------------ ------------------------------ ------------------------------ --------- -------- -------- ---------
BRITEBILL  BILL_PK                        ID                             BILL                           UNIQUE    VALID    VALID    VISIBLE
BRITEBILL  BILL_PK                        ID                             BILL                           UNIQUE    VALID    VALID    VISIBLE
BRITEBILL  ISSUE_DATE_SC_INDEX            ISSUE_DATE                     BILL                           NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  ISSUE_DATE_SC_INDEX            ISSUE_DATE                     BILL                           NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  CONTENTID_SC_INDEX             CONTENTID                      DOCUMENT                       NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  CONTENTID_SC_INDEX             CONTENTID                      DOCUMENT                       NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  FK335CD11BE40A3BAC_IDX         SERVICE_DOCUMENT_ID            DOCUMENT                       NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  FK335CD11BE40A3BAC_IDX         SERVICE_DOCUMENT_ID            DOCUMENT                       NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  FK_DOCUMENT_BATCH_IDX          BATCH                          DOCUMENT                       NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  FK_DOCUMENT_BATCH_IDX          BATCH                          DOCUMENT                       NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  INGESTSTATUS_SC_INDEX          INGESTSTATUS                   DOCUMENT                       NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  INGESTSTATUS_SC_INDEX          INGESTSTATUS                   DOCUMENT                       NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  SYS_C004080                    ID                             DOCUMENT                       UNIQUE    VALID    VALID    VISIBLE
BRITEBILL  SYS_C004080                    ID                             DOCUMENT                       UNIQUE    VALID    VALID    VISIBLE
BRITEBILL  UK_L6OM9J438E4F08KLRPMKUDT8L   BILL_DOCUMENT_ID               DOCUMENT                       UNIQUE    VALID    VALID    VISIBLE
BRITEBILL  UK_L6OM9J438E4F08KLRPMKUDT8L   BILL_DOCUMENT_ID               DOCUMENT                       UNIQUE    VALID    VALID    VISIBLE
BRITEBILL  UK_N3TST0E3E5F6CKRKK1G5RASB9   BATCH                          DOCUMENT                       UNIQUE    VALID    VALID    VISIBLE
BRITEBILL  UK_N3TST0E3E5F6CKRKK1G5RASB9   CONTENTID                      DOCUMENT                       UNIQUE    VALID    VALID    VISIBLE
BRITEBILL  UK_N3TST0E3E5F6CKRKK1G5RASB9   CONTENTID                      DOCUMENT                       UNIQUE    VALID    VALID    VISIBLE
BRITEBILL  UK_N3TST0E3E5F6CKRKK1G5RASB9   BATCH                          DOCUMENT                       UNIQUE    VALID    VALID    VISIBLE
BRITEBILL  DOCUMENTDATASTOREITEM_PK       ID                             DOCUMENTDATASTOREITEM          UNIQUE    VALID    VALID    VISIBLE
BRITEBILL  DOCUMENTDATASTOREITEM_PK       ID                             DOCUMENTDATASTOREITEM          UNIQUE    VALID    VALID    VISIBLE
BRITEBILL  FK87F93DCF2765BF58_IDX         DOCUMENT_ID                    DOCUMENTDATASTOREITEM          NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  FK87F93DCF2765BF58_IDX         DOCUMENT_ID                    DOCUMENTDATASTOREITEM          NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  SECTION_IDX                    SECTION_ID                     DOCUMENTDATASTOREITEM          NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  SECTION_IDX                    SECTION_ID                     DOCUMENTDATASTOREITEM          NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  SUBTYP_FOR_DOCS_IDX            subtype                        DOCUMENTDATASTOREITEM          NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  SUBTYP_FOR_DOCS_IDX            subtype                        DOCUMENTDATASTOREITEM          NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  TYPE_FOR_DOC_IDX               type                           DOCUMENTDATASTOREITEM          NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  TYPE_FOR_DOC_IDX               DOCUMENT_ID                    DOCUMENTDATASTOREITEM          NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  TYPE_FOR_DOC_IDX               DOCUMENT_ID                    DOCUMENTDATASTOREITEM          NONUNIQUE VALID    VALID    VISIBLE
BRITEBILL  TYPE_FOR_DOC_IDX               type                           DOCUMENTDATASTOREITEM          NONUNIQUE VALID    VALID    VISIBLE
32 rows selected.
select i.owner, index_name, c.column_name, i.table_name, i.uniqueness, i.status, i.status, i.visibility
from dba_indexes i join dba_ind_columns c using(index_name)
where i.table_name in  ('BILL', 'DOCUMENT', 'DOCUMENTDATASTOREITEM', 'DOCUMENTMETADATA') and owner='BRITEBILL'
order by table_name, index_name;
SELECT PLAN_TABLE_OUTPUT FROM TABLE(DBMS_XPLAN.DISPLAY());
select i.owner, index_name, c.column_name, i.table_name, i.uniqueness, i.status, i.status, i.visibility
from dba_indexes i join dba_ind_columns c using(index_name)
where i.table_name in  ('BILL', 'DOCUMENT', 'DOCUMENTDATASTOREITEM', 'DOCUMENTMETADATA') and owner='BRITEBILL'
order by table_name, index_name;
#latitude e longitude da minha casa
-23.208770
-46.881430
  INST_ID SNAP_START_TIME             SNAP_END_TIME               SQL_ID        PLAN_HASH_VALUE EXECUTIONS_TOTAL  TOTAL_MIN ELAPSED_PER_EXEC_MIN
---------- --------------------------- --------------------------- ------------- --------------- ---------------- ---------- --------------------
         1 28-DEC-20 03.30.01.185 AM   28-DEC-20 04.00.07.322 AM   54gyks8g4kq6y      3792806052                1 39.4248872         39.424887236
         1 10-JAN-21 09.00.19.511 AM   10-JAN-21 09.30.40.155 AM   54gyks8g4kq6y      3792806052                1 70.0552918         70.055291814
         54gyks8g4kq6y
 CREATE USER "B2KAUTH" IDENTIFIED BY "&pwd" DEFAULT TABLESPACE "USERS" TEMPORARY TABLESPACE "TEMP_01" PROFILE "SPRINT_APP_PROFILE";
 "'
New password is 'New202101121039!'.
  CXPSTBYADM.TABLE_CASE_C A'
                INNER JOIN CXPSTBYADM.TABLE_BUS_ORG_C B
                ON A.CASE_REPORTER2BUS_ORG = B.OBJID
                INNER JOIN CXPSTBYADM.TABLE_CONDITION_C C
                ON A.CASE_STATE2CONDITION = C.OBJID
                LEFT OUTER JOIN CXPSTBYADM.TABLE_CLOSE_CASE_C D
                ON A.OBJID = D.LAST_CLOSE2CASE
                LEFT OUTER JOIN CXPSTBYADM.TABLE_EMPLOYEE_C E
                ON D.CLOSER2EMPLOYEE = E.OBJID
        WHERE A.CASE_TYPE_LVL2 = 'EQUIPMENT/ACCESSORIES'
SELECT_CXPSTBYADM_SPRINT_DATA
SELECT_CXPSTBYADM_SPRINT_DATA
CXPREPADM_CMDS.CXP_USER_DIM
 select distinct grantee, table_name from dba_tab_privs where owner='CXPSTBYADM' and table_name in
 ('TABLE_CASE_C','TABLE_BUS_ORG_C','TABLE_CONDITION_C','TABLE_CLOSE_CASE_C','TABLE_EMPLOYEE_C') order by 1
SELECT_BOOSTADM_SPRINT_DATA
SELECT_BSTPFTADM_ALL
SELECT_BOOSTADM_DATA_SEP
SELECT_BOOSTDMARTADM_DATA
SELECT_BOOSTPIN_HIGHSECURE
SELECT_BOOSTADM_TPP_DATA
SELECT_BOOSTADM_DATA
SELECT_BOOSTREVREPADM_DATA
SELECT_BOOSTDPTRADM_DATA
SELECT_MUSODSADM_MV
SELECT_APP_1WNADM_DATA
CREATE TABLE
CREATE VIEW
CREATE SESSION
d4458b59affe4a3e71a884cbc41fbeeb
#W.aPr97s7qzjmS
1. Gerenciamento do Projeto.
2. Preparação.
2.1    Criação do ambiente AWS.
2.2    Configuração do novo banco de dados RDS Oracle.
2.3    Configuração da replicação via Oracle Golden Gate.
2.4    Configuração da rede para acessos.
2.5    Configuração da segurança.
3. Transporte dos Dados.
3.1    Transporte dos dados em 10 etapas (ondas).
4. Testes.
4.1    Teste de Acessos.
4.2    Testes de Dados em 10 etapas (ondas).
4.3    Testes de Desempenho.
4.4    Validar o novo ambiente.
5. Cut-Over.
5.1    Configuração de DNS.
5.2    Sincronização final dos dados.
5.3    Bloquear acesso ao servidor antigo.
5.4    Iniciar as conexões no novo ambiente.
6. Desligamento da  Plataforma Antiga.
6.1    Apagar o banco de dados.
6.2    Apagar os discos.
6.3    Desligar os servidores.
allocate channel BkpTape1 type 'sbt_tape' parms  'ENV=(TDPO_OPTFILE=/usr/tivoli/tsm/client/oracle/bin64/tdpo_log_BIP1.opt)' format 'LOG%d%T%s.%p';
crosscheck copy of archivelog all;
crosscheck archivelog all;
delete noprompt expired archivelog all ;
delete noprompt archivelog all backed up 1 times to sbt_tape completed before 'sysdate-2/24';
backup archivelog all not backed up skip inaccessible;
release channel BkpTape1;
}
BSIS~0                            137450.625
BSIS~1                            80198.8125
DFKKOP~Z01                           17121.5
DFKKOP~Z03                          24767.25
DFKKOP~Z11                        20119.3125
DIMAPARSCPOS~0                    50070.8125
FKKDIPOTMPCOUNT~0                 52700.9375
VVSCITEM~0                         52512.375
VVSCPOS~0                          22660.875
VVSCPOS~Z01                        7839.0625
select dbms_metadata.get_ddl('TABLE','REP_EXEC_WP_TASKS_DATA', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','WP_TASKS', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','TMP_USAGE_LOG', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','EGID_AVAILABLE', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','WP_TASKS_PROJECTED_DATE_LOG', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','TMP_ENABLE_WF_TASKS_HASH', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','AUDIT_LOG', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','AUDIT_CALL_STACK', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','CONFIG_VALUE_NUMBER', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','TMP_ER_WP_TASKS_DATA', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','USAGE_LOG', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','REP_EXEC_WP_TASKS_FILTERED', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','TMP_DISABLE_WF_TASKS_HASH', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','TMP_86953_SECTOR_MOD_BACKUP', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','TMP_WTL_CLEANUP_TASK_HASH', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','TMP_ER_WP_TASKS_FILTERED', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','MESSAGE', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','AUDIT_LOG_TLITE', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','AUDIT_LOG_CFLITE', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','TMP_CONFIG_VALUE_CLB_BUCKETS', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','TMP_CONFIG_VALUE_CLB_BUCKETS_2', 'CLW_P01_EPM') ddl from dual;
select dbms_metadata.get_ddl('TABLE','TMP_BUILD_MOD_DECOM_CFG', 'CLW_P01_EPM') ddl from dual;
select sample_time, program from gv$active_session_history where program like '%10024584747%'; 10024588645 10024588675
 10024588286
 10024588565
 10024588675
 10024590311
 10024588645
select process_id, process_type,status, ACTUAL_START_DATE
from clw_p01_epm.process p join clw_p01_epm.process_type pt on (p.process_type_id=pt.process_type_id)
join clw_p01_epm.process_status s on (p.status_id=s.process_status_id)
where trunc(actual_start_date) =trunc(sysdate) and status in ('Running' , 'In Queue') ;
dbms_session.set_identifier( p_session_id );
create user ma136630 identified by "&pwd" default tablespace stage_users temporary tablespace TEMP_05 profile SPRINT_USER_PROFILE;
grant SELECT_STORMADM_DATA           to ma136630;
grant SELECT_NORSNAPADM_DATA         to ma136630;
grant SELECT_STORMADM_TPP_DATA       to ma136630;
grant SELECT_NORSNAPADM_TPP_DATA     to ma136630;
grant SELECT_STORMADM_SPRINT_DATA    to ma136630;
grant SELECT_NORSNAPADM_SPRINT_DATA  to ma136630;
grant CREATE SESSION                 to ma136630;
"twilio"
"
+18312939811
alter REPLICAT rtmo2, extseqno 67772, extrba 0
Following command will be executed....asmcmd lsdg
State    Type    Rebal  Sector  Block       AU  Total_MB  Free_MB  Req_mir_free_MB  Usable_file_MB  Offline_disks  Voting_files  Name
MOUNTED  EXTERN  N         512   4096  1048576  20970000  2248512                0         2248512              0             N  DATA_01/
MOUNTED  EXTERN  N         512   4096  1048576   1048480   855698                0          855698              0             N  FRA_01/
MOUNTED  HIGH    N         512   4096  1048576     20465    19077             8186            3630              0             Y  OCRVOT/
MOUNTED  EXTERN  N         512   4096  1048576  12422592  1487973                0         1487973              0             N  SSD_DATA_01/
NOR_DATA_P07
-- per datafile
set lin 200 pages 999
col file_name for a60
col tablespace_name for a20
set numwidth 15
select FILE_NAME, FILE_ID, TABLESPACE_NAME,
BYTES/1048576 as MB, MAXBYTES/1048576 as MB
from dba_data_files where tablespace_name='&tbs'
/
BR BRINTERVAL 20M BRDIR /ggdata/rhs/trail1
select /*+parallel(8)*/ count(order_key)
from tmoadm.order_comments t
where order_key in
( select arch.order_key
  from oemarch.order_master arch
  join tmoadm.order_master t on (t.order_key = arch.order_key));
join oemarch.order_comments arch using (order_key);
select count (*) from (select /*+parallel(8)*/ order_key from tmoadm.order_comments t join oemarch.order_comments a using (order_key));
select ORDER_KEY, ORDER_STATUS_CREATE_DT, ORDER_DATE, CREATED_DT, UPDATED_DT from oemarch.order_master
where order_key in
(select order_key from
(select /*+parallel(8)*/ count(*), order_key
  from tmoadm.order_comments group by order_key having count(*) > 100000 order by 1 desc));
DECLARE
cursor c1 is select /*+parallel(16)*/ *
             from tmoadm.order_comments t
             where order_key in
             ( select order_key
               from oemarch.order_master arch );
i number := 0;
batch_size number := 10000;
BEGIN
     FOR v1 in c1 LOOP
        i := i+1;
        --delete from tmoadm.order_comments where rowid = v1.rowid;
        if mod(i,batch_size)=0 then
          --commit;
          dbms_output.put_line('This is Batch ' || i/batch_size || ' where we Commited ' || i || ' of ' || c1%rowcount );
        end if;
     END LOOP;
END;
DECLARE
i number := 0;
BEGIN
     FOR var in 1..100 loop
        i := i+1;
        if mod(i,10)=0 then
          dbms_output.put_line(i);
        end if;
     END LOOP;
END;
DECLARE
cursor c1 is select /*+parallel(16)*/ *
             from tmoadm.order_comments t
             where order_key in
             ( select order_key
               from oemarch.order_master arch );
i number := 0;
batch_size number := 10000;
BEGIN
     FOR v1 in c1 LOOP
        i := i+1;
        --delete from tmoadm.order_comments where rowid = v1.rowid;
        if mod(i,batch_size)=0 then
          --commit;
          dbms_output.put_line('This is Batch ' || i/batch_size || ' where we Commited ' || i || ' of ' || c1%rowcount );
        end if;
     END LOOP;
END;
insert into tmoadm.purge_keys
  select /*+parallel(16)*/ distinct order_key, sysdate
             from tmoadm.order_comments t
             where order_key in
             ( select order_key
               from oemarch.order_master arch );
DECLARE
cursor c1 is select /*+parallel(4)*/ order_key
             from tmoadm.purge_keys
             where trunc(populated_dt) = trunc(sysdate);
BEGIN
     FOR v1 in c1 LOOP
        delete /*+PARALLEL(8)*/ from tmoadm.order_comments where order_key = v1.order_key;
        commit;
        dbms_output.put_line('DELETING ORDER_KEY ' || v1.order_key );
      end loop;
END;
select /*+parallel(8)*/ count(*) from oemadm.order_comments;
alter table tmoadm.purge_keys add populated_dt date default sysdate;
update /*+PARALLEL(8)*/ tmoadm.purge_keys set populated_dt=sysdate;
select username, LAST_LOGON_TIME from
DATAPOINT_AUDIT.SPRINT_USER_LAST_LOGON
where username in (
'AISLEADM',
'APP_6DS',
'APP_9NN_USER',
'APP_Q1S',
'CATALOGB_B_OLSADM_USER',
'CM_USER',
'CM_USER1',
'CM_USER5',
'EMTADM',
'NEXPORT',
'OAR_APP',
'OEMADM',
'OEMARCH',
'OEMCATL',
'OLSADM',
'UPLINK_ADM',
'WINSS',
'WU');
select distinct USER_ID, machine, program
from dba_hist_active_sess_history
where user_id in
(select user_id from dba_users
where username in (
'AISLEADM',
'APP_6DS',
'APP_9NN_USER',
'APP_Q1S',
'CATALOGB_B_OLSADM_USER',
'CM_USER',
'CM_USER1',
'CM_USER5',
'EMTADM',
'NEXPORT',
'OAR_APP',
'OEMADM',
'OEMARCH',
'OEMCATL',
'OLSADM',
'UPLINK_ADM',
'WINSS',
'WU')
);
   USER_ID MACHINE                                                          PROGRAM
---------- ---------------------------------------------------------------- -------------------------------------
        OEMADM plsab612                                                         oracle@plsab612 (P000)
        OEMADM plsab612                                                         oracle@plsab612 (P013)
        OEMADM plsab612                                                         oracle@plsab612 (P009)
      CM_USER1 pvmke599.corp.sprint.com                                         iwperl@pvmke599.corp.sprint.com (TNS
        OEMADM plsab612                                                         oracle@plsab612 (P039)
        OEMADM plsab612                                                         oracle@plsab612 (P038)
        OEMADM plsab612                                                         oracle@plsab612 (P053)
        OEMADM plsab612                                                         oracle@plsab612 (P042)
        OEMADM plsab612                                                         oracle@plsab612 (P001)
        OEMADM plsab612                                                         oracle@plsab612 (P015)
        OEMADM plsab612                                                         oracle@plsab612 (J003)
        OEMADM plsab612                                                         oracle@plsab612 (P037)
        OEMADM plsab614                                                         oracle@plsab614 (J001)
        OEMADM plsab612                                                         oracle@plsab612 (P005)
        OEMADM plsab612                                                         oracle@plsab612 (P026)
        OEMADM plsab612                                                         oracle@plsab612 (P025)
        OEMADM plsab612                                                         oracle@plsab612 (P027)
        OEMADM plsab612                                                         oracle@plsab612 (P054)
        OEMADM plsab614                                                         oracle@plsab614 (J000)
        OEMADM plsab612                                                         oracle@plsab612 (P055)
        OEMADM plsab612                                                         oracle@plsab612 (P006)
        OEMADM plsab612                                                         oracle@plsab612 (J000)
        OEMADM plsab612                                                         oracle@plsab612 (P012)
        OEMADM plsab613                                                         oracle@plsab613 (J000)
        OEMADM plsab612                                                         oracle@plsab612 (P024)
        OEMADM plsab612                                                         oracle@plsab612 (P010)
        OEMADM plsab612                                                         oracle@plsab612 (P011)
        OEMADM plsab612                                                         oracle@plsab612 (P052)
       APP_6DS AD\PVMXE299                                                      w3wp.exe
        OEMADM plsab612                                                         oracle@plsab612 (P007)
        OEMADM plsab612                                                         oracle@plsab612 (J001)
        OEMADM plsab612                                                         oracle@plsab612 (P023)
        OEMADM plsab612                                                         oracle@plsab612 (P020)
        OEMADM plsab612                                                         oracle@plsab612 (J004)
        OEMADM plsab612                                                         oracle@plsab612 (P036)
        OEMADM plsab612                                                         oracle@plsab612 (P002)
        OEMADM plsab612                                                         oracle@plsab612 (P014)
        OEMADM plsab612                                                         oracle@plsab612 (P022)
        OEMADM plsab612                                                         oracle@plsab612 (J002)
        OEMADM plsab612                                                         oracle@plsab612 (P004)
        OEMADM plsab612                                                         oracle@plsab612 (P003)
        OEMADM plsab612                                                         oracle@plsab612 (P021)
        OEMADM plsab612                                                         oracle@plsab612 (P008)
        OEMADM plsab612                                                         oracle@plsab612 (P040)
create table readm
create table SYSREAD.ident_info_cleanup  as
select /*+parallel(8)*/ IDENT_ADDR_INFO_ID
from oemadm.ident_address_info iai
where exists
(select order_key from oemarch.order_master om
where om.CONTACT_ADDR_INFO_ID = iai.IDENT_ADDR_INFO_ID
and om.created_dt < (sysdate - 120) and om.created_dt > (sysdate - 480));
desc ARCHADM.ARCHIVE_TABLE_STATUS
create or replace view SYSREAD.VW_ADRESS_INFO_ORDR_MASTER as
  select /*+PARALLEL(4)*/i.IDENT_ADDR_INFO_ID, o.ORDER_KEY, o.CREATED_DT, o.UPDATED_DT
  from SYSREAD.ident_info_cleanup i
  join oemarch.order_master o
  on (i.IDENT_ADDR_INFO_ID = o.CONTACT_ADDR_INFO_ID);
  insert oemarch.ident_address_info a
    select * from  oemadm.ident_address_info o
    where IDENT_ADDR_INFO_ID in (SYSREAD.ident_info_cleanup);
  delete from oemadm.ident_address_info
    where IDENT_ADDR_INFO_ID in (SYSREAD.ident_info_cleanup);
  select /*+Parallel(12)*/ count(*) from  "NXTARCHO"."CHARGE_HISTORY"
  group by "BAN", "CHG_ENT_SEQ_NO" , "ACTV_SEQ_NO" having count(*) > 1
  order by count(*);
  $ cat AWR_generator_SVIP101.sh
#!/usr/bin/ksh
export ORACLE_SID=SVIP1011
export ORACLE_HOME=/oracle/g01/software/rdbms/19.0.0.0
export PATH=$ORACLE_HOME/bin:/oracle/admin/common/bin:$PATH
export TEMPDIR=/tmp
export AWRDATA=`date '+%Y%m%d%H'`
rm /tmp/tmpScr.sql
rm /tmp/tmpScr2.sql
rm $TEMPDIR/SVIP101_awrrpt_$AWRDATA*
$ORACLE_HOME/bin/sqlplus -S "/ as sysdba"  << EOF
set echo off
set head off
set feed off
spool /tmp/tmpScr.sql
select 'define  inst_num=1; ' from dual;
select 'define  num_days= 1;' from dual;
select 'define  inst_name=''SVIP1011'';' from dual;
select 'define  db_name=''SVIP101'';' from dual;
select 'define  dbid =2122743911;' from dual;
select 'define  report_type  = ''html'';' from dual;
select 'define  end_snap='|| max(snap_id)||';' from dba_hist_snapshot;
--select 'define  end_snap='|| to_char(max(snap_id)-4)||';' from dba_hist_snapshot;
select 'define  begin_snap='|| to_char(max(snap_id)-48)||';' from dba_hist_snapshot;
select 'define  report_name=''$TEMPDIR/SVIP101_awrrpt_$AWRDATA.html'';' from dual;
select '@$ORACLE_HOME/rdbms/admin/awrrpt.sql' from dual;
select 'exit' from dual;
exit
EOF
cat /tmp/tmpScr.sql|grep -v '>' >> /tmp/tmpScr2.sql
$ORACLE_HOME/bin/sqlplus -S '/ as sysdba' @/tmp/tmpScr2.sql
recipients="ShashiKiran.Mahendrakar@sprint.com, SV-Core-Team@sprint.com, Sathyaraj.Kolandasamy@sprint.com,  alexander.bufalol@sprint.com"
corpo_message="Follow attached AWR Report"
/usr/sbin/sendmail $recipients << EOF
Subject: SVIP1011 AWR Today `date`
To: $recipients
From: SFWDBS-DS-NOR-NOL-PROD-DBA@sprint.com
$corpo_message
Please verify.
Thanks
`cat $TEMPDIR/SVIP101_awrrpt_$AWRDATA.html | /bin/uuencode SVIP101_awrrpt_$AWRDATA.html`
EOF
exit
$ cat AWR_grid_generator_SVIP101.sh
#!/usr/bin/ksh
export ORACLE_SID=SVIP1011
export ORACLE_HOME=/oracle/g01/software/rdbms/19.0.0.0
export PATH=$ORACLE_HOME/bin:/oracle/admin/common/bin:$PATH
export TEMPDIR=/tmp
export AWRDATA=`date '+%Y%m%d%H'`
rm /tmp/tmpScr.sql
rm /tmp/tmpScr2.sql
rm $TEMPDIR/SVIP101_awrrpt_$AWRDATA*
$ORACLE_HOME/bin/sqlplus -S "/ as sysdba"  << EOF
set echo off
set head off
set feed off
spool /tmp/tmpScr.sql
select 'define  inst_num=1; ' from dual;
select 'define  num_days= 1;' from dual;
select 'define  inst_name=''SVIP1011'';' from dual;
select 'define  db_name=''SVIP101'';' from dual;
select 'define  dbid =2122743911;' from dual;
select 'define  report_type  = ''html'';' from dual;
select 'define  end_snap='|| max(snap_id)||';' from dba_hist_snapshot;
--select 'define  end_snap='|| to_char(max(snap_id)-4)||';' from dba_hist_snapshot;
select 'define  begin_snap='|| to_char(max(snap_id)-48)||';' from dba_hist_snapshot;
select 'define  report_name=''$TEMPDIR/SVIP101_awrrpt_$AWRDATA.html'';' from dual;
--select '@$ORACLE_HOME/rdbms/admin/awrrpt.sql' from dual;
select '@$ORACLE_HOME/rdbms/admin/awrgrpt.sql' from dual;
select 'exit' from dual;
exit
EOF
cat /tmp/tmpScr.sql|grep -v '>' >> /tmp/tmpScr2.sql
$ORACLE_HOME/bin/sqlplus -S '/ as sysdba' @/tmp/tmpScr2.sql
recipients="Evgeny.Tseytlin@sprint.com,Phil.E.Williams@sprint.com, Sudheer.Gadiparthi@sprint.com , alexander.bufalol@sprint.com"
#recipients="alexander.bufalol@sprint.com"
corpo_message="Follow attached AWR Report"
/usr/sbin/sendmail $recipients << EOF
Subject: SVIP101 AWR Today `date`
To: $recipients
From: SFWDBS-DS-NOR-NOL-PROD-DBA@sprint.com
$corpo_message
Please verify.
Thanks
`cat $TEMPDIR/SVIP101_awrrpt_$AWRDATA.html | /bin/uuencode SVIP101_awrrpt_$AWRDATA.html`
EOF
exit
LSNR_BDT =
  (ADDRESS_LIST =
        (ADDRESS= (PROTOCOL= TCP)(Host=plsaa971z.corp.sprint.com)(Port= 1525))
  )
LSNR_BDT =
  (SID_LIST =
    (SID_DESC =
      (ORACLE_HOME= /oracle/g01/software/rdbms/11.2.0.4)
      (SERVICE_NAME = ICE_APPDYNAMICS)
    )
)
LSNR_BDT =
  (ADDRESS_LIST =
        (ADDRESS= (PROTOCOL= TCP)(Host=plsaa972z.corp.sprint.com)(Port= 1525))
  )
LSNR_BDT =
  (SID_LIST =
    (SID_DESC =
      (ORACLE_HOME= /oracle/g01/software/rdbms/11.2.0.4)
      (SERVICE_NAME = ICE_APPDYNAMICS)
    )
)
LSNR_BDT =
  (ADDRESS_LIST =
        (ADDRESS= (PROTOCOL= TCP)(Host=plsaa973z.corp.sprint.com)(Port= 1525))
  )
LSNR_BDT =
  (SID_LIST =
    (SID_DESC =
      (ORACLE_HOME= /oracle/g01/software/rdbms/11.2.0.4)
      (SERVICE_NAME = ICE_APPDYNAMICS)
    )
)
#! /usr/bin/ksh
mv /oracle/g01/software/rdbms/11.2.0.4/network/admin/listener.ora /oracle/g01/software/rdbms/11.2.0.4/network/admin/listener.ora_old_CR001020503
mv /oracle/g01/admin/sysoper/stage/listener.ora_CR001020503 /oracle/g01/software/rdbms/11.2.0.4/network/admin/listener.ora
chmod 644 /oracle/g01/software/rdbms/11.2.0.4/network/admin/listener.ora
#!/usr/bin/ksh
srvctl add service -d ICEP101 -s ICE_APPDYNAMICS -r ICEP1011,ICEP1012,ICEP1013
srvctl start service -d ICEP101 -s ICE_APPDYNAMICS
Azure_test123
sqlserver@mozartiano123hotmail.onmicrosoft.com
select sql_id, sql_fulltext from gv$sql where sql_text like '%SA_CMDS.TABLE_INTRXN%';
cnpj
Table_Name
Size in gig
select table_name, index_name
from dba_indexes
where owner='NXTAPPO' and table_name in ('PAYMENT_ATTRIBUTES',
'CUSTOMER',
'SUBSCRIBER_RSOURCE',
'BILLING_ACCOUNT',
'SUBSCRIBER',
'SERVICE_AGREEMENT',
'PHYSICAL_DEVICE')
order by 1,2;
select sum, index_name
from dba_indexes
where owner='NXTAPPO' and table_name in ('PAYMENT_ATTRIBUTES',
'CUSTOMER',
'SUBSCRIBER_RSOURCE',
'BILLING_ACCOUNT',
'SUBSCRIBER',
'SERVICE_AGGREMENT',
'PHYSICAL_DEVICE')
order by 1,2;
TABLE_NAME                     INDEX_NAME
------------------------------ ------------------------------
ACTIVITY_LOG                   ACTIVITY_LOG_1IX
ACTIVITY_LOG                   ACTIVITY_LOG_PK
ADDRESS_NAME_LINK              ADDRESS_NAME_LINK_1IX
ADDRESS_NAME_LINK              ADDRESS_NAME_LINK_1UQ
ADDRESS_NAME_LINK              ADDRESS_NAME_LINK_5IX
ADDRESS_NAME_LINK              ADDRESS_NAME_LINK_6IX
ADDRESS_NAME_LINK              ADDRESS_NAME_LINK_7IX
ADJUSTMENT                     ADJUSTMENT_4IX
ADJUSTMENT                     ADJUSTMENT_5IX
ADJUSTMENT                     ADJUSTMENT_6IX
ADJUSTMENT                     ADJUSTMENT_PK
ATB_HISTORY_B                  ATB_HISTORY_B_PK
BAN_LIST                       BAN_LIST_1IX
BAN_LIST                       BAN_LIST_PK
BILLING_ACCOUNT                BILLING_ACCOUNT_3IX
BILLING_ACCOUNT                BILLING_ACCOUNT_6IX
BILLING_ACCOUNT                BILLING_ACCOUNT_7IX
BILLING_ACCOUNT                BILLING_ACCOUNT_PK
CH_OBJECT_ATTRIBUTES           CH_OBJECT_ATTRIBUTES_1UQ
CSM_FUTURE_REQUEST             CSM_FUTURE_REQUEST_PK
CUSTOMER                       CUSTOMER_1IX
CUSTOMER                       CUSTOMER_3IX
CUSTOMER                       CUSTOMER_PK
DIR_LIST                       DIR_LIST_PK
DISPUTE                        DISPUTE_1IX
DISPUTE                        DISPUTE_PK
EQP_ACTV_DAYS                  EQP_ACTV_DAYS_PK
LTS_RANKS                      LTS_RANKS_PK
MAC_SCHEDULE                   MAC_SCHEDULE_1IX
MAC_SCHEDULE                   MAC_SCHEDULE_PK
PAYMENT_ATTRIBUTES             PAYMENT_ATTRIBUTES_PK
PREPAID_RC_REGIST              PREPAID_RC_REGIST_PK
PTN_INV                        PTN_INV_3IX
PTN_INV                        PTN_INV_4IX
PTN_INV                        PTN_INV_PK
SERVICE_FEATURE                SERVICE_FEATURE_2IX
SERVICE_FEATURE                SERVICE_FEATURE_PK
SUBSCRIBER                     SUBSCRIBER_1IX
SUBSCRIBER                     SUBSCRIBER_2IX
SUBSCRIBER                     SUBSCRIBER_4IX
SUBSCRIBER                     SUBSCRIBER_6IX
SUBSCRIBER                     SUBSCRIBER_7IX
SUBSCRIBER                     SUBSCRIBER_PK
SUBSCRIBER_RSOURCE             SUBSCRIBER_RSOURCE_10IX
SUBSCRIBER_RSOURCE             SUBSCRIBER_RSOURCE_1IX
SUBSCRIBER_RSOURCE             SUBSCRIBER_RSOURCE_2IX
SUBSCRIBER_RSOURCE             SUBSCRIBER_RSOURCE_PK
set lin 200 pages 9999
col ddl for a160
set long 9999
spool all_ndw_idx.log
select dbms_metadata.get_ddl('INDEX','ACTIVITY_LOG_1IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','ACTIVITY_LOG_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','ADDRESS_NAME_LINK_1IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','ADDRESS_NAME_LINK_1UQ','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','ADDRESS_NAME_LINK_5IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','ADDRESS_NAME_LINK_6IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','ADDRESS_NAME_LINK_7IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','ADJUSTMENT_4IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','ADJUSTMENT_5IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','ADJUSTMENT_6IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','ADJUSTMENT_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','ATB_HISTORY_B_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','BAN_LIST_1IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','BAN_LIST_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','BILLING_ACCOUNT_3IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','BILLING_ACCOUNT_6IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','BILLING_ACCOUNT_7IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','BILLING_ACCOUNT_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','CH_OBJECT_ATTRIBUTES_1U','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','CSM_FUTURE_REQUEST_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','CUSTOMER_1IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','CUSTOMER_3IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','CUSTOMER_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','DIR_LIST_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','DISPUTE_1IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','DISPUTE_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','EQP_ACTV_DAYS_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','LTS_RANKS_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','MAC_SCHEDULE_1IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','MAC_SCHEDULE_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','PAYMENT_ATTRIBUTES_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','PREPAID_RC_REGIST_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','PTN_INV_3IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','PTN_INV_4IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','PTN_INV_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SERVICE_FEATURE_2IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SERVICE_FEATURE_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_1IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_2IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_4IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_6IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_7IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_RSOURCE_10IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_RSOURCE_1IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_RSOURCE_2IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_RSOURCE_PK','NXTAPPO') ddl from dual;G
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_PK','NXTAPPO') ddl from dual;
spool
SPCUREP1_SERVICE_AGREEMENT
SPCUREP1_SERVICE_AGREEMENT
directory=RESYNC_GG_TABLES
'CUSTOMER',
'SUBSCRIBER_RSOURCE',
'SUBSCRIBER',
'BILLING_ACCOUNT',
'SERVICE_AGGREMENT',
'PHYSICAL_DEVICE ',
TABLE_NAME                     INDEX_NAME
------------------------------ ------------------------------
NXTAPPO.BILLING_ACCOUNT                BILLING_ACCOUNT_3IX
NXTAPPO.BILLING_ACCOUNT                BILLING_ACCOUNT_6IX
NXTAPPO.BILLING_ACCOUNT                BILLING_ACCOUNT_7IX
NXTAPPO.BILLING_ACCOUNT                BILLING_ACCOUNT_PK
NXTAPPO.CUSTOMER                       CUSTOMER_1IX
NXTAPPO.CUSTOMER                       CUSTOMER_3IX
NXTAPPO.CUSTOMER                       CUSTOMER_PK
NXTAPPO.PHYSICAL_DEVICE                PHYSICAL_DEVICE_2IX
NXTAPPO.PHYSICAL_DEVICE                PHYSICAL_DEVICE_3IX
NXTAPPO.PHYSICAL_DEVICE                PHYSICAL_DEVICE_4IX
NXTAPPO.PHYSICAL_DEVICE                PHYSICAL_DEVICE_5IX
NXTAPPO.PHYSICAL_DEVICE                PHYSICAL_DEVICE_6IX
NXTAPPO.PHYSICAL_DEVICE                PHYSICAL_DEVICE_7IX
NXTAPPO.PHYSICAL_DEVICE                PHYSICAL_DEVICE_PK
NXTAPPO.SERVICE_AGREEMENT              SERVICE_AGREEMENT_1IX
NXTAPPO.SERVICE_AGREEMENT              SERVICE_AGREEMENT_4IX
NXTAPPO.SERVICE_AGREEMENT              SERVICE_AGREEMENT_5IX
NXTAPPO.SERVICE_AGREEMENT              SERVICE_AGREEMENT_PK
NXTAPPO.SUBSCRIBER                     SUBSCRIBER_1IX
NXTAPPO.SUBSCRIBER                     SUBSCRIBER_2IX
NXTAPPO.SUBSCRIBER                     SUBSCRIBER_4IX
NXTAPPO.SUBSCRIBER                     SUBSCRIBER_6IX
NXTAPPO.SUBSCRIBER                     SUBSCRIBER_7IX
NXTAPPO.SUBSCRIBER                     SUBSCRIBER_PK
NXTAPPO.SUBSCRIBER_RSOURCE             SUBSCRIBER_RSOURCE_10IX
NXTAPPO.SUBSCRIBER_RSOURCE             SUBSCRIBER_RSOURCE_1IX
NXTAPPO.SUBSCRIBER_RSOURCE             SUBSCRIBER_RSOURCE_2IX
NXTAPPO.SUBSCRIBER_RSOURCE             SUBSCRIBER_RSOURCE_PK
select dbms_metadata.get_ddl('INDEX','BILLING_ACCOUNT_3IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','BILLING_ACCOUNT_6IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','BILLING_ACCOUNT_7IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','BILLING_ACCOUNT_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','CUSTOMER_1IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','CUSTOMER_3IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','CUSTOMER_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','PHYSICAL_DEVICE_2IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','PHYSICAL_DEVICE_3IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','PHYSICAL_DEVICE_4IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','PHYSICAL_DEVICE_5IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','PHYSICAL_DEVICE_6IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','PHYSICAL_DEVICE_7IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','PHYSICAL_DEVICE_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SERVICE_AGREEMENT_1IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SERVICE_AGREEMENT_4IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SERVICE_AGREEMENT_5IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SERVICE_AGREEMENT_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_1IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_2IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_4IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_6IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_7IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_PK','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_RSOURCE_10IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_RSOURCE_1IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_RSOURCE_2IX','NXTAPPO') ddl from dual;
select dbms_metadata.get_ddl('INDEX','SUBSCRIBER_RSOURCE_PK','NXTAPPO') ddl from dual;
 select dbms_metadata.get_ddl('TABLE','PAYMENT_ATTRIBUTES','NXTAPPO') ddl from dual;
 dumpfile=SPCUREP1_${table_name}_%U.dp
 logfile=SPCUREP1_${table_name}.log
 parallel=12
 version=11.2
 exclude=statistics
 cluster=n
 tables=NXTAPPO.${table_name}
 FLASHBACK_SCN=${scn}
set serveroutput on;

-- NXTAPPO
 DECLARE
  cursor c1 is select * from dba_tab_privs
               where owner='NXTAPPO' and table_name='PHYSICAL_DEVICE';
  target_name varchar2(30);
  grant_option varchar2(30);
  text_sql varchar2(4000);
BEGIN
  target_name := 'PHYSICAL_DEVICE_STG';
  for v1 in c1 loop
    if v1.grantable = 'YES' then
        grant_option := ' with grant option';
    else
      grant_option := '';
    end if;
    text_sql := 'grant ' || v1.privilege || ' on NXTAPPO.' || target_name || ' to ' || v1.grantee || grant_option;
    dbms_output.put_line(text_sql);
    execute immediate text_sql;
    end loop;
END;
/

-- NXTAPPO_G
 DECLARE
  cursor c1 is select * from dba_tab_privs
               where owner='NXTAPPO_G' and table_name='PHYSICAL_DEVICE';
  target_name varchar2(30);
  grant_option varchar2(30);
  text_sql varchar2(4000);
BEGIN
  target_name := 'PHYSICAL_DEVICE_STG';
  for v1 in c1 loop
    if v1.grantable = 'YES' then
        grant_option := ' with grant option';
     else
      grant_option := '';
    end if;
    text_sql := 'grant ' || v1.privilege || ' on NXTAPPO_G.' || target_name || ' to ' || v1.grantee || grant_option;
    dbms_output.put_line(text_sql);
    execute immediate text_sql;
    end loop;
END;
/
-- NXTAPPO
 DECLARE
  cursor c1 is select * from dba_tab_privs
               where owner='NXTAPPO' and table_name='SERVICE_AGREEMENT';
  target_name varchar2(30);
  grant_option varchar2(30);
  text_sql varchar2(4000);
BEGIN
  target_name := 'SERVICE_AGREEMENT_STG';
  for v1 in c1 loop
    if v1.grantable = 'YES' then
        grant_option := ' with grant option';
    else
      grant_option := '';
    end if;
    text_sql := 'grant ' || v1.privilege || ' on NXTAPPO.' || target_name || ' to ' || v1.grantee || grant_option;
    dbms_output.put_line(text_sql);
    execute immediate text_sql;
    end loop;
END;
/
-- NXTAPPO_G
 DECLARE
  cursor c1 is select * from dba_tab_privs
               where owner='NXTAPPO_G' and table_name='SERVICE_AGREEMENT';
  target_name varchar2(30);
  grant_option varchar2(30);
  text_sql varchar2(4000);
BEGIN
  target_name := 'SERVICE_AGREEMENT_STG';
  for v1 in c1 loop
    if v1.grantable = 'YES' then
        grant_option := ' with grant option';
     else
      grant_option := '';
    end if;
    text_sql := 'grant ' || v1.privilege || ' on NXTAPPO_G.' || target_name || ' to ' || v1.grantee || grant_option;
    dbms_output.put_line(text_sql);
    execute immediate text_sql;
    end loop;
END;
/
-- NXTAPPO
 DECLARE
  cursor c1 is select * from dba_tab_privs
               where owner='NXTAPPO' and table_name='BILLING_ACCOUNT';
  target_name varchar2(30);
  grant_option varchar2(30);
  text_sql varchar2(4000);
BEGIN
  target_name := 'BILLING_ACCOUNT_STG';
  for v1 in c1 loop
    if v1.grantable = 'YES' then
        grant_option := ' with grant option';
    else
      grant_option := '';
    end if;
    text_sql := 'grant ' || v1.privilege || ' on NXTAPPO.' || target_name || ' to ' || v1.grantee || grant_option;
    dbms_output.put_line(text_sql);
    execute immediate text_sql;
    end loop;
END;
/
-- NXTAPPO_G
 DECLARE
  cursor c1 is select * from dba_tab_privs
               where owner='NXTAPPO_G' and table_name='BILLING_ACCOUNT';
  target_name varchar2(30);
  grant_option varchar2(30);
  text_sql varchar2(4000);
BEGIN
  target_name := 'BILLING_ACCOUNT_STG';
  for v1 in c1 loop
    if v1.grantable = 'YES' then
        grant_option := ' with grant option';
     else
      grant_option := '';
    end if;
    text_sql := 'grant ' || v1.privilege || ' on NXTAPPO_G.' || target_name || ' to ' || v1.grantee || grant_option;
    dbms_output.put_line(text_sql);
    execute immediate text_sql;
    end loop;
END;
/
 DECLARE
  cursor c1 is select * from dba_indexes
               where owner='NXTAPPO' and like 'BILLING_ACCOUNT%';
  target_name varchar2(30);
  grant_option varchar2(30);
  text_sql varchar2(4000);
BEGIN
  target_name := 'BILLING_ACCOUNT_STG';
  for v1 in c1 loop
    if v1.grantable = 'YES' then
        grant_option := ' with grant option';
     else
      grant_option := '';
    end if;
    text_sql := 'grant ' || v1.privilege || ' on NXTAPPO_G.' || target_name || ' to ' || v1.grantee || grant_option;
    dbms_output.put_line(text_sql);
    execute immediate text_sql;
    end loop;
END;
/
select 'alter index NXTAPPO.' || index_name || ' rename to ' || index_name || '_IM6057664;'
from dba_indexes where owner='NXTAPPO' and table_name = 'MAC_SCHEDULE'
order by index_name;
select 'alter index NXTAPPO.' || index_name || ' rename to ' || replace(index_name,'_STG','') || ';'
from dba_indexes where owner='NXTAPPO' and table_name = 'SERVICE_AGREEMENT_STG'
order by index_name;
select 'alter index NXTAPPO_G.' || index_name || ' rename to ' || index_name || '_IM6057664;'
from dba_indexes where owner='NXTAPPO_G' and table_name = 'ADJUSTMENT'
order by index_name;
select 'alter index NXTAPPO_G.' || index_name || ' rename to ' || replace(index_name,'_STG','') || ';'
from dba_indexes where owner='NXTAPPO_G' and table_name = 'BILLING_ACCOUNT_STG'
order by index_name;
select owner, table_name from dba_tables where table_name in (
'MAC_SCHEDULE',
'BAN_LIST',
'ADJUSTMENT'
) order by 1;
remap_schema=NXTAPPO:NXTAPPO_G
remap_schema=NXTAPPO:NXTAPPONRT
BEGIN
  FOR c_tab IN (select table_owner, table_name, partition_name from dba_tab_partitions where table_owner = 'NXTAPPO' and table_name = 'BAN_LIST')
  LOOP
    DBMS_OUTPUT.PUT_LINE('ALTER TABLE NXTAPPO.'||c_tab.table_name||' EXCHANGE PARTITION '||c_tab.partition_name||' WITH TABLE NXTAPPO.TMP_'||c_tab.partition_name||' WITHOUT VALIDATION;');
    EXECUTE IMMEDIATE 'ALTER TABLE NXTAPPO.'||c_tab.table_name||' EXCHANGE PARTITION '||c_tab.partition_name||' WITH TABLE NXTAPPO.TMP_'||c_tab.partition_name||' WITHOUT VALIDATION';
  END LOOP;
END;
/
BEGIN
  FOR c_tab IN (select table_owner, table_name, partition_name from dba_tab_partitions where table_owner = 'NXTAPPO' and table_name = 'BAN_LIST')
  LOOP
    DBMS_OUTPUT.PUT_LINE('ALTER TABLE NXTAPPO.'||c_tab.table_name||' EXCHANGE PARTITION '||c_tab.partition_name||' WITH TABLE NXTAPPO.TMP_'||c_tab.partition_name||' WITHOUT VALIDATION;');
    EXECUTE IMMEDIATE 'ALTER TABLE NXTAPPO.'||c_tab.table_name||' EXCHANGE PARTITION '||c_tab.partition_name||' WITH TABLE NXTAPPO.STG_'||c_tab.partition_name||' WITHOUT VALIDATION';
  END LOOP;
END;
/
Schema  Table_Name  Date to get post EOD  Date for NOR Rename Size in gig GG Group
'PAYMENT_ATTRIBUTES',
'PREPAID_RC_REGIST',
'PTN_INV',
'ATB_HISTORY_B',
'DISPUTE',
'LTS_RAN',
'CSM_FUTURE_REQUEST',
'DIR_LIST',
'EQP_ACTV_DAYS',
'ACTIVITY_LOG'
NXTAPPO COLLECTION 2/13/2021 2/16/2021 295 C2
NXTAPPO PAYMENT 2/13/2021 2/16/2021 220 C4
NXTAPPO PAYMENT_ACTIVITY  2/13/2021 2/16/2021 101 C5
NXTAPPO CH_OBJECT_ATTRIBUTES  2/13/2021 2/16/2021 110.1 C3
NXTAPPO ADDRESS_NAME_LINK 2/13/2021 2/16/2021 73.97 C6
select dbms_metadata.get_ddl('INDEX',index_name,'NXTAPPO') ddl from dba_indexes where owner='NXTAPPO' and table_name in
(
'COLLECTION',
'PAYMENT'
);
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDh8KAJ9MLCxg3/ix4AjoVE8/5TCdYDGDc2q3aO5eMdEUBI9CetU7mPdGz6AELWl6Bfddd7Yg14JPWUL1ZJ3crlxckwr15TG/rwc0DAl9II4BDAd2Fx+36l2HyQDp0cvJUTd1sEvIq+gS+p/1BDlzlfkA9zm6Fk4A1XRsDjqVJvNt+v3YGT3/F/Il1cOGrJOsMtTynmiwvkwkcIgpGIsPh5Dvfr/loFT8mRXOn3BQGUaYV0omdLNboJQvFgH4FZ9zPCy/Ch8zUQoHvp01tnY9+dgX07Ek85/0SRv9o0PBGurvuZgjj7GrwOF+jPaTeifGd3SKkjUSX3PwB9XniockYZ mozartiano@af3543d2facd
allow group ComputeInstances to read virtual-network-family in compartment NetworkObjs
allow dynamic-group ComputeInstances to use volume-family in tenancy where request.compartment = 'FrontEnd'
New password is 'New202102140806!'.
Alter system set local_listener= 'ADDRESS_LIST=
(ADDRESS=(PROTOCOL=TCP)(HOST=144.226.248.244)(PORT=1525))
(ADDRESS=(PROTOCOL=TCP)(HOST=10.118.184.159)(PORT=1525)))' scope=both sid='ICEP1013';
alter system set LOCAL_LISTENER='(ADDRESS_LIST=
(ADDRESS=(PROTOCOL=TCP)(HOST=144.226.248.244)(PORT=1525))
(ADDRESS=(PROTOCOL=TCP)(HOST=10.118.184.159)(PORT=1525)))' scope=both sid='ICEP1013';
--OCI
-- FOR ORACLE LINUX ONLY...
firewall-cmd  --permanent --zone=public --add-port=2377/tcp
firewall-cmd  --reload
--inter
Lix0pqp!
192.168.0.6
ssh -i oci.key opc@150.136.164.35
sudo mount -vvvv -t nfs 10.0.10.3:/FSSlindao /mnt/nfs-data
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDjVGwU6Xk4lp/f6BSQnhYKKt0Pm5QzBV/QNkLwTxAmH69jnKOzeqzyMiJ8XWcDUaff/NjFOXlOzWhAeoRVtB0Wi3DwnQNuakI091Jau0rC+m0YDmCIbFUpSGTPiMwhFagc+SPeO1fAHOnvbSfcVhlSmnoYIB07Xn9cU3HtNYB4bygVCYXQSAyyNpyPmc1sumVc+slOq/Jhz/BhwhCOyd6CUPt+/EcfTPrVnZx8uzMnqOq8YLHfkdk+i72lx7Izw6/uKKN05NkaXwOadBhEbH+AK3+Kizs7M/OW3kukLDloC0Zzb3dH91+Mi7ZBwLsD46SrlRWlt15jqUYj8f5ycv41 opc@instance-20210214-2007
    select distinct 'alter system disconnect session ''' || sid ||  ',' || serial# || ''' immediate;'
    from gv$session
    where
    type <> 'BACKGROUND'
    and LOGON_TIME < sysdate -7
    /
with cte_details as (
    select USER_ID, EVENT_DATE, EVENT_TYPE,
    rank() over(partition by user_id order by EVENT_DATE desc ) my_rank
    from user_login_details
    where user_id in
    (
    'fd196927'
    ,'fo355285'
    ,'mc579956'
    ,'be768176'
    ,'pi885616'
    )
    order by EVENT_DATE
    )
select USER_ID, EVENT_DATE, EVENT_TYPE
from cte_details
where my_rank = 1;
Cassandrinha_21
c2024241
c3010443
c4039089
c5004448
c6009538
rtc2
rtc3
rtc4
rtc5
rtc6
dblogin useridalias GGADMIN
delete replicat rtc2
delete replicat rtc3
delete replicat rtc4
delete replicat rtc5
delete replicat rtc6
add replicat rtc2 , parallel, EXTTRAIL /ggsdata/trail/repl2/c2 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat rtc3 , parallel, EXTTRAIL /ggsdata/trail/repl3/c3 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat rtc4 , parallel, EXTTRAIL /ggsdata/trail/repl4/c4 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat rtc5 , parallel, EXTTRAIL /ggsdata/trail/repl5/c5 , CHECKPOINTTABLE GGSADM.GGSCHKPT
add replicat rtc6 , parallel, EXTTRAIL /ggsdata/trail/repl6/c6 , CHECKPOINTTABLE GGSADM.GGSCHKPT
ALTER REPLICAT rtc2, EXTSEQNO 24241 EXTRBA 0
ALTER REPLICAT rtc3, EXTSEQNO 10443 EXTRBA 0
ALTER REPLICAT rtc4, EXTSEQNO 39089 EXTRBA 0
ALTER REPLICAT rtc5, EXTSEQNO 4448 EXTRBA 0
ALTER REPLICAT rtc6, EXTSEQNO 9538 EXTRBA 0
start replicat rtc2 NOFILTERDUPTRANSACTIONS
start replicat rtc3 NOFILTERDUPTRANSACTIONS
start replicat rtc4 NOFILTERDUPTRANSACTIONS
start replicat rtc5 NOFILTERDUPTRANSACTIONS
start replicat rtc6 NOFILTERDUPTRANSACTIONS
App Instance  rating (1 a 4)  NOVOS PRIMARY
OPS WDM% + OEGP 1 Patrick Mello
8S7 RRSP101 4 Fábio Contatto
8S7 RRSP101 4 Fábio Contatto
SUS SUSP101 3 Michael Edwards
TEP MMPP101 3 Michael Edwards
UYV ICEP101 3 Fernando Pereira
XNG SVIP101/201+MB  1 Alexandre Pimentel
XNG SVDP101 1 Alexandre Pimentel
SELECT T_PROJECT_MATRIX_INFO_REC ( PM_X_ID, PM_ID, PM_PROJECT_CATEGORY, PM_CATEGORY, PM_ELEMENT_TEMPLATE_DESC )
FROM ( SELECT PMINFONUM.PM_X_ID, PMINFONUM.PM_ID, PMINFONUM.PM_PROJECT_CATEGORY, PMINFONUM.PM_CATEGORY, PMINFOCHAR.PM_ELEMENT_TEMPLATE_DESC
  FROM ( SELECT PMINFODETL.PM_X_ID, PMINFODETL.PM_ID, PRJTCATLST.ATTR_VALUE PM_PROJECT_CATEGORY, CATLST.ATTR_VALUE PM_CATEGORY
    FROM ( SELECT PMINFO.KEY_VALUE AS PM_X_ID, PMX.XITOR_KEY AS PM_ID, PMINFOCF.CONFIG_FIELD_NAME, PMINFO.VALUE_NUMBER AS CONFIG_FIELD_VALUE
      FROM CONFIG_VALUE_NUMBER PMINFO JOIN CONFIG_FIELD PMINFOCF ON ( PMINFOCF.CONFIG_FIELD_ID= PMINFO.CONFIG_FIELD_ID )
      JOIN XITOR PMX ON ( PMX.XITOR_ID = PMINFO.KEY_VALUE ) WHERE PMINFO.KEY_VALUE IN ( SELECT PM.XITOR_ID
        FROM XITOR PM WHERE PM.XITOR_TYPE_ID = ID.GET(?) ) ) PIVOT( MAX(CONFIG_FIELD_VALUE) FOR CONFIG_FIELD_NAME
    IN ( ? PM_PROJECT_CATEGORY, ? PM_CATEGORY ) )PMINFODETL
        LEFT OUTER JOIN ( SELECT VAL.ATTRIB_V_TABLE_VALUE_ID AS ATTR_KEY_ID, VAL.VALUE AS ATTR_VALUE
          FROM ATTRIB_V_TABLE TBL INNER JOIN ATTRIB_V_TABLE_VALUE VAL ON ( VAL.ATTRIB_V_TABLE_ID = TBL.ATTRIB_V_TABLE_ID AND TBL.ATTRIB_V_TABLE_NAME = ? ) )PRJTCATLST
        ON ( PRJTCATLST.ATTR_KEY_ID = PMINFODETL.PM_PROJECT_CATEGORY )
        LEFT OUTER JOIN ( SELECT VAL.ATTRIB_V_TABLE_VALUE_ID AS ATTR_KEY_ID, VAL.VALUE AS ATTR_VALUE FROM ATTRIB_V_TABLE TBL
          INNER JOIN ATTRIB_V_TABLE_VALUE VAL ON ( VAL.ATTRIB_V_TABLE_ID = TBL.ATTRIB_V_TABLE_ID AND TBL.ATTRIB_V_TABLE_NAME = ? ) )CATLST
        ON ( CATLST.ATTR_KEY_ID = PMINFODETL.PM_CATEGORY ) )PMINFONUM FULL OUTER JOIN ( SELECT PMINFODETL.PM_X_ID, PMINFODETL.PM_ELEMENT_TEMPLATE_DESC
        FROM ( SELECT PMINFO.KEY_VALUE AS PM_X_ID, PMX.XITOR_KEY AS PM_ID, PMINFOCF.CONFIG_FIELD_NAME, PMINFO.VALUE_CHAR AS CONFIG_FIELD_VALUE
          FROM CONFIG_VALUE_CHAR PMINFO JOIN CONFIG_FIELD PMINFOCF ON ( PMINFOCF.CONFIG_FIELD_ID= PMINFO.CONFIG_FIELD_ID ) JOIN XITOR PMX
          ON ( PMX.XITOR_ID = PMINFO.KEY_VALUE ) WHERE PMINFO.KEY_VALUE IN ( SELECT PM.XITOR_ID FROM XITOR PM WHERE PM.XITOR_TYPE_ID = ID.GET(?) ) )
        PIVOT( MAX(CONFIG_FIELD_VALUE) FOR CONFIG_FIELD_NAME IN ( ? PM_ELEMENT_TEMPLATE_DESC ) )PMINFODETL )PMINFOCHAR ON ( PMINFONUM.PM_X_ID = PMINFOCHAR.PM_X_ID ) )
SCGAS-NS15-MSAFPROD
N/A 
HIGH
Low Free Space On Tablespace [SYSAUX] On SCGAS-NS15-MSAFPROD
03/04/2021 22:24:55    
SCGAS-NS15-SESPROD
N/A 
HIGH
User Locked On SCGAS-NS15-SESPROD
30/03/2021 11:37:48           
      
SCGAS-NS15-RMPROD
N/A 
AVERAGE
Scheduler Job [GERENCIAL.SCH_MON_AUTO_RESIZE_DBF_FRAG] Error On SCGAS-NS15-RMPROD
13/03/2021 00:00:06           
       
SCGAS-NS15-TAFPROD
N/A 
AVERAGE
Scheduler Job [GERENCIAL.SCH_MON_EMAIL] Error On SCGAS-NS15-TAFPROD
06/03/2021 14:00:33     
SCGAS-NS15-RMPROD
N/A 
AVERAGE
Scheduler Job [GERENCIAL.SCH_MON_COLLECT_STATS] Error On SCGAS-NS15-RMPROD
28/02/2021 22:00:05
SCGAS-NS15-MSAFPROD
N/A 
AVERAGE
Scheduler Job [GERENCIAL.SCH_MON_AUTO_RESIZE_DBF_FRAG] Error On SCGAS-NS15-MSAFPROD
24/02/2021 00:00:30     
      
SCGAS-NS15-TAFPROD
N/A 
AVERAGE
Scheduler Job [GERENCIAL.SCH_MON_AUTO_RESIZE_DBF_FRAG] Error On SCGAS-NS15-TAFPROD
24/02/2021 00:00:28           
find /u01/app/orabcx/diag/rdbms/orabcx01/ORABCX01/trace/ORABCX01_dia0*.trm -type f -mtime +15 -exec ls -l  "{}" \;
find /u01/app/orabcx/diag/rdbms/orabcx01/ORABCX01/trace/ORABCX01_*.trm -type f -mtime +15 -exec rm -f  "{}" \;
find /u01/app/orabcx/diag/rdbms/orabcx01/ORABCX01/trace/ORABCX01_m*.trc -type f -mtime +15 -exec rm -f  "{}" \;
du -sh * | tee /tmp/prova.txt | grep G | sort -rn ; cat /tmp/prova.txt | grep M | sort -rn ; cat /tmp/prova.txt | grep K | sort -rn ; rm /tmp/prova.txt
alter database move datafile 2670 to '+DATA01';
ATA_atacama> echo $ORACLE_HOME
/oracle/10i
You have mail in /usr/spool/mail/ora10i
ATA_atacama> echo $PATH
/oracle/10i/perl/bin:/oracle/10i/bin:/usr/ccs/bin:/usr/sbin:/oracle/10i/jre/1.4.2/bin:/usr/bin:/etc:/usr/lbin:/usr/bin/X11:/usr/local/bin:/usr/local/script:/usr/local/bin:/usr/bin:/etc:/usr/sbin:/usr/ucb:/usr/bin/X11:/sbin:/usr/java6/jre/bin:/usr/java6/bin:/usr/local/samba/bin:/usr/local/bin:/usr/vacpp/bin:/usr/es/sbin/cluster/utilities:/usr/es/sbin/cluster/sbin:/oracle/10i/OPatch:/usr/vacpp/bin
* * * * * sh /oracle/joinville/scripts/test_mail.sh > /oracle/joinville/scripts/test_mail_script.log

-- ACTIVE TRACES
SET LINESIZE 100
COLUMN trace_file FORMAT A60
SELECT s.sid,
       s.serial#,
       pa.value || '/' || LOWER(SYS_CONTEXT('userenv','instance_name')) ||    
       '_ora_' || p.spid || '.trc' AS trace_file
FROM   v$session s,
       v$process p,
       v$parameter pa
WHERE  pa.name = 'user_dump_dest'
AND    s.paddr = p.addr
AND    s.audsid = SYS_CONTEXT('USERENV', 'SESSIONID');


strace -e write=all -p 9568540 -o utl_http_test.txt
set serveroutput on
spool test_mail.log
alter session set current_schema=APPS;
ALTER SESSION SET TRACEFILE_IDENTIFIER = "Tigre Email Travado";
DECLARE 
a_data varchar2(1000);
BEGIN
-- Call the procedure
select sysdate into a_data from dual;
EXECUTE IMMEDIATE 'alter session set events ''10046 trace name context forever, level 8''';
dbms_output.put_line('Enviando email. ' || a_data);
tgr_envia_email_anexologo_k.envia_pdf_txt_concorrente(p_request_id => 310461466 ---w_request_id_ped
,from_name => 'customerservice@tigre.com'
,to_name => 'renato.junior@byseven.com.br' --l_email_address -- Email do Cliente ou Responsavel
,subject => 'Teste Rotina tgr_envia_email_anexologo_k' --l_argument3 -- Assunto
,message => 'Teste Rotina tgr_envia_email_anexologo_k'
,message_2 => NULL
,to_cc => 'alexander.bufalo@byseven.com.br' --l_email_responsavel
,to_cco => NULL
,p_nome_arquivo => 'Sales Order Test' ---l_argument3
,p_in_compress => NULL
,p_in_saida => 'S'
,p_in_log => 'N'
,p_libera_to_name => NULL);
select sysdate into a_data from dual;
dbms_output.put_line('Email enviado. ' || a_data);
-- EXCEPTION
-- WHEN OTHERS THEN
-- IF sys_context('USERENV','LANG') = 'US' THEN
-- dbms_output.put_line('TGR_ENVIA_EMAIL_ANEXOLOGO_K.ENVIA_PDF_TXT_CONCORRENTE:'||' Erro: '||SQLERRM);
-- ---fnd_file.put_line(fnd_file.log,'Erro no paso: '||l_paso||' Erro : '||l_mens_erro);
-- ELSE
-- dbms_output.put_line('TGR_ENVIA_EMAIL_ANEXOLOGO_K.ENVIA_PDF_TXT_CONCORRENTE:'||' Erro: '||SQLERRM);
-- --fnd_file.put_line(fnd_file.log,'Erro no paso: '||l_paso||' Erro : '||l_mens_erro);
-- END IF;
END;
/


spool off
#!/usr/bin/sh
export PATH=/oracle/10i/perl/bin:/oracle/10i/bin:/usr/ccs/bin:/usr/sbin:/oracle/10i/jre/1.4.2/bin:/usr/bin:/etc:/usr/lbin:/usr/bin/X11:/usr/local/bin:/usr/local/script:/usr/local/bin:/usr/bin:/etc:/usr/sbin:/usr/ucb:/usr/bin/X11:/sbin:/usr/java6/jre/bin:/usr/java6/bin:/usr/local/samba/bin:/usr/local/bin:/usr/vacpp/bin:/usr/es/sbin/cluster/utilities:/usr/es/sbin/cluster/sbin:/oracle/10i/OPatch:/usr/vacpp/bin
export ORACLE_HOME=/oracle/10i
export ORACLE_SID=ATA
export LCKFILE=test_mail.lck
cd /oracle/joinville/scripts/
if [ -f "$LCKFILE" ] ; then
    echo "Lock file existe."
    exit
fi
echo "Criando arquivo de lock."
touch $LCKFILE
echo "Excutando o arquivo pl/sql."
sqlplus / as sysdba @test_mail.sql
echo "Removendo arquivo de lock."
rm $LCKFILE
exit
 SELECT sid, total_waits, time_waited
    FROM v$session_event
   WHERE event='TCP Socket (KGAS)'
     and total_waits>0
   ORDER BY 3,2
  ;

-- USING BIND VARIABLE
variable B1 varchar2(100)
exec :B1 := '/oralst/out/'

RUN QUERY.



SELECT DIRECTORY_NAME FROM ALL_DIRECTORIES WHERE (DIRECTORY_PATH = :B1 OR DIRECTORY_PATH = SUBSTR(:B1 ,1,LENGTH(:B1 )-1)) AND ROWNUM = 1
/
select dbms_metadata.get_ddl('PACKAGE','TGR_ENVIA_EMAIL_ANEXOLOGO_K','APPS') ddl from dual;
select 'alter system disconnect session ''' || sid || ',' || serial# || ''' immediate;'
from v$session 
where sid in (
 SELECT sid
    FROM v$session_event
   WHERE event='TCP Socket (KGAS)'
     and total_waits>0
  );
BEGIN     
     UTL_MAIL.SEND           
     (SENDER => 'customerservice@tigre.com', -- remetente da mensagem  
     RECIPIENTS => 'alexander.bufalo@byseven.com.br',  -- destinatário da mensagem   
     CC => 'renato.junior@byseven.com.br',  -- destinatário copiado na mensagem            
     BCC => null,  -- destinatário com cópia oculta da  mensagem      
     SUBJECT =>  'Testando Email da TIgre', -- assunto da mensagem     
     MESSAGE => 'Mensagem de teste', -- mensagem do e-mail         
     MIME_TYPE => 'text/plain; charset=iso-8859-1' -- mime type + character set    
     do texto da mensagem           
     );    
     END;
DECLARE
  p_to          VARCHAR2(100) := 'alexander.bufalo@byseven.com.br';
  p_from        VARCHAR2(100) := 'app11i.no_reply@tigre.com';
  p_subject     VARCHAR2(100) := 'Teste Rotina tgr_envia_email_anexologo_k';
  p_text_msg    VARCHAR2(1000) := 'Este eh um email de teste enviado pelo banco do EBS tigre';
  p_attach_name VARCHAR2(100) := 'Sales Order Test.pdf';
  p_attach_mime VARCHAR2(100) := 'text/plain';
  p_attach_clob CLOB;
  p_smtp_host   VARCHAR2(100) := 'smtp.tigre.com';
  p_smtp_port   NUMBER := 25;
  l_mail_conn   UTL_SMTP.connection;
  l_boundary    VARCHAR2(50) := '----=*#abc1234321cba#*=';
  l_step        PLS_INTEGER  := 57;
  l_fhandle utl_file.file_type;
  l_buffer  VARCHAR2(4096);
BEGIN
  -- Ler arquivo
  l_fhandle := utl_file.fopen('ARQUIVONFE','sales_test.pdf','R');
  dbms_lob.createtemporary(p_attach_clob, TRUE, DBMS_LOB.CALL);
  
  LOOP
      utl_file.get_line(l_fhandle, l_buffer);
      dbms_output.put_line(l_buffer);
      dbms_lob.writeappend(p_attach_clob, length(l_buffer), l_buffer);
  END LOOP;
  UTL_FILE.FCLOSE(l_fhandle);
  l_mail_conn := UTL_SMTP.open_connection(p_smtp_host, p_smtp_port);
  UTL_SMTP.helo(l_mail_conn, p_smtp_host);
  UTL_SMTP.mail(l_mail_conn, p_from);
  UTL_SMTP.rcpt(l_mail_conn, p_to);
  UTL_SMTP.open_data(l_mail_conn);
  
  UTL_SMTP.write_data(l_mail_conn, 'Date: ' || TO_CHAR(SYSDATE, 'DD-MON-YYYY HH24:MI:SS') || UTL_TCP.crlf);
  UTL_SMTP.write_data(l_mail_conn, 'To: ' || p_to || UTL_TCP.crlf);
  UTL_SMTP.write_data(l_mail_conn, 'From: ' || p_from || UTL_TCP.crlf);
  UTL_SMTP.write_data(l_mail_conn, 'Subject: ' || p_subject || UTL_TCP.crlf);
  UTL_SMTP.write_data(l_mail_conn, 'Reply-To: ' || p_from || UTL_TCP.crlf);
  UTL_SMTP.write_data(l_mail_conn, 'MIME-Version: 1.0' || UTL_TCP.crlf);
  UTL_SMTP.write_data(l_mail_conn, 'Content-Type: multipart/mixed; boundary="' || l_boundary || '"' || UTL_TCP.crlf || UTL_TCP.crlf);
  
  IF p_text_msg IS NOT NULL THEN
    UTL_SMTP.write_data(l_mail_conn, '--' || l_boundary || UTL_TCP.crlf);
    UTL_SMTP.write_data(l_mail_conn, 'Content-Type: text/plain; charset="iso-8859-1"' || UTL_TCP.crlf || UTL_TCP.crlf);
    UTL_SMTP.write_data(l_mail_conn, p_text_msg);
    UTL_SMTP.write_data(l_mail_conn, UTL_TCP.crlf || UTL_TCP.crlf);
  END IF;
--  IF p_attach_name IS NOT NULL THEN
--    UTL_SMTP.write_data(l_mail_conn, '--' || l_boundary || UTL_TCP.crlf);
--    UTL_SMTP.write_data(l_mail_conn, 'Content-Type: ' || p_attach_mime || '; name="' || p_attach_name || '"' || UTL_TCP.crlf);
--    UTL_SMTP.write_data(l_mail_conn, 'Content-Disposition: attachment; filename="' || p_attach_name || '"' || UTL_TCP.crlf || UTL_TCP.crlf);
-- 
--    FOR i IN 0 .. TRUNC((DBMS_LOB.getlength(p_attach_clob) - 1 )/l_step) LOOP
--      UTL_SMTP.write_data(l_mail_conn, DBMS_LOB.substr(p_attach_clob, l_step, i * l_step + 1));
--    END LOOP;
--
--    UTL_SMTP.write_data(l_mail_conn, UTL_TCP.crlf || UTL_TCP.crlf);
--  END IF;
  
  UTL_SMTP.write_data(l_mail_conn, '--' || l_boundary || '--' || UTL_TCP.crlf);
  UTL_SMTP.close_data(l_mail_conn);
  UTL_SMTP.quit(l_mail_conn);
END;
/
-- identify session trace
SET LINESIZE 200
COLUMN trace_file FORMAT A100
SELECT s.sid,
       s.serial#,
       pa.value || '/' || LOWER(SYS_CONTEXT('userenv','instance_name')) ||    
       '_ora_' || p.spid || '.trc' AS trace_file
FROM   v$session s,
       v$process p,
       v$parameter pa
WHERE  pa.name = 'user_dump_dest'
AND    s.paddr = p.addr
AND    s.audsid = SYS_CONTEXT('USERENV', 'SESSIONID');
1- Apagar os arquivos de configuração atuais no Oracle Home.
cd $ORACLE_HOME/config
ls ddboost*
rm -f ddboost*
2- Reconfigurar o data domain.
rman target /
RUN {
ALLOCATE CHANNEL C1 TYPE SBT_TAPE PARMS
'SBT_LIBRARY=/u01/app/oracle/product/11.2.0.4/dbhome_stl/lib/libddobk.so';
send 'set username rman password Wall?Disgust+Handshake]Hard servername dd2200.eletrosom.local';
RELEASE CHANNEL C1;
}
-- jobs 
col owner for a20
col elapsed_time for a20
col cpu_used for a20
col job_name for a50
SELECT owner, job_name, session_id, running_instance, elapsed_time, cpu_used
FROM dba_scheduler_running_jobs;
select
   log_date,
   job_name,
   status,
   req_start_date,
   actual_start_date,
   run_duration,
   ADDITIONAL_INFO
from
   dba_scheduler_job_run_details
where
   --owner='SYS'
   job_name = 'JOB_OFF_INTEGRACAO_SEED'
   --job_name like 'ORA$%'
  -- job_action like '%UPDATE_PORT_STATUS_TO_RPTG_DAY%'
  --and status <> 'SUCCEEDED'
   --and actual_start_date > sysdate -2
order by
   actual_start_date;
exec dbms_scheduler.disable('APEX_PORTALRI.APRI_LOG_INTERFACE_API');
exec dbms_scheduler.enable('APEX_PORTALRI.APRI_LOG_INTERFACE_API');
select sid, serial#, username, sql_id 
from gv$session 
where process in ('23034','23026','22512','7734');
select vs.sid,vs.serial#,vs.username,vs.inst_id,vp.spid, vs.sql_id
from gv$session vs,gv$process vp
where vs.paddr=vp.addr and vp.spid = 7734;
RMAN-00571: ===========================================================
RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============
RMAN-00571: ===========================================================
RMAN-00601: fatal error in recovery manager
RMAN-03004: fatal error during execution of command
ORA-01092: ORACLE instance terminated. Disconnection forced
ORACLE error from target database:
ORA-03135: connection lost contact
Process ID: 8326
Session ID: 400 Serial number: 10950
select sql_id, sql_text from dba_hist_sqltext
where sql_text like '%CLL_F189_ENTRY_OPERATIONS%';
select sql_id, sql_text 
from v$sql
where sql_text like 'SELECT ROWID,ORGANIZATION_ID,LOCATION_ID,OPERATION_ID,GL_DATE,RECEIVE_DATE,%CLL_F189_ENTRY_OPERATIONS%STATUS <>%AND ORGANIZATION_ID IN%FROM ORG_ORGANIZATION_DEFINITIONS%and RI.INVOICE_NUM =%';
SELECT ROWID,ORGANIZATION_ID,LOCATION_ID,OPERATION_ID,GL_DATE,RECEIVE_DATE,
FREIGHT_FLAG,STATUS,CREATION_DATE
FROM
CLL_F189_ENTRY_OPERATIONS WHERE STATUS <> 'CANCELLED' AND ORGANIZATION_ID IN
(SELECT ORGANIZATION_ID FROM ORG_ORGANIZATION_DEFINITIONS) AND OPERATION_ID
|| ORGANIZATION_ID IN (select RI.OPERATION_ID || RI.ORGANIZATION_ID from
CLL_F189_INVOICES RI, CLL_F189_INVOICE_TYPES RIT,
CLL_F189_FISCAL_ENTITIES_ALL RFEA where RI.ENTITY_ID = RFEA.ENTITY_ID and
RI.INVOICE_TYPE_ID = RIT.INVOICE_TYPE_ID and RI.INVOICE_NUM = 2131288)
order by CREATION_DATE DESC
select HASH_VALUE, SQL_ID, PLAN_HASH_VALUE, TIMESTAMP from v$sql_plan where sql_id in (
'4ydspf6pdwdbt',
'08wx678ujndu1',
'7yk9bycvg15nk',
'9j666waxsdc71',
'85mc8cmr8xput',
'1xwdvb67mxzfp',
'dau31g71c6fft',
'cuhrzy7yyzh9x'
)
order by timestamp desc;
Execution Plan
----------------------------------------------------------
Plan hash value: 1667878059
------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                             | Name                           | Rows  | Bytes | Cost (%CPU)| Time     |
------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                      |                                |   251 | 21335 |   742  (14)| 00:00:01 |
|   1 |  SORT ORDER BY                        |                                |   251 | 21335 |   742  (14)| 00:00:01 |
|*  2 |   HASH JOIN RIGHT SEMI                |                                |   251 | 21335 |   741  (14)| 00:00:01 |
|   3 |    TABLE ACCESS BY INDEX ROWID BATCHED| CLL_F189_INVOICES              |     5 |    95 |     8   (0)| 00:00:01 |
|*  4 |     INDEX RANGE SCAN                  | CLL_F189_INVOICES_N1           |     5 |       |     3   (0)| 00:00:01 |
|   5 |    NESTED LOOPS                       |                                | 25143 |  1620K|   733  (14)| 00:00:01 |
|   6 |     VIEW                              | VW_NSO_1                       |     1 |     4 |     6   (0)| 00:00:01 |
|   7 |      HASH UNIQUE                      |                                |     1 |    76 |            |          |
|   8 |       NESTED LOOPS                    |                                |     1 |    76 |     6   (0)| 00:00:01 |
|   9 |        NESTED LOOPS                   |                                |     1 |    76 |     6   (0)| 00:00:01 |
|  10 |         NESTED LOOPS                  |                                |     1 |    69 |     5   (0)| 00:00:01 |
|  11 |          NESTED LOOPS                 |                                |     1 |    65 |     5   (0)| 00:00:01 |
|  12 |           NESTED LOOPS                |                                |     1 |    41 |     4   (0)| 00:00:01 |
|* 13 |            HASH JOIN                  |                                |     9 |   297 |     4   (0)| 00:00:01 |
|  14 |             JOIN FILTER CREATE        | :BF0000                        |     9 |   243 |     2   (0)| 00:00:01 |
|* 15 |              INDEX RANGE SCAN         | HR_ORGANIZATION_INFORMATIO_PB1 |     9 |   243 |     2   (0)| 00:00:01 |
|  16 |             JOIN FILTER USE           | :BF0000                        |   174 |  1044 |     2   (0)| 00:00:01 |
|* 17 |              TABLE ACCESS STORAGE FULL| HR_ALL_ORGANIZATION_UNITS      |   174 |  1044 |     2   (0)| 00:00:01 |
|* 18 |            INDEX UNIQUE SCAN          | HR_ALL_ORGANIZATION_UNTS_TL_PK |     1 |     8 |     0   (0)| 00:00:01 |
|* 19 |           INDEX RANGE SCAN            | HR_ORGANIZATION_INFORMATIO_PB1 |     1 |    24 |     1   (0)| 00:00:01 |
|* 20 |          INDEX UNIQUE SCAN            | MTL_PARAMETERS_U1              |     1 |     4 |     0   (0)| 00:00:01 |
|* 21 |         INDEX UNIQUE SCAN             | GL_LEDGERS_U2                  |     1 |       |     0   (0)| 00:00:01 |
|* 22 |        TABLE ACCESS BY INDEX ROWID    | GL_LEDGERS                     |     1 |     7 |     1   (0)| 00:00:01 |
|* 23 |     TABLE ACCESS STORAGE FULL         | CLL_F189_ENTRY_OPERATIONS      | 25143 |  1522K|   726  (14)| 00:00:01 |
------------------------------------------------------------------------------------------------------------------------
Statistics
----------------------------------------------------------
        500  recursive calls
          0  db block gets
    6987959  consistent gets
          8  physical reads
        704  redo size
       1185  bytes sent via SQL*Net to client
        552  bytes received via SQL*Net from client
          2  SQL*Net roundtrips to/from client
          3  sorts (memory)
          0  sorts (disk)
          1  rows processed
Plan hash value: 244338963
-------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                              | Name                           | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                       |                                |   251 | 22590 |   709  (11)| 00:00:01 |
|   1 |  SORT ORDER BY                         |                                |   251 | 22590 |   709  (11)| 00:00:01 |
|*  2 |   HASH JOIN RIGHT SEMI                 |                                |   251 | 22590 |   708  (11)| 00:00:01 |
|   3 |    VIEW                                | VW_NSO_1                       |     1 |     4 |     4   (0)| 00:00:01 |
|   4 |     NESTED LOOPS                       |                                |     1 |    76 |     4   (0)| 00:00:01 |
|   5 |      NESTED LOOPS                      |                                |     1 |    76 |     4   (0)| 00:00:01 |
|   6 |       MERGE JOIN CARTESIAN             |                                |     1 |    69 |     3   (0)| 00:00:01 |
|   7 |        NESTED LOOPS                    |                                |     1 |    45 |     2   (0)| 00:00:01 |
|   8 |         NESTED LOOPS                   |                                |     1 |    18 |     1   (0)| 00:00:01 |
|   9 |          NESTED LOOPS                  |                                |     1 |    12 |     0   (0)| 00:00:01 |
|* 10 |           INDEX UNIQUE SCAN            | MTL_PARAMETERS_U1              |     1 |     4 |     0   (0)| 00:00:01 |
|* 11 |           INDEX UNIQUE SCAN            | HR_ALL_ORGANIZATION_UNTS_TL_PK |     1 |     8 |     0   (0)| 00:00:01 |
|* 12 |          TABLE ACCESS BY INDEX ROWID   | HR_ALL_ORGANIZATION_UNITS      |     1 |     6 |     1   (0)| 00:00:01 |
|* 13 |           INDEX UNIQUE SCAN            | HR_ORGANIZATION_UNITS_PK       |     1 |       |     0   (0)| 00:00:01 |
|* 14 |         INDEX RANGE SCAN               | HR_ORGANIZATION_INFORMATIO_PB1 |     1 |    27 |     1   (0)| 00:00:01 |
|  15 |        BUFFER SORT                     |                                |     1 |    24 |     2   (0)| 00:00:01 |
|* 16 |         INDEX RANGE SCAN               | HR_ORGANIZATION_INFORMATIO_PB1 |     1 |    24 |     1   (0)| 00:00:01 |
|* 17 |       INDEX UNIQUE SCAN                | GL_LEDGERS_U2                  |     1 |       |     0   (0)| 00:00:01 |
|* 18 |      TABLE ACCESS BY INDEX ROWID       | GL_LEDGERS                     |     1 |     7 |     1   (0)| 00:00:01 |
|* 19 |    HASH JOIN RIGHT SEMI                |                                |   251 | 21586 |   704  (11)| 00:00:01 |
|* 20 |     TABLE ACCESS BY INDEX ROWID BATCHED| CLL_F189_INVOICES              |     1 |    24 |     8   (0)| 00:00:01 |
|* 21 |      INDEX RANGE SCAN                  | CLL_F189_INVOICES_N1           |     5 |       |     3   (0)| 00:00:01 |
|* 22 |     TABLE ACCESS STORAGE FULL          | CLL_F189_ENTRY_OPERATIONS      | 25143 |  1522K|   696  (11)| 00:00:01 |
-------------------------------------------------------------------------------------------------------------------------
Statistics
----------------------------------------------------------
        175  recursive calls
          0  db block gets
      43244  consistent gets
          2  physical reads
        200  redo size
       1186  bytes sent via SQL*Net to client
        552  bytes received via SQL*Net from client
          2  SQL*Net roundtrips to/from client
          2  sorts (memory)
          0  sorts (disk)
          1  rows processed
var invnum number;
exec :invnum := 8986;
SELECT ROWID,ORGANIZATION_ID,LOCATION_ID,OPERATION_ID,GL_DATE,RECEIVE_DATE,FREIGHT_FLAG,STATUS,CREATION_DATE 
FROM CLL_F189_ENTRY_OPERATIONS
WHERE STATUS <> 'CANCELLED' AND ORGANIZATION_ID IN (SELECT
ORGANIZATION_ID FROM ORG_ORGANIZATION_DEFINITIONS) AND ORGANIZATION_ID = 1900 AND OPERATION_ID || ORGANIZATION_ID 
IN (select RI.OPERATION_ID || RI.ORGANIZATION_ID from CLL_F189_INVOICES RI, CLL_F189_INVOICE_TYPES RIT, CLL_F189_FISCAL_ENTITIES_ALL RFEA 
  where RI.ENTITY_ID = RFEA.ENTITY_ID and RI.INVOICE_TYPE_ID = RIT.INVOICE_TYPE_ID and RI.ORGANIZATION_ID = 1900 
  and RI.ENTITY_ID = 1202421 and RI.INVOICE_NUM = 9489 )  order by CREATION_DATE DESC;
select object_name, object_type from dba_objects
where object_name in (
'CLL_F189_INVOICES',
'CLL_F189_FISCAL_ENTITIES_ALL',
'CLL_F189_ENTRY_OPERATIONS',
'ORG_ORGANIZATION_DEFINITIONS'
)
select sql_id, sample_time from gv$active_session_history where 
sql_id in (
'dau31g71c6fft',
'6fm3cpq0dyqch',
'9c7q9ymudzd9y',
'c5d2v5yaugdts',
'6bzr2b611wdzg',
'gcty82s96ffqh',
'1aqck3zmcm64h')
order by sample_time
;
col last_executed for a30
col module for a40
select * from (
SELECT SQL_HANDLE, PLAN_NAME, CREATED, ORIGIN, ENABLED, ACCEPTED, FIXED, LAST_EXECUTED, EXECUTIONS FROM DBA_SQL_PLAN_BASELINES
order by created desc)
where rownum < 100;
select dbms_sqltune_util0.sqltext_to_sqlid(sql_text||chr(0)) sql_id,
( select to_number(regexp_replace(plan_table_output,'^[^0-9]*')) 
  from table(dbms_xplan.display_sql_plan_baseline(sql_handle,plan_name)) 
  where plan_table_output like 'Plan hash value: %') plan_hash_value
,plan_name,enabled,accepted,fixed,reproduced  
,dbms_xplan.format_time_s(elapsed_time/1e6) hours,creator,origin,created,last_modified,last_executed
,sql_text
from dba_sql_plan_baselines b 
where sql_text like '%SELECT ROWID,ORGANIZATION_ID,LOCATION_ID,OPERATION_ID,GL_DATE,RECEIVE_DATE,%CLL_F189_ENTRY_OPERATIONS%STATUS <>%AND ORGANIZATION_ID IN%FROM ORG_ORGANIZATION_DEFINITIONS%and RI.INVOICE_NUM =%'
order by sql_id,hours desc
;
select to_number(regexp_replace(plan_table_output,'^[^0-9]*')) 
  from table(dbms_xplan.display_sql_plan_baseline(SQL_HANDLE,PLAN_NAME));
select 
 select to_number(regexp_replace(plan_table_output,'^[^0-9]*')) 
  from table(select dbms_xplan.display_sql_plan_baseline(SQL_HANDLE,PLAN_NAME)
      from DBA_SQL_PLAN_BASELINES where created > sysdate -30) 
  where plan_table_output like 'Plan hash value: %' ;
select sql_handle, plan_name 
      from DBA_SQL_PLAN_BASELINES where --created > sysdate -10
     -- and 
      plan_name like '%4d46f6bd';
declare
  drop_result pls_integer;
begin
  drop_result := DBMS_SPM.DROP_SQL_PLAN_BASELINE(
    sql_handle => 'SQL_8227e370ce8f3cec',
    plan_name => 'SQL_PLAN_849z3f378yg7c4d46f6bd');
  dbms_output.put_line(drop_result);
end;
/
select count(*) from DBA_SQL_PLAN_BASELINES
where plan_name like '%4d46f6bd';
col redo for a20
col module for a30
select 
   ss.sid,
   'redo size:'||ss.value redo,
   s.program,
   s.module,
   s.sql_id
from 
   v$statname 
   sn,v$sesstat 
   ss,v$session s
where 
   ss.statistic#=sn.statistic# 
and
   sn.name='redo size' 
and
   s.sid=ss.sid 
and
   ss.value>0
order by 
   ss.value;
sp-format.sql
set termout off heading off lines 200 pages 999 trimspool on feed off timing off verify off
define var=sp-format.sql
column objt new_value var
select decode(object_type,'TABLE','sp-format1.sql','sp-format2.sql') objt from all_objects where owner=upper('&1.') and object_name=upper('&2.');
@@&var. &1. &2.
set termout on heading on feed on timing on verify on
sp-format2.sql
set termout off heading off lines 200 pages 999 trimspool on feed off timing off verify off
set serveroutput on size unlimited
spool /tmp/&1._&2..sql
declare
   avg_col_len number;
begin
   for i in (select column_name from all_tab_columns where owner=upper('&1.') and table_name=upper('&2.') and data_type in ('VARCHAR2','NVARCHAR2')) loop
      delete from plan_table;
      execute immediate 'explain plan for select '||i.column_name||' from &1..&2.';
      select ceil(bytes/cardinality) into avg_col_len from plan_table where id=0;
      dbms_output.put_line('column '||i.column_name||' format a'||to_char(avg_col_len+1));
   end loop;
end;
/
spool off
@/tmp/&1._&2..sql
set termout on heading on feed on timing on verify on
set serveroutput off
sp-format1.sql
set termout off heading off lines 200 pages 999 trimspool on feed off timing off verify off
spool /tmp/&1._&2..sql
select 'column '||column_name||' format a'||to_char(decode(nvl(avg_col_len,data_length),0,1,nvl(avg_col_len,data_length))) 
from all_tab_columns 
where owner=upper('&1.') 
and table_name=upper('&2.') 
and data_type in ('VARCHAR2','NVARCHAR2');
spool off
@/tmp/&1._&2..sql
set termout on heading on feed on timing on verify on
INSERT INTO VM_HISTORICO_ESTOQUE
SELECT DECODE(SUBSTR(CD_BARCO, 1, 2), '2C', '000', '2O', '000', '26', '000', '29', '002', '30', '002', '34', '003', '36', '003', '37', '004', '38', '004', '40', '004', '48', '005', '5F', '005', '50', '005', 
  '5H', '005', '56', '005', '55', '005', '60', '006', '62', '006', '80', '007', '82', '007', '83', '007', 'B0', '000', 'OUTROS') AS CD_DIVISAO3,
       DECODE(SUBSTR(CD_BA RCO, 1, 2), '2C', 'PHANTOM 260', '2O', 'PHANTOM 260', '26', 'PHANTOM 260', '29', 'PHANTOM 300', '30', 'PHANTOM 300', '34', 
        'PHANTOM 360', '36', 'PHANTOM 360', '37', 'PHANTOM 385', '38', 'PHANTOM 385', '40', 'PHANTOM 400', '48', 'PHANTOM 500', '5F', 'PHANTOM 500', '50', 
        'PHANTOM 500', '5H', 'PHANTOM 500', '56', 'PHANTOM 560', '55', 'PHANTOM 560', '60', 'PHANTOM 600', '62', 'PHANTOM 600', '80', 'PHANTOM 800', 
        '82', 'PHANTOM 800', '83', 'PHANTOM 800', 'B0', 'USADOS', 'OUTROS') AS MODELO,
       TIPO,
       CD_LOCAL,
       CD_FILIAL,
       ANO_SALDO,
       MES_SALDO,
       'X',
       CD_BARCO,
       VL_SALDO _PA,
       VL_SALDO_PROCESSO,
       VL_FATURADO,
       VL_CPV,
       CASE
           WHEN
                  (SELECT MAX(SUBSTR(Z5_DTF ECOP, 1, 6))
                   FROM SCHAEFER.SZ5010 Z5
                   WHERE Z5.D_E_L_E_T_ <> '*'
                     AND SUBSTR(Z5_CONT RAT, 1, 5)= DECODE(SUBSTR(CD_BARCO, 1, 1), '8', '83'||SUBSTR(CD_BARCO, 3, 3), SUBSTR(CD_B ARCO, 1, 5)))=ANO_SALDO||MES_SALDO
                AND
                  (SELECT MIN(SUBSTR(C2_EMISSAO, 1, 6))
                   FROM SC HAEFER.SC2010 C2
                   WHERE C2.D_E_L_E_T_ <> '*'
                     AND DECODE(SUBSTR(C2_NUM, 1, 1), '8', '8
3'||SUBSTR(C2_NUM, 3, 3), SUBSTR(C2_NUM, 1, 5)) = DECODE(SUBSTR(CD_BARCO, 1, 1), '8', '83
'||SUBSTR(CD_BARCO, 3, 3), SUBSTR(CD_BARCO, 1, 5)))=ANO_SALDO||MES_SALDO THEN NVL(CNT _DIAS(
                                                                                              (SELECT MIN(C2_EMISSAO) AS DT_EMISSAO
                                                                                               FROM SCHAEFER.SC2010 C2
                                                                                               WHERE C2.D_ E_L_E_T_ <> '*'
                                                                                                 AND DECODE(SUBSTR(C2_NUM, 1, 1), '8', '83'||SUBSTR(C2_NUM, 3, 3), SUBST R(C2_NUM, 1, 5))=DECODE(SUBSTR(CD_BARCO, 1, 1), '8', '83'||SUBSTR(CD_BARCO, 3, 3), SUBSTR (CD_BARCO, 1, 5))), NVL(
                                                                                                                                                                                                                                                                                             (SELECT TO_CHAR(MAX(TO_DATE(DECODE(ISDATE(Z5_DTFECOP), 1, NU LL, Z5_DTFECOP), 'YYYYMMDD')), 'YYYYMMDD')
                                                                                                                                                                                                                                                                                              FROM SCHAEFER.SZ5010
                                                                                                                                                                                                                                                                                              WHERE D_E_L_E_T_ <> '*'
                                                                                                                                                                                                                                                                                                AND SUBSTR(Z5_CONTRAT, 1, 5)=CD_BARCO),TO_CHAR(SYSDATE, 'YYYYMMDD')), '03'), 0)
           WHEN
                  (SELECT MAX(SUBSTR(Z5_DTFECOP, 1, 6))
                   FROM SCHAEFER.SZ5010 Z5
                   WHERE Z5.D_E_L_ E_T_ <> '*'
                     AND SUBSTR(Z5_CONTRAT, 1, 5)= DECODE(SUBSTR(CD_BARCO, 1, 1), '8', '83'||SU BSTR(CD_BARCO, 3, 3), SUBSTR(CD_BARCO, 1, 5)))>ANO_SALDO||MES_SALDO
                AND
                  (SELECT MIN(S UBSTR(C2_EMISSAO, 1, 6))
                   FROM SCHAEFER.SC2010 C2
                   WHERE C2.D_E_L_E_T_ <> '*'
                     AND DE CODE(SUBSTR(C2_NUM, 1, 1), '8', '83'||SUBSTR(C2_NUM, 3, 3), SUBSTR(C2_NUM, 1, 5)) = DECOD E(SUBSTR(CD_BARCO, 1, 1), '8', '83'||SUBSTR(CD_BARCO, 3, 3), SUBSTR(CD_BARCO, 1, 5)))= AN O_SALDO||MES_SALDO THEN NVL(CNT_DIAS(
                                                                                                                                                                                                                                                       (SELECT MIN(C2_EMISSAO) AS DT_EMISSAO
                                                                                                                                                                                                                                                        FROM SCHAEFER.SC2010 C2
                                                                                                                                                                                                                                                        WHERE C2.D_E_L_E_T_ <> '*'
                                                                                                                                                                                                                                                          AND DECODE(SUBSTR(C2_NUM, 1, 1), '8', '83'||SUBSTR(C2_NUM, 3, 3), SUBSTR(C2_NUM, 1, 5))=DECODE(SUBSTR(CD_BARCO, 1, 1), '8', '8
3'||SUBSTR(CD_BARCO, 3, 3), SUBSTR(CD_BARCO, 1, 5))), NVL(TO_CHAR((LAST_DAY(TO_DATE(D ECODE(ISDATE(ANO_SALDO||MES_SALDO||'01'), 1, NULL, ANO_SALDO||MES_SALDO||'01'), 'YYY
YMMDD'))),'YYYYMMDD'), TO_CHAR(SYSDATE, 'YYYYMMDD')), '03'), 0)
           WHEN
                  (SELECT MAX(SUB STR(Z5_DTFECOP, 1, 6))
                   FROM SCHAEFER.SZ5010 Z5
                   WHERE Z5.D_E_L_E_T_ <> '*'
                     AND SUBS TR(Z5_CONTRAT, 1, 5)= DECODE(SUBSTR(CD_BARCO, 1, 1), '8', '83'||SUBSTR(CD_BARCO, 3, 3), S UBSTR(CD_BARCO, 1, 5)))= ANO_SALDO||MES_SALDO
                AND
                  (SELECT MIN(SUBSTR(C2_EMISSAO, 1, 6))
                   FROM SCHAEFER.SC2010 C2
                   WHERE C2.D_E_L_E_T_ <> '*'
                     AND DECODE(SUBSTR(C2_NUM, 1, 1), '8', '83'||SUBSTR(C2_NUM, 3, 3), SUBSTR(C2_NUM, 1, 5)) = DECODE(SUBSTR(CD_BARCO, 1, 1), '8', '83'||SUBSTR(CD_BARCO, 3, 3), SUBSTR(CD_BARCO, 1, 5)))<ANO_SALDO||MES_SALDO T HEN NVL(CNT_DIAS(NVL((TO_CHAR(TRUNC(TO_DATE(DECODE(ISDATE(ANO_SALDO||MES_SALDO| |'01'), 1, NULL, ANO_SALDO||MES_SALDO||'01'), 'YYYYMMDD'), 'MONTH'), 'YYYYMMDD')),TO_C HAR(SYSDATE, 'YYYYMMDD')), NVL(
                                                                                                                                                                                                                                                                                                                                                                                                                                         (SELECT TO_CHAR(MAX(TO_DATE(DECODE(ISDATE(Z5_DTFEC OP), 1, NULL, Z5_DTFECOP), 'YYYYMMDD')), 'YYYYMMDD')
                                                                                                                                                                                                                                                                                                                                                                                                                                          FROM SCHAEFER.SZ5010
                                                                                                                                                                                                                                                                                                                                                                                                                                          WHERE D_E_L _E_T_ <> '*'
                                                                                                                                                                                                                                                                                                                                                                                                                                            AND SUBSTR(Z5_CONTRAT, 1, 5)=CD_BARCO),TO_CHAR(SYSDATE, 'YYYYMMDD')), '
03'), 0)
           WHEN
                  (SELECT MAX(SUBSTR(Z5_DTFECOP, 1, 6))
                   FROM SCHAEFER.SZ5010 Z5
                   WHERE Z 5.D_E_L_E_T_ <> '*'
                     AND SUBSTR(Z5_CONTRAT, 1, 5)= DECODE(SUBSTR(CD_BARCO, 1, 1), '8', '83'||SUBSTR(CD_BARCO, 3, 3), SUBSTR(CD_BARCO, 1, 5)))>ANO_SALDO||MES_SALDO
                AND (SELE CT MIN(SUBSTR(C2_EMISSAO, 1, 6))
                     FROM SCHAEFER.SC2010 C2
                     WHERE C2.D_E_L_E_T_ <> '*
'
                       AND DECODE(SUBSTR(C2_NUM, 1, 1), '8', '83'||SUBSTR(C2_NUM, 3, 3), SUBSTR(C2_NUM, 1, 5)) = DECODE(SUBSTR(CD_BARCO, 1, 1), '8', '83'||SUBSTR(CD_BARCO, 3, 3), SUBSTR(CD_BARCO, 1, 5)))<ANO_SALDO||MES_SALDO THEN NVL(CNT_DIAS(NVL((TO_CHAR(TRUNC(TO_DATE(DECODE(I SDATE(ANO_SALDO||MES_SALDO||'01'), 1, NULL, ANO_SALDO||MES_SALDO||'01'), 'YYYYMMDD'), 'MONTH'), 'YYYYMMDD')),TO_CHAR(SYSDATE, 'YYYYMMDD')), NVL(TO_CHAR((LAST_DAY(TO_DA TE(DECODE(ISDATE(ANO_SALDO||MES_SALDO||'01'), 1, NULL, ANO_SALDO||MES_SALDO||'01'), 'YYYYMMDD'))),'YYYYMMDD'), TO_CHAR(SYSDATE, 'YYYYMMDD')), '03'), 0)
           ELSE
       END AS VL _SALDO
FROM
  (SELECT DISTINCT '19-DIAS MES / OP' AS TIPO,CD_LOCAL,CD_FILIAL, A NO_SALDO,MES_SALDO,CD_BARCO,VL_SALDO_PA, VL_SALDO_PROCESSO,VL_FATURADO,
                   VL_CPV, VL_SALDO
   FROM VM_HISTORICO_ESTOQUE
   WHERE TIPO='05-PROCESSO'
     AND CD _FILIAL='03'
     AND CD_BARCO<>'38062'
     AND ANO_SALDO||MES_SALDO <=
       (SELECT SUBSTR(NVL (MAX(DECODE(ISDATE(C2_DATRF), 1, NULL, C2_DATRF)), TO_CHAR(SYSDATE, 'YYYYMMDD')),1, 6)
        FROM SCHAEFER.SC2010 C2
        WHERE C2.D_E_L_E_T_ <> '*'
          AND DECODE(SUBSTR(C2_NUM, 1, 1), '8', '83'||SUBSTR(C2_NUM, 3, 3), SUBSTR(C2_NUM, 1, 5)) = DECODE(SUBSTR(CD_BARCO, 1, 1), '8', '83'||SUBSTR(CD_BARCO, 3, 3), SUBSTR(CD_BARCO, 1, 5))) )
GROUP BY MES_SALDO, CD_ FILIAL, VL_CPV, TIPO, CD_LOCAL, VL_SALDO_PROCESSO, VL_SALDO_PA, CD_BARCO, VL_FATU RADO, ANO_SALDO
select owner, segment_name, sum(bytes)/1048576 
from dba_segments 
where segment_name in
(select index_name from dba_indexes where table_name='E140NFV' and owner='SAPIENSPRD')
and owner='SAPIENSPRD'
group by owner, segment_name
/
E140NFV
set long 49999 lines 200 pages 49999
col ddl for a120
select dbms_metadata.get_ddl('INDEX',index_name,'SAPIENSPROD')ddl 
from dba_indexes where owner='SAPIENSPROD' and table_name='E14NFV';
set long 49999 lines 200 pages 49999
col ddl for a120
select dbms_metadata.get_ddl('TRIGGER',trigger_name,'SAPIENSPRD')ddl 
from dba_triggers where owner='SAPIENSPRD' and table_name='E140NFV';
select count(*), table_name from dba_indexes where table_name like 'E140NFV%' and owner = 'SAPIENSPRD' group by table_name;
alter table SAPIENSPRD.E140NFV_old move tablespace REORG_24_04_21;
9 - SAPIENSPRD.E140IPV
36 - Zabbix.HIST_SYS_TIME_MODEL;
set lin 200 
col segment_name for a30
col owner for a30
col TABLESPACE_NAME for a30
col SEGMENT_TYPE for a30
col file_name for a30
SELECT distinct a.owner,
 a.segment_name,
 a.SEGMENT_TYPE,
 a.TABLESPACE_NAME,
 a.file_id,
 b.file_name Datafile_name
 FROM dba_extents a, dba_data_files b
 WHERE a.file_id = b.file_id
 AND b.file_id = 37;
 run {
      allocate channel d1 type disk;
      backup check logical validate datafile 35, 37;
      } 
set lin 200 pages 49999 long 49999
col ddl for a150
select dbms_metadata.get_ddl('REF_CONSTRAINT', constraint_name, owner) 
from dba_constraints 
where owner='ZABBIX' and table_name='HIST_SYS_TIME_MODEL' and constraint_type=
select constraint_name, constraint_type from dba_constraints 
where owner='ZABBIX' and table_name='HIST_SYS_TIME_MODEL';
SENIOR RH 
1157217
CREATE TABLE "ZABBIX"."HIST_SYS_TIME_MODEL_STG"
  SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" as select * from "ZABBIX"."HIST_SYS_TIME_MODEL";
 

 DECLARE
  cursor c1 is select * from dba_tab_privs
               where owner='VETORH' and table_name='R034ADM';
  target_name varchar2(30);
  grant_option varchar2(30);
  text_sql varchar2(4000);
BEGIN
  target_name := 'R034ADM_210527_BKP';
  for v1 in c1 loop
    if v1.grantable = 'YES' then
        grant_option := ' with grant option';
    else
      grant_option := '';
    end if;
    text_sql := 'grant ' || v1.privilege || ' on VETORH.' || target_name || ' to ' || v1.grantee || grant_option;
    dbms_output.put_line(text_sql);
    execute immediate text_sql;
    end loop;
END;
/


alter table ZABBIX.HIST_SYS_TIME_MODEL rename to HIST_SYS_TIME_MODEL_OLD;
alter table ZABBIX.HIST_SYS_TIME_MODEL_STG rename to HIST_SYS_TIME_MODEL;
  CREATE INDEX "ZABBIX"."HIST_SYS_TIME_MODEL_IX01" ON "ZABBIX"."HIST_SYS_TIME_MODEL" ("STAT_NAME", "INSTANCE_NAME", "STAMP" DESC)
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"
  /
  CREATE INDEX "ZABBIX"."HIST_SYS_TIME_MODEL_IX02" ON "ZABBIX"."HIST_SYS_TIME_MODEL" ("INSTANCE_NAME", "STAMP" DESC)
 PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"
  /
  CREATE INDEX "ZABBIX"."HIST_SYS_TIME_MODEL_IX03" ON "ZABBIX"."HIST_SYS_TIME_MODEL" ("INSTANCE_NAME", "STAMP")
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"
  /
  CREATE INDEX "ZABBIX"."HIST_SYS_TIME_MODEL_IX04" ON "ZABBIX"."HIST_SYS_TIME_MODEL" ("STAMP")
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"
  /
drop index "ZABBIX"."HIST_SYS_TIME_MODEL_IX01"; rename to  "ZABBIX"."HIST_SYS_TIME_MODEL_IX01_OLD";
drop index "ZABBIX"."HIST_SYS_TIME_MODEL_IX02"; rename to  "ZABBIX"."HIST_SYS_TIME_MODEL_IX02_OLD";
drop index "ZABBIX"."HIST_SYS_TIME_MODEL_IX03"; rename to  "ZABBIX"."HIST_SYS_TIME_MODEL_IX03_OLD";
drop index "ZABBIX"."HIST_SYS_TIME_MODEL_IX04"; rename to  "ZABBIX"."HIST_SYS_TIME_MODEL_IX04_OLD";
CREATE OR REPLACE TRIGGER corrupt_trigger 
  AFTER INSERT ON SAPIENSPRD.s 
  REFERENCING OLD AS p_old NEW AS new_p 
  FOR EACH ROW 
DECLARE 
  corrupt EXCEPTION; 
BEGIN 
  IF (dbms_rowid.rowid_block_number(:new_p.rowid)=&blocknumber)
 and (dbms_rowid.rowid_relative_fno(:new_p.rowid)=&filenumber) THEN 
     RAISE corrupt; 
  END IF; 
EXCEPTION 
  WHEN corrupt THEN 
     RAISE_APPLICATION_ERROR(-20000, 'Corrupt block has been formatted'); 
END; 
/
Select BYTES from dba_free_space where file_id=36 and 10506 between block_id and block_id + blocks -1;
BEGIN
for i in 1..1000000 loop
EXECUTE IMMEDIATE 'alter table SAPIENSPRD.s allocate extent (DATAFILE '||'''+DATA/SENIORDB/DATAFILE/users.414.994192083''' ||'SIZE 38M) ';
end loop;
end ;
/
Begin
  FOR i IN 1..1000000000 loop
    for j IN 1..1000 loop
      Insert into SAPIENSPRD.s VALUES(i,'x');
    end loop;
    commit;
  END LOOP;
END; 
-- Problema Schaefer
6kg89k2gc195u        254        1271270 DELETE VM_ORCAMENTO WHERE ANO_REFERENCIA||MES_REFERENCIA = TO_CHAR(ADD
                                        _MONTHS(SYSDATE,-1),'YYYYMM')
4fhxustp0w526        254        2638691 /* MV_REFRESH (DEL) */ delete from "DWU"."VM_FALTANTES"
8wb1z97nfksz7       4689        2695565 /* MV_REFRESH (DEL) */ delete from "DWU"."VM_CSOLICITACOES"
d24sbq1k1prwd          1        4199054 /* MV_REFRESH (DEL) */ delete from "DWU"."VM_REQUISICOES"
980q7sxg5b5um        254        5513989 /* MV_REFRESH (DEL) */ delete from "DWU"."VM_PAGOS"
b9pc4jrn8gunc        254       15969922 /* MV_REFRESH (DEL) */ delete from "DWU"."VM_ESTOQUES"
0vh10ujk601j6        254       36725233 DELETE VM_FINANCEIRO
ac42d46qaaprq        254      159292298 DELETE VM_PEDCOMPRA
3x98b3cyxuzz2      31297      194262949 /* MV_REFRESH (DEL) */ delete from "DWU"."VM_CPEDIDOS"
Ttitle off
prompt =========================================================================================================================
Log Info
Day              00  01  02  03  04  05  06  07  08  09  10  11  12  13  14  15  16  17  18  19  20  21  22  23   Total
---------------- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- --- ------
SUN, 11-APR-2021 -   -   -   -   -   -   -   -   -   -   -   -   -   5   8   4   5   6   4   6   4   6   4   4       56
MON, 12-APR-2021 4   4   4   4   4   4   6   7   6   5   5   5   5   5   5   5   5   5   5   5   4   5   5   4      116
TUE, 13-APR-2021 11  5   4   4   4   4   6   5   5   8   7   6   5   5   5   10  6   5   6   5   5   4   6   10     141
WED, 14-APR-2021 9   4   4   5   4   5   5   6   5   5   5   5   4   6   5   9   5   5   7   41  65  37  12  5      263
THU, 15-APR-2021 9   9   21  15  30  66  18  13  21  12  8   13  17  11  5   5   5   4   3   4   5   4   9   14     321
FRI, 16-APR-2021 10  8   5   4   5   6   5   5   5   5   5   5   5   7   6   7   5   5   5   5   5   5   8   9      140
SAT, 17-APR-2021 6   4   5   4   6   5   7   6   5   5   5   5   5   5   5   5   5   5   5   5   5   5   4   4      121
SUN, 18-APR-2021 6   4   6   5   5   5   4   5   6   5   7   6   6   5   5   5   5   5   5   5   5   5   4   5      124
MON, 19-APR-2021 6   4   6   5   5   5   5   5   5   6   6   6   6   5   6   7   6   6   5   5   5   5   5   5      130
TUE, 20-APR-2021 5   4   6   5   5   5   5   5   5   5   5   4   4   4   4   5   4   4   5   5   5   5   5   5      114
WED, 21-APR-2021 5   5   5   4   6   5   5   5   5   5   5   5   5   5   5   5   5   5   5   5   5   5   5   5      120
THU, 22-APR-2021 5   5   5   5   5   5   5   5   5   5   5   5   5   5   13  5   5   5   5   5   5   5   5   5      128
FRI, 23-APR-2021 5   5   4   6   5   5   5   5   5   5   5   5   12  5   4   6   5   4   5   10  11  9   5   9      145
SAT, 24-APR-2021 6   7   7   5   6   5   5   8   9   12  14  14  11  4   5   7   7   12  12  6   4   5   5   5      181
SUN, 25-APR-2021 5   6   6   5   5   5   9   6   5   4   13  12  8   6   11  7   5   5   5   5   5   5   4   6      153
MON, 26-APR-2021 5   5   4   6   5   12  7   5   5   5   5   5   5   5   4   -   -   -   -   -   -   -   -   -       83
16 rows selected.
set lin 200
col instname    format a08      heading 'inst|name'
col dbname      format a08      heading 'db name'
col group_name  format a08      heading 'disk|group|name'
col disk_number format 9999     heading 'asm|disk|#'
col reads       format 99999999 heading 'disk|reads'
col read_time   format 999999   heading 'read|time|(s)'
col read_errs   format 999999   heading 'read|errors'
col mb_read     format 999999.9 heading 'bytes|read|(mb)'
col writes      format 99999999 heading 'disk|writes'
col write_errs  format 999999   heading 'write|errors'
col write_time  format 999999999   heading 'write|time|(s)'
col mb_wrtn     format 999999.9 heading 'bytes|written|(mb)'
 
ttitle 'ASM disk I/O statistics'
select
  a.dbname,
  a.instname,
  b.name         group_name,
  a.disk_number,
  a.reads,
  a.read_errs,
  a.read_time,
  ( a.bytes_read / (1024*1024)) mb_read,
  a.writes,
  a.write_errs,
  a.write_time,
  ( a.bytes_written / (1024*1024)) mb_wrtn--,
-- **************************
-- new data columns in 11gr2
-- **************************
-- (a.hot_bytes_read / (1024*1024))      hot_mb_read,
--  (a.cold_bytes_read / (1024*1024))    cold_mb_read,
--  (a.hot_bytes_written / (1024*1024))  hot_mb_wrtn,
--  (a.cold_bytes_written / (1024*1024)) cold_mb_wrtn
 from
     v$asm_disk_iostat a,
     v$asm_diskgroup   b
 where a.group_number = b.group_number
 order by
   a.dbname,
   a.instname;
 
select METRIC_NAME,avg(AVERAGE) as "VALUE" 
from dba_hist_sysmetric_summary 
where METRIC_NAME in ('Physical Read Total IO Requests Per Sec','Physical Write Total IO Requests Per Sec')
group by metric_name;
 select METRIC_NAME,avg(AVERAGE) value 
from dba_hist_sysmetric_summary 
where begin_time between to_date('01-MAR-21 00:00:00', 'dd-MON-yy hh24:mi:ss') 
and to_date('31-MAR-21 23:59:59', 'dd-MON-yy hh24:mi:ss') 
and end_time like '%16-FEB-17%' 
and METRIC_NAME in ('Physical Read Total IO Requests Per Sec','Physical Write Total IO Requests Per Sec') 
group by METRIC_NAME;
col owner for a30
col table_name for a30
col constraint_name for a30
col r_constraint_name for a30
select owner, table_name, constraint_name, constraint_type, r_constraint_name
from dba_constraints
where r_constraint_name name like '%OLD';
alter database move datafile 2670 to '+DATA02' 
multipath -ll | grep 36000d31001425000000000000000001a
multipath -ll | grep 36000d31001425000000000000000001b
multipath -ll | grep 36000d31001425000000000000000001c
multipath -ll | grep 36000d31001425000000000000000001d
multipath -ll | grep 36000d31001425000000000000000001e
multipath -ll | grep 36000d31001425000000000000000001f
multipath -ll | grep 36000d310014250000000000000000020
multipath -ll | grep 36000d310014250000000000000000021
multipath -ll | grep 36000d310014250000000000000000022
multipath -ll | grep 36000d310014250000000000000000023
multipath -ll | grep 36000d310014250000000000000000024
multipath -ll | grep 36000d310014250000000000000000025
   multipath {
        wwid 36000d31001425000000000000000001a
        alias ASM_DATA_2_01
              }
     multipath {
        wwid 36000d31001425000000000000000001b
        alias ASM_DATA_2_02
              }
   multipath {
        wwid 36000d31001425000000000000000001c
        alias ASM_DATA_2_03
              }
   multipath {
        wwid 36000d31001425000000000000000001d
        alias ASM_DATA_2_04
              }
   multipath {
        wwid 36000d31001425000000000000000001e
        alias ASM_DATA_2_05
              }
   multipath {
        wwid 36000d31001425000000000000000001f
        alias ASM_DATA_2_06
              }
   multipath {
        wwid 36000d310014250000000000000000020
        alias ASM_DATA_2_07
              }
   multipath {
        wwid 36000d310014250000000000000000021
        alias ASM_DATA_2_08
              }
   multipath {
        wwid 36000d310014250000000000000000022
        alias ASM_DATA_2_09
              }
   multipath {
        wwid 36000d310014250000000000000000023
        alias ASM_DATA_2_10
              }
   multipath {
        wwid 36000d310014250000000000000000024
        alias ASM_DATA_2_11
              }
   multipath {
        wwid 36000d310014250000000000000000025
        alias ASM_DATA_2_12
              }
[root@OraDB-PRD ~]# multipath -ll | grep 36000d310014250000000000000000025
ASM_DATA_2_01 (36000d31001425000000000000000001a) dm-38 COMPELNT,Compellent Vol
[root@OraDB-PRD ~]# multipath -ll | grep 36000d31001425000000000000000001b
ASM_DATA_2_02 (36000d31001425000000000000000001b) dm-39 COMPELNT,Compellent Vol
[root@OraDB-PRD ~]# multipath -ll | grep 36000d31001425000000000000000001c
ASM_DATA_2_03 (36000d31001425000000000000000001c) dm-40 COMPELNT,Compellent Vol
[root@OraDB-PRD ~]# multipath -ll | grep 36000d31001425000000000000000001d
ASM_DATA_2_04 (36000d31001425000000000000000001d) dm-41 COMPELNT,Compellent Vol
[root@OraDB-PRD ~]# multipath -ll | grep 36000d31001425000000000000000001e
ASM_DATA_2_05 (36000d31001425000000000000000001e) dm-42 COMPELNT,Compellent Vol
[root@OraDB-PRD ~]# multipath -ll | grep 36000d31001425000000000000000001f
ASM_DATA_2_06 (36000d31001425000000000000000001f) dm-43 COMPELNT,Compellent Vol
[root@OraDB-PRD ~]# multipath -ll | grep 36000d310014250000000000000000020
ASM_DATA_2_07 (36000d310014250000000000000000020) dm-44 COMPELNT,Compellent Vol
[root@OraDB-PRD ~]# multipath -ll | grep 36000d310014250000000000000000021
ASM_DATA_2_08 (36000d310014250000000000000000021) dm-45 COMPELNT,Compellent Vol
[root@OraDB-PRD ~]# multipath -ll | grep 36000d310014250000000000000000022
ASM_DATA_2_09 (36000d310014250000000000000000022) dm-46 COMPELNT,Compellent Vol
[root@OraDB-PRD ~]# multipath -ll | grep 36000d310014250000000000000000023
ASM_DATA_2_10 (36000d310014250000000000000000023) dm-35 COMPELNT,Compellent Vol
[root@OraDB-PRD ~]# multipath -ll | grep 36000d310014250000000000000000024
ASM_DATA_2_11 (36000d310014250000000000000000024) dm-36 COMPELNT,Compellent Vol
[root@OraDB-PRD ~]# multipath -ll | grep 36000d310014250000000000000000025
ASM_DATA_2_12 (36000d310014250000000000000000025) dm-37 COMPELNT,Compellent Vol
oracleasm createdisk DATA2_01 /dev/
oracleasm createdisk DATA2_01 /dev/dm-35
oracleasm createdisk DATA2_02 /dev/dm-36
oracleasm createdisk DATA2_03 /dev/dm-37
oracleasm createdisk DATA2_04 /dev/dm-38
oracleasm createdisk DATA2_05 /dev/dm-39
oracleasm createdisk DATA2_06 /dev/dm-40
oracleasm createdisk DATA2_07 /dev/dm-41
oracleasm createdisk DATA2_08 /dev/dm-42 
oracleasm createdisk DATA2_09 /dev/dm-43
oracleasm createdisk DATA2_10 /dev/dm-44 
oracleasm createdisk DATA2_11 /dev/dm-45
oracleasm createdisk DATA2_12 /dev/dm-46
set lin 200 pages 999
col path for a80
select GROUP_NUMBER, HEADER_STATUS,DISK_NUMBER, MOUNT_STATUS, TOTAL_MB, NAME, path from v$asm_disk;
CREATE DISKGROUP data2 EXTERNAL REDUNDANCY
DISK
'/dev/oracleasm/disks/DATA2_01' name DATA2_01
ATTRIBUTE
   'compatible.asm' = '12.2.0.1.0',
    'compatible.rdbms' = '10.1';
ALTER DISKGROUP data2 ADD DISK
    '/dev/oracleasm/disks/DATA2_02' name DATA2_02,
    '/dev/oracleasm/disks/DATA2_03' name DATA2_03,
    '/dev/oracleasm/disks/DATA2_04' name DATA2_04,
    '/dev/oracleasm/disks/DATA2_05' name DATA2_05,
    '/dev/oracleasm/disks/DATA2_06' name DATA2_06,
    '/dev/oracleasm/disks/DATA2_07' name DATA2_07,
    '/dev/oracleasm/disks/DATA2_08' name DATA2_08,
    '/dev/oracleasm/disks/DATA2_09' name DATA2_09,
    '/dev/oracleasm/disks/DATA2_10' name DATA2_10,
    '/dev/oracleasm/disks/DATA2_11' name DATA2_11,
    '/dev/oracleasm/disks/DATA2_12' name DATA2_12
     rebalance power 5 nowait;
RUN
{
  ALLOCATE CHANNEL dev1 DEVICE TYPE DISK;
  BACKUP AS COPY datafile 35 FORMAT '+DATA2';
  BACKUP AS COPY datafile 36 FORMAT '+DATA2';
  BACKUP AS COPY datafile 37 FORMAT '+DATA2';
}
BACKUP AS COPY tablespace USERS FORMAT '+DATA2';
BACKUP AS COPY datafile 56 FORMAT '+DATA';
sql 'alter database datafile 56 offline';
SWITCH DATAFILE 56 to COPY;
RECOVER DATAFILE 56;
sql 'alter database datafile 56 online';
dbv file=+DATA/seniordb/datafile/system.268.951300197 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/system.364.1059001265 blocksize=8192
dbv file=+DATA/seniordb/datafile/sysaux.262.951303623 blocksize=8192
dbv file=+DATA/seniordb/datafile/sysaux.258.951300197 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sysaux.405.965779985 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sysaux.419.997725085 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sysaux.435.1013609329 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sysaux.387.1022346977 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sysaux.425.1005077905 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sysaux.408.1062630597 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/users.414.994192083 blocksize=8192
dbv file=+DATA/seniordb/datafile/users.352.951306647 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/users.429.1066491103 blocksize=8192
dbv file=+FRA/SENIORDB/DATAFILE/sapiensnfe.677.1070549649 blocksize=8192
dbv file=+FRA/SENIORDB/DATAFILE/sapiensnfe.825.1070549735 blocksize=8192
dbv file=+FRA/SENIORDB/DATAFILE/sapiensnfe.1206.1070549775 blocksize=8192
dbv file=+DATA/seniordb/datafile/dante.263.951303623 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.353.951309363 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.358.951312277 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.347.951306647 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.257.951303621 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.272.951300197 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.354.951309363 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.359.951312277 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.348.951306647 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.266.951303623 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.270.951300197 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.355.951309363 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.360.951312277 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.349.951306647 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.265.951303623 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.269.951300197 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.356.951309363 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.264.951303623 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.351.951306647 blocksize=8192
dbv file=+DATA/seniordb/datafile/sapiensprd.361.951312279 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.406.969200275 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.407.970674487 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.409.975074885 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.410.975074905 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.411.978514603 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.412.978518187 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.413.978518217 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.417.996737705 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.421.999900011 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.423.1002951127 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.424.1004338907 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.426.1006891491 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.428.1007955915 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.434.1013106079 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.385.1023805875 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.384.1023805915 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.383.1035702645 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.382.1035702675 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.381.1035702729 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.378.1050389655 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.438.1070921617 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.379.1062630135 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/sapiensprd.288.1062630139 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/etlsenior.430.1070382017 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/reorg_24_04_21.431.1070745285 blocksize=8192
dbv file=+DATA/SENIORDB/DATAFILE/reorg_24_04_21.357.10707555= blocksize=8192
grep "Corrupt block relative dba:" ~/dbv.log
select dbms_metadata.get_ddl('INDEX','E301MCRINDICE7','SAPIENSPRD') from dual;
 Select * from dba_free_space where file_id= 42
     and 174335 between block_id and block_id + blocks -1;


select segment_name, segment_type, owner
       from dba_extents
      where file_id = 7
        and 1710625 between block_id
            and block_id + blocks -1;



create table sapiensprd.s (
       n number,
       c varchar2(4000)
     ) nologging tablespace SAPIENSPRD pctfree 99; 
CREATE OR REPLACE TRIGGER corrupt_trigger 
  AFTER INSERT ON SAPIENSPRD.s 
  REFERENCING OLD AS p_old NEW AS new_p 
  FOR EACH ROW 
DECLARE 
  corrupt EXCEPTION; 
BEGIN 
  IF (dbms_rowid.rowid_block_number(:new_p.rowid)=139904)
 and (dbms_rowid.rowid_relative_fno(:new_p.rowid)=42) THEN 
     RAISE corrupt; 
  END IF; 
EXCEPTION 
  WHEN corrupt THEN 
     RAISE_APPLICATION_ERROR(-20000, 'Corrupt block has been formatted'); 
END; 
/
Begin
  FOR i IN 1..1000000000 loop
    for j IN 1..1000 loop
      Insert into SAPIENSPRD.s VALUES(i,'x');
    end loop;
    commit;
  END LOOP;
END; 
/
select * from v$database_block_corruption;
set lines 200 pages 10000
col segment_name format a30
SELECT e.owner, e.segment_type, e.segment_name, e.partition_name, c.file#
, greatest(e.block_id, c.block#) corr_start_block#
, least(e.block_id+e.blocks-1, c.block#+c.blocks-1) corr_end_block#
, least(e.block_id+e.blocks-1, c.block#+c.blocks-1)
- greatest(e.block_id, c.block#) + 1 blocks_corrupted
, null description
FROM dba_extents e, v$database_block_corruption c
WHERE e.file_id = c.file#
AND e.block_id <= c.block# + c.blocks - 1
AND e.block_id + e.blocks - 1 >= c.block#
UNION
SELECT s.owner, s.segment_type, s.segment_name, s.partition_name, c.file#
, header_block corr_start_block#
, header_block corr_end_block#
, 1 blocks_corrupted
, 'Segment Header' description
FROM dba_segments s, v$database_block_corruption c
WHERE s.header_file = c.file#
AND s.header_block between c.block# and c.block# + c.blocks - 1
UNION
SELECT null owner, null segment_type, null segment_name, null partition_name, c.file#
, greatest(f.block_id, c.block#) corr_start_block#
, least(f.block_id+f.blocks-1, c.block#+c.blocks-1) corr_end_block#
, least(f.block_id+f.blocks-1, c.block#+c.blocks-1)
- greatest(f.block_id, c.block#) + 1 blocks_corrupted
, 'Free Block' description
FROM dba_free_space f, v$database_block_corruption c
WHERE f.file_id = c.file#
AND f.block_id <= c.block# + c.blocks - 1
AND f.block_id + f.blocks - 1 >= c.block#
ORDER BY file#, corr_start_block#;
select distinct 'analyze index ' || 
 owner || '.' || segment_name || ' validate structure;'
from dba_extents where segment_type='INDEX' and file_id=42;
!
        FOR v1 in c1 LOOP
             --execute immediate exec_sql;
        END LOOP;
declare
    cursor c1 is select * from sys.get_corrupt_blocks where  status <> 1 order by blockid FETCH FIRST 10 ROWS ONLY;
    rc sys_refcursor;
    vowner varchar(100);
    vobjectname varchar(100);
    vtypename varchar(100);
    vc1 get_corrupt_blocks%rowtype;
    vfileid number;
    vblockid number;
begin
    for vc1 in c1 loop
      vfileid := vc1.fileid ;
      vblockid := vc1.blockid ;
      
      select owner, 
              segment_name, 
              segment_type 
             into
               vowner,
               vobjectname,
               vtypename
      from dba_extents
      where file_id =  vfileid and vblockid 
      between block_id and block_id + blocks -1;
    
      dbms_output.put_line('file: ' || vfileid || 
                            ', block#: '  || vblockid || 
                            ', owner: ' || vowner || 
                            ', object: '|| vobjectname || 
                            ', type: ' || vtypename);
      update sys.get_corrupt_blocks 
      set  STATUS = 1,
           OWNER = vowner,
           OBJECT = vobjectname,
           TYPE = vtypename
      where (BLOCKID = vblockid and FILEID = vfileid);
      commit;
    end loop;
end;
/
declare
    cursor c1 is select * from sys.get_corrupt_blocks where status <> 1 order by blockid FETCH FIRST 100 ROWS; 
    rc sys_refcursor;
    vowner varchar(100);
    vobjectname varchar(100);
    vtypename varchar(100);
    vc1 get_corrupt_blocks%rowtype;
    vfileid number;
    vblockid number;
begin
    for vc1 in c1 loop
      vfileid := vc1.fileid ;
      vblockid := vc1.blockid ;
      
      begin 
      select owner, 
              segment_name, 
              segment_type 
             into
               vowner,
               vobjectname,
               vtypename
      from dba_extents
      where file_id =  vfileid and vblockid 
      between block_id and block_id + blocks -1;
      EXCEPTION
        WHEN NO_DATA_FOUND THEN
          vowner := 'VAZIO';
          vobjectname := 'VAZIO';
          vtypename := 'VAZIO';
        dbms_output.put_line('file: ' || vfileid || 
                            ', block#: '  || vblockid || 
                            ', owner: ' || vowner || 
                            ', object: '|| vobjectname || 
                            ', type: ' || vtypename);
        update sys.get_corrupt_blocks 
        set  STATUS = 1,
           OWNER = vowner,
           OBJECT = vobjectname,
           TYPE = vtypename
        where (BLOCKID = vblockid and FILEID = vfileid);
        commit;
        continue;
      END;
    
      dbms_output.put_line('file: ' || vfileid || 
                            ', block#: '  || vblockid || 
                            ', owner: ' || vowner || 
                            ', object: '|| vobjectname || 
                            ', type: ' || vtypename);
      update sys.get_corrupt_blocks 
      set  STATUS = 1,
           OWNER = vowner,
           OBJECT = vobjectname,
           TYPE = vtypename
      where (BLOCKID = vblockid and FILEID = vfileid);
      commit;
    end loop;
end;
/
grep -b3 ORA-00054 analyze_indexes*.log
analyze index SAPIENSPRD.E000CIXINDICELOTE validate structure;
 update sys.get_corrupt_blocks 
      set  STATUS = 1,
           OWNER = 'SAPIENSPRD',
           OBJECT = 'CP_USU_TPENDCLI',
           TYPE = 'INDEX'
      where (BLOCKID = 172385 and FILEID = 42);
while true; do ps -ef | grep get_corrupt | wc -l ; sqlplus -S / as sysdba  @monitor.sql; sleep 60; done;
grep -e ^Page dbv_42.log | awk '{print $2}'| sort -u
select (select count(*)  from sys.get_corrupt_blocks where status <> 0) feito, 
(select count(*) done from sys.get_corrupt_blocks where status <> 1) falta 
from dual ;
drop index "SAPIENSPRD"."CP_E301MCR"
    
CREATE UNIQUE INDEX "SAPIENSPRD"."CP_E301MCR" ON "SAPIENSPRD"."E301MCR" ("CODEMP", "CODFIL", "NUMTIT", "CODTPT", "SEQMOV")
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SAPIENSPRD"
/
alter session set ddl_lock_timeout=60;
ALTER TABLE "SAPIENSPRD"."USU_TPENDCLI" DROP PRIMARY KEY;
CREATE UNIQUE INDEX "SAPIENSPRD"."CP_USU_TPENDCLI" ON "SAPIENSPRD"."USU_TPENDCLI" ("USU_NUMSEQ")
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SAPIENSPRD" nologging;
alter index "SAPIENSPRD"."CP_USU_TPENDCLI" logging;
ALTER TABLE "SAPIENSPRD"."USU_TPENDCLI" ADD CONSTRAINT "CP_USU_TPENDCLI" PRIMARY KEY ("USU_NUMSEQ") USING INDEX;
select dbms_metadata.get_ddl('INDEX', 'CP_USU_TPENDCLI', 'SAPIENSPRD') as ddl from dual;
select owner, table_name, constraint_name, constraint_type from dba_constraints where r_constraint_name='CP_USU_TPENDCLI';
alter session set ddl_lock_timeout = 5;
 alter table sapiensprd.E301MCR 
  add CONSTRAINT "CP_E301MCR" PRIMARY KEY ("CODEMP", "CODFIL", "NUMTIT", "CODTPT", "SEQMOV")
    USING INDEX ;
alter table sapiensprd.E301RAT 
  add CONSTRAINT "IR_E301RAT_004" FOREIGN KEY ("CODEMP", "CODFIL", "NUMTIT", "CODTPT", "SEQMOV")
    REFERENCES "SAPIENSPRD"."E301MCR" ("CODEMP", "CODFIL", "NUMTIT", "CODTPT", "SEQMOV") 
      ENABLE NOVALIDATE;
  select owner, table_name, constraint_name from dba_constraints where
  r_constraint_name = 'CP_E301MCR';
  alter table sapiensprd.E301RAT drop constraint IR_E301RAT_004;
 CREATE INDEX "SAPIENSPRD"."E301MARINDICE1" ON "SAPIENSPRD"."E301MAR" ("CODEMP", "CODFIL", "NUMTIT", "CODTPT")
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SAPIENSPRD";
  sqlfile=...
ALTER SYSTEM SWITCH LOGFILE 
ALTER SYSTEM ARCHIVE LOG CURRENT
SAPIENSNFE
DBSFWUSER
DANTE
SYSTMP
SAPIENSPRD
ETLSENIOR


Pré - Coletar números de objetos por owner
      Coletar obj inválidos.
      Coletar Grants - Script Andrey.
      Comparar componentes - 
       "
        set pages 500
        set lines 200
        set long 49999
        col ddl for a160
        select dbms_metadata.get_ddl('USER', 'SAPIENSPRD' )ddl from dual
        UNION ALL
        select dbms_metadata.get_granted_ddl( 'SYSTEM_GRANT', 'SAPIENSPRD' )ddl from dual
        UNION ALL
        select dbms_metadata.get_granted_ddl( 'OBJECT_GRANT', 'SAPIENSPRD' )ddl from dual
        UNION ALL
        select dbms_metadata.get_granted_ddl( 'ROLE_GRANT', 'SAPIENSPRD' )ddl from dual;
        "
        *possivelmente podem ter objetos no schema sys/system
       - Ajustar o profile default do banco.
       - criar roles iguais as da origem.

1- Parar App e DEPOIS o listener.
2- Colocar Banco em restrito. 
3- Executar EXPDP full.
4- Conferir ACL .

set lines 150
col acl for a40
col END_DATE for a10
col START_DATE for a10
col host for a10
col principal for a10
col PRIVILEGE for a10
SELECT a. acl_owner, a.acl,
                   a.host,
                   a.lower_port,
                   a.upper_port,
                   b.principal,
                   b.privilege,
                   b.is_grant,
                   b.start_date,
                   b.end_date
            FROM   dba_network_acls a
                   JOIN dba_network_acl_privileges b ON a.acl = b.acl
            ORDER BY a.acl, a.host, a.lower_port, a.upper_port;

5- Importar scheams (só as tables) exclude indexes e stats.
4- Importar índices (split = 6) .
6- COmpara origem e destino (obj inválidos precisam ser recompilados).
final - criar dblinks, dirs, pub synonyums e jobs do SYSTEM.
7- NID no banco novo.
8- Backup full usando  rman e rodar estatísticas.

begin
 dbms_network_acl_admin.append_host_ace(host=>'*',
                                        ace=>xs$ace_type(privilege_list =>xs$name_list('resolve'),
                                          principal_name=>'GSMADMIN_INTERNAL',principal_type =>xs_acl.ptype_db));
end;
/

BEGIN
  DBMS_NETWORK_ACL_ADMIN.CREATE_ACL(
     acl          => 'seniorprd-all.xml',
     description  => 'Network permissions for all',
     principal    => 'SAPIENSPRD',
     is_grant     => TRUE,
     privilege    => 'connect');
END;
/

BEGIN
  DBMS_NETWORK_ACL_ADMIN.ADD_PRIVILEGE(
        acl         => 'seniorprd-all.xml',
        principal   => 'SAPIENSPRD',
        is_grant    =>  TRUE,
        privilege   => 'resolve');
END;
/

BEGIN
   DBMS_NETWORK_ACL_ADMIN.ASSIGN_ACL(
     acl         => 'seniorprd-all.xml',
     host        => '*');
END;
/

DBSFWUSER
PUBLIC
OUTLN
SYSTEM
ORACLE_OCM
AUDSYS
GSMADMIN_INTERNAL
DBSNMP
APPQOSSYS
XDB
SYS
REMOTE_SCHEDULER_AGENT

ZABBIX


SAPIENSNFE
DANTE

SYSTMP
SAPIENSPRD
ETLSENIOR




"SAPIENSPRD"."E301MCR"
"SAPIENSPRD"."E000CIX"



"SAPIENSPRD"."E140NFV"


"SAPIENSPRD"."E301TCR"
"SAPIENSPRD"."E210MVP"
"SAPIENSPRD"."E600MCC"

"SAPIENSPRD"."E140IPV"
"SAPIENSPRD"."E301RAT"
"SAPIENSPRD"."E000RIP"

"SAPIENSPRD"."E640LCT"
"SAPIENSPRD"."R960PAR"
"SAPIENSPRD"."USU_TPENDCLI"




select dbms_metadata.get_ddl('INDEX','CP_USU_TPENDCLI','SAPIENSPRD') from dual;

-- STASPACK

 @?/rdbms/admin/spcreate




 ~ORA-39083: Object type REF_CONSTRAINT:"SAPIENSPRD"."IR_E140DLS_004" failed to create with error:
ORA-02298: cannot validate (SAPIENSPRD.IR_E140DLS_004) - parent keys not found

Failing sql is:

ALTER TABLE "SAPIENSPRD"."E140DLS" ADD CONSTRAINT "IR_E140DLS_004" 
FOREIGN KEY ("CODEMP", "CODFIL", "CODSNF", "NUMNFV", "SEQIPV") 
REFERENCES "SAPIENSPRD"."E140IPV" ("CODEMP", "CODFIL", "CODSNF", "NUMNFV", "SEQIPV") ENABLE NOVALIDATE;

ORA-39083: Object type REF_CONSTRAINT:"SAPIENSPRD"."IR_E140DTP_004" failed to create with error:
ORA-02298: cannot validate (SAPIENSPRD.IR_E140DTP_004) - parent keys not found


ALTER TABLE "SAPIENSPRD"."E140DTP" ADD CONSTRAINT "IR_E140DTP_004" 
FOREIGN KEY ("CODEMP", "CODFIL", "CODSNF", "NUMNFV", "SEQIPV") 
REFERENCES "SAPIENSPRD"."E140IPV" ("CODEMP", "CODFIL", "CODSNF", "NUMNFV", "SEQIPV") ENABLE NOVALIDATE;


INCLUDE=GRANT
INCLUDE=ROLE_GRANT
INCLUDE=DEFAULT_ROLE
INCLUDE=TABLESPACE_QUOTA
INCLUDE=PUBLIC_SYNONYM


 ALTER INDEX "SAPIENSPRD"."USU_E301TCR4" NOPARALLEL;


idx_3.log:ORA-01418: specified index does not exist

idx_6.log:ORA-01418: specified index does not exist
dx_6.log:ORA-00054: resource busy and acquire with NOWAIT specified or timeout expired



CREATE UNIQUE INDEX "SAPIENSPRD"."CP_R900NXV" ON "SAPIENSPRD"."R900NXV" ("CODPKY")
  PCTFREE 10 INITRANS 2 MAXTRANS 255
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SAPIENSPRD" ;

set lin 200 pages 999
col owner for a30
col object_name for a30
col object_type for a30
select owner, object_type, count(*) from dba_objects group by owner, object_type order by 1,2;


select owner, object_type, count(*) from dba_objects group by owner, objec

OWNER                          OBJECT_TYPE                      COUNT(*)
------------------------------ ------------------------------ ----------
APPQOSSYS                      SYNONYM                                 1
APPQOSSYS                      TABLE                                   5
AUDSYS                         INDEX                                   3
AUDSYS                         INDEX PARTITION                         6
AUDSYS                         LOB                                     3
AUDSYS                         LOB PARTITION                           6
AUDSYS                         TABLE                                   1
AUDSYS                         TABLE PARTITION                         2
DANTE                          TABLE                                   1
DBSFWUSER                      INDEX                                   3
DBSFWUSER                      PACKAGE                                 1
DBSFWUSER                      PACKAGE BODY                            1
DBSFWUSER                      TABLE                                   3
DBSNMP                         INDEX                                  10
DBSNMP                         PACKAGE                                 3
DBSNMP                         PACKAGE BODY                            3
DBSNMP                         PROCEDURE                               1
DBSNMP                         SEQUENCE                                2
DBSNMP                         SYNONYM                                 1
DBSNMP                         TABLE                                  20
DBSNMP                         TYPE                                    8
DBSNMP                         VIEW                                    7
ETLSENIOR                      FUNCTION                                3
ETLSENIOR                      INDEX                                 649
ETLSENIOR                      LOB                                    46
ETLSENIOR                      PROCEDURE                              13
ETLSENIOR                      SEQUENCE                                1
ETLSENIOR                      TABLE                                 627
ETLSENIOR                      TRIGGER                                10
ETLSENIOR                      VIEW                                   15
GSMADMIN_INTERNAL              EVALUATION CONTEXT                      1
GSMADMIN_INTERNAL              INDEX                                  49
GSMADMIN_INTERNAL              LIBRARY                                 4
GSMADMIN_INTERNAL              LOB                                     8
GSMADMIN_INTERNAL              PACKAGE                                 8
GSMADMIN_INTERNAL              PACKAGE BODY                            8
GSMADMIN_INTERNAL              PROCEDURE                               2
GSMADMIN_INTERNAL              QUEUE                                   2
GSMADMIN_INTERNAL              RULE SET                                2
GSMADMIN_INTERNAL              SEQUENCE                               16
GSMADMIN_INTERNAL              SYNONYM                                 2
GSMADMIN_INTERNAL              TABLE                                  41
GSMADMIN_INTERNAL              TRIGGER                                 5
GSMADMIN_INTERNAL              TYPE                                   45
GSMADMIN_INTERNAL              TYPE BODY                               3
GSMADMIN_INTERNAL              VIEW                                    8
ORACLE_OCM                     JOB                                     2
ORACLE_OCM                     PACKAGE                                 3
ORACLE_OCM                     PACKAGE BODY                            3
OUTLN                          INDEX                                   5
OUTLN                          LOB                                     1
OUTLN                          PROCEDURE                               1
OUTLN                          TABLE                                   3
PERFSTAT                       INDEX                                  73
PERFSTAT                       PACKAGE                                 1
PERFSTAT                       PACKAGE BODY                            1
PERFSTAT                       SEQUENCE                                1
PERFSTAT                       TABLE                                  73
PERFSTAT                       VIEW                                    1
PUBLIC                         SYNONYM                              5939
REMOTE_SCHEDULER_AGENT         FUNCTION                                1
REMOTE_SCHEDULER_AGENT         PROCEDURE                              11
SAPIENSNFE                     INDEX                                 830
SAPIENSNFE                     LOB                                    11
SAPIENSNFE                     SEQUENCE                              307
SAPIENSNFE                     TABLE                                 290
SAPIENSNFE                     TRIGGER                                 1
SAPIENSNFE                     VIEW                                   15
SAPIENSPRD                     DATABASE LINK                           1
SAPIENSPRD                     FUNCTION                                7
SAPIENSPRD                     INDEX                                4953
SAPIENSPRD                     JOB                                     1
SAPIENSPRD                     LOB                                   126
SAPIENSPRD                     PROCEDURE                              66
SAPIENSPRD                     SEQUENCE                              240
SAPIENSPRD                     TABLE                                3394
SAPIENSPRD                     TRIGGER                               158
SAPIENSPRD                     VIEW                                   27
SYS                            CLUSTER                                10
SYS                            CONSUMER GROUP                         18
SYS                            CONTAINER                               1
SYS                            CONTEXT                                 7
SYS                            DATABASE LINK                           1
SYS                            DESTINATION                             2
SYS                            DIRECTORY                              23
SYS                            EDITION                                 1
SYS                            EVALUATION CONTEXT                     11
SYS                            FUNCTION                              109
SYS                            INDEX                                1655
SYS                            INDEX PARTITION                       118
SYS                            JOB                                    20
SYS                            JOB CLASS                              15
SYS                            LIBRARY                               167
SYS                            LOB                                   267
SYS                            LOB PARTITION                           6
SYS                            OPERATOR                                7
SYS                            PACKAGE                               645
SYS                            PACKAGE BODY                          625
SYS                            PROCEDURE                             168
SYS                            PROGRAM                                11
SYS                            QUEUE                                  20
SYS                            RESOURCE PLAN                          11
SYS                            RULE                                    1
SYS                            RULE SET                               15
SYS                            SCHEDULE                                4
SYS                            SCHEDULER GROUP                         4
SYS                            SEQUENCE                              181
SYS                            SYNONYM                                 6
SYS                            TABLE                                1486
SYS                            TABLE PARTITION                       221
SYS                            TABLE SUBPARTITION                     32
SYS                            TRIGGER                                 6
SYS                            TYPE                                 1866
SYS                            TYPE BODY                             160
SYS                            UNDEFINED                              15
SYS                            UNIFIED AUDIT POLICY                    7
SYS                            VIEW                                 6364
SYS                            WINDOW                                  9
SYSTEM                         FUNCTION                                5
SYSTEM                         INDEX                                 154
SYSTEM                         INDEX PARTITION                        75
SYSTEM                         LOB                                    12
SYSTEM                         SEQUENCE                                7
SYSTEM                         SYNONYM                                 8
SYSTEM                         TABLE                                 128
SYSTEM                         TABLE PARTITION                        50
SYSTEM                         TYPE                                   10
SYSTEM                         VIEW                                   10
WMSYS                          EVALUATION CONTEXT                      1
WMSYS                          INDEX                                  67
WMSYS                          LOB                                     9
WMSYS                          OPERATOR                                9
WMSYS                          PACKAGE                                24
WMSYS                          PACKAGE BODY                           24
WMSYS                          PROCEDURE                               1
WMSYS                          QUEUE                                   2
WMSYS                          RULE SET                                2
WMSYS                          SEQUENCE                                6
WMSYS                          TABLE                                  40
WMSYS                          TRIGGER                                45
WMSYS                          TYPE                                   17
WMSYS                          TYPE BODY                               1
WMSYS                          VIEW                                  146
XDB                            FUNCTION                                6
XDB                            INDEX                                 358
XDB                            INDEXTYPE                               2
XDB                            LIBRARY                                20
XDB                            LOB                                   290
XDB                            OPERATOR                                7
XDB                            PACKAGE                                49
XDB                            PACKAGE BODY                           47
XDB                            PROCEDURE                               3
XDB                            SEQUENCE                                5
XDB                            TABLE                                  53
XDB                            TRIGGER                                 7
XDB                            TYPE                                  124
XDB                            TYPE BODY                               5
XDB                            VIEW                                    7
XDB                            XML SCHEMA                             19


EXECUTE DBMS_STATS.GATHER_SCHEMA_STATS(ownname => 'SAPSR3', estimate_percent => DBMS_STATS.AUTO_SAMPLE_SIZE, degree => 8);
EXECUTE DBMS_STATS.GATHER_SCHEMA_STATS(ownname => 'ETLSENIOR', estimate_percent => DBMS_STATS.AUTO_SAMPLE_SIZE);
EXECUTE DBMS_STATS.GATHER_SCHEMA_STATS(ownname => 'DANTE', estimate_percent => DBMS_STATS.AUTO_SAMPLE_SIZE);
EXECUTE DBMS_STATS.GATHER_SCHEMA_STATS(ownname => 'SAPIENSNFE', estimate_percent => DBMS_STATS.AUTO_SAMPLE_SIZE);
EXECUTE DBMS_STATS.GATHER_SCHEMA_STATS(ownname => 'SYSTMP', estimate_percent => DBMS_STATS.AUTO_SAMPLE_SIZE);

-- Rename the database NID


SQL> shutdown immediate;
SQL> startup mount;

nid TARGET=/ DBNAME=NRMOS101


cd $ORACLE_HOME/dbs

mv spfileNRMOR101.ora spfileNRMOS101.ora


Set oracle home to NRMOS101

ORACLE_SID=NRMOS101


SQL> startup nomount;
ORACLE instance started.

Total System Global Area 1.6895E+10 bytes
Fixed Size                  2217256 bytes
Variable Size            9227086552 bytes
Database Buffers         7449083904 bytes
Redo Buffers              216268800 bytes

SQL> alter system set db_name=NRMOS101 scope=spfile;

System altered.

SQL> shutdown immediate;


SQL> startup mount;
ORACLE instance started.

Total System Global Area 1.6895E+10 bytes
Fixed Size                  2217256 bytes
Variable Size            9227086552 bytes
Database Buffers         7449083904 bytes
Redo Buffers              216268800 bytes
Database mounted.
SQL> alter database open resetlogs;

Database altered.


db_create_online_log_dest


-- Backup incremental -- ENTERPRISE EDITION
alter system set db_create_file_dest='+DATA2' scope=both;
ALTER DATABASE ENABLE BLOCK CHANGE TRACKING;


USU_E000CIX1



col ddl for a160

select dbms_metadata.get_ddl('INDEX',index_name,'SAPIENSPRD') ddl from dba_indexes
where table_name='E000CIX';

select dbms_metadata.get_ddl('TABLE','E000CIX','SAPIENSPRD') ddl from dual;

OWNER      INDEX_NAME
-----------------------------------------
SAPIENSPRD CP_E000CIX_STG
SAPIENSPRD E000CIXINDICELOTE_STG
SAPIENSPRD USU_E000CIX1_STG
SAPIENSPRD E000CIXINDICESISTEMA_STG



begin
 DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD', 
  TABNAME => 'E140IDE', 
  estimate_percent =>dbms_stats.auto_sample_size, 
  CASCADE =>TRUE,
  method_opt => 'FOR ALL COLUMNS SIZE AUTO');
 end;
 /


  CREATE INDEX "SAPIENSPRD"."E120PEDIDXUPDATEINTEGR" ON "SAPIENSPRD"."E120PED" ("CODEMP", "CODFIL", "TNSPRO","PEDBLO","USUGER","DATEMI")
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SAPIENSPRD" nologging;

  ALTER INDEX "SAPIENSPRD"."E120PEDIDXUPDATEINTEGR" logging;



SQLFormat
Online SQL formatting service
Home
Format SQL statements
About
Learn about this tool
Source Code
Formatter Code (Python)
API
Use it everywhere
SQLFormat is a free online formatter for SQL statements. Enter your SQL statement in the textarea below and click "Format SQL" [Ctrl+Enter]. To upload a file use the button right below the textarea.

In addition to this web interface SQLFormat provides an API. Or you can download the Python module that powers this service to use it in your own applications. See source code for details.

Type your SQL here:
UPDATE   E000CIX SET   E000CIX.NUMLOT = :NUMLOT  WHERE   E000CIX.CODINT = :CODIN
T  AND E000CIX.IDEINT = :IDEINT  AND E000CIX.SITIEX = 'P' AND (E000CIX.NUMLOT =
0 OR E000CIX.NUMLOT IS NULL) AND EXISTS (SELECT   1 FROM   E000NFS WHERE   E000N
FS.SEQINT = E000CIX.SEQINT AND E000NFS.CODEMP = :CODEMP  AND E000NFS.CODFIL = :C
ODFIL   AND EXISTS(SELECT 1 FROM E140IDE WHERE E140IDE.CODEMP = E000NFS.CODEMP A
ND E140IDE.CODFIL = E000NFS.CODFIL AND E140IDE.CODSNF = E000NFS.CODSNF AND E140I
DE.NUMNFV = E000NFS.NUMNFV AND E140IDE.SITDOE IN (3,9)) AND NOT EXISTS (SELECT 1
 FROM E140IPV A LEFT JOIN E075DER B ON (A.CODEMP = B.CODEMP AND A.CODPRO = B.COD
PRO AND A.CODDER = B.CODDER) LEFT JOIN E205DEP C ON (A.CODEMP = C.CODEMP AND A.C
ODDEP = C.CODDEP AND A.CODFIL = C.CODFIL) WHERE (B.CODPRO IS NULL OR C.CODDEP IS
 NULL) AND E000NFS.CODEMP = A.CODEMP AND E000NFS.CODFIL = A.CODFIL AND E000NFS.C
ODSNF = A.CODSNF AND E000NFS.NUMNFV = A.NUMNFV)  AND EXISTS(SELECT 1 FROM E140TN
F INNER JOIN E140NFV ON E140NFV.CODEMP = E140TNF.CODEMP AND E140NFV.CODFIL = E14
0TNF.CODFIL AND E140NFV.CODSNF = E140TNF.CODSNF AND E140NFV.NUMNFV = E140TNF.NUM
NFV WHERE E140TNF.CODEMP = E000NFS.CODEMP AND E140TNF.CODFIL = E000NFS.CODFIL AN
D E140TNF.CODSNF = E000NFS.CODSNF AND E140TNF.NUMNFV = E000NFS.NUMNFV AND ((E140
NFV.TIPNFS = 4 AND E140TNF.FORENT = 'C' AND EXISTS(SELECT 1 FROM E440LPN INNER J
OIN E000NFE ON E000NFE.CODEMP = E440LPN.CODEMP AND E000NFE.CODFIL = E440LPN.CODF
IL AND E000NFE.CODFOR = E440LPN.CODFOR AND E000NFE.NUMNFC = E440LPN.NUMNFC AND E
000NFE.CODSNF = E440LPN.CODSNF INNER JOIN E000CIX ON E000CIX.SEQINT = E000NFE.SE
QINT WHERE E440LPN.EMPRLC = E000NFS.CODEMP AND E440LPN.FILRLC = E000NFS.CODFIL A
ND E440LPN.NFVRLC = E000NFS.NUMNFV AND E440LPN.SNFRLC = E000NFS.CODSNF AND E000C
IX.IDEINT = 99 AND E000CIX.CODINT = :CODINT  AND E000CIX.SITIEX = 'S')) OR ((E14
0NFV.TIPNFS <> 4) OR (E140TNF.FORENT <> 'C'))))) AND ROWNUM <= 100

Nenhum arquivo selecionado
Accepted file types are plain text files and SQLite3 databases, maximal file size is 1 MB.
Format SQL
Options: Show plain text | Copy to clipboard | Print result



UPDATE E000CIX
SET E000CIX.NUMLOT = :NUMLOT
WHERE E000CIX.CODINT = :CODIN T
  AND E000CIX.IDEINT = :IDEINT
  AND E000CIX.SITIEX = 'P'
  AND (E000CIX.NUMLOT = 0
       OR E000CIX.NUMLOT IS NULL)
  AND EXISTS
    (SELECT 1
     FROM E000NFS
     WHERE E000N FS.SEQINT = E000CIX.SEQINT
       AND E000NFS.CODEMP = :CODEMP
       AND E000NFS.CODFIL = :C ODFIL
       AND EXISTS
         (SELECT 1
          FROM E140IDE
          WHERE E140IDE.CODEMP = E000NFS.CODEMP AND E140IDE.CODFIL = E000NFS.CODFIL
            AND E140IDE.CODSNF = E000NFS.CODSNF
            AND E140IDE.NUMNFV = E000NFS.NUMNFV
            AND E140IDE.SITDOE IN (3, 9))
       AND NOT EXISTS
         (SELECT 1
          FROM E140IPV A
          LEFT JOIN E075DER B ON (A.CODEMP = B.CODEMP
                                  AND A.CODPRO = B.COD PRO
                                  AND A.CODDER = B.CODDER)
          LEFT JOIN E205DEP C ON (A.CODEMP = C.CODEMP
                                  AND A.C ODDEP = C.CODDEP
                                  AND A.CODFIL = C.CODFIL)
          WHERE (B.CODPRO IS NULL
                 OR C.CODDEP IS NULL)
            AND E000NFS.CODEMP = A.CODEMP
            AND E000NFS.CODFIL = A.CODFIL
            AND E000NFS.C ODSNF = A.CODSNF
            AND E000NFS.NUMNFV = A.NUMNFV)
       AND EXISTS
         (SELECT 1
          FROM E140TN F
          INNER JOIN E140NFV ON E140NFV.CODEMP = E140TNF.CODEMP
          AND E140NFV.CODFIL = E14 0TNF.CODFIL
          AND E140NFV.CODSNF = E140TNF.CODSNF
          AND E140NFV.NUMNFV = E140TNF.NUM NFV
          WHERE E140TNF.CODEMP = E000NFS.CODEMP
            AND E140TNF.CODFIL = E000NFS.CODFIL AN D E140TNF.CODSNF = E000NFS.CODSNF
            AND E140TNF.NUMNFV = E000NFS.NUMNFV
            AND ((E140 NFV.TIPNFS = 4
                  AND E140TNF.FORENT = 'C'
                  AND EXISTS
                    (SELECT 1
                     FROM E440LPN INNER J OIN E000NFE ON E000NFE.CODEMP = E440LPN.CODEMP
                     AND E000NFE.CODFIL = E440LPN.CODF IL
                     AND E000NFE.CODFOR = E440LPN.CODFOR
                     AND E000NFE.NUMNFC = E440LPN.NUMNFC
                     AND E 000NFE.CODSNF = E440LPN.CODSNF
                     INNER JOIN E000CIX ON E000CIX.SEQINT = E000NFE.SE QINT
                     WHERE E440LPN.EMPRLC = E000NFS.CODEMP
                       AND E440LPN.FILRLC = E000NFS.CODFIL A ND E440LPN.NFVRLC = E000NFS.NUMNFV
                       AND E440LPN.SNFRLC = E000NFS.CODSNF
                       AND E000C IX.IDEINT = 99
                       AND E000CIX.CODINT = :CODINT
                       AND E000CIX.SITIEX = 'S'))
                 OR ((E14 0NFV.TIPNFS <> 4)
                     OR (E140TNF.FORENT <> 'C')))))
  AND ROWNUM <= 100

 
Switched to HTTPS
Both the frontend and the API are now available via HTTPS. Please update your bookmarks.
More news...

Formatting Options
Remove comments
Enable syntax highlighting
Keywords

Upper case
Identifiers

Unchanged
Indentation
2
 spaces
Empty field means leave indentation unchanged.
Language

SQL

 
Formatted by SQLFormat.org (https://sqlformat.org)
© 2009 - 2021 Andi Albrecht · contact: albrecht.andi@gmail.com · Imprint



SELECT 1 FROM E140IDE
          WHERE E140IDE.CODEMP = E000NFS.CODEMP AND E140IDE.CODFIL = E000NFS.CODFIL
            AND E140IDE.CODSNF = E000NFS.CODSNF
            AND E140IDE.NUMNFV = E000NFS.NUMNFV
            AND E140IDE.SITDOE IN (3, 9))



select dbms_metadata.get_ddl('INDEX','CP_E140IDE','SAPIENSPRD') from dual;



  CREATE UNIQUE INDEX "SAPIENSPRD"."E140IDEINDICE3" ON "SAPIENSPRD"."E140IDE" ("CODEMP", "CODFIL", "CODSNF", "NUMNFV","SITDOE")
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SAPIENSPRD" nologging;




   col name format a50
       SELECT name, asynch_io FROM v$datafile f,v$iostat_file i
       WHERE f.file#        = i.file_no
       AND filetype_name  = 'Data File'
       /



SET SERVEROUTPUT ON
DECLARE
  lat  INTEGER;
  iops INTEGER;
  mbps INTEGER;
BEGIN
-- DBMS_RESOURCE_MANAGER.CALIBRATE_IO (, , iops, mbps, lat);
   DBMS_RESOURCE_MANAGER.CALIBRATE_IO (2, 10, iops, mbps, lat);

  DBMS_OUTPUT.PUT_LINE ('max_iops = ' || iops);
  DBMS_OUTPUT.PUT_LINE ('latency  = ' || lat);
  dbms_output.put_line('max_mbps = ' || mbps);
end;
/



max_iops = 2614
latency  = 20
max_mbps = 1256


select 'execute DBMS_STATS.UNLOCK_TABLE_STATS(''SAPIENSPRD'',''' || table_name || ''');' 
from dba_tables where owner='SAPIENSPRD' and num_rows > 10000000;


select 'execute DBMS_STATS.LOCK_TABLE_STATS(''SAPIENSPRD'',''table_name'');' 
from dba_tables where owner='SAPIENSPRD' and num_rows > 10000000;

select 'DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => ''SAPIENSPRD'' , TABNAME => ''' || TABLE_NAME || ''', partname => NULL, granularity => ''GLOBAL'', CASCADE => TRUE, method_opt => ''FOR ALL INDEXED COLUMNS SIZE AUTO'');',
'' from dba_tables where owner='SAPIENSPRD' and num_rows > 10000000;

select 'DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => ''SAPIENSPRD'' , TABNAME => ''' || TABLE_NAME || ''', partname => NULL, granularity => ''GLOBAL'', CASCADE => TRUE, method_opt => ''FOR ALL INDEXED COLUMNS SIZE AUTO'');'
from dba_tables where owner='SAPIENSPRD' and num_rows > 10000000;


DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'USU_TE210EST', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E640LCT', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E078CLM', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E301RAT', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E644LTI', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'USU_TPENDCLI', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'USU_TMON135PES', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E650SAL', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E660PAR', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E600MCC', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E660PAV', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E644LES', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'BACKUP600MCC', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'USU_TE301TCR', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'LOGPERIODOESTOQUE70FIL', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUT
O');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E660INV', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E210MVP', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E301OSU', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'USU_TE650SLC', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'USU_TLOGE000CIX', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'USU_E120LOGBLOQUEIO', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO')
;
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'USU_TANAREP', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E000TCR', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E078TLB', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E000PXF', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E301MAR', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E644LNF', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E140NFV', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'USU_TPENDTITULO', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E000MCR', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E640RAT', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E140PAR', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E301MCR', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E310ITB', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E301TCR', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E600RAT', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E000RIT', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E210SFE', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E140IPV', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E000RIP', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E301MOR', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');
DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'SAPIENSPRD' , TABNAME => 'E000CIX', partname => NULL, granularity => 'GLOBAL', CASCADE => TRUE, method_opt => 'FOR ALL INDEXED COLUMNS SIZE AUTO');


set serveroutput on 
DECLARE
cursor c1 is
  select owner, table_name 
    from dba_tables 
    where owner='SAPIENSPRD' 
    and num_rows > 10000000;
v_c1 c1%ROWTYPE;
BEGIN
  FOR v_c1 in c1 LOOP
    dbms_output.put_line('BEGIN');
    dbms_output.put_line(chr(13));
    dbms_output.put_line('DBMS_STATS.UNLOCK_TABLE_STATS(''SAPIENSPRD'',''' || v_c1.table_name || ''');');
    dbms_output.put_line('DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => ''SAPIENSPRD'' , TABNAME => ''' 
      || v_c1.table_name || ''', granularity => ''GLOBAL'', CASCADE => TRUE, method_opt => ''FOR ALL INDEXED COLUMNS SIZE AUTO'');');
    dbms_output.put_line('DBMS_STATS.LOCK_TABLE_STATS(''SAPIENSPRD'',''' || v_c1.table_name || ''');');
    dbms_output.put_line(chr(13));
    dbms_output.put_line('END;');
    dbms_output.put_line(chr(13));
    dbms_output.put_line('/');

  END LOOP;
END;
/



select 'exec DBMS_STATS.LOCK_TABLE_STATS(''SAPIENSPRD'',''' || table_name || ''');' 
from dba_tables where owner='SAPIENSPRD' and num_rows > 10000000;



coleta_estats_senior.sql

SQL> select CLIENT_NAME, STATUS from DBA_AUTOTASK_CLIENT;


BEGIN
  DBMS_AUTO_TASK_ADMIN.DISABLE(
    client_name => 'sql tuning advisor', 
    operation => NULL, 
    window_name => NULL);
END;
/

BEGIN
  DBMS_AUTO_TASK_ADMIN.DISABLE(
    client_name => 'auto space advisor', 
    operation => NULL, 
    window_name => NULL);
END;
/

BEGIN
  DBMS_AUTO_TASK_ADMIN.DISABLE(
    client_name => 'auto optimizer stats collection', 
    operation => NULL, 
    window_name => NULL);
END;
/


select
   x.sid, x.serial#, x.username ,x.status, x.event
from
   v$session x, v$sqltext y
where
   x.sql_address = y.address
and
   upper(y.sql_text) like '%TGR_ONTUS_EDI_K%';

 select s.sid, kglpnmod "mode", kglpnreq "Req" 
 from x$kglpn p, v$session s 
 where p.kglpnuse=s.addr
 and kglpnhd1 = (select p1 from gv$session);



select s.sid
      ,s.serial#
      ,s.username
      ,s.machine
      ,s.status
      ,s.lockwait
      ,t.used_ublk
      ,t.used_urec
      ,t.start_time
from v$transaction t
inner join v$session s on t.addr = s.taddr
order by t.start_time;

select distinct sql_id from
  (select sample_time, SESSION_ID, SQL_ID, IS_SQLID_CURRENT, machine, program, event 
  from gv$active_session_history 
  where session_id='894' and sample_time > sysdate - 10/60 order by sample_time);

select sample_time, SESSION_ID, SQL_ID, IS_SQLID_CURRENT, machine, program, event 
  from gv$active_session_history 
  where sample_time between sysdate - 5/24 < sysdate - 4/24
  order by sample_time
  ;


select sql_text from dba_hist_sqltext where sql_id='5wqsgfjj8n7bw';


UPDATE "S081" SET "BASME"=:A0,"HWAER"=:A1,"BSTMNG"="BSTMNG"+:A2,"BSTGEO"="BSTGEO"+:A3,"BSTGVO"="BSTGVO"+:A4,"BSTGVP"="BSTGVP"+:A5
WHERE "MANDT"=:A6 AND "EKORG"=:A7 AND "EKSGB"=:A8 AND "EKGRP"=:A9 AND "LIFNR"=:A10 AND "BTRKZ"=:A11 AND
"WERKS"=:A12 AND "WGRU2"=:A13 AND "WGRU1"=:A14 AND "MATKL"=:A15 AND "VRSIO"=:A16 AND "SPMON"=:A17 
AND "SPTAG"=:A18 AND "SPWOC"=:A19 AND "SPBUP"=:A20 AND "SSOUR"=:A21



select ''
inst_id, blocking_session, blocking_session_status, sql_id, status, last_call_et, event
from gv$session
where blocking_session is not null order by 5;


007hxa925bc7j
bjkkrfyrr5ssc
4r84fu4bdu9ah
4j63993dm8jqw
a0kzhghd59ssv
65qx1qbc9fkkq
6mp086kmhk2ps
54dqsbx37b3a3
72ntqswb1rjrz
51m27m06qykk2


SELECT sid,serial#,appusr,status FROM R911SEC, V$SESSION
WHERE R911SEC.NUMSEC = V$SESSION.AUDSID and appusr='integracao.linx';

    set lin 200 pages 999
    col tim for a15
    col process for a7
    col event for a40
    col machine for a15
    col program for a30
    col username for a20
    select
    inst_id,
    SID,
    serial#,
    username,
    --osuser,
    module,
    machine,
    program,
    process,
    --blocking_session as bl,
    to_char(LOGON_TIME, 'DDMM - HH24:MI') as tim,
    LAST_CALL_ET/60 et_min,
    --BLOCKING_SESSION,
    P1,
    EVENT,
    WAIT_TIME,
    SECONDS_IN_WAIT,
    status,
    sql_id,
    prev_sql_id
    from gv$session
    where
    type <> 'BACKGROUND'
    and status='ACTIVE'
  and sid in ('517')
    order by tim
    /


begin
 dbms_scheduler.create_job(
 job_name => 'SYS.monitor_active_sessions_10_sec',
 job_type => 'PLSQL_BLOCK',
 job_action => 'begin
                  insert into monitor_active_sessions 
                  select systimestamp, s.*, r.appusr 
                  from v$session s left join sapiensprd.R911SEC r
                  on (r.NUMSEC = s.AUDSID)
                  where s.username is not null and s.status = ''ACTIVE'';
                  commit;
                end;',
 start_date => sysdate,
 repeat_interval    =>'freq=SECONDLY; interval=10',
 enabled    => true);
  end;
 /


 begin
                insert into monitor_active_sessions 
                select systimestamp, s.*, r.appusr 
                from v$session s left join sapiensprd.R911SEC r
                on (r.NUMSEC = s.AUDSID)
                where s.username is not null and s.status = 'ACTIVE';
                commit;
                end;

create table monitor_active_sessions as 
select systimestamp as collect_time, s.*, r.appusr 
from v$session s left join sapiensprd.R911SEC r
on (r.NUMSEC = s.AUDSID)
where 1=2;




select /*+Parallel(6)*/segment_name,segment_type
from dba_extents
where file_id = 269
and 683029 between block_id and block_id + blocks - 1 ;



Object ID % Activity  Event % Event Object Name (Type)  Tablespace
22400 10.05 read by other session 6.08  SAPSR3.J_1BNFLIN (TABLE)  PSAPSR3
22400 10.05448241703813769192669638434868746904 db file sequential read 3.97  SAPSR3.J_1BNFLIN (TABLE)  PSAPSR3
208988  6.81  db file sequential read 6.80  SAPSR3.CDHDR~0 (INDEX)  PSAPSR3
208989  6.08  db file sequential read 6.08  SAPSR3.CDCLS~0 (INDEX)  PSAPSR3
24684 4.82  db file sequential read 4.80  SAPSR3.LIPS (TABLE) PSAPSR3
429288  4.26  db file sequential read 4.26  SAPSR3.BKPF~Z04 (INDEX) PSAPSR3


select INDEX_NAME, BLEVEL, LEAF_BLOCKS, DISTINCT_KEYS , CLUSTERING_FACTOR, NUM_ROWS, AVG_LEAF_BLOCKS_PER_KEY, LAST_ANALYZED 
from dba_ind_statistics where index_name in
  (
    select index_name 
  from dba_indexes where table_name in (
  'ZPOCST101',
  'ZPOCST102',
  'ZPOCST103',
  'ZFISCST401',
  'MSEG',
  'ZPOSCST400',
  'ZPOSCST099',
  'ZPOSCST430',
  'J_1BNFDOC')
) order by index_name;




select USER_ID, SQL_ID, EVENT
from v$active_session_history
where SESSION_ID = 259
and (SQL_EXEC_START) > '07-may-21 11:37' 
group by --INST_ID, 
SESSION_ID, session_serial#, USER_ID, MODULE, ACTION, PROGRAM, CLIENT_ID, SQL_ID, SQL_OPNAME, EVENT
order by min(SQL_EXEC_START), max(TIME_WAITED) desc;


col SQL_OPNAME for a20
select --INST_ID, 
SESSION_ID, session_serial#, USER_ID, MODULE, ACTION, PROGRAM, CLIENT_ID
SQL_ID, SQL_OPNAME, min(SQL_EXEC_START), max(TIME_WAITED), EVENT
from gv$active_session_history
where SESSION_ID = 259
and (SQL_EXEC_START) > '07-may-21 11:37' 
group by --INST_ID, 
SESSION_ID, session_serial#, USER_ID, MODULE, ACTION, PROGRAM, CLIENT_ID, SQL_ID, SQL_OPNAME, EVENT
order by min(SQL_EXEC_START), max(TIME_WAITED) desc;

select plan_table_output from table(dbms_xplan.display_cursor('89b98gwc7p7aa'));


select table_name, index_name , status
from dba_indexes where table_name in (
'ZPOSCST400',
'ZPOSCST099',
'ZPOSCST430',
'J_1BNFDOC'
)
;





1- Baixar as ultimas mídias para ODA-X4.
  - SO
  - Bare Metal
2- Levantar os IPS do cluster (VIP SCAN PUBLICO /etc/hosts .
3- crontab.
4- revisar as pastas onde estavam os dados dos bacnso e backups.
5- revisar os acfs.
6- Binários e DBHOMES.

10.6.1.51
GRPCOM\servico.by7
qcj@oYdgq#khS

Oracle Database Appliance RDBMS Clone 11.2.0.4.191015 for ODACLI/DCS stack

Oracle Database Appliance ISO Image

Oracle Database Appliance GI Clone for ODACLI/DCS stack



tar -czvf node2_dbhome_7.tar.gz dbhome_7


https://10.6.199.24/iPages/i_login.asp?msg=7

https://10.6.199.25/iPages/suntab.asp

10.6.1.162
grpcom\by7
qcj@oYdgq#khS


/opt/oracle/oak/bin/oakcli configure firstnet


/opt/oracle/dcs/bin/odacli configure-firstnet


Rodar em apenas um nó:

[root@oda1 opt]# /opt/oracle/dcs/bin/odacli describe-component -v

[root@oda1 opt]# /opt/oracle/dcs/bin/odacli update-repository -f /u01/midias/odacli-dcs-18.8.0.0.0-191226-GI-18.0.0.0.zip,/u01/midias/odacli-dcs-18.8.0.0.0-191226-DB-11.2.0.4.zip

[root@oda1 opt]# /opt/oracle/dcs/bin/odacli describe-job -i 1ac171a8-65d4-4382-ba90-59a01bd1b6b9
oda-admin
GRpcom-05#


root
GRpcom-05#



odacli-adm set-credential 

while true;



while true
do
/opt/oracle/dcs/bin/odacli describe-job -i b9a7a7e1-69fc-471a-ba1a-54470f267610
sleep 60
done;
/


-- attach oracle_home to inventory
backup current inventory (pointer is in /etc/oraInst.loc)
cd $ORACLE_HOME/oui/bin/attach_home.sh


10.6.1.93
test only 10.6.1.164

./runInstaller -clone -silent -ignorePreReq ORACLE_HOME=/u01/app/oracle/product/12.1.0.2/dbhome_1 \
ORACLE_HOME_NAME=dbhome_12_1 ORACLE_BASE=/u01/app/oracle oracle_install_OSDBA=dba oracle_install_OSOPER=oinstall \
-invPtrLoc /etc/oraInst.loc "CLUSTER_NODES={corpprduxoda1,corpprduxoda2}"

10.6.1.16
Gr*pC0m2o17

RMAN12.__pga_aggregate_target=1073741824
RMAN12.__sga_target=2147483648




GRID 

asmcmd -p

ASMCMD [+] > lsdg
State    Type    Rebal  Sector  Logical_Sector  Block       AU  Total_MB   Free_MB  Req_mir_free_MB  Usable_file_MB  Offline_disks  Voting_files  Name
MOUNTED  NORMAL  N         512             512   4096  4194304  13736960  13725272           686848         6519212              0             Y  DATA/
MOUNTED  NORMAL  N         512             512   4096  4194304   3430400   3429536           171520         1629008              0             N  RECO/
MOUNTED  HIGH    N         512             512   4096  4194304    762880    762400           190720          190560              0             N  REDO/


ASMCMD [+] > volcreate -G DATA -s 1600G oradata1
ASMCMD [+] > volcreate -G DATA -s 1600G oradata2
ASMCMD [+] > volcreate -G DATA -s 1600G oradata3
ASMCMD [+] > volcreate -G RECO -s 700G orareco1
ASMCMD [+] > volcreate -G REDO -s 100G oraredo1

ASMCMD [+] > volinfo --all
Diskgroup Name: DATA

         Volume Name: COMMONSTORE
         Volume Device: /dev/asm/commonstore-68
         State: ENABLED
         Size (MB): 5120
         Resize Unit (MB): 64
         Redundancy: MIRROR
         Stripe Columns: 8
         Stripe Width (K): 1024
         Usage: ACFS
         Mountpath: /opt/oracle/dcs/commonstore

         Volume Name: ORADATA1
         Volume Device: /dev/asm/oradata1-68
         State: ENABLED
         Size (MB): 1638400
         Resize Unit (MB): 64
         Redundancy: MIRROR
         Stripe Columns: 8
         Stripe Width (K): 1024
         Usage:
         Mountpath:

         Volume Name: ORADATA2
         Volume Device: /dev/asm/oradata2-68
         State: ENABLED
         Size (MB): 1638400
         Resize Unit (MB): 64
         Redundancy: MIRROR
         Stripe Columns: 8
         Stripe Width (K): 1024
         Usage:
         Mountpath:

         Volume Name: ORADATA3
         Volume Device: /dev/asm/oradata3-68
         State: ENABLED
         Size (MB): 1638400
         Resize Unit (MB): 64
         Redundancy: MIRROR
         Stripe Columns: 8
         Stripe Width (K): 1024
         Usage:
         Mountpath:

Diskgroup Name: RECO

         Volume Name: ORARECO1
         Volume Device: /dev/asm/orareco1-365
         State: ENABLED
         Size (MB): 716800
         Resize Unit (MB): 64
         Redundancy: MIRROR
         Stripe Columns: 8
         Stripe Width (K): 1024
         Usage:
         Mountpath:



ROOT

nó 1:

[grid@corpprduxoda1 ~]$ ls -l /dev/asm/
total 0
brwxrwx--- 1 root asmadmin 247,  34817 May 17 23:26 commonstore-68
brwxrwx--- 1 root asmadmin 247,  34818 May 18 18:02 oradata1-68
brwxrwx--- 1 root asmadmin 247,  34819 May 18 18:02 oradata2-68
brwxrwx--- 1 root asmadmin 247,  34820 May 18 18:01 oradata3-68
brwxrwx--- 1 root asmadmin 247, 186881 May 18 18:02 orareco1-365
brwxrwx--- 1 root asmadmin 247, 254977 May 19 15:19 oraredo1-498


[grid@corpprduxoda1 ~]$ /sbin/mkfs -t acfs /dev/asm/oradata1-68
mkfs.acfs: version                   = 18.0.0.0.0
mkfs.acfs: on-disk version           = 46.0
mkfs.acfs: volume                    = /dev/asm/oradata1-68
mkfs.acfs: volume size               = 1717986918400  (   1.56 TB )
mkfs.acfs: Format complete.
[grid@corpprduxoda1 ~]$ /sbin/mkfs -t acfs /dev/asm/oradata2-68
mkfs.acfs: version                   = 18.0.0.0.0
mkfs.acfs: on-disk version           = 46.0
mkfs.acfs: volume                    = /dev/asm/oradata2-68
mkfs.acfs: volume size               = 1717986918400  (   1.56 TB )
mkfs.acfs: Format complete.
[grid@corpprduxoda1 ~]$ /sbin/mkfs -t acfs /dev/asm/oradata3-68
mkfs.acfs: version                   = 18.0.0.0.0
mkfs.acfs: on-disk version           = 46.0
mkfs.acfs: volume                    = /dev/asm/oradata3-68
mkfs.acfs: volume size               = 1717986918400  (   1.56 TB )
mkfs.acfs: Format complete.
[grid@corpprduxoda1 ~]$ /sbin/mkfs -t acfs /dev/asm/orareco1-365
mkfs.acfs: version                   = 18.0.0.0.0
mkfs.acfs: on-disk version           = 46.0
mkfs.acfs: volume                    = /dev/asm/orareco1-365
mkfs.acfs: volume size               = 751619276800  ( 700.00 GB )
mkfs.acfs: Format complete.
[root@corpprduxoda1 backup]# /sbin/mkfs -t acfs /dev/asm/oraredo1-498
mkfs.acfs: version                   = 18.0.0.0.0
mkfs.acfs: on-disk version           = 46.0
mkfs.acfs: volume                    = /dev/asm/oraredo1-498
mkfs.acfs: volume size               = 107374182400  ( 100.00 GB )
mkfs.acfs: Format complete.


nos dois nós:

[root@corpprduxoda1 ~]# mkdir /oradata1
[root@corpprduxoda1 ~]# mkdir /oradata2
[root@corpprduxoda1 ~]# mkdir /oradata3
[root@corpprduxoda1 ~]# mkdir /orareco1
[root@corpprduxoda1 ~]# mkdir /oraredo1


[root@corpprduxoda1 ~]# chown oracle.oinstall /oradata1
[root@corpprduxoda1 ~]# chown oracle.oinstall /oradata2
[root@corpprduxoda1 ~]# chown oracle.oinstall /oradata3
[root@corpprduxoda1 ~]# chown oracle.oinstall /orareco1
[root@corpprduxoda1 ~]# chown oracle.oinstall /oraredo1


nó 1:

[root@corpprduxoda1 ~]# /u01/app/18.0.0.0/grid/bin/srvctl add filesystem -d /dev/asm/oradata1-68 -m /oradata1 -u oracle -fstype ACFS -autostart ALWAYS
[root@corpprduxoda1 ~]# /u01/app/18.0.0.0/grid/bin/srvctl add filesystem -d /dev/asm/oradata2-68 -m /oradata2 -u oracle -fstype ACFS -autostart ALWAYS
[root@corpprduxoda1 ~]# /u01/app/18.0.0.0/grid/bin/srvctl add filesystem -d /dev/asm/oradata3-68 -m /oradata3 -u oracle -fstype ACFS -autostart ALWAYS
[root@corpprduxoda1 ~]# /u01/app/18.0.0.0/grid/bin/srvctl add filesystem -d /dev/asm/orareco1-365 -m /orareco1 -u oracle -fstype ACFS -autostart ALWAYS
[root@corpprduxoda1 ~]# /u01/app/18.0.0.0/grid/bin/srvctl add filesystem -d /dev/asm/oraredo1-498 -m /oraredo1 -u oracle -fstype ACFS -autostart ALWAYS


[root@corpprduxoda1 ~]# /u01/app/18.0.0.0/grid/bin/srvctl start filesystem -d /dev/asm/oradata3-68
[root@corpprduxoda1 ~]# /u01/app/18.0.0.0/grid/bin/srvctl start filesystem -d /dev/asm/oradata2-68
[root@corpprduxoda1 ~]# /u01/app/18.0.0.0/grid/bin/srvctl start filesystem -d /dev/asm/oradata1-68
[root@corpprduxoda1 ~]# /u01/app/18.0.0.0/grid/bin/srvctl start filesystem -d /dev/asm/orareco1-365
[root@corpprduxoda1 ~]# /u01/app/18.0.0.0/grid/bin/srvctl start filesystem -d /dev/asm/oraredo1-498

[root@corpprduxoda1 ~]# /u01/app/18.0.0.0/grid/bin/crsctl stat res -t
[root@corpprduxoda1 backup]# /u01/app/18.0.0.0/grid/bin/crsctl stat res -t
--------------------------------------------------------------------------------
Name           Target  State        Server                   State details
--------------------------------------------------------------------------------
Local Resources
--------------------------------------------------------------------------------
ora.ASMNET1LSNR_ASM.lsnr
               ONLINE  ONLINE       corpprduxoda1            STABLE
               ONLINE  ONLINE       corpprduxoda2            STABLE
ora.DATA.COMMONSTORE.advm
               ONLINE  ONLINE       corpprduxoda1            STABLE
               ONLINE  ONLINE       corpprduxoda2            STABLE
ora.DATA.ORADATA1.advm
               ONLINE  ONLINE       corpprduxoda1            STABLE
               ONLINE  ONLINE       corpprduxoda2            STABLE
ora.DATA.ORADATA2.advm
               ONLINE  ONLINE       corpprduxoda1            STABLE
               ONLINE  ONLINE       corpprduxoda2            STABLE
ora.DATA.ORADATA3.advm
               ONLINE  ONLINE       corpprduxoda1            STABLE
               ONLINE  ONLINE       corpprduxoda2            STABLE
ora.DATA.dg
               ONLINE  ONLINE       corpprduxoda1            STABLE
               ONLINE  ONLINE       corpprduxoda2            STABLE
ora.LISTENER.lsnr
               ONLINE  ONLINE       corpprduxoda1            STABLE
               ONLINE  ONLINE       corpprduxoda2            STABLE
ora.RECO.ORARECO1.advm
               ONLINE  ONLINE       corpprduxoda1            STABLE
               ONLINE  ONLINE       corpprduxoda2            STABLE
ora.RECO.dg
               ONLINE  ONLINE       corpprduxoda1            STABLE
               ONLINE  ONLINE       corpprduxoda2            STABLE
ora.REDO.ORAREDO1.advm
               ONLINE  ONLINE       corpprduxoda1            STABLE
               ONLINE  ONLINE       corpprduxoda2            STABLE
ora.REDO.dg
               ONLINE  ONLINE       corpprduxoda1            STABLE
               ONLINE  ONLINE       corpprduxoda2            STABLE
ora.data.commonstore.acfs
               ONLINE  ONLINE       corpprduxoda1            mounted on /opt/orac
                                                             le/dcs/commonstore,S
                                                             TABLE
               ONLINE  ONLINE       corpprduxoda2            mounted on /opt/orac
                                                             le/dcs/commonstore,S
                                                             TABLE
ora.data.oradata1.acfs
               ONLINE  ONLINE       corpprduxoda1            mounted on /oradata1
                                                             ,STABLE
               ONLINE  ONLINE       corpprduxoda2            mounted on /oradata1
                                                             ,STABLE
ora.data.oradata2.acfs
               ONLINE  ONLINE       corpprduxoda1            mounted on /oradata2
                                                             ,STABLE
               ONLINE  ONLINE       corpprduxoda2            mounted on /oradata2
                                                             ,STABLE
ora.data.oradata3.acfs
               ONLINE  ONLINE       corpprduxoda1            mounted on /oradata3
                                                             ,STABLE
               ONLINE  ONLINE       corpprduxoda2            mounted on /oradata3
                                                             ,STABLE
ora.net1.network
               ONLINE  ONLINE       corpprduxoda1            STABLE
               ONLINE  ONLINE       corpprduxoda2            STABLE
ora.ons
               ONLINE  ONLINE       corpprduxoda1            STABLE
               ONLINE  ONLINE       corpprduxoda2            STABLE
ora.proxy_advm
               ONLINE  ONLINE       corpprduxoda1            STABLE
               ONLINE  ONLINE       corpprduxoda2            STABLE
ora.reco.orareco1.acfs
               ONLINE  ONLINE       corpprduxoda1            mounted on /orareco1
                                                             ,STABLE
               ONLINE  ONLINE       corpprduxoda2            mounted on /orareco1
                                                             ,STABLE
ora.redo.oraredo1.acfs
               ONLINE  ONLINE       corpprduxoda1            mounted on /oraredo1
                                                             ,STABLE
               ONLINE  ONLINE       corpprduxoda2            mounted on /oraredo1
                                                             ,STABLE
--------------------------------------------------------------------------------
Cluster Resources
--------------------------------------------------------------------------------
ora.LISTENER_SCAN1.lsnr
      1        ONLINE  ONLINE       corpprduxoda2            STABLE
ora.LISTENER_SCAN2.lsnr
      1        ONLINE  ONLINE       corpprduxoda1            STABLE
ora.asm
      1        ONLINE  ONLINE       corpprduxoda1            Started,STABLE
      2        ONLINE  ONLINE       corpprduxoda2            Started,STABLE
ora.corpprduxoda1.vip
      1        ONLINE  ONLINE       corpprduxoda1            STABLE
ora.corpprduxoda2.vip
      1        ONLINE  ONLINE       corpprduxoda2            STABLE
ora.cvu
      1        ONLINE  ONLINE       corpprduxoda1            STABLE
ora.qosmserver
      1        OFFLINE OFFLINE                               STABLE
ora.scan1.vip
      1        ONLINE  ONLINE       corpprduxoda2            STABLE
ora.scan2.vip
      1        ONLINE  ONLINE       corpprduxoda1            STABLE
--------------------------------------------------------------------------------

[root@corpprduxoda1 backup]# df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/VolGroupSys-LogVolRoot
                       30G   11G   18G  39% /
tmpfs                 126G  1.1G  125G   1% /dev/shm
/dev/md0              477M   44M  409M  10% /boot
/dev/mapper/VolGroupSys-LogVolOpt
                       59G   12G   45G  22% /opt
/dev/mapper/VolGroupSys-LogVolU01
                       99G   80G   14G  86% /u01
/dev/asm/commonstore-68
                      5.0G  495M  4.6G  10% /opt/oracle/dcs/commonstore
/dev/asm/oradata3-68  1.6T  3.7G  1.6T   1% /oradata3
/dev/asm/oradata2-68  1.6T  3.7G  1.6T   1% /oradata2
/dev/asm/oradata1-68  1.6T  3.7G  1.6T   1% /oradata1
/dev/asm/orareco1-365
                      700G  1.9G  699G   1% /orareco1
/dev/asm/oraredo1-498
                      100G  688M  100G   1% /oraredo1

EBSPRD.__pga_aggregate_target=16106127360
EBSPRD.__sga_target=42949672960


corpprduxoda-scan

srvctl add database -d RMAN11 -o /u01/app/oracle/product/11.2.0.4/dbhome_7 -p /orareco1/RMAN11/spfile/spfileRMAN11.ora -c SINGLE -x corpprduxoda2
srvctl add database -d ASTPRD -o /u01/app/oracle/product/11.2.0.4/dbhome_3 -p /oradata2/ASTPRD/spfile/spfileASTPRD.ora -c SINGLE -x corpprduxoda2
srvctl add database -d CRMPRD -o /u01/app/oracle/prfoduct/11.2.0.4/dbhome_7 -p /orareco1/CRMPRD/spfile/spfileCRMPRD.ora -c SINGLE -x corpprduxoda2
srvctl add database -d NFEPRD -o /u01/app/oracle/product/11.2.0.4/dbhome_4 -p /orareco1/NFEPRD/spfile/spfileNFEPRD.ora -c SINGLE -x corpprduxoda2
srvctl add database -d RPCPRD -o /u01/app/oracle/product/11.2.0.4/dbhome_4 -p /oradata3/RPCPRD/spfile/spfileRPCPRD.ora -c SINGLE -x corpprduxoda2
srvctl add database -d SFWPRD -o /u01/app/oracle/product/11.2.0.4/dbhome_3 -p /oradata3/SFWPRD/spfile/spfileSFWPRD.ora -c SINGLE -x corpprduxoda1
srvctl add database -d OBIPRD -o /u01/app/oracle/product/11.2.0.4/dbhome_4 -p /oradata1/OBIPRD/spfile/spfileOBIPRD.ora -c SINGLE -x corpprduxoda2


srvctl add database -d XRTPRD -o /u01/app/oracle/product/11.2.0.4/dbhome_3 -p /oradata2/XRTPRD/spfile/spfileXRTPRD.ora -c RAC 
srvctl add instance -d XRTPRD -i  XRTPRD_1 -n corpprduxoda1
srvctl add service -d XRTPRD -s  xrtprd_racone -r XRTPRD_1
srvctl convert database -d XRTPRD -c RACONENODE -i XRTPRD_1 -w 60
srvctl modify database -d XRTPRD -e 'corpprduxoda1','corpprduxoda2'
srvctl start database -d XRTPRD -n corpprduxoda1


srvctl add database -d FPWPRD -o /u01/app/oracle/product/11.2.0.4/dbhome_3 -p /oradata1/FPWPRD/spfile/spfileFPWPRD.ora -c RAC 
srvctl add instance -d FPWPRD -i  FPWPRD_1 -n corpprduxoda2
srvctl add service -d FPWPRD -s  FPWPRD_1 -r FPWPRD_1
srvctl convert database -d FPWPRD -c RACONENODE -i FPWPRD_1 -w 60
srvctl modify database -d FPWPRD -e 'corpprduxoda1','corpprduxoda2'
srvctl start database -d FPWPRD -n corpprduxoda2


srvctl add database -d NGIPRD -o /u01/app/oracle/product/11.2.0.4/dbhome_3 -p /oradata2/NGIPRD/spfile/spfileNGIPRD.ora -c RAC 
srvctl add instance -d NGIPRD -i  NGIPRD_1 -n corpprduxoda2
srvctl add service -d NGIPRD -s  NGIPRD_1 -r NGIPRD_1
srvctl convert database -d NGIPRD -c RACONENODE -i NGIPRD_1 -w 60
srvctl modify database -d NGIPRD -e 'corpprduxoda1','corpprduxoda2'
srvctl start database -d NGIPRD -n corpprduxoda2

srvctl add database -d ODIPRD -o /u01/app/oracle/product/11.2.0.4/dbhome_2 -p /oradata2/ODIPRD/spfile/spfileODIPRD.ora -c RAC 
srvctl add instance -d ODIPRD -i  ODIPRD_1 -n corpprduxoda1
srvctl add service -d ODIPRD -s  odiprd_racone -r ODIPRD_1
srvctl convert database -d ODIPRD -c RACONENODE -i ODIPRD_1 -w 60
srvctl modify database -d ODIPRD -e 'corpprduxoda1','corpprduxoda2'
srvctl start database -d ODIPRD -n corpprduxoda1

srvctl add database -d SOAPRD -o /u01/app/oracle/product/11.2.0.4/dbhome_2 -p /oradata2/SOAPRD/spfile/spfileSOAPRD.ora -c RAC 
srvctl add instance -d SOAPRD -i  SOAPRD_1 -n corpprduxoda1
srvctl add service -d SOAPRD -s  SOAPRD_racone -r SOAPRD_1
srvctl convert database -d SOAPRD -c RACONENODE -i SOAPRD_1 -w 60
srvctl modify database -d SOAPRD -e 'corpprduxoda1','corpprduxoda2'
srvctl start database -d SOAPRD -n corpprduxoda1

srvctl add database -db RMAN12 -oraclehome /u01/app/oracle/product/12.1.0.2/dbhome_1 \
-spfile /orareco1/RMAN12/spfile/spfileRMAN12.ora \
-pwfile /u01/app/oracle/product/12.1.0.2/dbhome_1/dbs/orapwRMAN12 -dbtype SINGLE -node corpprduxoda2

srvctl add database -d EBSPRD -o /u01/app/oracle/product/11.2.0.4/dbhome_5 -p /oradata1/EBSPRD/spfile/spfileEBSPRD.ora -c RAC 
srvctl add instance -d EBSPRD -i  EBSPRD1 -n corpprduxoda1
srvctl add instance -d EBSPRD -i  EBSPRD2 -n corpprduxoda2
sqlplus / as sysdba 
  alter system set thread=2 scope=spfile sid='EBSPRD2';
srvctl start database -d EBSPRD

spfile='/oradata1/EBSPRD/spfile/spfileEBSPRD.ora'
*.sga_max_size=34359738368
*.sga_target=17179869184

alter system set sga_target=17179869184 scope=spfile;
alter system set pga_aggregate_target=4294967296 scope=spfile;



run
{
ALLOCATE CHANNEL ch01 DEVICE TYPE sbt_tape PARMS='SBT_LIBRARY=/usr/openv/netbackup/bin/libobk.so64';
ALLOCATE CHANNEL ch02 DEVICE TYPE sbt_tape PARMS='SBT_LIBRARY=/usr/openv/netbackup/bin/libobk.so64';
ALLOCATE CHANNEL ch03 DEVICE TYPE sbt_tape PARMS='SBT_LIBRARY=/usr/openv/netbackup/bin/libobk.so64';
ALLOCATE CHANNEL ch04 DEVICE TYPE sbt_tape PARMS='SBT_LIBRARY=/usr/openv/netbackup/bin/libobk.so64';
send 'NB_ORA_SERV=corpprd2knbak1.grpcom.local';
send 'NB_ORA_CLIENT=corpprduxoda2-vm.grpcom.local';
send 'NB_ORA_POLICY=Oracle_RMAN11';
sql 'alter system archive log current';
crosscheck archivelog all;
backup as backupset tag backup_full database;
backup spfile format '${ORACLE_SID}_%d-%I-%s-%Y%M%D.ora';
backup archivelog all format '${ORACLE_SID}_%d-%I-%s-%Y%M%D.arc';
backup current controlfile format '${ORACLE_SID}_%d-%I-%s-%Y%M%D.ctl';
delete noprompt archivelog all backed up 1 times to sbt_tape;
delete noprompt obsolete;
delete noprompt expired backup;
crosscheck archivelog all;
crosscheck backup;
crosscheck copy;
release channel ch01;
release channel ch02;
release channel ch03;
release channel ch04;
}


run
{
ALLOCATE CHANNEL ch01 DEVICE TYPE sbt_tape PARMS='SBT_LIBRARY=/usr/openv/netbackup/bin/libobk.so64';
ALLOCATE CHANNEL ch02 DEVICE TYPE sbt_tape PARMS='SBT_LIBRARY=/usr/openv/netbackup/bin/libobk.so64';
ALLOCATE CHANNEL ch03 DEVICE TYPE sbt_tape PARMS='SBT_LIBRARY=/usr/openv/netbackup/bin/libobk.so64';
ALLOCATE CHANNEL ch04 DEVICE TYPE sbt_tape PARMS='SBT_LIBRARY=/usr/openv/netbackup/bin/libobk.so64';
send 'NB_ORA_SERV=corpprd2knbak1.grpcom.local';
send 'NB_ORA_CLIENT=corpprduxoda2-vm.grpcom.local';
send 'NB_ORA_POLICY=Oracle_RMAN11';
sql 'alter system archive log current';
crosscheck archivelog all;
backup as backupset tag backup_full database;
backup spfile format '${ORACLE_SID}_%d-%I-%s-%Y%M%D.ora';
backup archivelog all format '${ORACLE_SID}_%d-%I-%s-%Y%M%D.arc';
backup current controlfile format '${ORACLE_SID}_%d-%I-%s-%Y%M%D.ctl';
delete noprompt archivelog all backed up 1 times to sbt_tape;
delete noprompt obsolete;
delete noprompt expired backup;
crosscheck archivelog all;
crosscheck backup;
crosscheck copy;
release channel ch01;
release channel ch02;
release channel ch03;
release channel ch04;
}




0028
0066504-0

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "SYS"."COLETA_STATS_STALE" IS
BEGIN
  DECLARE
    CURSOR c_tables IS
      SELECT m.table_owner, m.table_name
        FROM dba_tab_modifications m, dba_tables t, dba_tab_statistics s
       WHERE t.owner = m.table_owner
         AND t.table_name = m.table_name
         AND t.owner = s.owner
         AND t.table_name = s.table_name
         AND m.inserts + m.updates + m.deletes > 1
         AND t.owner NOT IN ('SYS', 'SYSTEM')
         AND ROUND(((m.inserts + m.updates + m.deletes) * 100) /
                   (DECODE(NVL(t.num_rows, 0), 0, 1, t.num_rows))) > 11
         AND t.TEMPORARY = 'N'
         AND IOT_TYPE IS NULL
         AND s.stattype_locked IS NULL;
    ret_c_tables c_tables%ROWTYPE;
  BEGIN
    EXECUTE IMMEDIATE 'alter session set ddl_lock_timeout=60';
    EXECUTE IMMEDIATE 'truncate table stats_stale_log';
    OPEN c_tables;
    LOOP
      FETCH c_tables
        INTO ret_c_tables;
      EXIT WHEN c_tables%NOTFOUND;
      INSERT INTO stats_stale_log
      VALUES
        (SYSDATE,
         'In??cio da Coleta da tabela ' || ret_c_tables.table_owner || '.' ||
         ret_c_tables.table_name);
      DBMS_STATS.GATHER_TABLE_STATS(ownname          => '"' ||
                                                        ret_c_tables.table_owner || '"',
                                    tabname          => '"' ||
                                                        ret_c_tables.table_name || '"',
                                    method_opt       => 'for all columns size auto',
                                    degree           => 2,
                                    estimate_percent => 40,
                                    cascade          => TRUE);
      INSERT INTO stats_stale_log
      VALUES
        (SYSDATE,
         'Fim da Coleta da tabela ' || ret_c_tables.table_owner || '.' ||
         ret_c_tables.table_name);
      COMMIT;
    END LOOP;
    CLOSE c_tables;
  END;
END coleta_stats_stale;
/


ASTPRD - 22G
CRMPRD - 450G







run
{
ALLOCATE CHANNEL ch01 DEVICE TYPE sbt_tape PARMS='SBT_LIBRARY=/usr/openv/netbackup/bin/libobk.so64';



alter database rename file '/oracle/PR3/sapdata7/sr3_43/sr3.data43' to '/sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_43/sr3.data43';
alter database rename file '/oraredo1/CRMPRD/redo/log5b.rdo' to '/oraredo1/CRMPRD/redo/mirror/log5b.rdo';
alter database rename file '/oraredo1/CRMPRD/redo/log6b.rdo' to '/oraredo1/CRMPRD/redo/mirror/log6b.rdo';


APPS.PB_CONTAINER_FATURA
ECOMEX_CONTAINER_FATURA_V


corpprduxoda-scan
 
 1168994

 select count(*), event from gv$session 
 where status ='ACTIVE' and username is not null group by event order by 1


alter database rename file '/oraredo1/RMAN11/redo/redo4b.rdo' to '/oraredo1/RMAN11/redo/mirror/redo4b.rdo';
alter database rename file '/oraredo1/RMAN11/redo/redo5b.rdo' to '/oraredo1/RMAN11/redo/mirror/redo5b.rdo';
alter database rename file '/oraredo1/RMAN11/redo/redo6b.rdo' to '/oraredo1/RMAN11/redo/mirror/redo6b.rdo';


alter database rename file '/u02/NGIPRD/redo/o1_mf_1_cqnv89n3_.log' to '/oraredo1/NGIPRD/redo/redo1a.log';
alter database rename file '/u02/NGIPRD/redo/o1_mf_2_cqnv8f5l_.log' to '/oraredo1/NGIPRD/redo/redo2a.log';
alter database rename file '/u02/NGIPRD/redo/o1_mf_3_cqnv8jrw_.log' to '/oraredo1/NGIPRD/redo/redo3a.log';
alter database rename file '/u02/NGIPRD/redo/o1_mf_4_cqnv8msf_.log' to '/oraredo1/NGIPRD/redo/redo4a.log';

alter database add logfile member '/oraredo1/OBIPRD/redo/mirror/log5b.rdo' to group 5;
alter database add logfile member '/oraredo1/OBIPRD/redo/log2a.rdo' to group 2;
alter database add logfile member '/oraredo1/OBIPRD/redo/log3a.rdo' to group 3;
alter database add logfile member '/oraredo1/OBIPRD/redo/log4a.rdo' to group 4;


alter database rename file '/oraredo1/RMAN12/redo/o1_mf_1_g2dt4px6_.log' to '/oraredo1/RMAN12/redo/redo1a.log';
alter database rename file '/oraredo1/RMAN12/redo/o1_mf_2_g2dt4tlx_.log' to '/oraredo1/RMAN12/redo/redo2a.log';
alter database rename file '/oraredo1/RMAN12/redo/o1_mf_3_g2dt4ycf_.log' to '/oraredo1/RMAN12/redo/redo3a.log';
alter database rename file '/oraredo1/RMAN12/redo/redo1b.log' to '/oraredo1/RMAN12/redo/mirror/redo1b.log';
alter database rename file '/oraredo1/RMAN12/redo/redo2b.log' to '/oraredo1/RMAN12/redo/mirror/redo2b.log';
alter database rename file '/oraredo1/RMAN12/redo/redo3b.log' to '/oraredo1/RMAN12/redo/mirror/redo3b.log';

alter database add logfile thread 1 group 1 ('/oradata/msaf/MSAF/redo/redo1a.rdo') size 5g;
alter database add logfile thread 1 group 2 ('/oradata/msaf/MSAF/redo/redo2a.rdo') size 5g;
alter database add logfile thread 1 group 3 ('/oradata/msaf/MSAF/redo/redo3a.rdo') size 5g;
alter database add logfile thread 1 group 4 ('/oradata/msaf/MSAF/redo/redo4a.rdo') size 5g;
alter database add logfile thread 1 group 5 ('/oradata/msaf/MSAF/redo/redo5a.rdo') size 5g;
alter database add logfile thread 1 group 6 ('/oradata/msaf/MSAF/redo/redo6a.rdo') size 5g;
alter database add logfile thread 1 group 7 ('/oradata/msaf/MSAF/redo/redo7a.rdo') size 5g;

alter database add logfile thread 1 group 1 ('/oradata/msaf/MSAF/redo1a.rdo','/oraredo1/RPCPRD/redo/mirror/redo1b.rdo') size 500m;
alter database add logfile thread 1 group 2 ('/oraredo1/RPCPRD/redo/redo2a.rdo','/oraredo1/RPCPRD/redo/mirror/redo2b.rdo') size 500m;
alter database add logfile thread 1 group 3 ('/oraredo1/RPCPRD/redo/redo3a.rdo','/oraredo1/RPCPRD/redo/mirror/redo3b.rdo') size 500m;

alter database add logfile thread 2 group 6 ('/oraredo1/EBSPRD/redo/redo20a.rdo','/oraredo1/EBSPRD/redo/mirror/redo20b.rdo') size 1G;
alter database add logfile thread 2 group 21 ('/oraredo1/EBSPRD/redo/redo21a.rdo','/oraredo1/EBSPRD/redo/mirror/redo21b.rdo') size 1G;
alter database add logfile thread 2 group 22 ('/oraredo1/EBSPRD/redo/redo22a.rdo','/oraredo1/EBSPRD/redo/mirror/redo22b.rdo') size 1G;
alter database add logfile thread 2 group 23 ('/oraredo1/EBSPRD/redo/redo23a.rdo','/oraredo1/EBSPRD/redo/mirror/redo23b.rdo') size 1G;

alter database enable public thread 2

oinstall:x:54321:oracle
dba:x:54322:oracle,oragent
oper:x:54323:oracle



-- relink to use RAC
-- remove RAC
-- uninstall RAC
4. Execute the following to relink:

 cd $ORACLE_HOME/rdbms/lib
 make -f ins_rdbms.mk rac_on ioracle

 -- to revert previous operation.
 cd $ORACLE_HOME/rdbms/lib
  make -f ins_rdbms.mk rac_off ioracle
 make -f ins_rdbms.mk ioracle



 COL log_id              FORMAT 9999   HEADING 'Log#'
COL log_date            FORMAT A32    HEADING 'Log Date'
COL owner               FORMAT A06    HEADING 'Owner'
COL job_name            FORMAT A30    HEADING 'Job'
COL status              FORMAT A10    HEADING 'Status'
COL actual_start_date   FORMAT A40    HEADING 'Actual|Start|Date'
COL error#              FORMAT 999999 HEADING 'Error|Nbr'
col REQ_START_DATE FORMAT A40    HEADING 'REQ|Start|Date'
col REQ_START_DATE FORMAT A40    HEADING 'Additional|Info'

TTITLE 'Scheduled Tasks:'

select * from
(select
   log_date,
   job_name,
   status,
   req_start_date,
   actual_start_date,
   run_duration--,
   sADDITIONAL_INFO
from
   dba_scheduler_job_run_details
where
   --owner='SYS'
   --job_name = 'COLETA_ESTATISTICA_PARCIAL'
   job_name like '%APRI_RECEBIMENTO_RI%'
  -- job_action like '%UPDATE_PORT_STATUS_TO_RPTG_DAY%'
 -- and status <> 'SUCCEEDED'
  -- and actual_start_date > sysdate -1
order by
   actual_start_date desc) v
where rownum <=1;

mongo "mongodb+srv://cluster0.j2c4m.mongodb.net/admin" --username m001-student



dbms_stats.gather_table_stats(ownname => 'XLA', tabname =>'XLA_AE_LINES_GT', estimate_percent =>
            DBMS_STATS.AUTO_SAMPLE_SIZE, method_opt => 'FOR ALL COLUMNS SIZEAUTO', cascade => TRUE);


select STATTYPE_LOCKED, NUM_ROWS, AVG_ROW_LEN, CHAIN_CNT, SAMPLE_SIZE, LAST_ANALYZED, STALE_STATS 
from dba_tab_statistics where owner='XLA' and table_name='XLA_AE_LINES_GT';

select * from 



Load Profile              Per Second    Per Transaction    Per Exec    Per Call
~~~~~~~~~~~~      ------------------  ----------------- ----------- -----------
      DB time(s):               12.9                0.4        0.00        0.00
       DB CPU(s):                3.6                0.1        0.00        0.00
       Redo size:        1,030,935.2           31,147.1
   Logical reads:          723,146.8           21,848.1
   Block changes:            4,984.7              150.6
  Physical reads:            7,968.7              240.8
 Physical writes:              164.9                5.0
      User calls:            3,525.4              106.5
          Parses:            1,137.4               34.4
     Hard parses:               44.8                1.4
W/A MB processed:               86.1                2.6
          Logons:                3.3                0.1
        Executes:            3,545.4              107.1
       Rollbacks:                0.7                0.0
    Transactions:               33.1



  select trunc(s.sample_time, 'HH'), s.instance_number, u.username, count(*) 
  from dba_hist_active_sess_history s join dba_users u using (user_id)
  where s.sample_time > sysdate -1 and s.machine like 'exapbg%' 
  group by trunc(s.sample_time, 'HH'), s.instance_number , u.username order by 4 desc
  FETCH FIRST 20 ROWS ONLY;


TRUNC(S.SAMPLE_ INSTANCE_NUMBER USERNAME               COUNT(*)
--------------- --------------- -------------------- ----------
26-may-21 10:00               2 AC_APEX                    2771
25-may-21 22:00               1 SYS                        1971
25-may-21 16:00               2 AC_EXPEDICAO               1351
26-may-21 11:00               2 AC_APEX                    1350
25-may-21 17:00               2 AC_APEX                    1323
26-may-21 10:00               2 AC_EXPEDICAO               1316
25-may-21 15:00               2 AC_APEX                    1308
25-may-21 16:00               2 AC_APEX                    1277
26-may-21 12:00               2 AC_APEX                    1273
26-may-21 13:00               2 AC_APEX                    1268
25-may-21 17:00               2 AC_EXPEDICAO               1200
26-may-21 09:00               2 AC_APEX                    1177
26-may-21 00:00               1 SYSBACKUP                  1119
26-may-21 08:00               2 AC_APEX                    1039
26-may-21 07:00               2 AC_APEX                     955
25-may-21 18:00               2 AC_APEX                     873
25-may-21 21:00               2 AC_APEX                     843
25-may-21 19:00               2 AC_APEX                     842
25-may-21 20:00               2 AC_APEX                     797
26-may-21 06:00               2 AC_APEX                     792


-- criar perfstat statspack
create tablespace perfstat  
datafile '/oracle/WINT/datafile/perfstat.dbf'    
size 1g;

 @?/rdbms/admin/spcreate.sql

 execute statspack.snap;

 BEGIN
   DBMS_SCHEDULER.CREATE_SCHEDULE(
   schedule_name   => 'STATSPACK_SNAP_30min',
   repeat_interval => 'FREQ=MINUTELY;BYMINUTE=00,30');
END;
/
# Then, create the job itself:
BEGIN
    DBMS_SCHEDULER.CREATE_JOB (
    job_name      => 'sp_snapshot',
    job_type      => 'STORED_PROCEDURE',
    job_action    => 'statspack.snap',
    schedule_name => 'STATSPACK_SNAP_30min',
    auto_drop     =>  FALSE,
    comments      => 'Statspack collection');
END;
/
# We should enable the job as follows:
BEGIN DBMS_SCHEDULER.ENABLE('sp_snapshot');
END;
/ 

--conn perfstat@PDBWMS
--8C8F0C1D7AA38532

conn perfstat/perfstat
@?/rdbms/admin/spreport
@?/rdbms/admin/sprepsql


6mcpb06rctk0x
8a4dfyt013wmb
3- Using SQL Profile
--------------------
Plan hash value: 3713865720

---------------------------------------------------------------------------------------
| Id  | Operation                    | Name                   | Rows  | Bytes | Cost  |
---------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT             |                        |   307K|    55M| 24865 |
|   1 |  NESTED LOOPS                |                        |   307K|    55M| 24865 |
|   2 |   TABLE ACCESS BY INDEX ROWID| CHAMADO                |   307K|    54M| 24865 |
|*  3 |    INDEX RANGE SCAN          | XIF2CHAMADO_CPFCNPJ    | 55308 |       |   229 |
|*  4 |   INDEX UNIQUE SCAN          | PK_CLIENTE_CORPORATIVO |     1 |     4 |       |
---------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   3 - access("CHAMADO0_"."CPFCNPJ" LIKE :1)
       filter("CHAMADO0_"."CPFCNPJ" LIKE :1)
   4 - access("CHAMADO0_"."ID_CLIENTE_CORPORATIVO"="CLIENTECOR1_"."ID_CLIENTE_C
              ORPORATIVO")





   DBMS_SQLTUNE.REPORT_TUNING_TASK('8A4DFYT013WMB_TUNING_TASK11')
----------------------------------------------------------------------------------------------------
GENERAL INFORMATION SECTION
-------------------------------------------------------------------------------
Tuning Task Name   : 8a4dfyt013wmb_tuning_task11
Tuning Task Owner  : SYS
Workload Type      : Single SQL Statement
Scope              : COMPREHENSIVE
Time Limit(seconds): 500
Completion Status  : COMPLETED
Started at         : 05/27/2021 11:46:45
Completed at       : 05/27/2021 11:47:04

-------------------------------------------------------------------------------
Schema Name   : TAKI
Container Name: TAKI
SQL ID        : 8a4dfyt013wmb
SQL Text      : select chamado0_.id_chamado as id1_4_, chamado0_.caso99 as
                caso2_4_, chamado0_.cd_produto_cliente as cd3_4_,
                chamado0_.cd_tipo_origem_atendimento as cd4_4_,
                chamado0_.id_cliente_corporativo as id29_4_,
                chamado0_.numero_contrato as numero5_4_, chamado0_.cpfcnpj as
                cpfcnpj4_, chamado0_.data_cadastro as data7_4_,
                chamado0_.data_fim_contrato as data8_4_,
                chamado0_.data_identificacao as data9_4_,
                chamado0_.data_inicio_contrato as data10_4_,
                chamado0_.ddd_fone_ura as ddd11_4_,
                chamado0_.ddd_telefone_celular as ddd12_4_,
                chamado0_.ddd_telefone_residencial as ddd13_4_,
                chamado0_.email as email4_, chamado0_.fone_ura as fone15_4_,
                chamado0_.id_central_cliente as id16_4_,
                chamado0_.id_parceiro as id17_4_,
                chamado0_.id_produto_chamado as id18_4_,
                chamado0_.numero_identificacao as numero19_4_,
                chamado0_.keydb as keydb4_, chamado0_.limite_contrato_excedido
                 as limite21_4_, chamado0_.modo_confirmacao as modo22_4_,
                chamado0_.nome as nome4_, chamado0_.nr_apolice as nr24_4_,
                chamado0_.id_produto as id30_4_, chamado0_.produto_modelo as
                produto25_4_, chamado0_.id_chamado_status as id31_4_,
                chamado0_.telefone_celular as telefone26_4_,
                chamado0_.telefone_residencial as telefone27_4_,
                chamado0_.id_usuario as id32_4_, chamado0_.vl_pessoa as
                vl28_4_ from TAKI.chamado chamado0_ inner join
                TAKI.cliente_corporativo clientecor1_ on
                chamado0_.id_cliente_corporativo=clientecor1_.id_cliente_corpo
                rativo where chamado0_.cpfcnpj like :1
Bind Variables: :
 1 -  (VARCHAR2(32)):%63609363800%

-------------------------------------------------------------------------------
FINDINGS SECTION (2 findings)
-------------------------------------------------------------------------------

1- SQL Profile Finding (see explain plans section below)
--------------------------------------------------------
  Foram encontrados 2 planos de execuc?o potencialmente melhores para esta
  instruc?o. Escolha um dos seguintes perfis de SQL para implementac?o.

  Recommendation (estimated benefit: 84.46%)
  ------------------------------------------
  - Considere a aceitac?o do perfil SQL recomendado.
    execute dbms_sqltune.accept_sql_profile(task_name =>
            '8a4dfyt013wmb_tuning_task11', task_owner => 'SYS', replace =>
            TRUE);

  Validation results
  ------------------
  O SQL profile foi testado executando-se tanto o seu plano quanto o plano
  original e medindo suas respectivas estatisticas de execuc?o. Um plano pode
  ter sido somente parcialmente executado se o outro puder ser executado ate a
  conclus?o em menos tempo.

                           Original Plan  With SQL Profile  % Improved
                           -------------  ----------------  ----------
  Completion Status:            COMPLETE          COMPLETE
  Elapsed Time (s):            1.498735           .919718      38.63 %
  CPU Time (s):                1.498507           .919389      38.64 %
  User I/O Time (s):             .25656                 0        100 %
  Buffer Gets:                   163206             25287       84.5 %
  Physical Read Requests:          1288                 0        100 %
  Physical Write Requests:            0                 0
  Physical Read Bytes:       1336901632                 0        100 %
  Physical Write Bytes:               0                 0
  Rows Processed:                     1                 1
  Fetches:                            1                 1
  Executions:                         1                 1

select sql_id from 
(SELECT SQL_ID,
SUBSTR(SQL_TEXT, 1, 50) AS SQL_TEXT,
MODULE,
BUFFER_GETS,
CAST(RATIO_TO_REPORT(BUFFER_GETS) OVER () * 100 AS NUMERIC(10,2)) AS PERC
FROM V$SQL
WHERE PARSING_SCHEMA_NAME <> 'ZABBIX'
ORDER BY BUFFER_GETS DESC)
WHERE ROWNUM <= 10


create index TAKI.TB_CLIENTE_CONTRATO_PGTO_IX1 on TAKI.TB_CLIENTE_CONTRATO_PGTO("CD_CONTROLE_CLIENTE_PARCEIRO");


  94fca75e-6b35-4575-af0d-4ce05b1c14ac


  select inst_id,sql_id,plan_hash_value,CHILD_NUMBER,executions,round(elapsed_time/executions/1000000,3) time_per_exec,
round(buffer_gets/executions) buff_per_exec,
       round(disk_reads/executions) disk_r_per_exec
  from gv$sql where sql_id='98czdxm7htqk2'
  order by 1;



  SELECT "A1"."ID_LOTE_ADERENCIA","A1"."NR_VERSAO","A1"."NR_VERSAO_MAX","A1"."ORGANIZATION_ID","A1"."PLANT_CODE",
  "A1"."DT_COMPETENCIA","A1"."INVENTORY_ITEM_ID","A1"."CD_PRODUTO","A1"."DS_PRODUTO","A1"."ITEM_TYPE",
  "A1"."PRIMARY_UOM_CODE","A1"."DS_TIPOLOGIA","A1"."DS_FORMATO","A1"."QT_PLANEJADO",
  "A1"."QT_PLAN_TOL_POST","A1"."QT_PLAN_TOL_ANT","A1"."QT_EXECUTADO","A1"."QT_REALIZADO","A1"."QT_VARIACAO",
  "A1"."QT_ADERENTE","A1"."PR_ADERENTE","A1"."CREATION_DATE","A1"."CREATED_BY","A1"."LAST_UPDATE_DATE",
  "A1"."LAST_UPDATED_BY","A1"."DT_INICIO","A1"."DT_FINAL","A1"."DT_FINAL_FLAT","A1"."LINHA","A1"."MAIOR_DT_REAL",
  "A1"."MENOR_DT_REAL","A1"."TX_ADERENTE" 
  FROM "AC_APEX"."SGF_RISCO_ADERENCIA_TV" "A1" 
  WHERE "A1"."PLANT_CODE"=NVL(:B2,"A1"."PLANT_CODE") 
  AND INSTR("A1"."DS_FORMATO",NVL(:B1,"A1"."DS_FORMATO"))>0 ORDER BY "A1"."TX_ADERENTE","A1"."DT_FINAL_FLAT"


SGF_ADE_PROD_REALIZADA

 FROM SGF_ADE_PROD_PLANEJADA_EVT app, SGF_ADE_ADERENCIA_PROD_EVT saa

 SGF_ADE_PROD_REALIZADA_EVT



   CREATE TABLE "VETORH"."R034ADM"
   (    "NUMEMP" NUMBER(4,0) NOT NULL ENABLE,
        "TIPCOL" NUMBER(1,0) NOT NULL ENABLE,
        "NUMCAD" NUMBER(9,0) NOT NULL ENABLE,
        "DATADM" DATE,
        "ADMESO" NUMBER(1,0),
        "INDADM" NUMBER(1,0),
        "CNPJAN" NUMBER(15,0),
        "ADMANT" DATE,
        "MATANT" VARCHAR2(30),
        "ONUSCE" NUMBER(1,0),
        "CATANT" NUMBER(3,0),
        "RESONU" VARCHAR2(1),
        "SEGDES" NUMBER(1,0),
        "TINANT" NUMBER(1,0),
         CONSTRAINT "CP_R034ADM" PRIMARY KEY ("NUMEMP", "TIPCOL", "NUMCAD")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TSD_VETOR"  ENABLE
   ) SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "TSD_VETOR"
/

select * from VETORH.R034ADM
where numcad in (
803,
680,
718,
637,
744,
813,
761,
682,
585,
599,
780,
734,
597,
644,
630,
789,
641,
648,
256,
714,
586,
683,
619,
797,
703
);



 select sess.inst_id, sess.sid, sess.serial# , sess.username, 
 sess.osuser, sess.machine, sess.program, sess.last_call_et, sql.sql_fulltext 
 from gv$session sess join gv$sql sql using(sql_id) 
 where sess.event='SQL*Net message from dblink'
 order by sess.last_call_et;

INSERT /*+ BYPASS_RECURSIVE_CHECK */ INTO "APEX_PORTALRI"."APRI_RMA_PB_VM" select * from APRI_RMA_PB_V
INSERT /*+ BYPASS_RECURSIVE_CHECK */ INTO "APEX_PORTALRI"."APRI_SUMARIO_OV_PB_VM" select * from APRI_SUMARIO_OV_PB_V



SELECT * FROM SGF_RISCO_ADERENCIA_TV WHERE PLANT_CODE = NVL(:B2 , PLANT_CODE) 
AND INSTR(DS_FORMATO, NVL(:B1 , DS_FORMATO)) > 0 ORDER BY TX_ADERENTE, DT_FINAL_FL...


SELECT MAX(DT_COMPETENCIA) FROM SGF_CONSULTA_ADERENCIA_TV WHERE INVENTORY_ITEM_I


select sql_id from gv$sql where sql_fulltext 
like 'SELECT DISTINCT CASE WHEN HBSAC_ATEND.COD_EMP = 3 THEN (SELECT LTRIM(RTRIM(SUBST%';

select
    inst_id,
    SID,
    serial#,
    username,
    --osuser,
    machine,
    program,
    process,
    --blocking_session as bl,
    to_char(LOGON_TIME, 'DDMM - HH24:MI') as tim,
    LAST_CALL_ET/60 et_min,
    --BLOCKING_SESSION,
    P1,
    EVENT,
    SECONDS_IN_WAIT,
    status,
    sql_id,
    prev_sql_id
    from gv$session
    where
    type <> 'BACKGROUND'
    and sql_id in ('2va4uxrj78g2d','3ub3kw40kbuab')
    order by tim
    /


select owner,object_name,object_type 
from dba_objects 
where object_name in(
'SGF_ADE_ADERENCIA_PROD_EVT',
'SGF_ADE_PROD_PLANEJADA_EVT',
'SGF_CONSULTA_ADERENCIA_TV',
'SGF_ADE_PROD_REALIZADA_EVT',
'HBSAC_CANAL_VENDA',
'HBSAC_CUSTO_INDNIZ',
'AR_NOTA_FISCAL_PB',
'ORD_NR_NOTA_FISCAL_PB',
'HBTMK_TIPO_MOTIVO_OCORR',
'AR_NOTA_FISCAL_PB',
'ORD_NR_NOTA_FISCAL_PB',
'HBAFV_TRNSDO',
'HBSAC_CATEG_CLIENT',
'HBSAC_ATENT',
'HBSAC_TIPO_DEFEIT',
'HBSAC_ATENT',
'HBSAC_ATEND',
'HBAFV_PRODUT'
);

select * 
from dba_synonyms
where synonym_name in(
'CONSULTA_PRODUTO_PB_V',
'HBSAC_UNID_FABRIL',
'HBSAC_CAUSA',
'HBAFV_MUNIC',
'HBSAC_CANAL_VENDA',
'HBSAC_CUSTO_INDNIZ',
'AR_NOTA_FISCAL_PB',
'ORD_NR_NOTA_FISCAL_PB',
'HBTMK_TIPO_MOTIVO_OCORR',
'AR_NOTA_FISCAL_PB',
'ORD_NR_NOTA_FISCAL_PB',
'HBAFV_TRNSDO',
'HBSAC_CATEG_CLIENT',
'HBSAC_ATENT',
'HBSAC_TIPO_DEFEIT',
'HBSAC_ATENT',
'HBSAC_ATEND',
'HBAFV_PRODUT'
);




-------------------------------------------------------------------------------
EXPLAIN PLANS SECTION
-------------------------------------------------------------------------------

1- Original With Adjusted Cost
------------------------------
Plan hash value: 2032096133

--------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                           | Name                       | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     |
--------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                    |                            |     1 |    22 |       |  45M  (1)| 00:29:42   |
|   1 |  SORT AGGREGATE                     |                            |     1 |    22 |       |          |           |
|*  2 |   VIEW                              | SGF_CONSULTA_ADERENCIA_TV  |   564M|    11G|       |  45M  (1)| 00:29:42  |
|   3 |    SORT ORDER BY                    |                            |   564M|   133G|   143G|  45M  (1)| 00:29:42  |
|   4 |     WINDOW BUFFER                   |                            |   564M|   133G|       |  45M  (1)| 00:29:42  |
|   5 |      SORT GROUP BY                  |                            |   564M|   133G|   143G|  45M  (1)| 00:29:42  |
|*  6 |       HASH JOIN RIGHT OUTER         |                            |   564M|   133G|   448M| 157K  (3)| 00:00:07  |
|   7 |        VIEW                         | VW_SSQ_1                   |    13M|   295M|       | 70342   (2)| 00:00:03 |
|   8 |         HASH GROUP BY               |                            |    13M|   282M|   464M| 70342   (2)| 00:00:03 |
|   9 |          TABLE ACCESS STORAGE FULL  | SGF_ADE_PROD_REALIZADA_EVT |    13M|   282M|       |4503   (9)| 00:00:01 |
|* 10 |        HASH JOIN OUTER              |                            |    15M|  3348M|    85M| 72614   (2)| 00:00:03 |
|  11 |         JOIN FILTER CREATE          | :BF0000                    |   409K|    81M|       | 537   (6)| 00:00:01 |
|* 12 |          HASH JOIN                  |                            |   409K|    81M|    19M| 537   (6)| 00:00:01 |
|* 13 |           TABLE ACCESS STORAGE FULL | SGF_ADE_PROD_PLANEJADA_EVT |   415K|    14M|       | 159   (8)| 00:00:01 |
|  14 |           TABLE ACCESS STORAGE FULL | SGF_ADE_ADERENCIA_PROD_EVT |   362K|    59M|       | 120  (10)| 00:00:01 |
|  15 |         VIEW                        | VW_SSQ_2                   |    13M|   295M|       | 70342   (2)| 00:00:03 |
|  16 |          HASH GROUP BY              |                            |    13M|   282M|   464M| 70342   (2)| 00:00:03 |
|  17 |           JOIN FILTER USE           | :BF0000                    |    13M|   282M|       |4503   (9)| 00:00:01 |
|* 18 |            TABLE ACCESS STORAGE FULL| SGF_ADE_PROD_REALIZADA_EVT |    13M|   282M|       |4503   (9)| 00:00:01 |
--------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - filter("A1"."INVENTORY_ITEM_ID"=:B1)
   6 - access("ITEM_1"(+)="SAA"."NR_VERSAO" AND "ITEM_2"(+)="SAA"."ID_LOTE_ADERENCIA" AND
              "ITEM_3"(+)="SAA"."INVENTORY_ITEM_ID")
  10 - access("ITEM_4"(+)="SAA"."NR_VERSAO" AND "ITEM_5"(+)="SAA"."ID_LOTE_ADERENCIA" AND
              "ITEM_6"(+)="SAA"."INVENTORY_ITEM_ID")
  12 - access("APP"."ID_LOTE_ADERENCIA"="SAA"."ID_LOTE_ADERENCIA")
  13 - storage("APP"."CD_PRODUTO"<>'PARADA')
       filter("APP"."CD_PRODUTO"<>'PARADA')
  18 - storage(SYS_OP_BLOOM_FILTER(:BF0000,"NR_VERSAO","ID_LOTE_ADERENCIA","INVENTORY_ITEM_ID"))
       filter(SYS_OP_BLOOM_FILTER(:BF0000,"NR_VERSAO","ID_LOTE_ADERENCIA","INVENTORY_ITEM_ID"))

2- Using SQL Profile
--------------------
Plan hash value: 4059307083

------------------------------------------------------------------------------------------------------
| Id  | Operation                       | Name                       | Rows  | Bytes |TempSpc| Cost |
------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                |                            |     1 |    22 |       | 42382 |
|   1 |  SORT AGGREGATE                 |                            |     1 |    22 |       |       |
|*  2 |   VIEW                          | SGF_CONSULTA_ADERENCIA_TV  |   409K|  8799K|       | 42382 |
|   3 |    SORT ORDER BY                |                            |   409K|   139M|   304M| 42382 |
|   4 |     WINDOW BUFFER               |                            |   409K|   139M|       | 42382 |
|   5 |      SORT GROUP BY              |                            |   409K|   139M|   304M| 42382 |
|*  6 |       HASH JOIN                 |                            |   409K|   139M|    63M|  1419 |
|   7 |        TABLE ACCESS STORAGE FULL| SGF_ADE_ADERENCIA_PROD_EVT |   362K|    59M|       |   224 |
|*  8 |        TABLE ACCESS STORAGE FULL| SGF_ADE_PROD_PLANEJADA_EVT |   415K|    73M|       |   302 |
------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - filter("A1"."INVENTORY_ITEM_ID"=:B1)
   6 - access("APP"."ID_LOTE_ADERENCIA"="SAA"."ID_LOTE_ADERENCIA")
   8 - storage("APP"."CD_PRODUTO"<>'PARADA')
       filter("APP"."CD_PRODUTO"<>'PARADA')






  "/* QUERY_REQUEST_SET_NOT_SCHEDULED */\n" +         
  WITH CONC_COUNT AS
           (SELECT        COUNT(1) AS ACTUAL FROM APPS.FND_CONC_REQ_SUMMARY_V CR 
           INNER JOIN    APPS.FND_REQUEST_SETS_VL RS  ON RS.USER_REQUEST_SET_NAME = CR.DESCRIPTION
           WHERE CR.IS_SUB_REQUEST = 'N' AND CR.STATUS_CODE IN ('W', 'R', 'Q', 'I', 'F', 'C') 
           AND CR.PHASE_CODE IN ('P', 'R')
           AND CR.HOLD_FLAG = 'N' AND RS.APPLICATION_ID = %s 
           AND RS.REQUEST_SET_ID = %s)
           SELECT    '<SCHEDULED_REQUEST_SETS><TARGET>' || TO_CHAR(%s) || '</TARGET><ACTUAL>' || TO_CHAR(ACTUAL) || '</ACTUAL></SCHEDULED_REQUEST_SETS>' AS XMLTEXT
           FROM CONC_COUNT WHERE ACTUAL < %s;



SELECT "A1"."ID_LOTE_ADERENCIA","A1"."NR_VERSAO","A1"."NR_VERSAO_MAX","A1"."ORGANIZATION_ID","A1"."PLANT_CODE",
"A1"."DT_COMPETENCIA","A1"."INVENTORY_ITEM_ID","A1"."CD_PRODUTO","A1"."DS_PRODUTO","A1"."ITEM_TYPE","A1"."PRIMARY_UOM_CODE","A1"."DS_TIPOLOGIA",
"A1"."DS_FORMATO","A1"."QT_PLANEJADO","A1"."QT_PLAN_TOL_POST","A1"."QT_PLAN_TOL_ANT","A1"."QT_EXECUTADO","A1"."QT_REALIZADO",
"A1"."QT_VARIACAO","A1"."QT_ADERENTE","A1"."PR_ADERENTE","A1"."CREATION_DATE","A1"."CREATED_BY","A1"."LAST_UPDATE_DATE",
"A1"."LAST_UPDATED_BY","A1"."DT_INICIO","A1"."DT_FINAL","A1"."DT_FINAL_FLAT","A1"."LINHA","A1"."MAIOR_DT_REAL","A1"."MENOR_DT_REAL",
"A1"."TX_ADERENTE" 
FROM "AC_APEX"."SGF_RISCO_ADERENCIA_TV" "A1" 
 WHERE "A1"."PLANT_CODE"=NVL(:B2,"A1"."PLANT_CODE") AND
INSTR("A1"."DS_FORMATO",NVL(:B1,"A1"."DS_FORMATO"))>0 ORDER BY
"A1"."TX_ADERENTE","A1"."DT_FINAL_FLAT"


Bind Variables :
 1 -  (VARCHAR2(2000)):F02
 2 -  (VARCHAR2(2000)):80X80


SQL ID     : f3bgwb8bnktvh
SQL Text   : SELECT MAX("A1"."DT_COMPETENCIA") FROM
             "AC_APEX"."SGF_CONSULTA_ADERENCIA_TV" "A1" 
             WHERE "A1"."INVENTORY_ITEM_ID"=:B1
Bind Variables :
 1 -  (NUMBER):3448318










1- Original With Adjusted Cost
------------------------------
Plan hash value: 2626196947

--------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                           | Name                       | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     |
--------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                    |                            |   564M|   967G|       | 205M  (1)| 02:13:30 |
|   1 |  SORT ORDER BY                      |                            |   564M|   967G|  1075G| 205M  (1)| 02:13:30 |
|*  2 |   VIEW                              | SGF_CONSULTA_ADERENCIA_TV  |   564M|   967G|       |  45M  (1)| 00:29:42 |
|   3 |    SORT ORDER BY                    |                            |   564M|   133G|   143G|  45M  (1)| 00:29:42 |
|   4 |     WINDOW BUFFER                   |                            |   564M|   133G|       |  45M  (1)| 00:29:42 |
|   5 |      SORT GROUP BY                  |                            |   564M|   133G|   143G|  45M  (1)| 00:29:42 |
|*  6 |       HASH JOIN RIGHT OUTER         |                            |   564M|   133G|   448M| 157K  (3)| 00:00:07 |
|   7 |        VIEW                         | VW_SSQ_1                   |    13M|   295M|       | 70342   (2)| 00:00:03 |
|   8 |         HASH GROUP BY               |                            |    13M|   282M|   464M| 70342   (2)| 00:00:03 |
|   9 |          TABLE ACCESS STORAGE FULL  | SGF_ADE_PROD_REALIZADA_EVT |    13M|   282M|       |4503   (9)| 00:00:01 |
|* 10 |        HASH JOIN OUTER              |                            |    15M|  3348M|    85M| 72614   (2)| 00:00:03 |
|  11 |         JOIN FILTER CREATE          | :BF0000                    |   409K|    81M|       | 537   (6)| 00:00:01 |
|* 12 |          HASH JOIN                  |                            |   409K|    81M|    19M| 537   (6)| 00:00:01 |
|* 13 |           TABLE ACCESS STORAGE FULL | SGF_ADE_PROD_PLANEJADA_EVT |   415K|    14M|       | 159   (8)| 00:00:01 |
|  14 |           TABLE ACCESS STORAGE FULL | SGF_ADE_ADERENCIA_PROD_EVT |   362K|    59M|       | 120  (10)| 00:00:01 |
|  15 |         VIEW                        | VW_SSQ_2                   |    13M|   295M|       | 70342   (2)| 00:00:03 |
|  16 |          HASH GROUP BY              |                            |    13M|   282M|   464M| 70342   (2)| 00:00:03 |
|  17 |           JOIN FILTER USE           | :BF0000                    |    13M|   282M|       |4503   (9)| 00:00:01 |
|* 18 |            TABLE ACCESS STORAGE FULL| SGF_ADE_PROD_REALIZADA_EVT |    13M|   282M|       |4503   (9)| 00:00:01 |
--------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - filter("PLANT_CODE"=NVL(:B2,"PLANT_CODE") AND INSTR("DS_FORMATO",NVL(:B1,"DS_FORMATO"))>0 AND

              "NR_VERSAO"="NR_VERSAO_MAX" AND ("PLANT_CODE"='F01' OR "PLANT_CODE"='F02' OR "PLANT_CO
DE"='F04' OR
              "PLANT_CODE"='F10') AND "DT_FINAL"<=SYSDATE@! AND INTERNAL_FUNCTION("DT_FINAL")+5>=SYS
DATE@! AND
              ("PLANT_CODE"<>'F01' OR "ITEM_TYPE"='PA') AND (NVL(:B2,"PLANT_CODE")='F01' OR NVL(:B2,
"PLANT_CODE")='F02' OR
              NVL(:B2,"PLANT_CODE")='F04' OR NVL(:B2,"PLANT_CODE")='F10'))
   6 - access("ITEM_1"(+)="SAA"."NR_VERSAO" AND "ITEM_2"(+)="SAA"."ID_LOTE_ADERENCIA" AND
              "ITEM_3"(+)="SAA"."INVENTORY_ITEM_ID")
  10 - access("ITEM_4"(+)="SAA"."NR_VERSAO" AND "ITEM_5"(+)="SAA"."ID_LOTE_ADERENCIA" AND
              "ITEM_6"(+)="SAA"."INVENTORY_ITEM_ID")
  12 - access("APP"."ID_LOTE_ADERENCIA"="SAA"."ID_LOTE_ADERENCIA")
  13 - storage("APP"."CD_PRODUTO"<>'PARADA')
       filter("APP"."CD_PRODUTO"<>'PARADA')
  18 - storage(SYS_OP_BLOOM_FILTER(:BF0000,"NR_VERSAO","ID_LOTE_ADERENCIA","INVENTORY_ITEM_ID"))
       filter(SYS_OP_BLOOM_FILTER(:BF0000,"NR_VERSAO","ID_LOTE_ADERENCIA","INVENTORY_ITEM_ID"))



Execution Plan
----------------------------------------------------------
Plan hash value: 3427850421

--------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                           | Name                       | Rows  | Bytes |TempSpc| Cost (%CPU)| Time     |
--------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                    |                            |   450K|   791M|       |   325K  (1)| 00:00:13 |
|   1 |  SORT ORDER BY                      |                            |   450K|   791M|   879M|   325K  (1)| 00:00:13 |
|*  2 |   VIEW                              | SGF_CONSULTA_ADERENCIA_TV  |   450K|   791M|       |   198K  (2)| 00:00:08 |
|   3 |    SORT ORDER BY                    |                            |   450K|   109M|   117M|   198K  (2)| 00:00:08 |
|   4 |     WINDOW BUFFER                   |                            |   450K|   109M|       |   198K  (2)| 00:00:08 |
|   5 |      SORT GROUP BY                  |                            |   450K|   109M|   117M|   198K  (2)| 00:00:08 |
|*  6 |       HASH JOIN                     |                            |   450K|   109M|    19M|   161K  (2)| 00:00:07 |
|*  7 |        TABLE ACCESS STORAGE FULL    | SGF_ADE_PROD_PLANEJADA_EVT |   415K|    14M|       |   159   (8)| 00:00:01 |
|*  8 |        HASH JOIN OUTER              |                            |   398K|    82M|    78M|   159K  (2)| 00:00:07 |
|*  9 |         HASH JOIN OUTER             |                            |   398K|    74M|    63M| 79807   (2)| 00:00:04 |
|  10 |          TABLE ACCESS STORAGE FULL  | SGF_ADE_ADERENCIA_PROD_EVT |   362K|    59M|       |   120  (10)| 00:00:01 |
|  11 |          VIEW                       | VW_SSQ_2                   |    13M|   295M|       | 70342   (2)| 00:00:03 |
|  12 |           HASH GROUP BY             |                            |    13M|   282M|   464M| 70342   (2)| 00:00:03 |
|  13 |            TABLE ACCESS STORAGE FULL| SGF_ADE_PROD_REALIZADA_EVT |    13M|   282M|       |  4503   (9)| 00:00:01 |
|  14 |         VIEW                        | VW_SSQ_1                   |    13M|   295M|       | 70342   (2)| 00:00:03 |
|  15 |          HASH GROUP BY              |                            |    13M|   282M|   464M| 70342   (2)| 00:00:03 |
|  16 |           TABLE ACCESS STORAGE FULL | SGF_ADE_PROD_REALIZADA_EVT |    13M|   282M|       |  4503   (9)| 00:00:01 |
--------------------------------------------------------------------------------------------------------------------------




--conectar-se ao mysql (mariadb) com a conta root.
mysql -u root -p

--alterar o parâmetro para o valor desejado.
SET GLOBAL innodb_lock_wait_timeout = 300; 

--reiniciar o mysqld
sudo systemctl restart mysqld

-- validar se está tudo no ar.
show processlist;

show engine innodb status\G

-- validar mudança de parâmetro (deverá mudar para 300).
MariaDB [(none)]> show variables like 'innodb_lock_wait_timeout';
+--------------------------+-------+
| Variable_name            | Value |
+--------------------------+-------+
| innodb_lock_wait_timeout | 50    |
+--------------------------+-------+
1 row in set (0.00 sec)

MariaDB [(none)]> show engine innodb status\G
*************************** 1. row ***************************
  Type: InnoDB
  Name:
Status:
=====================================
2021-05-29 14:54:32 7f7ef8889700 INNODB MONITOR OUTPUT
=====================================
Per second averages calculated from the last 41 seconds
-----------------
BACKGROUND THREAD
-----------------
srv_master_thread loops: 255107 srv_active, 0 srv_shutdown, 3092140 srv_idle
srv_master_thread log flush and writes: 3347232
----------
SEMAPHORES
----------
OS WAIT ARRAY INFO: reservation count 551876
OS WAIT ARRAY INFO: signal count 625431
Mutex spin waits 1604476, rounds 16049674, OS waits 295824
RW-shared spins 270623, rounds 7398151, OS waits 240273
RW-excl spins 16509, rounds 574965, OS waits 10416
Spin rounds per wait: 10.00 mutex, 27.34 RW-shared, 34.83 RW-excl
------------
TRANSACTIONS
------------
Trx id counter 1412576648
Purge done for trx's n:o < 1412576603 undo n:o < 0 state: running but idle
History list length 42
LIST OF TRANSACTIONS FOR EACH SESSION:
---TRANSACTION 0, not started
MySQL thread id 702981, OS thread handle 0x7f7ef8889700, query id 176407434 localhost root init
show engine innodb status
--------
FILE I/O
--------
I/O thread 0 state: waiting for completed aio requests (insert buffer thread)
I/O thread 1 state: waiting for completed aio requests (log thread)
I/O thread 2 state: waiting for completed aio requests (read thread)
I/O thread 3 state: waiting for completed aio requests (read thread)
I/O thread 4 state: waiting for completed aio requests (read thread)
I/O thread 5 state: waiting for completed aio requests (read thread)
I/O thread 6 state: waiting for completed aio requests (write thread)
I/O thread 7 state: waiting for completed aio requests (write thread)
I/O thread 8 state: waiting for completed aio requests (write thread)
I/O thread 9 state: waiting for completed aio requests (write thread)
Pending normal aio reads: 0 [0, 0, 0, 0] , aio writes: 0 [0, 0, 0, 0] ,
 ibuf aio reads: 0, log i/o's: 0, sync i/o's: 0
Pending flushes (fsync) log: 0; buffer pool: 0
618510 OS file reads, 13178763 OS file writes, 4580102 OS fsyncs
0.00 reads/s, 0 avg bytes/read, 1.78 writes/s, 0.73 fsyncs/s
-------------------------------------
INSERT BUFFER AND ADAPTIVE HASH INDEX
-------------------------------------
Ibuf: size 1, free list len 2589, seg size 2591, 15036 merges
merged operations:
 insert 28070, delete mark 392871, delete 61804
discarded operations:
 insert 0, delete mark 0, delete 0
23.78 hash searches/s, 8.19 non-hash searches/s
---
LOG
---
Log sequence number 27264365152
Log flushed up to   27264365152
Pages flushed up to 27264365152
Last checkpoint at  27264365152
Max checkpoint age    80826164
Checkpoint age target 78300347
Modified age          0
Checkpoint age        0
0 pending log writes, 0 pending chkp writes
3182015 log i/o's done, 0.56 log i/o's/second
----------------------
BUFFER POOL AND MEMORY
----------------------
Total memory allocated 140574720; in additional pool allocated 0
Total memory allocated by read views 232
Internal hash tables (constant factor + variable factor)
    Adaptive hash index 4036192         (2213368 + 1822824)
    Page hash           139112 (buffer pool 0 only)
    Dictionary cache    2270568         (554768 + 1715800)
    File system         2233360         (812272 + 1421088)
    Lock system         333232  (332872 + 360)
    Recovery system     0       (0 + 0)
Dictionary memory allocated 1715800
Buffer pool size        8191
Buffer pool size, bytes 134201344
Free buffers            1024
Database pages          7056
Old database pages      2584
Modified db pages       0
Percent of dirty pages(LRU & free pages): 0.000
Max dirty pages percent: 75.000
Pending reads 0
Pending writes: LRU 0, flush list 0, single page 0
Pages made young 134072, not young 14371100
0.00 youngs/s, 0.00 non-youngs/s
Pages read 617605, created 14587, written 9647260
0.00 reads/s, 0.00 creates/s, 1.20 writes/s
Buffer pool hit rate 1000 / 1000, young-making rate 0 / 1000 not 0 / 1000
Pages read ahead 0.00/s, evicted without access 0.00/s, Random read ahead 0.00/s
LRU len: 7056, unzip_LRU len: 0
I/O sum[49]:cur[0], unzip sum[0]:cur[0]
--------------
ROW OPERATIONS
--------------
0 queries inside InnoDB, 0 queries in queue
0 read views open inside InnoDB
0 RW transactions active inside InnoDB
0 RO transactions active inside InnoDB
0 out of 1000 descriptors used
Main thread process no. 1060, id 140182670006016, state: sleeping
Number of rows inserted 1108083, updated 1310730, deleted 560585, read 3136902065
0.24 inserts/s, 0.27 updates/s, 0.00 deletes/s, 39.95 reads/s
Number of system rows inserted 0, updated 0, deleted 0, read 0
0.00 inserts/s, 0.00 updates/s, 0.00 deletes/s, 0.00 reads/s
----------------------------
END OF INNODB MONITOR OUTPUT
============================

1 row in set (0.00 sec)"'

select owner as schema_name,
       name as view_name,
       referenced_owner as referenced_schema_name,
       referenced_name,
       referenced_type
from sys.dba_dependencies
where type = 'VIEW'
and name='SGF_RISCO_ADERENCIA_TV'
-- excluding some Oracle maintained schemas
and owner not in ('ANONYMOUS','CTXSYS','DBSNMP','EXFSYS', 'LBACSYS', 
   'MDSYS', 'MGMT_VIEW','OLAPSYS','OWBSYS','ORDPLUGINS', 'ORDSYS','OUTLN', 
   'SI_INFORMTN_SCHEMA','SYS','SYSMAN','SYSTEM','TSMSYS','WK_TEST','WKSYS', 
   'WKPROXY','WMSYS','XDB','APEX_040000', 'APEX_PUBLIC_USER','DIP', 
   'FLOWS_30000','FLOWS_FILES','MDDATA', 'ORACLE_OCM', 'XS$NULL',
   'SPATIAL_CSW_ADMIN_USR', 'SPATIAL_WFS_ADMIN_USR', 'PUBLIC') 
order by owner, name, referenced_name, referenced_owner, referenced_type;




 FROM SGF_CONSULTA_ADERENCIA_TV
 WHERE NR_VERSAO = NR_VERSAO_MAX
   -- -- filtrar somente as fabricas desejadas
   AND PLANT_CODE IN ('F01', 'F02', 'F04', 'F10')
      --PRAZO_RISCO_COD = 1
   and DT_FINAL       <= sysdate
   and (DT_FINAL + 5) >= sysdate
   -- CONSIDERAR
   AND NOT (PLANT_CODE='F01' AND NOT ITEM_TYPE='PA')
 order by DT_FINAL_FLAT, TX_ADERENTE


select owner, object_name, object_type
from dba_objects where object_name in 
('SGF_ADE_PROD_REALIZADA_EVT',
'SGF_ADE_PROD_PLANEJADA_EVT',
'SGF_ADE_ADERENCIA_PROD_EVT');


select owner, segment_name, bytes/1048576 
from dba_segments where segment_name in 
('SGF_ADE_PROD_REALIZADA_EVT',
'SGF_ADE_PROD_PLANEJADA_EVT',
'SGF_ADE_ADERENCIA_PROD_EVT');

select table_name,avg_row_len,round(((blocks*16/1024)),2)||'MB' "TOTAL_SIZE",
round((num_rows*avg_row_len/1024/1024),2)||'Mb' "ACTUAL_SIZE",
round(((blocks*16/1024)-(num_rows*avg_row_len/1024/1024)),2) ||'MB' "FRAGMENTED_SPACE",
(round(((blocks*16/1024)-(num_rows*avg_row_len/1024/1024)),2)/round(((blocks*16/1024)),2))*100 "percentage"
from all_tables WHERE table_name in 
('SGF_ADE_PROD_REALIZADA_EVT',
'SGF_ADE_PROD_PLANEJADA_EVT',
'SGF_ADE_ADERENCIA_PROD_EVT');


select table_name,avg_row_len,round(((blocks*8/1024)),2)||'MB' "TOTAL_SIZE",
round((num_rows*avg_row_len/1024/1024),2)||'Mb' "ACTUAL_SIZE",
round(((blocks*8/1024)-(num_rows*avg_row_len/1024/1024)),2) ||'MB' "FRAGMENTED_SPACE",
(round(((blocks*8/1024)-(num_rows*avg_row_len/1024/1024)),2)/round(((blocks*8/1024)),2))*100 "percentage"
from all_tables WHERE owner in ('XXPB')
and round(((blocks*8/1024)),2) > 0
and round((num_rows*avg_row_len/1024/1024),2) > 0
order by 1;


/u01/app/oraprdbi/product/12.1.0.2/dbhome_1/network/admin/tnsnames.ora
/u01/app/oraprdeb/product/12.1.0.2/dbhome_1/network/admin/PRDEBS2_exapbg01dbadm02/tnsnames.ora
/u01/app/oraprdeb/product/12.1.0.2/dbhome_1/network/admin/tnsnames.ora




create or replace procedure coleta_stats_stale is
begin
declare
cursor c_tables is
SELECT m.table_owner, m.table_name
FROM dba_tab_modifications m, dba_tables t
WHERE t.owner = m.table_owner
AND t.table_name = m.table_name
AND m.inserts + m.updates + m.deletes > 1
AND t.owner not in ('SYS', 'SYSTEM')
AND round(((m.inserts + m.updates + m.deletes) * 100) /
(decode(nvl(t.num_rows, 0), 0, 1, t.num_rows))) > 11
AND exists (select 'x'
from dba_tables d, dba_tab_statistics ta
where d.table_name = t.table_name
and ta.table_name = d.table_name
and d.TEMPORARY = 'N'
and IOT_TYPE is null
and ta.stattype_locked is null);
ret_c_tables c_tables%ROWTYPE;
begin
execute immediate 'truncate table stats_stale_log';
open c_tables;
loop
FETCH c_tables
INTO ret_c_tables;
EXIT WHEN c_tables%NOTFOUND;
insert into stats_stale_log
values
(sysdate,
'Início da Coleta da tabela ' || ret_c_tables.table_owner || '.' ||
ret_c_tables.table_name);
dbms_stats.GATHER_TABLE_STATS(ownname => '"' ||
ret_c_tables.table_owner || '"',
tabname => '"' ||
ret_c_tables.table_name || '"',
method_opt => 'for all columns size auto',
degree => 2,
estimate_percent => DBMS_STATS.AUTO_SAMPLE_SIZE,
cascade => true);
insert into stats_stale_log
values
(sysdate,
'Fim da Coleta da tabela ' || ret_c_tables.table_owner || '.' ||
ret_c_tables.table_name);
commit;
end loop;
close c_tables;
end;
end coleta_stats_stale;
/


  public static final String QUERY_SQL_TOP_DISKREADS =
        "/* QUERY_SQL_TOP_DISKREADS */ \n" +
        "SELECT CAST( " +
        "       XMLElement(\"SQLS\", XMLAgg( " +
        "       XMLELEMENT(\"SQL\", " +
        "       XMLELEMENT(\"SQLID\", SQL_ID), " +
        "       XMLELEMENT(\"MODULE\", REPLACE(REPLACE(MODULE, '>', '&gt;'), '<', '&lt;')), " +
        "       XMLELEMENT(\"SQLTEXT\", REGEXP_REPLACE(REPLACE(REPLACE(SQL_TEXT, '>', '&gt;'), '<', '&lt;'), '[[:cntrl:]]', '')), " +
        "       XMLELEMENT(\"DISKREADS\", DISK_READS), " +
        "       XMLELEMENT(\"PERC\", PERC)))) AS VARCHAR2(4000)) AS RESULT " +
        "FROM   (SELECT SQL_ID, " +
        "       SUBSTR(SQL_TEXT, 1, 50) AS SQL_TEXT, " +
        "       MODULE, " +
        "       DISK_READS, " + 
        "       CAST(RATIO_TO_REPORT(DISK_READS) OVER () * 100 AS NUMERIC(10,2)) AS PERC " +
        "   FROM  V$SQL " +
        "   WHERE   PARSING_SCHEMA_NAME not in ('ZABBIX','SYS','SYSTEM') " +
        "   ORDER BY DISK_READS DESC) " +
        "WHERE ROWNUM <= 10 ";



SELECT CAST(XMLElement("SQLS", XMLAgg(XMLELEMENT("SQL", XMLELEMENT("SQLID", SQL_ID), XMLELEMENT("MODULE", REPLACE(REPLACE(MODULE, '>', 'gt;'), '<', 'lt;')), XMLELEMENT("SQLTEXT", REGEXP_REPLACE(REPLACE(REPLACE(SQL_TEXT, '>', 'gt;'), '<', 'lt;'), '[[:cntrl:]]', '')), XMLELEMENT("DISKREADS", DISK_READS), XMLELEMENT("PERC", PERC)))) AS VARCHAR2(4000)) AS RESULT FROM   (SELECT SQL_ID, SUBSTR(SQL_TEXT, 1, 50) AS SQL_TEXT,  
               MODULE,  
               DISK_READS,   
               CAST(RATIO_TO_REPORT(DISK_READS) OVER () * 100 AS NUMERIC(10,2)) AS PERC  
           FROM  V$SQL  
           WHERE   PARSING_SCHEMA_NAME not in ('ZABBIX','SYS','SYSTEM')  
           ORDER BY DISK_READS DESC)  
        WHERE ROWNUM <= 10 ;


GRPCOM-CORPPRDUXODA2-ASTPRD

QueryList=sql_top_diskreads

 

sql_top_diskreads.Query= SELECT CAST(XMLElement("SQLS", XMLAgg(XMLELEMENT("SQL", XMLELEMENT("SQLID", SQL_ID), XMLELEMENT("MODULE", REPLACE(REPLACE(MODULE, '>', 'gt;'), '<', 'lt;')), XMLELEMENT("SQLTEXT", REGEXP_REPLACE(REPLACE(REPLACE(SQL_TEXT, '>', 'gt;'), '<', 'lt;'), '[[:cntrl:]]', '')), XMLELEMENT("DISKREADS", DISK_READS), XMLELEMENT("PERC", PERC)))) AS VARCHAR2(4000)) AS RESULT FROM   (SELECT SQL_ID, SUBSTR(SQL_TEXT, 1, 50) AS SQL_TEXT,  
               MODULE,  
               DISK_READS,   
               CAST(RATIO_TO_REPORT(DISK_READS) OVER () * 100 AS NUMERIC(10,2)) AS PERC  
           FROM  V$SQL  
           WHERE   PARSING_SCHEMA_NAME not in ('ZABBIX','SYS','SYSTEM')  
           ORDER BY DISK_READS DESC)  
        WHERE ROWNUM <= 10 ;
sql_top_diskreads.NoDataFound=none
sql_top_diskreads.Period=3


pga_aggregate_target=4G
sga_target=10g



SELECT /*+Parallel(8)*/b.tsname tablespace_name
, MAX(b.used_size_mb) cur_used_size_mb
, round(AVG(inc_used_size_mb),2)avg_increas_mb
FROM (
  SELECT a.days, a.tsname, used_size_mb
  , used_size_mb - LAG (used_size_mb,1)  OVER ( PARTITION BY a.tsname ORDER BY a.tsname,a.days) inc_used_size_mb
  FROM (
      SELECT TO_CHAR(sp.begin_interval_time,'MM-DD-YYYY') days
       ,ts.tsname
       ,MAX(round((tsu.tablespace_usedsize* dt.block_size )/(1024*1024),2)) used_size_mb
      FROM DBA_HIST_TBSPC_SPACE_USAGE tsu, DBA_HIST_TABLESPACE_STAT ts
       ,DBA_HIST_SNAPSHOT sp, DBA_TABLESPACES dt
      WHERE tsu.tablespace_id= ts.ts# AND tsu.snap_id = sp.snap_id
       AND ts.tsname = dt.tablespace_name
       AND sp.begin_interval_time > sysdate-10
       AND ts.tsname = 'CPD_DATA'
      GROUP BY TO_CHAR(sp.begin_interval_time,'MM-DD-YYYY'), ts.tsname
      ORDER BY ts.tsname, days
  ) A
) b GROUP BY b.tsname ORDER BY b.tsname
/



*.log_archive_dest_1='location=/oradata3/NFEPRD/archivelog'


update FA_MASS_ADDITIONS
set transaction_type_code = NULL,
transaction_date = NULL
where BOOK_TYPE_CODE = 'GRPCOM_TVS_IFRS'
and TRANSACTION_TYPE_CODE = 'FUTURE ADD'
and POSTING_STATUS <> 'POSTED';
--COMMIT;


scp corpprduxoda2:/oradata3/RPCPRD/datafile

scp /u02/RPCPRD/datafile/tbs_rpcdat18.dbf corpprduxoda2:/oradata3/RPCPRD/datafile
scp /u02/RPCPRD/datafile/tbs_rpcdat20.dbf corpprduxoda2:/oradata3/RPCPRD/datafile
scp /u02/RPCPRD/datafile/tbs_rpcdat21.dbf corpprduxoda2:/oradata3/RPCPRD/datafile
scp /u02/RPCPRD/datafile/tbs_rpcdat22.dbf corpprduxoda2:/oradata3/RPCPRD/datafile
scp /u02/RPCPRD/datafile/tbs_rpcdat23.dbf corpprduxoda2:/oradata3/RPCPRD/datafile
scp /u02/RPCPRD/datafile/tbs_rpcdat24.dbf corpprduxoda2:/oradata3/RPCPRD/datafile
scp /u02/RPCPRD/datafile/tbs_rpcdat25.dbf corpprduxoda2:/oradata3/RPCPRD/datafile
scp /u02/RPCPRD/datafile/tbs_rpcdat26.dbf corpprduxoda2:/oradata3/RPCPRD/datafile


alter database rename file '/oraredo1/XRTPRD/redo/o1_mf_1_c6p6x6ty_.log' to '/oraredo1/XRTPRD/redo/redo1a.rdo';
alter database rename file '/oraredo1/XRTPRD/redo/o1_mf_2_c6p6x9s6_.log' to '/oraredo1/XRTPRD/redo/redo2a.rdo';
alter database rename file '/oraredo1/XRTPRD/redo/o1_mf_3_c6p7jmo8_.log' to '/oraredo1/XRTPRD/redo/redo3a.rdo';
alter database rename file '/oraredo1/XRTPRD/redo/o1_mf_4_c6p7jpkr_.log' to '/oraredo1/XRTPRD/redo/redo4a.rdo';


alter database rename file '/u03/EBSPRD/redo/logscr_11.log' to '/oraredo1/EBSPRD/redo/logscr_11.log';



ALTER DATABASE DISABLE THREAD 2;




rman target target_rman/manager@EBSPRD catalog catalog_rman/manager@RMAN << EOF >> $LOG


rman target target_rman/manager@ODIPRD

rman target target_rman/manager@NGIPRD


rman target target_rman/manager@XRTPRD

orapwd file=orapwXRTPRD password=welcome1 entries=10

export ORACLE_SID=XRTPRD
export ORACLE_BASE=/u01/app/oracle
export ORACLE_HOME=/u01/app/oracle/product/11.2.0.4/dbhome_3
export TNS_ADMIN=/u01/app/oracle/product/11.2.0.4/dbhome_3/network/admin
export PATH=/u01/app/oracle/product/11.2.0.4/dbhome_3/bin:/u01/app/oracle/product/11.2.0.4/dbhome_3/OPatch:/usr/sbin:/u01/app/oracle/product/11.2.0.4/dbhome_3/bin:/u01/app/oracle/product/11.2.0.4/dbhome_3/OPatch:/usr/sbin:/u01/app/oracle/product/11.2.0.4/dbhome_3/bin:/u01/app/oracle/product/11.2.0.4/dbhome_3/OPatch:/usr/sbin:/u01/app/oracle/product/11.2.0.4/dbhome_3/bin:/u01/app/oracle/product/11.2.0.4/dbhome_3/OPatch:/usr/sbin:/u01/app/oracle/product/11.2.0.4/dbhome_3/bin:/u01/app/oracle/product/11.2.0.4/dbhome_3/OPatch:/usr/sbin:/bin:.:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/home/oracle/bin


ORA-00600: internal error code, arguments: [qosdExpStatRead: expcnt mismatch


SELECT cod_empresa ,
       cod_estab ,
       data_fiscal ,
       movto_e_s ,
       norm_dev ,
       ident_docto ,
       ident_fis_jur ,
       num_docfis ,
       serie_docfis ,
       cod_tributacao ,
       cod_tributo ,
       vlr_base
FROM X07_BASE_DOCFIS
where COD_EMPRESA   BETWEEN  :gv_cod_empresa_de AND  :gv_cod_empresa_ate
AND COD_ESTAB   BETWEEN   :gv_cod_estab_de AND :gv_cod_estab_ate
AND DATA_FISCAL     BETWEEN    to_date(:gv_data_fiscal_de,'dd-mon-rr') AND to_date(:gv_data_fiscal_ate,'dd-mon-rr')
AND COD_TRIBUTACAO = '1'
AND COD_TRIBUTO = 'ICMS';


variable gv_cod_empresa_de varchar2(3); 
variable gv_cod_empresa_ate varchar2(3); 
variable gv_cod_estab_de varchar2(6); 
variable gv_cod_estab_ate varchar2(6); 
variable gv_data_fiscal_de varchar2(100); 
variable gv_data_fiscal_ate varchar2(100); 

exec :gv_cod_empresa_de := '001'; 
exec :gv_cod_empresa_ate := '001';
exec :gv_cod_estab_de := '1143';
exec :gv_cod_estab_ate := '1145';
exec :gv_data_fiscal_de := '01-MAY-21';
exec :gv_data_fiscal_ate := '31-MAY-21';



-- coleta estatistucas


create table LogColetaEstatisticas (
 DATA_EXEC DATE,
 MENSAGEM VARCHAR2(4000))
  /

create or replace procedure STOCOLETAESTATISTICAS is
begin
declare
cursor c_owner is
   select distinct owner
   from dba_tables
   where owner not in ('SYS', 'SYSTEM');
cursor c_tables is
        select OWNER, TABLE_NAME from dba_tables where LAST_ANALYZED < sysdate - 7 AND TEMPORARY = 'N' AND (IOT_TYPE != 'IOT_OVERFLOW' OR IOT_TYPE IS NULL) minus select OWNER, TABLE_NAME from dba_tab_statistics where stattype_locked is not null;   
r1 c_owner%ROWTYPE;
ret_c_tables c_tables%ROWTYPE;

begin
  execute immediate 'truncate table LogColetaEstatisticas ';

  for r1 in c_owner loop
    begin
      insert into LogColetaEstatisticas values(sysdate, 'Inicio da Coleta de Estatísticas do Owner: ' || r1.owner);
      commit;

      dbms_stats.gather_schema_stats(ownname => '"' || r1.owner ||'"',
                                     estimate_percent => dbms_stats.auto_sample_size,
                                     method_opt => 'for all columns size auto',
                                     cascade => true,
                                     options => 'GATHER',
                                     degree => 2);

      insert into LogColetaEstatisticas values (sysdate, 'Fim da Coleta de Estatísticas do Owner: ' || r1.owner);
      commit; 
   end;
end loop;

   insert into LogColetaEstatisticas values (sysdate, 'Início da Coleta de Estatísticas do Dicionário de dados - SYS');
   commit;
      dbms_stats.gather_dictionary_stats(estimate_percent => dbms_stats.auto_sample_size,
                                         method_opt => 'for all columns size auto',
                                         degree => 2,
                                         options => 'GATHER',
                                         cascade => true);

   insert into LogColetaEstatisticas values (sysdate, 'Fim da Coleta de Estatísticas do Dicionário de dados - SYS');
   commit;
   
   open c_tables;
   
   loop
   
        FETCH c_tables INTO ret_c_tables;
        EXIT WHEN c_tables%NOTFOUND;
   
        dbms_stats.GATHER_TABLE_STATS(ownname => '"' || ret_c_tables.owner ||'"', 
                                      tabname => '"' || ret_c_tables.TABLE_NAME ||'"', 
                                      method_opt => 'for all columns size auto',
                                      estimate_percent => dbms_stats.auto_sample_size,
                                      degree => 2,
                                      cascade => true);
   end loop;
   
   close c_tables;
   
end;
end stoColetaEstatisticas;

/


BEGIN
  SELECT COUNT(1) INTO JOB_C_COUNT  FROM DBA_SCHEDULER_JOB_CLASSES WHERE JOB_CLASS_NAME LIKE '%MANUTENCAO_CLASS%';
  IF (JOB_C_COUNT = 0) THEN
  
    sys.dbms_scheduler.create_job_class( 
              logging_level => DBMS_SCHEDULER.LOGGING_FULL,
              log_history => 30,
              comments => 'Classe da Manutencao',
              job_class_name => '"MANUTENCAO_CLASS"');
              
  END IF;
  
END;  
/


BEGIN
sys.dbms_scheduler.create_job( 
job_name => '"SYS"."COLETA_ESTATISTICAS"',
job_type => 'STORED_PROCEDURE',
job_action => '"SYS"."STOCOLETAESTATISTICAS"',
repeat_interval => 'freq=daily;byday=sat;byhour=5;byminute=0;bysecond=0;',
start_date => systimestamp,
job_class => '"MANUTENCAO_CLASS"',
comments => 'Realiza a coleta das estatisticas do oracle.',
auto_drop => FALSE,
enabled => FALSE);
sys.dbms_scheduler.set_attribute( name => '"SYS"."COLETA_ESTATISTICAS"', attribute => 'max_run_duration', value => numtodsinterval(360, 'minute')); 
sys.dbms_scheduler.set_attribute( name => '"SYS"."COLETA_ESTATISTICAS"', attribute => 'raise_events', value => dbms_scheduler.job_started + dbms_scheduler.job_succeeded + dbms_scheduler.job_failed + dbms_scheduler.job_broken + dbms_scheduler.job_completed + dbms_scheduler.job_stopped + dbms_scheduler.job_disabled); 
sys.dbms_scheduler.set_attribute( name => '"SYS"."COLETA_ESTATISTICAS"', attribute => 'logging_level', value => DBMS_SCHEDULER.LOGGING_FULL); 
sys.dbms_scheduler.set_attribute( name => '"SYS"."COLETA_ESTATISTICAS"', attribute => 'restartable', value => TRUE); 
sys.dbms_scheduler.enable( '"SYS"."COLETA_ESTATISTICAS"' ); 
END;
/





-- coleta parcial
create table stats_stale_log (
DATA_EXEC DATE,
MENSAGEM VARCHAR2(4000));
/

create or replace procedure COLETA_STATS_STALE is
begin
declare
cursor c_tables is
SELECT m.table_owner, m.table_name
FROM dba_tab_modifications m, dba_tables t
WHERE t.owner = m.table_owner
AND t.table_name = m.table_name
AND m.inserts + m.updates + m.deletes > 1
AND t.owner not in ('SYS', 'SYSTEM')
AND round(((m.inserts + m.updates + m.deletes) * 100) /
(decode(nvl(t.num_rows, 0), 0, 1, t.num_rows))) > 11
AND exists (select 'x'
from dba_tables d, dba_tab_statistics ta
where d.table_name = t.table_name
and ta.table_name = d.table_name
and d.TEMPORARY = 'N'
and IOT_TYPE is null
and ta.stattype_locked is null);
ret_c_tables c_tables%ROWTYPE;
begin
execute immediate 'truncate table stats_stale_log';
open c_tables;
loop
FETCH c_tables
INTO ret_c_tables;
EXIT WHEN c_tables%NOTFOUND;
insert into stats_stale_log
values
(sysdate,
'Início da Coleta da tabela ' || ret_c_tables.table_owner || '.' ||
ret_c_tables.table_name);
dbms_stats.GATHER_TABLE_STATS(ownname => '"' ||
ret_c_tables.table_owner || '"',
tabname => '"' ||
ret_c_tables.table_name || '"',
method_opt => 'for all columns size auto',
degree => 2,
estimate_percent => dbms_stats.auto_sample_size,
cascade => true);
insert into stats_stale_log
values
(sysdate,
'Fim da Coleta da tabela ' || ret_c_tables.table_owner || '.' ||
ret_c_tables.table_name);
commit;
end loop;
close c_tables;
end;
end coleta_stats_stale;
/


BEGIN
dbms_scheduler.create_window(
window_name => 'COLETA_STATS_PARCIAL',
duration => numtodsinterval(4, 'hour'),
resource_plan => 'DEFAULT_MAINTENANCE_PLAN',
repeat_interval => 'freq=daily;byday=mon,tue,wed,thu,fri;byhour=1;byminute=0;bysecond=0;');
dbms_scheduler.add_window_group_member(
group_name => 'MAINTENANCE_WINDOW_GROUP',
window_list => 'COLETA_STATS_PARCIAL');
END;
/

begin
dbms_scheduler.create_job (
job_name => 'COLETA_ESTATISTICA_PARCIAL',
job_type => 'STORED_PROCEDURE',
job_action => 'coleta_stats_stale',
schedule_name => 'COLETA_STATS_PARCIAL',
enabled => TRUE);
DBMS_SCHEDULER.SET_ATTRIBUTE(
NAME => 'COLETA_ESTATISTICA_PARCIAL',
ATTRIBUTE => 'STOP_ON_WINDOW_CLOSE',
VALUE => TRUE
);
END;
/
pqo$0912
10-JUN-21
In??cio da Coleta da tabela APEX_PORTALRI.APRI_RMA_PB_VM




exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'MSAF', TABNAME => 'DWT_DOCTO_FISCAL',estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE AUTO', no_invalidate=>false);
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'MSAF', TABNAME => 'DWT_ITENS_MERC',estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', no_invalidate=>false);
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'MSAF', TABNAME => 'X2081_EXTENSAO_CFO', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', no_invalidate=>false);
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'MSAF', TABNAME => 'X2012_COD_FISCAL', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', no_invalidate=>false)
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'MSAF', TABNAME => 'DWT_W', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', no_invalidate=>false)
/



exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'MSAF', TABNAME => 'X2002_PLANO_CONTAS',estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE AUTO', no_invalidate=>false);
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'MSAF', TABNAME => 'X2003_CENTRO_CUSTO',estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', no_invalidate=>false);
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'MSAF', TABNAME => 'X225_CONTABIL_FUNC', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', no_invalidate=>false);
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'MSAF', TABNAME => 'CENTRAL_ESCRIT_CONTABIL', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', no_invalidate=>false)
/
exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'MSAF', TABNAME => 'X01_CONTABIL', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE 1', no_invalidate=>false)
/



EXECUTE DBMS_SYSTEM.SET_SQL_TRACE_IN_SESSION(sid,serial#,TRUE);


SELECT DISTINCT sql_id, plan_hash_value, TIMESTAMP, bytes
FROM v$sql_plan --(replace v$sql_plan with dba_hist_sql_plan if info is flushed from shared pool)
WHERE sql_id ='gdt76qbt6kb57'
order by bytes;


27twyv3ysrcym




select OWNER, TABLE_NAME, LAST_ANALYZED, STALE_STATS, num_rows, blocks , EMPTY_BLOCKS
from dba_tab_statistics where table_name='PH1G01' and owner ='SIGA_PRODUCAO12';


SELECT PH1_FLAG ,PH1.* FROM  SIGA_PRODUCAO12.PH1G01 PH1 WHERE PH1_FILIAL = ' ' AND PH1_EMP = '01' AND PH1_FIL = '01' AND D_E_L_E_T_ <> '*';


select count(*) from 
(select 'alter trigger ' || owner || '.' || TRIGGER_NAME || ' disable;'
from dba_triggers
where owner='AUDITOR'
and status='ENABLED');


select 'alter trigger ' || owner || '.' || TRIGGER_NAME || ' disable;'
from dba_triggers
where owner='AUDITOR'
and status='ENABLED'
order by trigger_name asc;


select 'alter system disconnect session ''' || sid || ',' || serial# || ',@' || inst_id || ''' immediate;' 
from gv$session where username in ('SIGA_PRODUCAO12','ZABBIX');

SELECT p1 "file#", p2 "block#", p3 "class#" 
 FROM gv$session_wait
 WHERE event = 'read by other session';

SELECT relative_fno, owner, segment_name, segment_type 
 FROM dba_extents 
 WHERE file_id = &file 
 AND &block BETWEEN block_id AND block_id + blocks - 1;




select dbms_metadata.get_ddl('INDEX', index_name , owner) ddl 
from dba_indexes where table_name='PH1G01' and owner='SIGA_PRDSK12_NEW';

select * from siga_prdsk12_new.ph1g01;


 CREATE INDEX "SIGA_PRDSK12_NEW"."PH1G016" ON "SIGA_PRODUCAO12"."PH1G01" ("PH1_FILIAL", "PH1_CHVRES", "R_E_C_N_O_", "D_E_L_E_T_")
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "ED52CSK"


execute DBMS_STATS.UNLOCK_TABLE_STATS('SIGA_PRODUCAO12','SD1010');
execute DBMS_STATS.UNLOCK_TABLE_STATS('SIGA_PRODUCAO12','SD1030');
execute DBMS_STATS.UNLOCK_TABLE_STATS('SIGA_PRODUCAO12','SD1040');
execute DBMS_STATS.UNLOCK_TABLE_STATS('SIGA_PRODUCAO12','SD1060');
execute DBMS_STATS.UNLOCK_TABLE_STATS('SIGA_PRODUCAO12','SD1080');
execute DBMS_STATS.UNLOCK_TABLE_STATS('SIGA_PRODUCAO12','SD1110');
execute DBMS_STATS.UNLOCK_TABLE_STATS('SIGA_PRODUCAO12','SD1230');
execute DBMS_STATS.UNLOCK_TABLE_STATS('SIGA_PRODUCAO12','SD1240');
execute DBMS_STATS.UNLOCK_TABLE_STATS('SIGA_PRODUCAO12','PH1G01');


-- lock

execute DBMS_STATS.LOCK_TABLE_STATS('SIGA_PRODUCAO12','SD1010');
execute DBMS_STATS.LOCK_TABLE_STATS('SIGA_PRODUCAO12','SD1030');
execute DBMS_STATS.LOCK_TABLE_STATS('SIGA_PRODUCAO12','SD1040');
execute DBMS_STATS.LOCK_TABLE_STATS('SIGA_PRODUCAO12','SD1060');
execute DBMS_STATS.LOCK_TABLE_STATS('SIGA_PRODUCAO12','SD1080');
execute DBMS_STATS.LOCK_TABLE_STATS('SIGA_PRODUCAO12','SD1110');
execute DBMS_STATS.LOCK_TABLE_STATS('SIGA_PRODUCAO12','SD1230');
execute DBMS_STATS.LOCK_TABLE_STATS('SIGA_PRODUCAO12','SD1240');
execute DBMS_STATS.LOCK_TABLE_STATS('SIGA_PRODUCAO12','PH1G01');




With b as (
select count(*) cnt,objn,snapshot_id from sys.exp_stat$ es group by
objn,snapshot_id)
select * from sys.exp_obj$ a, b where a.objn=b.objn and
a.snapshot_id=b.snapshot_id
and a.EXP_CNT<>b.CNT;
 
delete from sys.exp_stat$ b
where b.snapshot_id = 1 and b.objn = 23596 ;
 
update sys.exp_obj$  a
set a.EXP_CNT=0
where a.SNAPSHOT_ID= 1
           and a.objn = 23596;
 
commit;



'DWT_DOCTO_FISCAL',
'IX_DWT_DOCTO_DATA_FIS_SITU',
'IX_X08_X13',
'X08_ITENS_MERC'

select table_name from dba_indexes where index_name in ('IX_DWT_DOCTO_DATA_FIS_SITU','IX_X08_X13');
select table_name, last_analyzed from dba_tab_statistics where table_name in ('DWT_DOCTO_FISCAL','X08_ITENS_MERC');



SELECT DISTINCT sql_id, plan_hash_value, TIMESTAMP, bytes
FROM v$sql_plan --(replace v$sql_plan with dba_hist_sql_plan if info is flushed from shared pool)
WHERE sql_id ='0nkwz75d8vukf'
order by bytes;


with got_my_sid
    as(
       select
            session_id
          , count(1)
       from
           v$active_session_history
       where sample_time between to_date('18062021 16:30:00', 'ddmmyyyy hh24:mi:ss')
                         and     to_date('18062021 17:15:00', 'ddmmyyyy hh24:mi:ss')
      and event = 'SQL*Net break/reset to client'
      group by session_id
      )
   select
          p.username
         ,p.TRACEID
         ,p.pga_used_mem
         ,p.pga_alloc_mem
         ,s.sql_id
    from
         v$process p
        ,v$session s
   where
         p.addr=s.paddr
    and exists (select null
               from got_my_sid a
               where s.sid = a.session_id)
    and s.sql_id is not null;


select owner, segment_name, tablespace_name, sum(bytes)/1048576 
from dba_segments where segment_name like '%_BKP%'
group by owner, segment_name, tablespace_name order by 4;



2021-06-02T15:45:13.935275-03:00


/u01/app/grid/diag/crs/bcxoracle01/crs/trace/ohasd_oraagent_oragrid.trc.

STLPRD_ora_26761.trm
cat "" >STLPRD_ora_26790.trm
cat "" >STLPRD_ora_26821.trm
cat "" >STLPRD_ora_26886.trm



RESTORE ARCHIVELOG FROM SEQUENCE 47725 UNTIL SEQUENCE 47800;


BAIXAR APLICAÇÃO EBS:

 

1- Nos servidores de aplicação SIGNS (10.48.8.47) e STAR (10.48.8.48) executar os seguintes comandos:


[root@signs ~]# su - applqas
Last login: Tue Jun 22 09:00:30 BRT 2021 from 10.255.254.148 on pts/1
[applqas@signs ~]$ cd $ADMIN_SCRIPTS_HOME
[applqas@signs scripts]$ adstpall.sh

You are running adstpall.sh version 120.10.12010000.4

Enter the APPS username:


2- Aguardar todos os processos saírem utilizando o seguinte comando :
 

[applqas@signs scripts]$ ps -ef | grep applqas

 

3- Se depois de 5 minutos os processos não finalizarem, executar:

 

[applqas@signs scripts]$ kill -9 -1

 


SUBIR A APLICAÇÃO EBS:

 
1- Rodar o script com o usuário applqas

[root@signs ~]# su - applqas
Last login: Tue Jun 22 09:05:12 BRT 2021 from 10.255.254.148 on pts/1
[applqas@signs ~]$ cd $ADMIN_SCRIPTS_HOME
[applqas@signs scripts]$ adstrtal.sh

 

2- Aguardar o término do script e tentar acessar o ambiente.

 

3- Validar o forms e o gerenciador de concorrente entranto na responsabilidade:

 

ADMINSITRADOR DO SISTEMA - CONCORRENTE - GERENCIADOR - ADMINISTRAR 

 

4- Depois colocar o concorrente ACTIVE USERS para executar e aguardar a finalização da execução.





archivelog needed for upstream capture




SQL> alter index KRONA.SC9010_INQ rebuild;

Index altered.

SQL> alter index KRONA.SC9080_INQ rebuild;

Index altered.


SQL> alter index KRONA.SC9010B rebuild;

Index altered.

SQL> select name from v$database;

NAME
---------
TOTVS


### Backup incremental para por Standby em synch - standby out of synch

1- no standby

SQL> select name, DATABASE_ROLE, CURRENT_SCN from v$database;

NAME      DATABASE_ROLE             CURRENT_SCN
--------- ---------------- --------------------
DBSITEF   PHYSICAL STANDBY         316412399351


2- no primary

RMAN> BACKUP DEVICE TYPE DISK INCREMENTAL FROM SCN 316412390000 DATABASE
     FORMAT '/oradata/sitef/dbsitef/backup/bkup_%U';


3- copiar para o standby: 


4- catalogar no standby

RMAN> CATALOG START WITH '/standbydisk1/incrback/';



5- fazer recover no standby

RMAN> RECOVER DATABASE NOREDO;


/dd_backup_stl/DBSITEF/backupset/29062021


731238

ALTER DATABASE CREATE STANDBY CONTROLFILE AS '/oradata/msaf/MSAF/archivelog/stbycf';


mv /oradata/sitef/dbsitef/controfile/control01.ctl /oradata/sitef/dbsitef/controfile/control01.ctl_old 
cp /tmp/stbycf /oradata/sitef/dbsitef/controfile/control01.ctl
mv /oradata/sitef/dbsitef/controlfile/control02.ctl /oradata/sitef/dbsitef/controlfile/control02.ctl_old
cp /tmp/stbycf /oradata/sitef/dbsitef/controlfile/control02.ctl


/opt/seven/standby/dbsedocs/tmp/dbsedocs_ArcFalhaCopia.lst



Prezado cliente,

Informamos que executamos as seguintes atividades até o momento:

Foram feitas várias atividades para tentar obter evidências desse problema.
Participei de uma sala por 3 horas com a IBM e com o pessoal da K2 e o rapaz do ADF. ALém disso tivemos ajuda do Danilo na análise de alertas de exaustão de SWAP no servidor ATACAMA durante as madrugadas.
Verifiquei com o Marcos, EBS, a questão dos jobs de estatística e concluímos que eles rodam apenas no final de semana, portanto não podem ser responsáveis por este impacto.
Conversei com o pessoal da madrugada e eles reportaram que a máquina passa por problemas de performance constantemente durante a madrugada, então vamos monitora-la hoje a noite para tentar pegar os eventos relacionados ao processo em questão.



Errors in file /oracle/LBP/saptrace/diag/rdbms/lbp_sp/LBP/trace/LBP_m000_8960.trc:
ORA-00600: internal error code, arguments: [keomnReadBindsFromStream:magic], [44], [], [], [], [], [], [], [], [], [], []
Fri Jul 02 08:39:57 2021

-- NXTAPPO
 DECLARE
  cursor c1 is select * from dba_tab_privs where grantee='APPS_RO';
  target_name varchar2(30);
  grant_option varchar2(30);
  text_sql varchar2(4000);
BEGIN
  --target_name := 'PHYSICAL_DEVICE_STG';
  for v1 in c1 loop
    if v1.grantable = 'YES' then
        grant_option := ' with grant option';
    else
      grant_option := '';
    end if;
    text_sql := 'grant ' || v1.privilege || ' on ' || v1.owner || '.' || v1.table_name || ' to ADF_RO' || grant_option;
    dbms_output.put_line(text_sql || ';');
    --execute immediate text_sql;
    end loop;
END;
/


root@p005soldom031:/opt/seven/zabbix/conf# /opt/seven/zabbix/sbin/zabbix_agentd -c /opt/seven/zabbix/conf/zabbix_agentd.conf
root@p005soldom031:/opt/seven/zabbix/conf# /opt/seven/zabbix/sbin/zabbix_agentd -c /opt/seven/zabbix/conf/zabbix_agentd-DBSITEF.conf
root@p005soldom031:/opt/seven/zabbix/conf# /opt/seven/zabbix/sbin/zabbix_agentd -c /opt/seven/zabbix/conf/zabbix_agentd-DBSEDOCS.conf
root@p005soldom031:/opt/seven/zabbix/conf# /opt/seven/zabbix/sbin/zabbix_agentd -c /opt/seven/zabbix/conf/zabbix_agentd-DBSENIOR.conf
root@p005soldom031:/opt/seven/zabbix/conf# /opt/seven/zabbix/sbin/zabbix_agentd -c /opt/seven/zabbix/conf/zabbix_agentd-INTFQ.conf

run{
set archivelog destination to '/dd_backup_stl/INTEGRACAOSP/archivelog/restore';
RESTORE ARCHIVELOG FROM SEQUENCE 47733 UNTIL SEQUENCE 48000;
}

Wed Jul 07 00:31:01 2021
Exception [type: SIGSEGV, Address not mapped to object] [ADDR:0x0] [PC:0x179814E, kkocfbCardEstValid()+94] [flags: 0x0, count: 1]
Errors in file /u01/app/oraprdot/diag/rdbms/prdots/PRDOTS1/trace/PRDOTS1_ora_7437.trc  (incident=1160809):
ORA-07445: exception encountered: core dump [kkocfbCardEstValid()+94] [SIGSEGV] [ADDR:0x0] [PC:0x179814E] [Address not mapped to object] []

46969


alter system set db_file_name_convert = '/oradata/msaf/MSAF/datafile/','/mastersaf/datafile/' scope=spfile;
alter system set log_file_name_convert = '/msafp/data01/MSAF/onlinelog/','/mastersaf/onlinelog/' scope=spfile;

cipt\user.timestamp
zaq!23EDC

Rua da igreja da Aereosa 

peso da régua



alter system set control_files= '/sdc/oradata/ORAOP2/control01ORAOP2.ctl',
'/sdc/oradata/ORAOP2/control02ORAP2.ctl', '/sdc/oradata/ORAOP2/control03ORAOP2.ctl' scope=spfile;

alter system set control_files= '/sdd/orafra/ORAOP2/oradata/control01ORAOP2.ctl',
'/sdd/orafra/ORAOP2/oradata/control02ORAP2.ctl', '/sdd/orafra/ORAOP2/oradata/control03ORAOP2.ctl' scope=spfile;


#!/bin/sh

#Copiar os arquivos de Controle.

for i in /sdc/oradata/ORAOP2/*.ctl; do echo "A copiar arquivo $i"; scp $i CILISYMPRE:/sdd/orafra/ORAOP2/oradata; done;

#Copiar os arquivos de Dados.

for j in /sdc/oradata/ORAOP2/*.dbf; do echo "A copiar arquivo $j"; scp $j CILISYMPRE:/sdc/oradata/ORAOP2; done;
for k in /sdd/orafra/ORAOP2/oradata/*.dbf; do echo "A copiar arquivo $k"; scp $k CILISYMPRE:/sdd/orafra/ORAOP2/oradata; done;

#Copiar os arquivos de Redo Log.
for l in /sdc/oradata/ORAOP2/*.dbf; do echo "A copiar arquivo $l"; scp $l CILISYMPRE:/sdd/orafra/ORAOP2/oradata; done;




#!/bin/sh
export x=/sdc/oradata/ORAOP2
export y=/sdd/orafra/ORAOP2/oradata

echo "Arquivos de Controle."
echo ""
echo ""
echo "A iniciar a cópia."
echo ""
echo ""

for i in /sdc/oradata/ORAOP2/*.ctl; do echo "A copiar arquivo $i para o destino no diretório $y"; scp $i CILISYMPRE:$y; done;

echo ""
echo ""
echo "Arquivos de Dados."
echo ""
echo ""

for j in /sdc/oradata/ORAOP2/*.dbf; do echo "A copiar arquivo $j para o destino no diretório $x"; scp $j CILISYMPRE:$x; done;
for k in /sdd/orafra/ORAOP2/oradata/*; do echo "A copiar arquivo $k para o destino no diretório $y"; scp $k CILISYMPRE:$y; done;

echo ""
echo ""
echo "Arquivos de Redo Log."
echo ""
echo ""

for l in /sdc/oradata/ORAOP2/*.log; do echo "A copiar arquivo $l para o destino no diretório $y"; scp $l CILISYMPRE:$y; done;

echo ""
echo ""
echo "Cópia Finalizada."
echo ""
echo ""

exit;

"'

SQL> alter database rename file '/sdc/oradata/ORAOP2/redo0101ORAOP2.log' to '/sdd/orafra/ORAOP2/oradata/redo0101ORAOP2.log';
Database altered.
SQL> alter database rename file '/sdc/oradata/ORAOP2/redo0201ORAOP2.log' to '/sdd/orafra/ORAOP2/oradata/redo0201ORAOP2.log';
Database altered.
SQL> alter database rename file '/sdc/oradata/ORAOP2/redo0301ORAOP2.log' to '/sdd/orafra/ORAOP2/oradata/redo0301ORAOP2.log';
Database altered.
SQL> alter database rename file '/sdc/oradata/ORAOP2/redo0401ORAOP2.log' to '/sdd/orafra/ORAOP2/oradata/redo0401ORAOP2.log';
Database altered.
SQL> alter database rename file '/sdc/oradata/ORAOP2/redo0501ORAOP2.log' to '/sdd/orafra/ORAOP2/oradata/redo0501ORAOP2.log';
Database altered.
SQL> alter database rename file '/sdc/oradata/ORAOP2/redo0601ORAOP2.log' to '/sdd/orafra/ORAOP2/oradata/redo0601ORAOP2.log';
Database altered.

SQL> alter database clear unarchived logfile group 1;
Database altered.

SQL> alter database clear unarchived logfile group 2;
Database altered.

SQL> alter database clear unarchived logfile group 3;
Database altered.

SQL> alter database clear unarchived logfile group 4;
Database altered.

SQL> alter database clear unarchived logfile group 5;
Database altered.

SQL> alter database clear unarchived logfile group 6;
Database altered.

em frente à liga portuguesa do cancro

Alter database register logical logfile 'path pro archivelog' for "nome do extract";

col profile for a30
select username, account_status, PROFILE, CREATED from all_users where lower(username)=lower('&nome');



-- Senha P12
#HB45@mhf

-- EMIS 
C##ALEXANDER_BUFALO
AO23456#

Z:\Timestamp\Técnica\Serviços Premium\DBA-N keypass
T1m35t4mp!db4#18

OEM ts_abufalo

key pass keypass G0rm3tDb0!

keypass T1m35t4mp!db4#18
ACI

ssh tstamp@CERACHASC -p 227
EmIS2o19!


TS-AlexanderBufalo

e?)?X=Ah#wJH$tG8kIS$
AB6364#5

ts-alexanderbufalo

71m3$T@Mp


bankinter

Fofura29

7508293
7508293

keypass
[10:00 AM] Michel Oliveira
SLBenfica_2016



Santander
User dominio: E753008
Novaultimachanc3.
C0mctzagoravai.
user corporativo: x617415
Timestamp123!

Teamviewer
Seraquefunciona?
wv8952kk

vpn.garland.pt
gdoctimestamp
T1m3S1amp
Relatórios: Lançar horas assim: 1357 garland - Monitorização pró-ativo.


LA REDOUTE
timestamp.redoute.fr
abufalo-prest
3Cja8?TXD_V0



Or@cle@DbServer

sysman
q4yzmcecjD

|| Ligar à máquina
172.26.101.149
user: oracle
pass: Pkm8y#45gb


[9/1 1:28 PM] Joao Pinto
    srvtsprdreports.timestamp.pt
[9/1 1:28 PM] Joao Pinto
    username: reporterprod
[9/1 1:28 PM] Joao Pinto
    password: reporterprod

for i in docx*.yaml; do echo $i; sed 's/2022012808/2022022808/g' $i > $i"_new"; mv $i $i"_old" ; mv $i"_new" $i ; done;




27/07 - ramsomware

T1m3_3xt_St4mp
Mzbi2018!


Tet&m293

Cliente VPN: FortiClient 

VPN Address: vpn.mzbi.pt (sslvpn)

###################################
# Maquina original
# 28/07 - ssh root@10.11.1.32
# banco PR3
# SAPSR3 
# Situacao: Faltam datafiles 
# DBAJOBS 1.1T
# rodar o dul (copiar datafiles para outra pasta) 
# importar o resultado dmp em outro banco novo.
su - orapr3
setenv ORACLE_SID resto
criar a ficheiro/ponto montagem 2T /sapdump2807 no servidor: 10.11.1.32
-- Buscar SS070 para validar o DIFF das ordens de transporte.


###################################
# Maquina Qualidade - 2019
# 11/2019 - ssh root@10.10.1.51
# banco QR3 (2019)  - dump 2019
# SAPSR3 (estao testando QR3)
# Situacao: Faltam datafiles 
# ssh -A -L 10.10.8.10:1521:10.10.1.51:1521  root@10.10.1.51
#
banco esta com datafiles em uma unidade que foi entregue:
SVDQSAP-L1:oraqr3 56> du -sh /saprestore3/oradata/
616G /saprestore3/oradata/
/saprestore3 
su - qr3adm
 
SVDQSAP-L1:oraqr3 87> cat exp2019.par 
userid=dbajobs/dbajobs
exclude=statistics
dumpfile=exptables2019%U.dmp
logfile=exptables2019.log
EXCLUDE=TABLE:"IN (SELECT TABLE_NAME FROM dbajobs.exptable)"
directory=direxpd
rows=N
schemas=sapsr3
parallel=4

###################################
# Maquina  futura producao
# 08/07 - ssh root@10.11.1.30
# banco resto 780G
# 25k tabelas
# Situacao: Faltam datafiles - banco resto funcional
# banco resto criado na pasta: 
WE8DEC
# /saprestore /saprestore2 
# banco PR3 - sera nova producao ainda estao trabalhando.
 setenv ORACLE_SID resto



#DROP DATABASE.

startup mount exclusive restrict;
alter system enable restricted session;
drop database;




create user ops$<sid>adm identified externally default tablespace system

temporary tablespace psaptemp;

grant connect, resource, sapdba to ops$<sid>adm;


R3R


[7:09 PM] Francisco Lança
RSEC_SSFS_DATAPATH=/usr/sap/QR3/SYS/global/security/rsecssfs/data

RSEC_SSFS_KEYPATH=/usr/sap/QR3/SYS/global/security/rsecssfs/key

rsdb_ssfs_connect=1

[7:09 PM] Francisco Lança
   rsecssfx pf=<drive>:\usr\sap\<SID>\SYS\profile\DEFAULT.PFL put DB_CONNECT/DEFAULT_DB_USER SAPSR3 -plain

[7:10 PM] Francisco Lança
rsecssfx pf=<drive>:\usr\sap\<SID>\SYS\profile\DEFAULT.PFL put DB_CONNECT/DEFAULT_DB_PASSWORD XXXXXXXX

rsecssfx pf=/sapmnt/PR3/profile/DEFAULT.PFL put DB_CONNECT/DEFAULT_DB_PASSWORD sapsr3

rsecssfx pf=/sapmnt/PR3/profile/DEFAULT.PFL put DB_CONNECT/DEFAULT_DB_USER SAPSR3 -plain



BEGIN
  FOR r IN (select index_name from dba_indexes where owner='SAPSR3' and index_type != 'LOB')
  LOOP
      EXECUTE IMMEDIATE 'drop index SAPSR3."' || r.index_name  || '"';
  END LOOP;
END;
/



run {
set newname for database to '/saprestore/QR3/%b';
restore database;
SWITCH DATAFILE ALL;
SWITCH TEMPFILE ALL;
recover database;
alter database open resetlogs;
}


916 110 428


TABELA IMPORTANTE DO SAP. Sem ela da erro 16 no R3Trans
 imported "SAPSR3"."DDNTF" 



run
{
allocate channel ch1 type sbt trace 2;
}


run
{
allocate channel ch1 type sbt;
allocate channel ch2 type sbt;
allocate channel ch3 type sbt;
allocate channel ch4 type sbt;
backup database;
release channel ch1;
release channel ch2;
release channel ch3;
release channel ch4;
}


select table_name from dba_tab_statistics where owner='SAPSR3' and num_rows >0;

select sum(bytes)/1048576 as bt from dba_segments where segment_name='D010TAB';


alter tablespace PSAPSR3 add datafile '/saprestore/QR3/PSAPSR339.dbf' size 32767M;



orapwd file=orapwQR3 entries=15 force=y password=SAP030720.pw format=11


[9:46 AM] Lucas Ongaratto
    
Client - FortiClient
User: timestamp
Pwd: Efajws5jWN5w


RFPLG



alter database rename file '/oracle/PR3/sapdata3/system_1/system.data1' to '/sapdump2807/resto/969618/oracle/PR3/sapdata3/system_1/system.data1';
alter database rename file '/oracle/PR3/sapdata2/sysaux_1/sysaux.data1' to '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sysaux_1/sysaux.data1';
alter database rename file '/oracle/PR3/sapdata4/undo_1/undo.data1' to '/sapdump2807/resto/969618/oracle/PR3/sapdata4/undo_1/undo.data1';
alter database rename file '/oracle/PR3/sapdata1/sr3_1/sr3.data1' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_1/sr3.data1';
alter database rename file '/oracle/PR3/sapdata2/sr3_2/sr3.data2' to '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_2/sr3.data2';
alter database rename file '/oracle/PR3/sapdata3/sr3_3/sr3.data3' to '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_3/sr3.data3';
alter database rename file '/oracle/PR3/sapdata4/sr3_4/sr3.data4' to '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_4/sr3.data4';
alter database rename file '/oracle/PR3/sapdata1/sr3_5/sr3.data5' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_5/sr3.data5';
alter database rename file '/oracle/PR3/sapdata2/sr3_6/sr3.data6' to '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_6/sr3.data6';
alter database rename file '/oracle/PR3/sapdata3/sr3_7/sr3.data7' to '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_7/sr3.data7';
alter database rename file '/oracle/PR3/sapdata4/sr3_8/sr3.data8' to '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_8/sr3.data8';
alter database rename file '/oracle/PR3/sapdata1/sr3_9/sr3.data9' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_9/sr3.data9';
alter database rename file '/oracle/PR3/sapdata2/sr3_10/sr3.data10' to '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_10/sr3.data10';
alter database rename file '/oracle/PR3/sapdata3/sr3_11/sr3.data11' to '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_11/sr3.data11';
alter database rename file '/oracle/PR3/sapdata4/sr3_12/sr3.data12' to '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_12/sr3.data12';
alter database rename file '/oracle/PR3/sapdata1/sr3_13/sr3.data13' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_13/sr3.data13';
alter database rename file '/oracle/PR3/sapdata2/sr3_14/sr3.data14' to '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_14/sr3.data14';
alter database rename file '/oracle/PR3/sapdata3/sr3_15/sr3.data15' to '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_15/sr3.data15';
alter database rename file '/oracle/PR3/sapdata4/sr3_16/sr3.data16' to '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_16/sr3.data16';
alter database rename file '/oracle/PR3/sapdata1/sr3_17/sr3.data17' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_17/sr3.data17';
alter database rename file '/oracle/PR3/sapdata2/sr3_18/sr3.data18' to '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_18/sr3.data18';
alter database rename file '/oracle/PR3/sapdata3/sr3_19/sr3.data19' to '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_19/sr3.data19';
alter database rename file '/oracle/PR3/sapdata4/sr3_20/sr3.data20' to '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_20/sr3.data20';
alter database rename file '/oracle/PR3/sapdata1/sr3_21/sr3.data21' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_21/sr3.data21';
alter database rename file '/oracle/PR3/sapdata2/sr3_22/sr3.data22' to '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_22/sr3.data22';
alter database rename file '/oracle/PR3/sapdata1/sr3_23/sr3.data23' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_23/sr3.data23';
alter database rename file '/oracle/PR3/sapdata2/sr3_24/sr3.data24' to '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_24/sr3.data24';
alter database rename file '/oracle/PR3/sapdata3/sr3_25/sr3.data25' to '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_25/sr3.data25';
alter database rename file '/oracle/PR3/sapdata4/sr3_26/sr3.data26' to '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_26/sr3.data26';
alter database rename file '/oracle/PR3/sapdata1/sr3_27/sr3.data27' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_27/sr3.data27';
alter database rename file '/oracle/PR3/sapdata2/sr3_28/sr3.data28' to '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_28/sr3.data28';
alter database rename file '/oracle/PR3/sapdata3/sr3_29/sr3.data29' to '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_29/sr3.data29';
alter database rename file '/oracle/PR3/sapdata4/sr3_30/sr3.data30' to '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_30/sr3.data30';
alter database rename file '/oracle/PR3/sapdata1/sr3_31/sr3.data31' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_31/sr3.data31';
alter database rename file '/oracle/PR3/sapdata2/sr3_32/sr3.data32' to '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_32/sr3.data32';
alter database rename file '/oracle/PR3/sapdata3/sr3_33/sr3.data33' to '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_33/sr3.data33';
alter database rename file '/oracle/PR3/sapdata4/sr3_34/sr3.data34' to '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_34/sr3.data34';
alter database rename file '/oracle/PR3/sapdata1/sr3_35/sr3.data35' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_35/sr3.data35';
alter database rename file '/oracle/PR3/sapdata1/sr3700_1/sr3700.data1' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3700_1/sr3700.data1';
alter database rename file '/oracle/PR3/sapdata2/sr3700_2/sr3700.data2' to '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3700_2/sr3700.data2';
alter database rename file '/oracle/PR3/sapdata3/sr3700_3/sr3700.data3' to '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3700_3/sr3700.data3';
alter database rename file '/oracle/PR3/sapdata4/sr3700_4/sr3700.data4' to '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3700_4/sr3700.data4';
alter database rename file '/oracle/PR3/sapdata1/sr3700_5/sr3700.data5' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3700_5/sr3700.data5';
alter database rename file '/oracle/PR3/sapdata2/sr3700_6/sr3700.data6' to '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3700_6/sr3700.data6';
alter database rename file '/oracle/PR3/sapdata4/sr3700_7/sr3700.data7' to '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3700_7/sr3700.data7';
alter database rename file '/oracle/PR3/sapdata1/sr3700_8/sr3700.data8' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3700_8/sr3700.data8';
alter database rename file '/oracle/PR3/sapdata2/sr3700_9/sr3700.data9' to '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3700_9/sr3700.data9';
alter database rename file '/oracle/PR3/sapdata3/sr3700_10/sr3700.data10' to '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3700_10/sr3700.data10';
alter database rename file '/oracle/PR3/sapdata4/sr3700_11/sr3700.data11' to '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3700_11/sr3700.data11';
alter database rename file '/oracle/PR3/sapdata1/sr3700_12/sr3700.data12' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3700_12/sr3700.data12';
alter database rename file '/oracle/PR3/sapdata2/sr3700_13/sr3700.data13' to '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3700_13/sr3700.data13';
alter database rename file '/oracle/PR3/sapdata3/sr3700_14/sr3700.data14' to '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3700_14/sr3700.data14';
alter database rename file '/oracle/PR3/sapdata4/sr3700_15/sr3700.data15' to '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3700_15/sr3700.data15';
alter database rename file '/oracle/PR3/sapdata4/sr3700_16/sr3700.data16' to '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3700_16/sr3700.data16';
alter database rename file '/oracle/PR3/sapdata3/sr3dim_1/sr3dim.data1' to '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3dim_1/sr3dim.data1';
alter database rename file '/oracle/PR3/sapdata3/sr3fact_1/sr3fact.data1' to '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3fact_1/sr3fact.data1';
alter database rename file '/oracle/PR3/sapdata4/sr3ods_1/sr3ods.data1' to '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3ods_1/sr3ods.data1';
alter database rename file '/oracle/PR3/sapdata1/sr3usr_1/sr3usr.data1' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3usr_1/sr3usr.data1';
alter database rename file '/oracle/PR3/sapdata2/sr3usr_2/sr3usr.data2' to '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3usr_2/sr3usr.data2';
alter database rename file '/oracle/PR3/sapdata3/sr3usr_3/sr3usr.data3' to '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3usr_3/sr3usr.data3';
alter database rename file '/oracle/PR3/sapdata4/sr3usr_4/sr3usr.data4' to '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3usr_4/sr3usr.data4';
alter database rename file '/oracle/PR3/sapdata1/sr3usr_5/sr3usr.data5' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3usr_5/sr3usr.data5';
alter database rename file '/oracle/PR3/sapdata1/sr3_36/sr3.data36' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_36/sr3.data36';
alter database rename file '/oracle/PR3/sapdata1/sr3_37/sr3.data37' to '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_37/sr3.data37';
alter database rename file '/oracle/PR3/sapdata7/sr3_38/sr3.data38' to '/sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_38/sr3.data38';
alter database rename file '/oracle/PR3/sapdata7/sr3_39/sr3.data39' to '/sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_39/sr3.data39';
alter database rename file '/oracle/PR3/sapdata7/sr3_40/sr3.data40' to '/sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_40/sr3.data40';
alter database rename file '/oracle/PR3/sapdata7/sr3_41/sr3.data41' to '/sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_41/sr3.data41';
alter database rename file '/oracle/PR3/sapdata7/sr3_42/sr3.data42' to '/sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_42/sr3.data42';


alter database rename file '/oracle/PR3/sapdata8/temp_1/temp.data1' to '/sapdump2807/resto/969618/oracle/PR3/sapdata8/temp_1/temp.data1';
alter database rename file '/oracle/PR3/sapdata8/temp_2/temp.data2' to '/sapdump2807/resto/969618/oracle/PR3/sapdata8/temp_2/temp.data2';
alter database rename file '/oracle/PR3/sapdata8/temp_3/temp.data3' to '/sapdump2807/resto/969618/oracle/PR3/sapdata8/temp_3/temp.data3';








STARTUP NOMOUNT;
CREATE CONTROLFILE REUSE DATABASE "PR3" RESETLOGS ARCHIVELOG
    MAXLOGFILES 16
    MAXLOGMEMBERS 3
    MAXDATAFILES 512
    MAXINSTANCES 8
    MAXLOGHISTORY 584
LOGFILE
  GROUP 1 '/oracle/PR3/origlogA/log_g11m1.dbf'  SIZE 300M BLOCKSIZE 512,
  GROUP 2 '/oracle/PR3/origlogA/log_g13m1.dbf'  SIZE 300M BLOCKSIZE 512,
  GROUP 3 '/oracle/PR3/origlogA/log_g15m1.dbf'  SIZE 300M BLOCKSIZE 512
DATAFILE
  '/sapdump2807/resto/969618/oracle/PR3/sapdata3/system_1/system.data1',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sysaux_1/sysaux.data1',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata4/undo_1/undo.data1',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_1/sr3.data1',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_2/sr3.data2',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_3/sr3.data3',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_4/sr3.data4',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_5/sr3.data5',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_6/sr3.data6',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_7/sr3.data7',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_8/sr3.data8',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_9/sr3.data9',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_10/sr3.data10',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_11/sr3.data11',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_12/sr3.data12',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_13/sr3.data13',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_14/sr3.data14',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_15/sr3.data15',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_16/sr3.data16',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_17/sr3.data17',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_18/sr3.data18',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_19/sr3.data19',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_20/sr3.data20',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_21/sr3.data21',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_22/sr3.data22',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_23/sr3.data23',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_24/sr3.data24',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_25/sr3.data25',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_26/sr3.data26',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_27/sr3.data27',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_28/sr3.data28',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_29/sr3.data29',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_30/sr3.data30',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_31/sr3.data31',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_32/sr3.data32',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_33/sr3.data33',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_34/sr3.data34',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_35/sr3.data35',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3700_1/sr3700.data1',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3700_2/sr3700.data2',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3700_3/sr3700.data3',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3700_4/sr3700.data4',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3700_5/sr3700.data5',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3700_6/sr3700.data6',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3700_7/sr3700.data7',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3700_8/sr3700.data8',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3700_9/sr3700.data9',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3700_10/sr3700.data10',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3700_11/sr3700.data11',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3700_12/sr3700.data12',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3700_13/sr3700.data13',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3700_14/sr3700.data14',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3700_15/sr3700.data15',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3700_16/sr3700.data16',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3dim_1/sr3dim.data1',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3fact_1/sr3fact.data1',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3ods_1/sr3ods.data1',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3usr_1/sr3usr.data1',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3usr_2/sr3usr.data2',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3usr_3/sr3usr.data3',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3usr_4/sr3usr.data4',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3usr_5/sr3usr.data5',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_36/sr3.data36',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_37/sr3.data37',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_38/sr3.data38',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_39/sr3.data39',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_40/sr3.data40',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_41/sr3.data41',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_42/sr3.data42',
  '/sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_43/sr3.data43'
CHARACTER SET WE8DEC
;
--RECOVER DATABASE USING BACKUP CONTROLFILE;
ALTER DATABASE OPEN RESETLOGS;


ALTER SESSION SET EVENTS '10015 TRACE NAME ADJUST_SCN LEVEL 4490';

-- temp
ALTER TABLESPACE TEMP ADD TEMPFILE '/u01/app/oracle/oradata/agdc/temp01.dbf' 
     SIZE 2455M REUSE AUTOEXTEND ON NEXT 655360  MAXSIZE 32767M;




     Block header dump:  0x004000f1
 Object id on Block? Y
 seg/obj: 0x12  csc: 0x07.a8c0a23c  itc: 1  flg: -  typ: 1 - DATA
     fsl: 0  fnx: 0x0 ver: 0x01

 Itl           Xid                  Uba         Flag  Lck        Scn/Fsc
0x01   0x0006.018.011fd261  0x00c04d76.665d.0e  C---    0  scn 0x0007.a8c0a1d5
bdba: 0x004000f1
data_block_dump,data header at 0x479720044

0x0007.a8c0a4e9

 BH (0x47be819e8) file#: 1 rdba: 0x004000f1 (1/241) class: 1 ba: 0x479720000
            set: 21 pool: 3 bsz: 8192 bsi: 0 sflg: 2 pwc: 0,0
            dbwrid: 0 obj: 18 objn: 18 tsn: 0 afn: 1 hint: f
            hash: [0x47bfa6ad8,0x54cdb5c20] lru: [0x47be81c00,0x55e6d4170]
            ckptq: [NULL] fileq: [NULL] objq: [NULL] objaq: [NULL]
            use: [0x55e5f2240,0x55e5f2240] wait: [NULL]
            st: CR md: EXCL tch: 0
            cr: [scn: 0x7.a8c01d27],[xid: 0x4.1c.1206a91],[uba: 0xc02463.4f01.37],[cls: 0x7.a8c0a2d0],[sfl: 0x1],[lc: 0x7.a8c0a23d]
            flags: mod_started only_sequential_access
            change state: COMPLETE
            change count: 1
            Using State Objects
              ----------------------------------------
              SO: 0x55e5f21c0, type: 38, owner: 0x55c78fcd8, flag: INIT/-/-/0x00 if: 0x1 c: 0x1
               proc=0x5505d12e8, name=buffer handle, file=kcb2.h LINE:2677, pg=0
              (buffer) (CR) PR: 0x5505d12e8 FLG: 0x100000
              class bit: 0x0
               cr[0]:
               sh[0]:
              kcbbfbp: [BH: 0x47be819e8, LINK: 0x55e5f2240]
              type: normal pin
              where: kdswh05: kdsgrp, why: 0
            Buffer being modified, corruption checks may be unreliable
            buffer tsn: 0 rdba: 0x004000f1 (1/241)
            scn: 0x0007.a8c0a4e9 seq: 0x00 flg: 0x00 tail: 0xa4e90600
            frmt: 0x02 chkval: 0x0000 type: 0x06=trans data



0x0007 = 7
a8c0a4e9 = 74142330

modify /n 774142330

"_minimum_giga_scn"=3


alter system set _allow_resetlogs_corruption = TRUE scope=spfile;



for i in *.jar, do unzip -j /tmp/filegroup6.1.1.jar bbedus.ms* -d /tmp; done;




BBED> modify /x 311dc0a8
 File: /sapdump2807/resto/969618/oracle/PR3/sapdata3/system_1/system.data1 (1)
 Block: 1                Offsets:  484 to  995           Dba:0x00400001
------------------------------------------------------------------------
 311dc0a8 07000000 c0597840 01000000 01000000 02000000 10005c50 02000000
 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
 0d000d00 0d000100 00000000 00000000 00000000 02004000 00000000 00000000
 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
 00000000 00000000 00000000 02556d38 dc55a578 96566ec3 f965fc6f f1000000
 00000000 00000000 00000000 00000000 00000000 00000000 00000000 ffa5434e
 2cfab21c deb5f830 2d8aa17e 46000600 00000000 00000000 00000000 00000000
 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000

 <32 bytes per line>

BBED> sum apply;
Check value for File 1, Block 1:
current = 0xa6c4, required = 0xa6c4

32895933725
32896933725
774142330

0x7A8CF5F5D

32895933749
32895933761


060019598
oradebug poke 0x060019598 4 0x7A8CF5F5D

oradebug poke 0x06001AE70 4 0x7A8CF5F5D

alter system set "_corrupted_rollback_segments"='_SYSSMU6_1418184833' scope=spfile;

_SYSSMU6_1418184833


alter system set "_OFFLINE_ROLLBACK_SEGMENTS"= ('_SYSSMU6_1418184833$','_SYSSMU6$') scope=spfile;



strings /sapdump2807/resto/969618/oracle/PR3/sapdata3/system_1/system.data1 | grep _SYSSMU | cut -d $ -f 1 | sort -u


_corrupted_rollback_segments = ('_SYSSMU1$','_SYSSMU2$','_SYSSMU3$','_SYSSMU4$',
                                '_SYSSMU5$','_SYSSMU6$','_SYSSMU7$',
                                '_SYSSMU8$','_SYSSMU9$','_SYSSMU10$')

_corrupted_rollback_segments = ('_SYSSMU10_3151538537$',
'_SYSSMU10_94091376$',
'_SYSSMU11_2261016469$',
'_SYSSMU11_3607075462$',
'_SYSSMU12_1259084983$',
'_SYSSMU12_3958276196$',
'_SYSSMU1_2726285013$',
'_SYSSMU13_141139575$',
'_SYSSMU13_2634151201$',
'_SYSSMU1_3282992674$',
'_SYSSMU14_1419617709$',
'_SYSSMU14_2057268309$',
'_SYSSMU15_1373759196$',
'_SYSSMU15_4236360530$',
'_SYSSMU16_4581049$',
'_SYSSMU16_862875315$',
'_SYSSMU17_2841190382$',
'_SYSSMU17_2982049618$',
'_SYSSMU18_3017619596$',
'_SYSSMU18_605294167$',
'_SYSSMU19_1291150842$',
'_SYSSMU19_3301308676$',
'_SYSSMU20_4209351833$',
'_SYSSMU20_95739509$',
'_SYSSMU21_2111044348$',
'_SYSSMU21_3858081162$',
'_SYSSMU2_1895971266$',
'_SYSSMU22_2627737549$',
'_SYSSMU22_3053020944$',
'_SYSSMU23_1126774665$',
'_SYSSMU23_3995469429$',
'_SYSSMU2_3557187138$',
'_SYSSMU24_1999206963$',
'_SYSSMU24_423470917$',
'_SYSSMU25_2080550754$',
'_SYSSMU25_3969245006$',
'_SYSSMU26_4279793461$',
'_SYSSMU27_918400632$',
'_SYSSMU28_2260482185$',
'_SYSSMU29_2667529882$',
'_SYSSMU30_3307668311$',
'_SYSSMU31_3265012186$',
'_SYSSMU3_1599873473$',
'_SYSSMU32_1419800223$',
'_SYSSMU3_3163611527$',
'_SYSSMU33_3989994749$',
'_SYSSMU34_1706084756$',
'_SYSSMU35_3046036250$',
'_SYSSMU36_2272413351$',
'_SYSSMU37_3542371791$',
'_SYSSMU38_3310162468$',
'_SYSSMU39_3400364024$',
'_SYSSMU40_3777646782$',
'_SYSSMU41_630280912$',
'_SYSSMU42_511247345$',
'_SYSSMU4_2652799409$',
'_SYSSMU43_1291473688$',
'_SYSSMU4_3872615719$',
'_SYSSMU44_2196443091$',
'_SYSSMU45_3286615646$',
'_SYSSMU46_1338180635$',
'_SYSSMU47_997983454$',
'_SYSSMU48_656800003$',
'_SYSSMU49_1820346338$',
'_SYSSMU50_4187170562$',
'_SYSSMU51_3759438186$',
'_SYSSMU5_2099935327$',
'_SYSSMU52_282109602$',
'_SYSSMU5_2708000821$',
'_SYSSMU53_3681142965$',
'_SYSSMU54_4220954426$',
'_SYSSMU55_1982848578$',
'_SYSSMU56_313688558$',
'_SYSSMU57_500223156$',
'_SYSSMU58_4266291171$',
'_SYSSMU59_4141134474$',
'_SYSSMU60_3766817831$',
'_SYSSMU6_1418184833$',
'_SYSSMU61_630922702$',
'_SYSSMU6_1866303801$',
'_SYSSMU62_3053012531$',
'_SYSSMU62_305301l$',
'_SYSSMU63_1252728459$',
'_SYSSMU64_2163184983$',
'_SYSSMU65_3184364544$',
'_SYSSMU66_1922019267$',
'_SYSSMU67_1971044696$',
'_SYSSMU68_2960987476$',
'_SYSSMU69_736014533$',
'_SYSSMU70_3263331078$',
'_SYSSMU7_1278363264$',
'_SYSSMU71_4147831549$',
'_SYSSMU72_1596221311$',
'_SYSSMU73_2655794775$',
'_SYSSMU74_13928715$',
'_SYSSMU7_4208175381$',
'_SYSSMU75_3907832400$',
'_SYSSMU76_27778452$',
'_SYSSMU77_66559918$',
'_SYSSMU78_1240896560$',
'_SYSSMU79_2487020438$',
'_SYSSMU80_1698978514$',
'_SYSSMU8_1342538970$',
'_SYSSMU81_3803415921$',
'_SYSSMU8_1391168588$',
'_SYSSMU82_1197180888$',
'_SYSSMU9_1042374963$',
'_SYSSMU9_4137928591$')


32899933813



oradebug setmypid

SQL> oradebug DUMPvar SGA kcsgscn_
kcslf kcsgscn_ [060019598, 0600195C8) = 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 60019278 00000000
oradebug poke 0x060019598 4 0X7A8FD2675



         0          1 /sapdump2807/resto/969618/oracle/PR3/sapdata3/system_1/system.data1
         1          2 /sapdump2807/resto/969618/oracle/PR3/sapdata2/sysaux_1/sysaux.data1
         2          3 /sapdump2807/resto/969618/oracle/PR3/sapdata4/undo_1/undo.data1
         4          4 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_1/sr3.data1
         4          5 /sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_2/sr3.data2
         4          6 /sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_3/sr3.data3
         4          7 /sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_4/sr3.data4
         4          8 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_5/sr3.data5
         4          9 /sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_6/sr3.data6
         4         10 /sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_7/sr3.data7
         4         11 /sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_8/sr3.data8
         4         12 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_9/sr3.data9
         4         13 /sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_10/sr3.data10
         4         14 /sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_11/sr3.data11
         4         15 /sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_12/sr3.data12
         4         16 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_13/sr3.data13
         4         17 /sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_14/sr3.data14
         4         18 /sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_15/sr3.data15
         4         19 /sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_16/sr3.data16
         4         20 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_17/sr3.data17
         4         21 /sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_18/sr3.data18
         4         22 /sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_19/sr3.data19
         4         23 /sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_20/sr3.data20
         4         24 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_21/sr3.data21
         4         25 /sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_22/sr3.data22
         4         26 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_23/sr3.data23
         4         27 /sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_24/sr3.data24
         4         28 /sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_25/sr3.data25
         4         29 /sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_26/sr3.data26
         4         30 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_27/sr3.data27
         4         31 /sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_28/sr3.data28
         4         32 /sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_29/sr3.data29
         4         33 /sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_30/sr3.data30
         4         34 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_31/sr3.data31
         4         35 /sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3_32/sr3.data32
         4         36 /sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3_33/sr3.data33
         4         37 /sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3_34/sr3.data34
         4         38 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_35/sr3.data35
         5         39 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3700_1/sr3700.data1
         5         40 /sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3700_2/sr3700.data2
         5         41 /sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3700_3/sr3700.data3
         5         42 /sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3700_4/sr3700.data4
         5         43 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3700_5/sr3700.data5
         5         44 /sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3700_6/sr3700.data6
         5         45 /sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3700_7/sr3700.data7
         5         46 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3700_8/sr3700.data8
         5         47 /sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3700_9/sr3700.data9
         5         48 /sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3700_10/sr3700.data10
         5         49 /sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3700_11/sr3700.data11
         5         50 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3700_12/sr3700.data12
         5         51 /sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3700_13/sr3700.data13
         5         52 /sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3700_14/sr3700.data14
         5         53 /sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3700_15/sr3700.data15
         5         54 /sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3700_16/sr3700.data16
         6         55 /sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3dim_1/sr3dim.data1
         7         56 /sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3fact_1/sr3fact.data1
         8         57 /sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3ods_1/sr3ods.data1
         9         58 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3usr_1/sr3usr.data1
         9         59 /sapdump2807/resto/969618/oracle/PR3/sapdata2/sr3usr_2/sr3usr.data2
         9         60 /sapdump2807/resto/969618/oracle/PR3/sapdata3/sr3usr_3/sr3usr.data3
         9         61 /sapdump2807/resto/969618/oracle/PR3/sapdata4/sr3usr_4/sr3usr.data4
         9         62 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3usr_5/sr3usr.data5
         4         63 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_36/sr3.data36
         4         64 /sapdump2807/resto/969618/oracle/PR3/sapdata1/sr3_37/sr3.data37
         4         65 /sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_38/sr3.data38
         4         66 /sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_39/sr3.data39
         4         67 /sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_40/sr3.data40
         4         68 /sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_41/sr3.data41
         4         69 /sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_42/sr3.data42
         4         70 /sapdump2807/resto/969618/oracle/PR3/sapdata7/sr3_43/sr3.data43


date +%Y%m%d -s "20100418"


SAIBAM todos quantos virem o presente instrumento público de procuração
que, aos ___ (por extenso) dias do mês de _____ do ano ___ (por extenso),
nesta cidade de _____ Estado de _____, (nome e endereço do cartório), na
qualidade de outorgante deste instrumento: (nome da empresa, CNPJ e
endereço), neste ato representada por seu(s) Diretor(es), (dados do diretor ou
dos diretores: nome, nacionalidade, estado civil, CPF, identidade e órgão
expedidor, profissão, endereço de residência). Por ela outorgante, por seu(s)
representante(s) identificado(s), foi dito que, por este público instrumento,
nomeia e constitui seu(s) bastante(s) procurador(es): (dados do procurador ou
dos procuradores: nome, nacionalidade, estado civil, CPF, identidade e órgão
expedidor, profissão, endereço de residência), o(s) qual(is) se identificação
quando do uso deste instrumento, para convalidá-lo, ao(s) qual(is) são
conferidos poderes especiais para representar a sociedade outorgante perante a
Certisign Certificadora Digital S.A, autoridade certificadora credenciada pelo ITI - Instituto
Nacional de Tecnologia da Informação e perante à ICP-Brasil para a
emissão de certificados digitais padrão ICP-Brasil pessoa jurídica. E
requerer o que necessário for relativamente a emissão do(s) certificado(s)
digital(is) cadastrado e/ou vinculado ao CNPJ e/ou CPF do representante
legal da pessoa jurídica a qual representa; podendo, para tanto, requerer,
alegar, e assinar o que preciso for. Enfim, praticar todos os atos do
interesse do(a) Outorgante, para a finalidade de emitir certificado digital
perante à Certisign e à ICP-Brasil. Ainda pela outorgante, por seu(s)
representante(s), foi declarado que se responsabiliza pela veracidade dos
dados informados do(s) outorgado(s), declaração esta sob responsabilidade
civil e criminal. Tudo quanto assim for feito pelos ditos seu(s) procurador(es)
promete haver por valioso e firme. Assim o disse e dou fé. O Tabelião
reserva-se o direito de não corrigir erros materiais, neste ato, advindos de
declaração do(s) Outorgante(s). A pedido da parte ficam arquivados
documentos que instruíram a lavratura deste ato. A pedido da parte lavrei este
instrumento, o qual feito e depois de lido, a parte achou conforme outorga,
aceita e assina, do que dou fé. Eu, _______________(nome do Notário ou
Escrevente), que a assino após conferidas as assinaturas, dou fé e assino em
público e raso.




 pg_catalog | pg_tablespace                         |     93248
 dms        | process_logtype                       |    115290
 sibs       | commissions                           |    120289
 izipay     | operation_parameter                   |    148746
 sibs       | bins                                  |    164200
 public     | user_main                             |    172211
 pg_catalog | pg_transform                          |    179968
 pg_catalog | pg_database                           |    274611
 public     | mmt_movement_type                     |    602395
 sibs       | sms_auth_operations                   |    641316
 pg_catalog | pg_authid                             |   2205968
 sibs       | app_modules                           |  20375653
 public     | currency                              |  22105676
 sibs       | pending_purchases                     |  23141810
 sibs       | express_transfers                     |  23147558
 sibs       | ads                                   |  45937845
 pg_catalog | pg_class                              |  48317444
 pg_catalog | pg_publication                        |  53459432
 sibs       | cards_devices_autorizarion            |  78689026
 public     | lhd_group                             |  87762757
 public     | smswap                                | 116276221
 public     | mmt_request_type                      | 170687683
 public     | smsconnector                          | 199608803
 pg_catalog | pg_am                                 | 229476539


pg_catalog | pg_tablespace                         |     93248
 dms        | process_logtype                       |    115296
 sibs       | commissions                           |    120290
 izipay     | operation_parameter                   |    148752
 sibs       | bins                                  |    164202
 public     | user_main                             |    172214
 pg_catalog | pg_transform                          |    179968
 pg_catalog | pg_database                           |    274614
 public     | mmt_movement_type                     |    602426
 sibs       | sms_auth_operations                   |    641340
 pg_catalog | pg_authid                             |   2205998
 sibs       | app_modules                           |  20376374
 public     | currency                              |  22106302
 sibs       | pending_purchases                     |  23142632
 sibs       | express_transfers                     |  23148384
 sibs       | ads                                   |  45938991
 pg_catalog | pg_class                              |  48318408
 pg_catalog | pg_publication                        |  53459689
 sibs       | cards_devices_autorizarion            |  78691022
 public     | lhd_group                             |  87763349
 public     | smswap                                | 116276221
 public     | mmt_request_type                      | 170691907
 public     | smsconnector                          | 199616135
 pg_catalog | pg_am                                 | 229479598


2h DE BANCO no dia 27/8 - EMIS postgres LENTO.

TABELAS 
easysms=# select relname,last_vacuum, last_autovacuum, last_analyze, last_autoanalyze from pg_stat_user_tables where last_autovacuum > current_timestamp - (30 * interval '1 minute');
     relname      |          last_vacuum          |        last_autovacuum        |         last_analyze          |       last_autoanalyze
------------------+-------------------------------+-------------------------------+-------------------------------+-------------------------------
 smsin_easysms    | 2021-08-27 02:09:13.389354+01 | 2021-08-27 19:59:40.256504+01 | 2021-08-27 02:09:13.997536+01 | 2021-08-27 19:59:44.56426+01
 lhd_node         |                               | 2021-08-27 20:05:08.992248+01 |                               | 2021-08-27 20:05:09.006523+01
 smsout           | 2021-08-27 01:34:14.334228+01 | 2021-08-27 19:39:44.988598+01 | 2021-08-27 01:34:18.035401+01 | 2021-08-27 19:42:43.584699+01
 cc_system_status |                               | 2021-08-27 20:05:08.954392+01 |                               | 2021-08-27 20:05:08.980413+01
 smsin            | 2021-08-27 01:56:28.005027+01 | 2021-08-27 19:42:29.343896+01 | 2021-08-27 01:56:30.3178+01   | 2021-08-27 19:31:45.322241+01
(5 rows)

easysms=# select relname,last_vacuum, last_autovacuum, last_analyze, last_autoanalyze from pg_stat_user_tables where last_autoanalyze > current_timestamp - (30 * interval '1 minute');
     relname      |          last_vacuum          |        last_autovacuum        |         last_analyze          |       last_autoanalyze
------------------+-------------------------------+-------------------------------+-------------------------------+-------------------------------
 smsin_easysms    | 2021-08-27 02:09:13.389354+01 | 2021-08-27 19:59:40.256504+01 | 2021-08-27 02:09:13.997536+01 | 2021-08-27 19:59:44.56426+01
 lhd_node         |                               | 2021-08-27 20:06:09.003913+01 |                               | 2021-08-27 20:06:09.016648+01
 smsout           | 2021-08-27 01:34:14.334228+01 | 2021-08-27 19:39:44.988598+01 | 2021-08-27 01:34:18.035401+01 | 2021-08-27 19:42:43.584699+01
 cc_system_status |                               | 2021-08-27 20:06:08.961941+01 |                               | 2021-08-27 20:06:08.990957+01
 tauth            |                               | 2021-08-27 19:29:16.38712+01  |                               | 2021-08-27 19:44:06.117095+01
(5 rows)








Cassule, quanto as queries da tabela mmt_movement que encontraste no log (delete from mmt_movement where phone=$1), 
é um delete que tende a demorar mais que um segundo , mesmo, pois precisa fazer um tablescan já que não há indice na coluna phone. Não é uma query que reflita
os picos de performance que temos visto.

Indexes:
    "pk_mmt_movement" PRIMARY KEY, btree (id)
    "idx_mmt_movement_id" btree (id)
    "idx_mmt_movement_movement_type_id" btree (mmt_movement_type_id)
    "idx_mmt_movement_settlement_payment_id" btree (settlement_payment_id)
    "idx_mmt_movement_settlement_status_id" btree (settlement_status_id)
    "mmt_movement_idx_date_created" btree (date_created)



easysms=# select relname,last_vacuum, last_autovacuum, last_analyze, last_autoanalyze from pg_stat_user_tables where last_autovacuum > current_timestamp - (30 * interval '1 minute');
       relname       |          last_vacuum          |        last_autovacuum        |         last_analyze          |       last_autoanalyze
---------------------+-------------------------------+-------------------------------+-------------------------------+-------------------------------
 smsin_easysms       | 2021-08-30 02:03:40.582427+01 | 2021-08-30 16:51:53.662843+01 | 2021-08-30 02:03:41.275327+01 | 2021-08-30 16:57:37.350215+01
 favorites_type      |                               | 2021-08-30 16:57:24.298053+01 |                               |
 ads                 |                               | 2021-08-30 16:57:24.286385+01 |                               |
 lhd_node            |                               | 2021-08-30 16:57:37.398956+01 |                               | 2021-08-30 16:57:37.410471+01
 mmt_externalrequest | 2021-08-30 01:40:23.459128+01 | 2021-08-30 16:42:48.912945+01 | 2021-08-30 01:40:30.965622+01 | 2021-08-30 16:47:02.809127+01
 favorites           |                               | 2021-08-30 16:57:31.877061+01 |                               | 2021-08-19 23:36:38.389147+01
 ads_type            |                               | 2021-08-30 16:57:24.274494+01 |                               |
 cc_system_status    |                               | 2021-08-30 16:58:24.294255+01 |                               | 2021-08-30 16:58:24.320499+01
 configurations      |                               | 2021-08-30 16:57:24.260074+01 |                               | 2021-08-21 02:14:12.084945+01
 smsin               | 2021-08-30 01:51:23.525434+01 | 2021-08-30 16:34:09.125509+01 | 2021-08-30 01:51:27.793098+01 | 2021-08-30 16:41:09.620464+01


tx/s 13582


ALTER TABLE public.smsin SET (autovacuum_vacuum_scale_factor = 0.1);
ALTER TABLE public.smsin SET (autovacuum_analyze_scale_factor = 0.1);

ALTER TABLE public.smsout SET (autovacuum_vacuum_scale_factor = 0.1);
ALTER TABLE public.smsout SET (autovacuum_analyze_scale_factor = 0.1);

ALTER TABLE public.auth SET (autovacuum_vacuum_scale_factor = 0.1);
ALTER TABLE public.auth SET (autovacuum_analyze_scale_factor = 0.1);



for i in docx*.yaml; do echo $i; sed 's/2021072910$/2021090113/g' $i > $i"_new"; mv $i $i"_old" ; mv $i"_new" $i ; done;

717 50 50 50


• Existência de objetos inválidos;  
• Jobs do owner DCSDBA falhados;
• Segmentos com crescimento acentuados;
• Valores de log switch acima do recomendado;
• Eventos de espera datafile init write
• Picos de consumo de CPU.


• Existência de objetos inválidos;
• Crescimento de objetos do tipo LOBSEGMENT.
• Consumo elevado de CPU a partir de uma data específica.


• A tabela AUDT_CHRG_OVRD_T é o maior segmento com uma de ocupação de 23190 MB;
• A tabela JOB_HSTY_ELMT_T é um dos maiores segmentos com uma de ocupação de 16776 MB;
• Um número reduzido de log switches: cerca de um por hora;
• Evento de espera “direct path read”;
• Erros no alert log: ORA-12012, ORA-01435, ORA-06512, ORA-01403, ORA-00060;
• Queries com tempo por execução superior a 50 segundos;


4xm1ruvkx3awx, 6763n3kqbzpfn
ssh ts-alexanderbufalo@prdmxedb2c


router
Adagiett0*
HngBr2021


2014TC--TC


rman target / << EOF
set echo on;
run {
configure controlfile autobackup on;
crosscheck archivelog all;
CONFIGURE CHANNEL DEVICE TYPE DISK FORMAT   '/backup/WMSTST/ARCHIVE_%u_%s_%p';
backup device type disk archivelog all delete all input;
}
EOF




col capture_name format a20col CAPTURED_SCN format 999999999999999col APPLIED_SCN format 999999999999999col REQUIRED_CHECKPOINT_SCN format 999999999999999col MAX_CHECKPOINT_SCN format 99999999999999999

select logminer_id, capture_name, captured_scn, applied_scn, required_checkpoint_scn, max_checkpoint_scn, status,CHECKPOINT_RETENTION_TIMEfrom dba_capture;

col consumer_name format a20

col source_database format a10

col name format a70

col first_scn format 9999999999999999999

col next_scn format 9999999999999999999 select CONSUMER_NAME, SOURCE_DATABASE, THREAD#, SEQUENCE#, FIRST_SCN, NEXT_SCN, FIRST_TIME, NEXT_TIME, NAME

from DBA_REGISTERED_ARCHIVED_LOG

where consumer_name = 'OGG$CAP_EXTAUX2'

and first_scn > 7337410938239

order by first_scn desc;



senha serpro - Lind@senh4

OCI DB senha.

AB23cd-#z
AB23cd_#z


38065


firstdb.dbs.vcn1.oraclevcn.com:1521/DB1_ams1r3.dbs.vcn1.oraclevcn.com

(DESCRIPTION=(CONNECT_TIMEOUT=5)(TRANSPORT_CONNECT_TIMEOUT=3)(RETRY_COUNT=3)(ADDRESS_LIST=(LOAD_BALANCE=on)(ADDRESS=(PROTOCOL=TCP)(HOST=10.1.1.184)(PORT=1521)))(CONNECT_DATA=(SERVICE_NAME=DB1_ams1r3.dbs.vcn1.oraclevcn.com)))ff


POSTGRES -

Info genérica


select date_trunc('minute',current_timestamp-pg_postmaster_start_time()) as uptime;

select xact_commit, pg_current_wal_lsn() from pg_stat_database where datname=current_database();


Índices Inválidos

Queries mais rodadas

Espaço Ocupado

Objetos grandes 

Informação da execução dos backups

Vaccuum das tabelas mais importantes

select relname, last_autovacuum, last_autoanalyze, vacuum_count, autovacuum_count  from pg_stat_user_tables 
where schemaname = 'public' order by autovacuum_count DESC;


Queries mais usadas

Queries Lentas

Informação de performance do host

A123456@

select * from rectime

E2930agorajose?

e?)?X=Ah#wJH$tG8kIS$



select sql_id, sql_text from gv$sql where sql_fulltext like 'SELECT  NCONTA8D "customeraccount",  SHIPDATE "date",  SEQLABELNUM "sequentiallabelnumber",  TRAILER_ID "trailer_id" %';

from ( SELECT CHRONODETAIL.NCONTA8D NCONTA8D, MAX(CHRONODETAIL.SHIPDATE) SH
IPDATE, MAX(CHRONODETAIL.SEQLABELNUM) SEQLABELNUM, CHRONODETAIL.



select sql_id, sql_text from gv$sql where sql_fulltext like 'SELECT  NCONTA8D%';


select sid, serial#, username, machine, program, event, last_call_et, seconds_in_wait, status
from gv$session where sql_id in (select distinct sql_id from gv$sql where sql_text like 'SELECT  NCONTA8D "customeraccount"%');

select 'alter system disconnect session ''' || sid || ',' || serial# || ',@' || inst_id ||''' immediate;'
  from gv$session
    where
    type <> 'BACKGROUND'
    and username = 'DCSINTG'
    and sql_id in (select distinct sql_id from gv$sql where sql_text like 'SELECT  NCONTA8D "customeraccount"%');
    /


    

connect catalog RMAN_CAT_BIAPPSDB/RMAN_CAT_BIAPPSDB@RMAN_CATALOG;

set dbid 2412994296;

na origem

[oracle@ed101dbadm01:BIAPPSDB1:/home/oracle]$ chmod 744 /backups/exazs/backup204/BIAPPSDB/2021-10/BIAPPSDB_INC1_DISK_CTRL_c-2412994296-20211021-02.bck
[oracle@ed101dbadm01:BIAPPSDB1:/home/oracle]$ chmod 700 /backups/exazs/backup204/BIAPPSDB/2021-10/BIAPPSDB_INC1_DISK_CTRL_c-2412994296-20211021-02.bck


startup force nomount pfile='/home/oracle/work/restores/BIAPPSDB/initrestoreBIAPPSDB.ora';

chmod 744 /backups/exazs/backup101/ENDECADB/2021-10/*
chmod 744 /backups/exazs/backup102/ENDECADB/2021-10/*
chmod 744 /backups/exazs/backup103/ENDECADB/2021-10/*
chmod 744 /backups/exazs/backup104/ENDECADB/2021-10/*
chmod 744 /backups/exazs/backup201/ENDECADB/2021-10/*
chmod 744 /backups/exazs/backup202/ENDECADB/2021-10/*
chmod 744 /backups/exazs/backup203/ENDECADB/2021-10/*
chmod 744 /backups/exazs/backup204/ENDECADB/2021-10/*

chmod 700 /backups/exazs/backup101/ENDECADB/2021-10/*
chmod 700 /backups/exazs/backup102/ENDECADB/2021-10/*
chmod 700 /backups/exazs/backup103/ENDECADB/2021-10/*
chmod 700 /backups/exazs/backup104/ENDECADB/2021-10/*
chmod 700 /backups/exazs/backup201/ENDECADB/2021-10/*
chmod 700 /backups/exazs/backup202/ENDECADB/2021-10/*
chmod 700 /backups/exazs/backup203/ENDECADB/2021-10/*
chmod 700 /backups/exazs/backup204/ENDECADB/2021-10/*

startup nomount pfile='/home/oracle/work/restores/ENDECADB/initrestoreENDECADB.ora';

nohup rman cmdfile RESTORE_BIAPPSDB.rman msglog RESTORE_BIAPPSDB.log &
set dbid 2412994296;

#connect catalog RMAN_CAT_BIAPPSDB/RMAN_CAT_BIAPPSDB@RMAN_CATALOG;

connect target /

connect catalog RMAN_CAT_ENDECADB/RMAN_CAT_ENDECADB@RMAN_CATALOG;

run{


ALLOCATE CHANNEL CH1 TYPE DISK;
ALLOCATE CHANNEL CH2 TYPE DISK;
ALLOCATE CHANNEL CH3 TYPE DISK;
ALLOCATE CHANNEL CH4 TYPE DISK;
ALLOCATE CHANNEL CH5 TYPE DISK;
ALLOCATE CHANNEL CH6 TYPE DISK;
ALLOCATE CHANNEL CH7 TYPE DISK;
ALLOCATE CHANNEL CH8 TYPE DISK;

set until scn=539376037;

set newname for database to '+DATA';

# restore the database and switch the datafile names
restore controlfile;
alter database mount;
restore database ;
switch datafile all;
switch tempfile all;

# recover the database
recover database;

# open resetlogs
alter database open resetlogs;
}

593948010
593945236

list backup of archivelog sequence 129748 thread 1;

RMAN-00571: ===========================================================
RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============
RMAN-00571: ===========================================================
RMAN-03002: failure of recover command at 10/21/2021 21:55:43
RMAN-20506: no backup of archived log found
RMAN-06053: unable to perform media recovery because of missing log
RMAN-06025: no backup of archived log for thread 1 with sequence 129748 and starting SCN of 593944194 found to restore


List of Backup Sets
===================


BS Key  Size       Device Type Elapsed Time Completion Time
------- ---------- ----------- ------------ -------------------
1690072 237.50K    DISK        00:00:01     2021-10-21 03:05:43
        BP Key: 1690078   Status: AVAILABLE  Compressed: YES  Tag: BIAPPSDB_INC1_DISK
        Piece Name: /backups/exazs/backup101/BIAPPSDB/2021-10/BIAPPSDB_INC1_DISK_C1_S152797_P1_T20211021.bck

  List of Archived Logs in backup set 1690072
  Thrd Seq     Low SCN    Low Time            Next SCN   Next Time
  ---- ------- ---------- ------------------- ---------- ---------
  1    129748  593944194  2021-10-21 03:03:25 593945131  2021-10-21 03:05:30


select THREAD#, status, enabled from v$thread;


alter database rename file '+RECOC1/biappsdb/redo_g04_m01.log' to '+DATA/BIAPPSDB/ONLINELOG/redo_g04_m01.log';
alter database rename file '+RECOC1/biappsdb/redo_g07_m01.log' to '+DATA/BIAPPSDB/ONLINELOG/redo_g07_m01.log';
alter database rename file '+DATAC1/biappsdb/redo_g04_m02.log' to '+DATA/BIAPPSDB/ONLINELOG/redo_g04_m02.log';
alter database rename file '+DATAC1/biappsdb/redo_g07_m02.log' to '+DATA/BIAPPSDB/ONLINELOG/redo_g07_m02.log';
alter database rename file '+DATAC1/biappsdb/standbylog/standby_g09_m01.log' to '+DATA/biappsdb/standbylog/standby_g09_m01.log';
alter database rename file '+RECOC1/biappsdb/standbylog/standby_g09_m02.log' to '+DATA/biappsdb/standbylog/standby_g09_m02.log';
alter database rename file '+DATAC1/biappsdb/standbylog/standby_g10_m01.log' to '+DATA/biappsdb/standbylog/standby_g10_m01.log';
alter database rename file '+RECOC1/biappsdb/standbylog/standby_g10_m02.log' to '+DATA/biappsdb/standbylog/standby_g10_m02.log';
alter database rename file '+DATAC1/biappsdb/standbylog/standby_g11_m01.log' to '+DATA/biappsdb/standbylog/standby_g11_m01.log';
alter database rename file '+RECOC1/biappsdb/standbylog/standby_g11_m02.log' to '+DATA/biappsdb/standbylog/standby_g11_m02.log';
alter database rename file '+DATAC1/biappsdb/standbylog/standby_g12_m01.log' to '+DATA/biappsdb/standbylog/standby_g12_m01.log';
alter database rename file '+RECOC1/biappsdb/standbylog/standby_g12_m02.log' to '+DATA/biappsdb/standbylog/standby_g12_m02.log';
alter database rename file '+DATAC1/biappsdb/standbylog/standby_g13_m01.log' to '+DATA/biappsdb/standbylog/standby_g13_m01.log';
alter database rename file '+RECOC1/biappsdb/standbylog/standby_g13_m02.log' to '+DATA/biappsdb/standbylog/standby_g13_m02.log';
alter database rename file '+DATAC1/biappsdb/standbylog/standby_g14_m01.log' to '+DATA/biappsdb/standbylog/standby_g14_m01.log';
alter database rename file '+RECOC1/biappsdb/standbylog/standby_g14_m02.log' to '+DATA/biappsdb/standbylog/standby_g14_m02.log';
alter database rename file '+DATAC1/biappsdb/standbylog/standby_g15_m01.log' to '+DATA/biappsdb/standbylog/standby_g15_m01.log';
alter database rename file '+RECOC1/biappsdb/standbylog/standby_g15_m02.log' to '+DATA/biappsdb/standbylog/standby_g15_m02.log';
alter database rename file '+DATAC1/biappsdb/standbylog/standby_g16_m01.log' to '+DATA/biappsdb/standbylog/standby_g16_m01.log';
alter database rename file '+RECOC1/biappsdb/standbylog/standby_g16_m02.log' to '+DATA/biappsdb/standbylog/standby_g16_m02.log';
alter database rename file '+DATAC1/biappsdb/standbylog/standby_g17_m01.log' to '+DATA/biappsdb/standbylog/standby_g17_m01.log';
alter database rename file '+RECOC1/biappsdb/standbylog/standby_g17_m02.log' to '+DATA/biappsdb/standbylog/standby_g17_m02.log';
alter database rename file '+DATAC1/biappsdb/standbylog/standby_g18_m01.log' to '+DATA/biappsdb/standbylog/standby_g18_m01.log';
alter database rename file '+RECOC1/biappsdb/standbylog/standby_g18_m02.log' to '+DATA/biappsdb/standbylog/standby_g18_m02.log';


select distinct 'alter database drop standby logfile group ' || group# || ';' from v$standby_log;

select 'ALTER DATABASE RENAME FILE ''' || member || ''' to ''' || replace(member,'+DATAC1','+DATA') || ''';' 
from v$logfile where substr(member,0,7) = '+DATAC1';

select 'ALTER DATABASE DROP LOGFILE MEMBER ''' || member || ''';'  
from v$logfile where substr(member,0,7) = '+RECOC1';


871569976 
561086016 


chmod 744 /backups/exazs/backup101/META4/2021-11/*
chmod 744 /backups/exazs/backup102/META4/2021-11/*
chmod 744 /backups/exazs/backup103/META4/2021-11/*
chmod 744 /backups/exazs/backup104/META4/2021-11/*
chmod 744 /backups/exazs/backup201/META4/2021-11/*
chmod 744 /backups/exazs/backup202/META4/2021-11/*
chmod 744 /backups/exazs/backup203/META4/2021-11/*
chmod 744 /backups/exazs/backup204/META4/2021-11/*

chmod 700 /backups/exazs/backup101/ENDECADB/2021-11/*
chmod 700 /backups/exazs/backup102/ENDECADB/2021-11/*
chmod 700 /backups/exazs/backup103/ENDECADB/2021-11/*
chmod 700 /backups/exazs/backup104/ENDECADB/2021-11/*
chmod 700 /backups/exazs/backup201/ENDECADB/2021-11/*
chmod 700 /backups/exazs/backup202/ENDECADB/2021-11/*
chmod 700 /backups/exazs/backup203/ENDECADB/2021-11/*
chmod 700 /backups/exazs/backup204/ENDECADB/2021-11/*


startup force nomount pfile='/home/oracle/work/restores/META4/initrestoreMETA4.ora';


connect auxiliary /
run {
allocate auxiliary channel ch1 type disk;
allocate auxiliary channel ch2 type disk;
allocate auxiliary channel ch3 type disk;
allocate auxiliary channel ch4 type disk;
DUPLICATE DATABASE TO META4
spfile
parameter_value_convert '+DATAC1','+DATA','+RECOC1','+FRA'
set control_files='+DATA/META4/CONTROLFILE/controlfile.ctl','+FRA/META4/CONTROLFILE/controlfile.ctl'
#set control_files='+DATAC1','+DATA','+RECOC1','+FRA'
set db_create_file_dest='+DATA'
set diagnostic_dest='/u01/app/oracle'
set audit_file_dest='/u01/app/oracle/admin/META4/adump'
set db_recovery_file_dest='+FRA'
set db_recovery_file_dest_size='40G'
SET CLUSTER_DATABASE='FALSE'
SET dg_broker_start='FALSE'
#set DB_FILE_NAME_CONVERT='+DATAC1','+DATA'
#set LOG_FILE_NAME_CONVERT='+DATAC1','+DATA','+RECOC1','+FRA'
reset log_archive_dest_1
reset MEMORY_TARGET
reset memory_max_target
set sga_max_size='5G'
set sga_target='5G'
reset pga_aggregate_target
#reset LOCAL_LISTENER
reset REMOTE_LISTENER
reset dispatchers
BACKUP LOCATION '/home/oracle/work/restores/META4/rmanbkup/';
}


nohup rman @ duplicate_META4_11082020.rcv &> duplicate_META4_11082020.rcv.log 2>&1 &

EPMDB

AB6364#5

alter database backup controlfile to trace as '/tmp/EPROD.ctl' resetlogs;

alter database backup controlfile to '/tmp/ctlMETA4';

BACKUP AS COPY CURRENT CONTROLFILE FORMAT '/tmp/controlfile_copy.ctl';

startup force nomount pfile='/home/oracle/work/restores/META4/initrestoreMETA4.ora';
startup mount pfile='/home/oracle/work/restores/META4/initrestoreMETA4.ora' exclusive restrict;

chmod 744 /backups/exazs/backup101/META4/2021-11/*
chmod 744 /backups/exazs/backup102/META4/2021-11/*
chmod 744 /backups/exazs/backup103/META4/2021-11/*
chmod 744 /backups/exazs/backup104/META4/2021-11/*
chmod 744 /backups/exazs/backup201/META4/2021-11/*
chmod 744 /backups/exazs/backup202/META4/2021-11/*
chmod 744 /backups/exazs/backup203/META4/2021-11/*
chmod 744 /backups/exazs/backup204/META4/2021-11/*

chmod 700 /backups/exazs/backup101/META4/2021-11/*
chmod 700 /backups/exazs/backup102/META4/2021-11/*
chmod 700 /backups/exazs/backup103/META4/2021-11/*
chmod 700 /backups/exazs/backup104/META4/2021-11/*
chmod 700 /backups/exazs/backup201/META4/2021-11/*
chmod 700 /backups/exazs/backup202/META4/2021-11/*
chmod 700 /backups/exazs/backup203/META4/2021-11/*
chmod 700 /backups/exazs/backup204/META4/2021-11/*

connect target /
run{
ALLOCATE CHANNEL CH1 TYPE DISK;
ALLOCATE CHANNEL CH2 TYPE DISK;
ALLOCATE CHANNEL CH3 TYPE DISK;
ALLOCATE CHANNEL CH4 TYPE DISK;
ALLOCATE CHANNEL CH5 TYPE DISK;
ALLOCATE CHANNEL CH6 TYPE DISK;
ALLOCATE CHANNEL CH7 TYPE DISK;
ALLOCATE CHANNEL CH8 TYPE DISK;
set until scn=10610204266054;
set newname for database to '+DATA';
# restore the database and switch the datafile names
restore controlfile;
alter database mount;
restore database ;
switch datafile all;
switch tempfile all;
# recover the database
recover database;
# open resetlogs
# alter database open resetlogs;
}

• O número scn pode ser obtido dos backups de archivelog posteriores ao backup incremental.


cat /home/oracle/work/restores/META4/initrestoreMETA4.ora

*.audit_trail='db'
*.compatible='11.2.0.4.0'
*.control_files='+DATA/META4/CONTROLFILE/controlfile.ctl','+FRA/META4/CONTROLFILE/controlfile.ctl'
#*.control_files='+DATA','FRA'
*.db_block_size=8192
*.db_domain='ogma.pt'
*.db_name='META4'
*.db_create_file_dest='+DATA'
*.db_recovery_file_dest='+FRA'
*.db_recovery_file_dest_size=161061273600
*.diagnostic_dest='/u01/app/oracle/'
*.dispatchers='(PROTOCOL=TCP) (SERVICE=META4XDB)'
*.open_cursors=5000
*.pga_aggregate_target=21474836480
*.processes=1000
*.remote_login_passwordfile='EXCLUSIVE'
*.sga_max_size=214748364800
*.sga_target=214748364800
*.undo_tablespace='UNDOTBS1'
*.cluster_database=false



startup force nomount pfile='/home/oracle/work/restores/EPROD/initrestoreEPROD.ora';



hostname    Sistema Operacional vcpu    RAM     Disk  IP
Tslxdevamon  Oracle Linux  8  2 2GB 40GB  192.168.0.103
tslxdevapp             Oracle Linux  8  2 2GB 40GB  192.168.0.104
tslxdevbd              Oracle Linux  8  2 2GB 100GB 192.168.0.129






/backups/exazs/*/EPROD/2021-12/

nohup rman @duplicate_OBIEEDB_301121.rcv &> duplicate_OBIEEDB_301121.rcv.log 2>&1 &


6655948
4190160

LOGFILE
  GROUP 1 (
    '+DATA/EPROD/ONLINELOG/log1a.rdo',
    '+FRA/EPROD/ONLINELOG/log1b.rdo'
  ) SIZE 1536M BLOCKSIZE 512,
  GROUP 2 (
    '+DATA/EPROD/ONLINELOG/log2a.rdo',
    '+FRA/EPROD/ONLINELOG/log2b.rdo'
  ) SIZE 1536M BLOCKSIZE 512


./runInstaller -clone -silent -ignorePreReq ORACLE_HOME=/u01/app/oracle/product/19.0.0/dbhome_9 \
ORACLE_HOME_NAME=DbHome_9 ORACLE_BASE=/u01/app/oracle oracle_install_OSDBA=oracle oracle_install_OSOPER=oinstall \
-invPtrLoc /etc/oraInst.loc "CLUSTER_NODES={lpexadev01-101,lpexadev02-102}"


select owner, object_name from dba_objects where object_name like 'C_PRE_ADVICE_HEADER_TOTAL_VW';



select sql_id, sql_fulltext from v$sql where sql_text like 'SELECT CASE%WHEN reloc.client_id = ''GROHEP''%THEN ''GROHE''%ELSE reloc.client_id%END client_id,%';

'%FROM%c_pre_advice_header_total_vw%C_PRE_ADVICE_LINE_TOTAL_VW%';

select count(*) from 
(select sql_id, sql_fulltext 
  from v$sql where lower(sql_text) like 
  lower('SELECT CASE%WHEN reloc.client_id = ''GROHEP''%THEN ''GROHE''%ELSE reloc.client_id%END client_id,%'));


Origem  IP  Destino IP  Porto Protocolo Notas   
lpexadev01-101  172.21.81.1 ed101dbadm02  172.21.70.2
172.21.70.4 1621  TCP Databases   
lpexadev02-101  172.21.81.2             
ed101dbadm02  172.21.70.2
172.21.70.4 lpexadev01-101
lpexadev02-101  172.21.81.1
172.21.81.2 1621        
                




OGMA
LDBAM101
0HbyKeq0gc

-- check vktm priority for ORA-800
ps -A -o pid,tid,pri,args |(head -1; grep vktm)



./runInstaller -executePrereqs -silent -responseFile /u01/app/oracle/product/19.0.0/dbhome_9/install/response/db_install.rsp

./runInstaller -silent -responseFile /u01/app/oracle/product/12.2/database/response/db_install.rsp

LD_LIBRARY_PATH=/u01/app/oracle/product/19.0.0/dbhome_9/lib
TNS_ADMIN=/u01/app/oracle/product/19.0.0/dbhome_9/network/admin
PATH=/u01/app/oracle/product/19.0.0/dbhome_9/OPatch:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/oracle/.local/bin:/home/oracle/bin:/u01/app/oracle/product/19.0.0/dbhome_9/bin
PWD=/u01/app/oracle/product/19.0.0/dbhome_9
ORACLE_HOME=/u01/app/oracle/product/19.0.0/dbhome_9

e6ra3tVT


 curl -v telnet://lpexadev01-101:1550

 curl -v telnet://ldbam101:1550

 nc -lvp 15550



 (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = 172.21.21.30)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = PONTEST)))

 PONTEST =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = 172.21.21.30)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = PONTEST)
    )
  )


alter system set dg_broker_start=FALSE;
alter system set dg_broker_config_file1='+DATA/PONTEST/dr1PONTEST.dat';
alter system set dg_broker_config_file2='+FRA/PONTEST/dr2PONTEST.dat';

alter system set dg_broker_config_file1='+DATAC2/PONTESTSTB/dr1PONTEST.dat';
alter system set dg_broker_config_file2='+RECOC2/PONTESTSTB/dr2PONTEST.dat';


alter database add standby logfile
 group 11 ('+DATA','+FRA') size 200M,
 group 12 ('+DATA','+FRA') size 200M,
 group 13 ('+DATA','+FRA') size 200M,
 group 14 ('+DATA','+FRA') size 200M,
 group 15 ('+DATA','+FRA') size 200M;


alter database add standby logfile thread 1
 group 11 ('+DATAC2','+RECOC2') size 200M,
 group 12 ('+DATAC2','+RECOC2') size 200M,
 group 13 ('+DATAC2','+RECOC2') size 200M;



 alter database add standby logfile thread 2
 group 21 ('+DATAC2','+RECOC2') size 200M,
 group 22 ('+DATAC2','+RECOC2') size 200M,
 group 23 ('+DATAC2','+RECOC2') size 200M;

 CREATE CONFIGURATION PONTEST_BROKER AS PRIMARY DATABASE IS PONTEST CONNECT IDENTIFIER IS PONTEST;
 ADD DATABASE PONTESTSTB AS CONNECT IDENTIFIER IS 'PONTESTSTB' MAINTAINED AS PHYSICAL;


srvctl add database -db PONTESTSTB -oraclehome  /u01/app/oracle/product/12.2.0.1/pontst -spfile '+DATAC2/PONTESTSTB/PARAMETERFILE/spfile.540.1091818311' -dbtype RAC -role PHYSICAL_STANDBY
srvctl add instance -db PONTESTSTB -instance PONTESTSTB1 -n lpexadev01-101
srvctl add instance -db PONTESTSTB -instance PONTESTSTB2 -n lpexadev02-101
srvctl modify database -db PONTESTSTB -spfile '+DATAC2/PONTESTSTB/PARAMETERFILE/spfile.540.1091820455'
srvctl start instance -db PONTESTSTB -instance PONTESTSTB1 -startoption mount


spfile="+DATAC2/PONTESTSTB/PARAMETERFILE/spfile.540.1091818311"

alter system set cluster_database=true scope=spfile;
alter system set cluster_database_instances=2 scope=spfile;




ALTER SYSTEM SET local_listener="(ADDRESS=(PROTOCOL=TCP)(HOST=172.21.81.1)(PORT=1521))"  SCOPE=BOTH SID='PONTESTSTB1';

alter system set local_listener = '(ADDRESS=(PROTOCOL=TCP)(HOST=172.21.81.1)(PORT=1521))' SCOPE=BOTH SID='PONTESTSTB1';
alter system set local_listener = '(ADDRESS=(PROTOCOL=TCP)(HOST=172.21.81.2)(PORT=1521))' SCOPE=BOTH SID='PONTESTSTB2';

connect sys/Ogma2019-tst@PONTESTSTB as sysdba
connect sys@PONTESTSTB


 PONTESTSTB
        (SID_DESC =
        (GLOBAL_DBNAME = PONTESTSTB_DGMGRL)
        (ORACLE_HOME = /u01/app/oracle/product/12.2.0.1/pontst)
        (SID_NAME = PONTESTSTB)
        )
   PONTESTSTB
        (SID_DESC =
        (ORACLE_HOME = /u01/app/oracle/product/12.2.0.1/pontst)
        (SID_NAME = PONTESTSTB)
        )

alter system set dg_broker_start=false scope=both;
alter system set dg_broker_start=false scope=both;


select plan_hash_value from v$sql_plan where sql_id in ('2cw8km7gygsu4','8rcn1cfwvkfbx');

305413586


PORTO EDITORA
oeyssZhU

Origem:
srv-ora-prd2
user: oracle
password: 0raprdGpe
Destino
srv-ora-dw
user: oracle
password: 0rapreGpe



edit instance 'PONTESTSTB2' set Property StaticConnectIdentifier='(DESCRIPTION=(address=(protocol=tcp)(host=172.21.81.2)(port=1521))(CONNECT_DATA=(SERVICE_NAME=PONTESTSTB_DGMGRL)(INSTANCE_NAME=PONTESTSTB2)(SERVER=DEDICATED)))';

e?)?X=Ah#wJH$tG8kIS$?


set timing on timi on
spool Spool_of_exec_${RUNTIMEID};
ALTER SESSION SET TIMED_STATISTICS = TRUE;
ALTER SESSION SET STATISTICS_LEVEL=ALL;
ALTER SESSION SET MAX_DUMP_FILE_SIZE = UNLIMITED;
ALTER SESSION SET TRACEFILE_IDENTIFIER='QUERYLENTA${RUNTIMEID}';
ALTER SESSION SET CONTAINER=PDBWMS;
ALTER SESSION SET CURRENT_SCHEMA=DCSDBA;

EXEC DBMS_SESSION.SESSION_TRACE_ENABLE(waits => TRUE, binds => TRUE);
@queryToTrace.sql
EXEC DBMS_SESSION.SESSION_TRACE_DISABLE();
spool off;
exit;



--open cursors
select a.value "OPEN_CURSORS", s.username, s.sid, s.serial# ,program,module,action,machine
from v$sesstat a, v$statname b, v$session s
where a.statistic# = b.statistic# and s.sid=a.sid and b.name = 'opened cursors current' and s.username is not null
order by 1;

SELECT  max(a.value) as highest_open_cur, p.value as max_open_cur 
FROM v$sesstat a, v$statname b, v$parameter p WHERE  a.statistic# = b.statistic#  and b.name = 'opened cursors current' and p.name= 'open_cursors' group by p.value;


[12/22/2021 11:37 AM] Lucas Ongaratto
DELTA\admin.timestamp
e8GapNQCU9FL

[12/22/2021 11:38 AM] Lucas Ongaratto
Client - FortiClient
User: timestamp
Pwd: Efajws5jWN5w





SQL_ID        PLAN_HASH_VALUE
------------- ---------------
gdt76qbt6kb57      2639140389
gdt76qbt6kb57      2976397408


I   Operation                                     Object_Name                        # Rows      BYTES       COST       TIME
--- --------------------------------------------- ------------------------------ ---------- ---------- ---------- ----------
0   SELECT STATEMENT                                                                                       490596
1*  FILTER
2    SORT (GROUP BY)                                                                     40      12160     490596         20
3*    HASH JOIN                                                                         536     162944     490595         20
4      VIEW                                                                            1957     138947     278014         11
5       HASH (GROUP BY)                                                                1957     628197     278014         11
6*       HASH JOIN (RIGHT OUTER)                                                       1957     628197     278013         11
7         VIEW                                                                            8        720      59576          3
8*         HASH JOIN                                                                      8       2880      59576          3
9*          VIEW                                                                        607      91657         90          1
10*          WINDOW (SORT PUSHED RANK)                                                  607      55237         90          1
11            VIEW                                                                      607      55237         89          1
12             UNION-ALL
13              TABLE ACCESS (BY INDEX ROWID BATC PRE_ADVICE_HEADER                      32       1504          6          1
14*              INDEX (RANGE SCAN)               IDX_PAH_CLIENT_SITE                    36                     3          1
15              TABLE ACCESS (BY INDEX ROWID BATC PRE_ADVICE_HEADER_ARCHIVE             575      28750         83          1
16*              INDEX (RANGE SCAN)               IDX_PAHA_CLIENT_SITE                  544                     3          1
17*         VIEW                                                                      18025    3767225      59486          3
18*          WINDOW (SORT PUSHED RANK)                                                18025    2974125      59486          3
19            VIEW                                                                    18025    2974125      58831          3
20             UNION-ALL
21*             TABLE ACCESS (FULL)               PRE_ADVICE_LINE                      2358     124974      50115          2
22              TABLE ACCESS (BY INDEX ROWID BATC PRE_ADVICE_LINE_ARCHIVE             15667     940020       8715          1
23*              INDEX (SKIP SCAN)                U_PRE_ADVICE_LINE_ARCHIVE           15667                  7962          1
24        NESTED LOOPS (OUTER)                                                         1957     452067     218437          9
25         VIEW                                                                        1957     228969     212564          9
26*         FILTER
27           HASH (GROUP BY)                                                           1957     358131     212564          9
28*           HASH JOIN (RIGHT OUTER)                                                 39122    7159326     212562          9
29*            VIEW                                                                     576      33408         90          1
30*             WINDOW (SORT PUSHED RANK)                                               576      24768         90          1
31               VIEW                                                                   576      24768         89          1
32                UNION-ALL
33                 TABLE ACCESS (BY INDEX ROWID B PRE_ADVICE_HEADER                      32        864          6          1
34*                 INDEX (RANGE SCAN)            IDX_PAH_CLIENT_SITE                    36                     3          1
35                 TABLE ACCESS (BY INDEX ROWID B PRE_ADVICE_HEADER_ARCHIVE             544      17408         83          1
36*                 INDEX (RANGE SCAN)            IDX_PAHA_CLIENT_SITE                  544                     3          1
37*            HASH JOIN (RIGHT OUTER)                                                39122    4890250     212472          9
38              TABLE ACCESS (BY INDEX ROWID BATC SKU_CONFIG                              1         38          2          1
39*              INDEX (RANGE SCAN)               IDX_SC_CLIENT                           1                     1          1
40*             TABLE ACCESS (BY INDEX ROWID BATC INVENTORY_TRANSACTION_ARCHIVE       39122    3403614     212470          9
41*              INDEX (SKIP SCAN)                IDX_ITA_CLIENT_SITE_DSTAMP         168527                198980          8
42         VIEW                                   VW_LAT_91043DF3                         1        114          3          1
43*         TABLE ACCESS (BY INDEX ROWID)         SKU                                     1         75          3          1
44*          INDEX (UNIQUE SCAN)                  PK_SKU                                  1                     2          1
45     VIEW                                                                            1957     455981     212581          9
46*     FILTER
47       HASH (GROUP BY)                                                               1957     356174     212581          9
48*       FILTER
49*        HASH JOIN (RIGHT OUTER)                                                    39122    7120204     212579          9
50*         VIEW                                                                        607      41883         90          1
51*          WINDOW (SORT PUSHED RANK)                                                  607      44918         90          1
52            VIEW                                                                      607      44918         89          1
53             UNION-ALL
54              TABLE ACCESS (BY INDEX ROWID BATC PRE_ADVICE_HEADER                      32       1024          6          1
55*              INDEX (RANGE SCAN)               IDX_PAH_CLIENT_SITE                    36                     3          1
56              TABLE ACCESS (BY INDEX ROWID BATC PRE_ADVICE_HEADER_ARCHIVE             575      21850         83          1
57*              INDEX (RANGE SCAN)               IDX_PAHA_CLIENT_SITE                  544                     3          1
58*         HASH JOIN (RIGHT OUTER)                                                   39122    4420786     212489          9
59           TABLE ACCESS (FULL)                  APPLICATION_USER                     2132      46904         19          1
60*          TABLE ACCESS (BY INDEX ROWID BATCHED INVENTORY_TRANSACTION_ARCHIVE       39122    3560102     212470          9
61*           INDEX (SKIP SCAN)                   IDX_ITA_CLIENT_SITE_DSTAMP         168527                198979          8

I   Operation                                          Object_Name                        # Rows      BYTES       COST       TIME
--- -------------------------------------------------- ------------------------------ ---------- ---------- ---------- ----------
0   SELECT STATEMENT                                                                                            491566
1*  FILTER
2    SORT (GROUP BY)                                                                          38      11552     491566         20
3*    HASH JOIN                                                                              786     238944     491565         20
4      VIEW                                                                                  696      49416     271846         11
5       HASH (GROUP BY)                                                                      696     230376     271846         11
6*       HASH JOIN (OUTER)                                                                   696     230376     271845         11
7         NESTED LOOPS (OUTER)                                                               696     160776     211809         9
8          VIEW                                                                              696      81432     209720         9
9*          FILTER
10           HASH (GROUP BY)                                                                 696     128064     209720         9
11*           HASH JOIN (RIGHT OUTER)                                                      13919    2561096     209719         9
12*            VIEW                                                                          579      34161         90         1
13*             WINDOW (SORT PUSHED RANK)                                                    579      25476         90         1
14               VIEW                                                                        579      25476         89         1
15                UNION-ALL
16                 TABLE ACCESS (BY INDEX ROWID BATCHE PRE_ADVICE_HEADER                      35        945          6         1
17*                 INDEX (RANGE SCAN)                 IDX_PAH_CLIENT_SITE                    35                     3         1
18                 TABLE ACCESS (BY INDEX ROWID BATCHE PRE_ADVICE_HEADER_ARCHIVE             544      17408         83         1
19*                 INDEX (RANGE SCAN)                 IDX_PAHA_CLIENT_SITE                  544                     3         1
20*            HASH JOIN (RIGHT OUTER)                                                     13919    1739875     209629         9
21              TABLE ACCESS (BY INDEX ROWID BATCHED)  SKU_CONFIG                              1         38          2         1
22*              INDEX (RANGE SCAN)                    IDX_SC_CLIENT                           1                     1         1
23*             TABLE ACCESS (BY INDEX ROWID BATCHED)  INVENTORY_TRANSACTION_ARCHIVE       13919    1210953     209627         9
24*              INDEX (SKIP SCAN)                     IDX_ITA_CLIENT_SITE_DSTAMP         133007                198979         8
25         VIEW                                        VW_LAT_91043DF3                         1        114          3         1
26*         TABLE ACCESS (BY INDEX ROWID)              SKU                                     1         75          3         1
27*          INDEX (UNIQUE SCAN)                       PK_SKU                                  1                     2         1
28        VIEW                                                                             24840    2484000      60036         3
29*        HASH JOIN                                                                       24840    8942400      60036         3
30*         VIEW                                                                             579      87429         90         1
31*          WINDOW (SORT PUSHED RANK)                                                       579      52110         90         1
32            VIEW                                                                           579      52110         89         1
33             UNION-ALL
34              TABLE ACCESS (BY INDEX ROWID BATCHED)  PRE_ADVICE_HEADER                      35       1645          6         1
35*              INDEX (RANGE SCAN)                    IDX_PAH_CLIENT_SITE                    35                     3         1
36              TABLE ACCESS (BY INDEX ROWID BATCHED)  PRE_ADVICE_HEADER_ARCHIVE             544      27200         83         1
37*              INDEX (RANGE SCAN)                    IDX_PAHA_CLIENT_SITE                  544                     3         1
38*         VIEW                                                                           22521    4706889      59946         3
39*          WINDOW (SORT PUSHED RANK)                                                     22521    3918654      59946         3
40            VIEW                                                                         22521    3918654      59083         3
41             UNION-ALL
42*             TABLE ACCESS (FULL)                    PRE_ADVICE_LINE                      1599      84747      50115         2
43              TABLE ACCESS (BY INDEX ROWID BATCHED)  PRE_ADVICE_LINE_ARCHIVE             20922    1255320       8968         1
44*              INDEX (SKIP SCAN)                     U_PRE_ADVICE_LINE_ARCHIVE           20922                  7962         1
45     VIEW                                                                                32577    7590441     219719         9
46*     FILTER
47       HASH (GROUP BY)                                                                   32577    5929014     219719         9
48*       HASH JOIN (RIGHT OUTER)                                                         651540  118580280     209737         9
49         TABLE ACCESS (FULL)                         APPLICATION_USER                     2132      46904         19         1
50*        FILTER
51*         HASH JOIN (RIGHT OUTER)                                                        28828    4612480     209716         9
52*          VIEW                                                                            579      39951         90         1
53*           WINDOW (SORT PUSHED RANK)                                                      579      42846         90         1
54             VIEW                                                                          579      42846         89         1
55              UNION-ALL
56               TABLE ACCESS (BY INDEX ROWID BATCHED) PRE_ADVICE_HEADER                      35       1120          6         1
57*               INDEX (RANGE SCAN)                   IDX_PAH_CLIENT_SITE                    35                     3         1
58               TABLE ACCESS (BY INDEX ROWID BATCHED) PRE_ADVICE_HEADER_ARCHIVE             544      20672         83         1
59*               INDEX (RANGE SCAN)                   IDX_PAHA_CLIENT_SITE                  544                     3         1
60*          TABLE ACCESS (BY INDEX ROWID BATCHED)     INVENTORY_TRANSACTION_ARCHIVE       28828    2623348     209626         9
61*           INDEX (SKIP SCAN)                        IDX_ITA_CLIENT_SITE_DSTAMP         133007                198979         8




I   Operation                                          Object Name                        # Rows      BYTES       COST       TIME
--- -------------------------------------------------- ------------------------------ ---------- ---------- ---------- ----------
0   SELECT STATEMENT                                                                                          37321738
1*  FILTER
2    SORT (GROUP BY)                                                                          34      13770   37321738       1458
3     NESTED LOOPS                                                                           345     139725   37321737       1458
4      VIEW                                                                                  604     215628     220888         9
5*      FILTER
6        HASH (GROUP BY)                                                                     604     109928     220888         9
7*        FILTER
8*         HASH JOIN (RIGHT OUTER)                                                         12079    2198378     220887         9
9*          VIEW                                                                             638      44022         91         1
10*          WINDOW (SORT PUSHED RANK)                                                       638      47212         91         1
11            VIEW                                                                           638      47212         90         1
12             UNION-ALL
13              TABLE ACCESS (BY INDEX ROWID BATCHED)  PRE_ADVICE_HEADER                      63       2016          7         1
14*              INDEX (RANGE SCAN)                    IDX_PAH_CLIENT_SITE                    48                     3         1
15              TABLE ACCESS (BY INDEX ROWID BATCHED)  PRE_ADVICE_HEADER_ARCHIVE             575      21850         83         1
16*              INDEX (RANGE SCAN)                    IDX_PAHA_CLIENT_SITE                  544                     3         1
17*         HASH JOIN (RIGHT OUTER)                                                        12079    1364927     220796         9
18           TABLE ACCESS (FULL)                       APPLICATION_USER                     2141      47102         19         1
19*          TABLE ACCESS (BY INDEX ROWID BATCHED)     INVENTORY_TRANSACTION_ARCHIVE       12079    1099189     220777         9
20*           INDEX (SKIP SCAN)                        IDX_ITA_CLIENT_SITE_DSTAMP          81530                213792         9
21     VIEW PUSHED PREDICATE                                                                   1         48      61425         3
22      SORT (GROUP BY)                                                                        1        321      61425         3
23*      HASH JOIN (OUTER)                                                                     1        321      61424         3
24        NESTED LOOPS (OUTER)                                                                 1        231        105         1
25         VIEW                                                                                1        117        102         1
26*         FILTER
27           SORT (GROUP BY)                                                                   1        183        102         1
28*           FILTER
29*            HASH JOIN (RIGHT OUTER)                                                     12079    2210457        101         1
30*             VIEW                                                                         607      35206         91         1
31*              WINDOW (SORT PUSHED RANK)                                                   607      26101         91         1
32*               FILTER
33                 VIEW                                                                      607      26101         90         1
34                  UNION-ALL
35                   TABLE ACCESS (BY INDEX ROWID BATC PRE_ADVICE_HEADER                      63       1701          7         1
36*                   INDEX (RANGE SCAN)               IDX_PAH_CLIENT_SITE                    48                     3         1
37                   TABLE ACCESS (BY INDEX ROWID BATC PRE_ADVICE_HEADER_ARCHIVE             544      17408         83         1
38*                   INDEX (RANGE SCAN)               IDX_PAHA_CLIENT_SITE                  544                     3         1
39*             HASH JOIN (RIGHT OUTER)                                                    12079    1509875         10         1
40               TABLE ACCESS (BY INDEX ROWID BATCHED) SKU_CONFIG                              1         38          5         1
41*               INDEX (RANGE SCAN)                   IDX_SC_CLIENT                           1                     4         1
42*              TABLE ACCESS (BY INDEX ROWID BATCHED) INVENTORY_TRANSACTION_ARCHIVE       12079    1050873          5         1
43*               INDEX (RANGE SCAN)                   IDX_ITA_SKU_ID                          1                     4         1
44         VIEW                                        VW_LAT_91043DF3                         1        114          3         1
45*         TABLE ACCESS (BY INDEX ROWID)              SKU                                     1         75          3         1
46*          INDEX (UNIQUE SCAN)                       PK_SKU                                  1                     2         1
47        VIEW                                                                                 7        630      61319         3
48*        HASH JOIN                                                                           7       2520      61319         3
49*         VIEW                                                                             638      96338         91         1
50*          WINDOW (SORT PUSHED RANK)                                                       638      58058         91         1
51            VIEW                                                                           638      58058         90         1
52             UNION-ALL
53*             FILTER
54               TABLE ACCESS (BY INDEX ROWID BATCHED) PRE_ADVICE_HEADER                      63       2961          7         1
55*               INDEX (RANGE SCAN)                   IDX_PAH_CLIENT_SITE                    48                     3         1
56*             FILTER
57               TABLE ACCESS (BY INDEX ROWID BATCHED) PRE_ADVICE_HEADER_ARCHIVE             575      28750         83         1
58*               INDEX (RANGE SCAN)                   IDX_PAHA_CLIENT_SITE                  544                     3         1
59*         VIEW                                                                           23467    4904603      61228         3
60*          WINDOW (SORT PUSHED RANK)                                                     23467    3872055      61228         3
61            VIEW                                                                         23467    3872055      60374         3
62             UNION-ALL
63*             FILTER
64*              TABLE ACCESS (FULL)                   PRE_ADVICE_LINE                       286      15158      50116         2
65*             FILTER
66               TABLE ACCESS (BY INDEX ROWID BATCHED) PRE_ADVICE_LINE_ARCHIVE             23181    1390860      10258         1
67*               INDEX (SKIP SCAN)                    U_PRE_ADVICE_LINE_ARCHIVE           23181                  9099         1


E
--- -------------------------------------------------- ------------------------------ ---------- ---------- ---------- ----------
0   SELECT STATEMENT                                                                                            242119
1*  FILTER
2    HASH (GROUP BY)                                                                           1        405     242119         10
3     NESTED LOOPS                                                                             2        810     242118         10
4      VIEW                                                                                  657     234549     220880         9
5*      FILTER
6        HASH (GROUP BY)                                                                     657     111690     220880         9
7*        FILTER
8*         HASH JOIN (RIGHT OUTER)                                                         13132    2232440     220879         9
9           TABLE ACCESS (BY INDEX ROWID BATCHED)      PRE_ADVICE_HEADER_ARCHIVE             575      18975         83         1
10*          INDEX (RANGE SCAN)                        IDX_PAHA_CLIENT_SITE                  544                     3         1
11*         HASH JOIN (RIGHT OUTER)                                                        12079    1654823     220796         9
12           TABLE ACCESS (FULL)                       APPLICATION_USER                     2141      47102         19         1
13*          TABLE ACCESS (BY INDEX ROWID BATCHED)     INVENTORY_TRANSACTION_ARCHIVE       12079    1389085     220777         9
14*           INDEX (SKIP SCAN)                        IDX_ITA_CLIENT_SITE_DSTAMP          81530                213792         9
15     VIEW PUSHED PREDICATE                                                                   1         48         32         1
16      SORT (GROUP BY)                                                                        1        411         32         1
17       NESTED LOOPS (OUTER)                                                                  1        411         31         1
18        NESTED LOOPS (OUTER)                                                                 1        240         25         1
19         VIEW                                                                                1        126         22         1
20*         FILTER
21           SORT (GROUP BY)                                                                   1        164         22         1
22*           FILTER
23*            HASH JOIN (RIGHT OUTER)                                                     12103    1984892         21         1
24              TABLE ACCESS (BY INDEX ROWID BATCHED)  PRE_ADVICE_HEADER_ARCHIVE              14        378         11         1
25*              INDEX (RANGE SCAN)                    IDX_PAHA_CLIENT_SITE                   14                     9         1
26*             HASH JOIN (RIGHT OUTER)                                                    12079    1654823         10         1
27               TABLE ACCESS (BY INDEX ROWID BATCHED) SKU_CONFIG                              1         38          5         1
28*               INDEX (RANGE SCAN)                   IDX_SC_CLIENT                           1                     4         1
29*              TABLE ACCESS (BY INDEX ROWID BATCHED) INVENTORY_TRANSACTION_ARCHIVE       12079    1195821          5         1
30*               INDEX (RANGE SCAN)                   IDX_ITA_SKU_ID                          1                     4         1
31         VIEW                                        VW_LAT_9A967744                         1        114          3         1
32*         TABLE ACCESS (BY INDEX ROWID)              SKU                                     1         58          3         1
33*          INDEX (UNIQUE SCAN)                       PK_SKU                                  1                     2         1
34*       VIEW PUSHED PREDICATE                                                               23       3933          6         1
35*        FILTER
36          NESTED LOOPS                                                              9872733722 9.8727E+11          6         1
37           NESTED LOOPS                                                             9872733722 9.8727E+11          6         1
38*           TABLE ACCESS (BY INDEX ROWID BATCHED)    PRE_ADVICE_LINE_ARCHIVE                 1         55          4         1
39*            INDEX (RANGE SCAN)                      U_PRE_ADVICE_LINE_ARCHIVE               1                     3         1
40*           INDEX (RANGE SCAN)                       U_PRE_ADVICE_HEADER_ARCHIVE             1                     1         1
41*          TABLE ACCESS (BY INDEX ROWID)             PRE_ADVICE_HEADER_ARCHIVE      1.5667E+13 7.0500E+14          2         1

42 rows selected.


PRE_ADVICE_HEADER_ARCHIVE
PRE_ADVICE_HEADER   

IDX_PAH_CLIENT_SITE          
IDX_PAHA_CLIENT_SITE         
                             
APPLICATION_USER             
INVENTORY_TRANSACTION_ARCHIVE
IDX_ITA_CLIENT_SITE_DSTAMP   



Análise descritiva: Dados históricos, o que aconteceu? Relatórios .
Análise diagnóstica: Por que aconteceu? 
Análise preditiva: O que vai acontecer? Machine Learning , regressão ....
Análise prescritiva: O que fazer? Machine Learning
Análise cognitiva: Inferências nos dados existentes. Padrões. NLP


STC - Processamento de salários da função pública
WAY 4 - Pagamentos feitos no exterior.



gdt76qbt6kb57


SELECT DISTINCT sql_id, plan_hash_value, TIMESTAMP, bytes
FROM v$sql_plan --(replace v$sql_plan with dba_hist_sql_plan if info is flushed from shared pool)
WHERE sql_id ='4jhr11u3uv1tr'
order by bytes;


select ADDRESS, HASH_VALUE from V$SQLAREA where SQL_ID like 'c4tknm4pyujt3' ;

exec DBMS_SHARED_POOL.PURGE ('00000001C754A768,736970531', 'C');


SET LINES 1000
SET PAGES 1000
COLUMN I FORMAT A3


  SELECT /*+ NO_MERGE */ 
         ROWNUM-1||
   DECODE(access_predicates,NULL,DECODE(filter_predicates,NULL,'','*'),'*') "I",
         SUBSTR(LPAD(' ',(DEPTH-1))||
   OPERATION,1,40)||
   DECODE(OPTIONS,NULL,'',' (' 
   || OPTIONS 
   || ')') "Operation",
         SUBSTR(OBJECT_NAME,1,30) "Object Name",
         cardinality "# Rows",
         bytes,
         cost,
         time
    FROM (
         SELECT * 
           FROM gv$sql_plan 
          WHERE sql_id = '4v6m2bbjhtdu3'
          and plan_hash_value='1065237475'
         ) plan
ORDER BY id
/


select TABLE_NAME, LAST_ANALYZED, SAMPLE_SIZE, NUM_ROWS, STALE_STATS 
from dba_tab_statistics
where owner='DCSDBA' and table_name like 'PRE_ADVICE_%_ARCHIVE'
/


select sum(bytes)/1048576, owner, segment_name from dba_segments
where segment_name like 'PRE_ADVICE_%_ARCHIVE'
group by owner, segment_name
order by segment_name
/


exec DBMS_STATS.GATHER_TABLE_STATS(OWNNAME => 'DCSDBA', TABNAME => 'PRE_ADVICE_LINE_ARCHIVE', estimate_percent =>dbms_stats.auto_sample_size, CASCADE =>TRUE, method_opt => 'FOR ALL COLUMNS SIZE AUTO', no_invalidate=>false)
/


select count(*), trunc(LAST_UPDATE_DATE) from PRE_ADVICE_LINE_ARCHIVE group by trunc(LAST_UPDATE_DATE) order by 2;



select index_name, LAST_ANALYZED, SAMPLE_SIZE, DISTINCT_KEYS, NUM_ROWS, LEAF_BLOCKS, CLUSTERING_FACTOR, STALE_STATS 
from dba_ind_statistics
where owner='DCSDBA' and index_name in ('U_PRE_ADVICE_LINE_ARCHIVE', 'U_PRE_ADVICE_HEADER_ARCHIVE') 
/




select sql_id, sql_fulltext from v$sql where sql_id in(
'91nw2sdcmn4k0'
--'7bbvsfahtd2c5',
--'98n7q1kq9p5a7',
--'2ygnt73ck3jk8',
--'2y876wzshskyj'
)
/

select sql_id, sql



SELECT CASE WHEN RELOC.CLIENT_ID = 'GROHEP' THEN 'GROHE' WHEN (RELOC.CLIENT_ID = 'SACPECAS' AND RELOC.ENTIDADE = '101') THEN 'SACNET' WHEN (RELOC.CLIENT_ID = 'SACPECAS' AND RELOC.ENTIDADE != '101') THEN 'SACOOR' ELSE RELOC.CL
              IENT_ID END CLIENT_ID, RELOC.SITE_ID, RELOC.DATARELOCATE, RECP.CLASSIFICACAO CLASSIFICACAO
              , SUM(RECP.VOLUME_TOTAL) VOLUME_TOTAL, CASE WHEN ( RECP.CLASSIFICACAO = 834 AND RECP.SEG_ESCOLHA IS NOT NULL ) THEN RECP.SEG_ESCOLHA ELSE SUM(RECP.PALETES_TOTAL) END PALETES_TOTAL,
               NVL(RELOC.NOTES, 0) USERS FROM ( SELECT C.CLIENT_ID, C.SITE_ID, MAX(C.RECEIPTDATE) AS DATARELOCATE, C.TAG_ID, C.REFERENCE_ID, C.SKU_ID, C.CONFIG_ID, C.TO_LOC_ID, C.ENTIDADE, DECOD
              E(C.CLIENT_ID, 'RENAULT',NULL, U.NOTES) NOTES FROM ( SELECT IT.CLIENT_ID, CASE WHEN IT.SITE_ID = 'CLT' THEN 'CLM2' WHEN IT.SITE_ID IN ( 'CLG2', 'CLG3' ) THEN 'CLG' WHEN IT.SITE_IDIN ( 'CLG4' ) THEN 'CLG3' WHEN IT.SITE_ID IN ( 'CLF2' ) THEN 'CLF' WHEN IT.SITE_ID = 'CLAV3' THEN 'CLAV2' ELSE IT.SITE_ID END SITE_ID, CASE WHEN IT.CLIENT_ID IN ( 'DECATHLON', 'DECEXP' ) THEN DECODE(PAH.USER_DEF_DATE_1, NULL, TRUNC(IT.DSTAMP), TRUNC(PAH.USER_DEF_DATE_1)) ELSE TO_DATE(TO_CHAR(DSTAMP, 'YYYY-MM-DD'), 'YYYY-MM-DD') END AS RECEIPTDATE, TAG_ID, REFERENCE_ID, SKU_ID, CONFIG_ID, DECODE(IT.CLIENT_ID, 'RENAULT',NULL, TO_LOC_ID)TO_LOC_ID, DECODE(IT.CLIENT_ID, 'SACPECAS',PAH.USER_DEF_TYPE_8, NULL) ENTIDADE, UPDATE_QTY, USER_ID FROM INVENTORY_TRANSACTION_ARCHIVE IT LEFT JOIN C_PRE_ADVICE_HEADER_TOTAL_VW PAH ON IT.CLIENT_ID = PAH.CLIENT_ID AND IT.REFERENCE_ID = PAH.PRE_ADVICE_ID AND CASE WHEN IT.CLIENT_ID ='MRBLUE' THEN PAH.SITE_ID ELSE IT.SITE_ID END = PAH.SITE_ID WHERE 1 = 1 AND CASE WHEN IT.CLIENT_ID IN ( 'DECATHLON', 'DECEXP' ) THEN DECODE(PAH.USER_DEF_DATE_1, NULL, TRUNC(IT.DSTAMP), TRUNC(PAH.USER_DEF_DATE_1)) ELSE TO_DATE(TO_CHAR(DSTAMP, 'YYYY-MM-DD'), 'YYYY-MM-DD')
            END >= :B1 AND ( ( CODE IN ( 'Relocate', 'Putway' ) AND ( ( IT.CLIENT_ID = 'QUIMIDROGA' AND FROM_LOC_ID = 'QUIMIGERAL' ) OR ( IT.CLIENT_ID = 'INDASA' AND FROM_LOC_ID = 'RECEPCAO') ) ) OR ( CODE IN ( 'Receipt', 'Receipt Reverse' ) AND ( IT.CLIENT_ID IN ( 'GROHEP', 'MALMEIDA', 'LVLGROUP', 'PFP', 'GROHE', 'RENAULT' ) OR ( IT.CLIENT_ID IN ( 'DECATHLON', 'DECEXP' ) AND ( ( IT.FROM_LOC_ID ) <> 'BCLT%' AND ( IT.FROM_LOC_ID ) <> 'DEC-ERROEN' AND ( IT.FROM_LOC_ID ) <> 'DEC-EXPORT' ) AND ( ( IT.REFERENCE_ID ) NOT LIKE '%PELE' ) AND ( IT.USER_DEF_NUM_1 <> 999999 OR IT.USER_DEF_NUM_1 IS NULL ) AND REFERENCE_ID NOT IN ( 'TRANSFCLG-CLG3', 'TRANSF-PONTUAL' ) ) OR (IT.CLIENT_ID = 'SACPECAS' AND PAH.PRE_ADVICE_TYPE IN ('ONRETURN','MOVEIT'))) AND IT.REFERENCE_ID IS NOT NULL) OR ( IT.CLIENT_ID = 'KAFFA' AND CODE = 'Inv UnLock' ) OR ( IT.CLIENT_ID = 'MAJESTIC' AND ( ( IT.CODE = 'Inv UnLock' AND IT.SKU_ID<> 'CONTAGEM' AND IT.NOTES = 'Locked(VALIDAR) -> UnLocked()' ) ) ) OR ( IT.CLIENT_ID = 'FARFETCHPK' AND CODE = 'Inv UnLock' AND IT.NOTES LIKE '%INCUB%' ) OR ( IT.CLIENT_ID = 'FARFETCHTX' AND IT.CODE = 'Inv UnLock' AND IT.NOTES LIKE '%INCUB%' ) OR ( IT.CLIENT_ID = 'MRBLUE' AND ( IT.CODE IN ('Receipt', 'Receipt Reverse', 'Adjustment') AND (IT.REASON_ID NOT IN('CLATOCLT','CLM2INV') OR IT.REASON_ID IS NULL) AND PAH.PRE_ADVICE_TYPE IS NOT NULL AND (( IT.SKU_ID ) NOT LIKE 'VOLUM%' AND ( IT.SKU_ID ) NOT LIKE 'PENDURADO%' AND ( IT.SKU_ID )NOT LIKE 'CONTAGEM' ) AND ( PAH.PRE_ADVICE_TYPE != 'CROSSD' OR PAH.PRE_ADVICE_TYPE IS NULL
            ) AND ( ( IT.REFERENCE_ID ) NOT LIKE 'ESPANHA%' AND ( IT.REFERENCE_ID ) NOT LIKE 'ESTORIL%' AND ( IT.REFERENCE_ID ) NOT LIKE 'TRAN%' ) ) ) OR ( IT.CLIENT_ID = 'PORTTANGER' AND IT.CODE = 'Inv UnLock' ) ) AND SKU_ID NOT IN ( 'TMP' ) ) C LEFT JOIN APPLICATION_USER U ON C.USER_ID = U.USER_ID GROUP BY C.CLIENT_ID, C.SITE_ID, C.TAG_ID, C.REFERENCE_ID, C.SKU_ID, C.CONFIG_ID, C.TO_LOC_ID, C.ENTIDADE, DECODE(C.CLIENT_ID, 'RENAULT',NULL, U.NOTES) HAVING SUM(C.UPDATE_QTY) != 0 ) RELOC JOIN ( SELECT ADE.CLIENT_ID, CASE WHEN ADE.SITE_ID = 'CLT' THEN 'CLM2' WHEN ADE.SITE_ID IN ( 'CLG2', 'CLG3' ) THEN 'CLG' WHEN ADE.SITE_ID = 'CLAV3' THEN 'CLAV2' ELSE ADE.SITE_ID END SITE_ID, ADE.DATARECEPCAO, ADE.SKU_ID, ADE.TAG_ID, NVL(ACE.CLASSIFICACAO, ADE.CLASSIFICACAO) CLASSIFICACAO, CASE WHEN NVL(ACE.CLASSIFICACAO, ADE.CLASSIFICACAO) IN ( 349, 350, 834, 312, 116 ) THEN NULL ELSE SUM(ADE.VOLUME) END AS VOLUME_TOTAL, CASE WHEN ADE.CLIENT_ID IN ( 'DECATHLON', 'DECEXP' ) THEN CASE WHEN ADE.CLASSIFICACAO
            = 318 THEN SUM(ADE.VOLUME) WHEN ( ADE.CLASSIFICACAO = 834 AND ACE.SEG_ESCOLHA IS NOT NULL
            ) THEN ACE.SEG_ESCOLHA WHEN ADE.CLASSIFICACAO IN ( 834, 312 ) THEN COUNT(ADE.TAG_ID) ENDWHEN ACE.CLASSIFICACAO IS NULL AND ADE.CLIENT_ID NOT IN ( 'DECATHLON', 'DECEXP', 'LVLGROUP', 'KAFFA', 'MAJESTIC', 'FARFETCHTX', 'MRBLUE', 'RENAULT' ) THEN COUNT(ADE.TAG_ID) WHEN NVL(ACE.CLASSIFICACAO, ADE.CLASSIFICACAO) IN ( 203, 116, 309, 326, 863, 236 ) THEN SUM(ADE.QTY) ELSE SUM(ACE.PALETES) END AS PALETES_TOTAL, ACE.PRE_ADVICE_TYPE, ACE.SEG_ESCOLHA FROM( SELECT AD.CLIENT_ID, E.USER_DEF_TYPE_2, AD.OWNER_ID, CASE WHEN AD.CLIENT_ID = 'KAFFA' THEN CASE WHEN AD.OWNER_ID != 'GNDSUP' THEN CASE WHEN ( E.USER_DEF_TYPE_2 IS NULL OR E.USER_DEF_TYPE_2 = '0' ) THEN AD.QTY / 1 ELSE CEIL(AD.QTY / E.USER_DEF_TYPE_2) END ELSE 0 END ELSE AD.QTY END QTY, AD.TAG_ID, AD.SITE_ID, AD.DATARECEPCAO, AD.SKU_ID, AD.LINE_ID, AD.REFERENCE_ID, CASE WHEN AD.CLIENT_ID IN ( 'DECATHLON', 'DECEXP' ) THEN AD.VOLUME WHEN AD.CLIENT_ID IN ( 'GROHE' ) THEN ( DECODE(E.EACH_VOLUME, NULL,(E.EACH_HEIGHT * E.EACH_DEPTH * E.EACH_WIDTH), E.EACH_VOLUME) * AD.QTY ) ELSE ( E.EACH_HEIGHT * E.EACH_WIDTH * E.EACH_DEPTH * AD.QTY ) END AS VOLUME, CASE WHEN AD.CLIENT_ID = 'TETRAPAK' THEN 834 WHEN AD.CLIENT_ID IN (
            'DECATHLON', 'DECEXP' ) THEN CASE WHEN TIPO = 'PALETEB' THEN 312 WHEN TIPO = 'PALETE' THEN 834 ELSE 318 END WHEN AD.CLIENT_ID = 'LVLGROUP' THEN 203 WHEN AD.CLIENT_ID = 'MALMEIDA'THEN 116 WHEN AD.CLIENT_ID = 'KAFFA' THEN 309 WHEN AD.CLIENT_ID = 'MAJESTIC' THEN 116 WHEN
            AD.CLIENT_ID = 'MRBLUE' THEN 116 WHEN AD.CLIENT_ID = 'FARFETCHPK' THEN 349 WHEN AD.CLIENT_ID = 'FARFETCHTX' THEN 326 WHEN AD.CLIENT_ID = 'RENAULT' THEN 834 WHEN AD.CLIENT_ID = 'SACPECAS' THEN 863 WHEN AD.CLIENT_ID = 'PORTTANGER' THEN 236 END AS CLASSIFICACAO FROM ( SELECT A.CLIENT_ID, A.SITE_ID, MAX(A.RECEIPTDATE) AS DATARECEPCAO, A.TAG_ID, A.SKU_ID, A.CONFIG_ID, TIPO, SUM(A.UPDATE_QTY) AS QTY, SUM(VOLUME_2 *(UPDATE_QTY / RATIO_1_TO_2)) VOLUME,A.OWNER_ID, A.REFERENCE_ID, A.LINE_ID FROM ( SELECT IT.CLIENT_ID, IT.SITE_ID, TO_DATE(TO_CHAR(DSTAMP, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS RECEIPTDATE, CODE, TAG_ID, SKU_ID, IT.CONFIG_ID, CASE WHEN IT.CLIENT_ID IN ( 'DECATHLON', 'DECEXP' ) THEN CASE WHEN PAH.PRE_ADVICE_ID IS
            NOT NULL THEN CASE WHEN PAH.USER_DEF_CHK_1 = 'Y' THEN 'GRANEL' WHEN SC.VOLUME_3 = 3.384 THEN 'PALETEB' ELSE 'PALETE' END ELSE 'GRANEL' END ELSE NULL END AS TIPO, UPDATE_QTY, SC.VOLUME_2, SC.RATIO_1_TO_2, SC.RATIO_2_TO_3, IT.OWNER_ID, REFERENCE_ID, LINE_ID, LOCK_STATUSFROM INVENTORY_TRANSACTION_ARCHIVE IT LEFT JOIN SKU_CONFIG SC ON IT.CONFIG_ID = SC.CONFIG_ID AND IT.CLIENT_ID = SC.CLIENT_ID LEFT JOIN C_PRE_ADVICE_HEADER_TOTAL_VW PAH ON IT.CLIENT_ID = PAH.CLIENT_ID AND IT.REFERENCE_ID = PAH.PRE_ADVICE_ID AND CASE WHEN IT.CLIENT_ID = 'MRBLUE' THEN PAH.SITE_ID ELSE IT.SITE_ID END = PAH.SITE_ID WHERE 1 = 1 AND ( ( CODE IN ( 'Receipt', 'Receipt Reverse' ) AND IT.CLIENT_ID NOT IN ( 'KAFFA', 'MAJESTIC', 'MRBLUE') ) OR ( CODE = 'Inv UnLock' AND ( IT.CLIENT_ID = 'KAFFA' OR ( IT.CLIENT_ID = 'MAJESTIC' AND IT.NOTES = 'Locked(VALIDAR) -> UnLocked()' ) ) ) OR (IT.CLIENT_ID = 'MRBLUE' AND (IT.CODE ='Adjustment' OR (CODE IN ( 'Receipt', 'Receipt Reverse' ) AND TRUNC(IT.DSTAMP) >= :B1 )) AND (IT.REASON_ID NOT IN ('CLATOCLT','CLM2INV') OR IT.REASON_ID IS NULL)) ) AND SKU_ID <> 'TMP' ) A GROUP BY A.CLIENT_ID, A.SITE_ID, A.TAG_ID, A.SKU_ID, A.CONFIG_ID, A.TIPO, A.VOLUME_2, A.RATIO_2_TO_3, A.REFERENCE_ID, A.OWNER_ID, A.LINE_ID HAVING SUM(A.UPDATE_QTY) != 0 )
            AD LEFT JOIN SKU E ON AD.CLIENT_ID = E.CLIENT_ID AND AD.SKU_ID = E.SKU_ID AND ( ( AD.CLIENT_ID IN ( 'DECATHLON', 'DECEXP' ) AND ( E.USER_DEF_TYPE_2 NOT LIKE 'REDBOX' OR E.USER_DEF_TYPE_2 IS NULL ) ) OR AD.CLIENT_ID NOT IN ( 'DECATHLON', 'DECEXP' ) ) ) ADE LEFT JOIN ( SELECT AC.*, CASE WHEN AC.CLASSIFICACAO IN ( 349, 350, 834 ) THEN 1 ELSE 0 END AS PALETES FROM ( SELECT AB.*, ( CASE WHEN AB.PRE_ADVICE_TYPE = 'CONTENTOR' AND AB.CLIENT_ID = 'PFP' THEN 307 WHEN AB.UDC_L = 'Y' AND AB.CLIENT_ID = 'PFP' THEN 353 WHEN NVL(AB.UDC_L, 'N') = 'N' AND AB.CLIENT_ID = 'PFP' THEN 349 WHEN AB.UDC_L = 'N' AND AB.CLIENT_ID = 'QUIMIDROGA' THEN 350 WHEN AB.UDC_L = 'Y' AND AB.CLIENT_ID = 'QUIMIDROGA' THEN 353 WHEN AB.CLIENT_ID = 'INDASA' THEN 834 WHEN AB.UDC_H = 'Y' AND AB.CLIENT_ID = 'GROHE' THEN 834 WHEN AB.UDC_H = 'N' AND AB.CLIENT_ID = 'GROHE' THEN 318 WHEN AB.CLIENT_ID = 'GROHEP' THEN 834 WHEN AB.CLIENT_ID = 'LVLGROUP' THEN 203 WHEN AB.CLIENT_ID = 'MALMEIDA' THEN 116 WHEN AB.CLIENT_ID = 'KAFFA' THEN 309 WHEN AB.CLIENT_ID = 'MAJESTIC' THEN 116 WHEN AB.CLIENT_ID = 'FARFETCHPK' THEN
            349 WHEN AB.CLIENT_ID = 'FARFETCHTX' THEN 326 WHEN AB.CLIENT_ID = 'MRBLUE' THEN 116 WHENAB.CLIENT_ID = 'RENAULT' THEN 834 WHEN AB.CLIENT_ID = 'PORTTANGER' THEN 236 END ) AS CLASSIFICACAO FROM ( SELECT A.CLIENT_ID, A.SITE_ID, A.PRE_ADVICE_ID, A.PRE_ADVICE_TYPE, B.LINE_ID, B.SKU_ID, A.USER_DEF_CHK_1 UDC_H, B.USER_DEF_CHK_1 UDC_L, CASE WHEN ( A.CLIENT_ID = 'DECATHLON' AND A.USER_DEF_NUM_1 IS NOT NULL ) THEN A.USER_DEF_NUM_1 ELSE NULL END SEG_ESCOLHA FROM C_PRE_ADVICE_HEADER_TOTAL_VW A, C_PRE_ADVICE_LINE_TOTAL_VW B WHERE 1 = 1 AND A.CLIENT_ID = B.CLIENT_ID AND A.PRE_ADVICE_ID = B.PRE_ADVICE_ID AND TO_CHAR(A.CREATION_DATE, 'YYYY-MM') = TO_CHAR(B.CREATION_DATE, 'YYYY-MM') ) AB ) AC ) ACE ON ADE.CLIENT_ID = ACE.CLIENT_ID AND ACE.SITE_ID = CASE WHEN ADE.CLIENT_ID = 'MRBLUE' THEN ACE.SITE_ID ELSE ADE.SITE_ID END AND ADE.REFERENCE_ID = ACE.PRE_ADVICE_ID AND ADE.LINE_ID = ACE.LINE_ID AND ADE.SKU_ID = ACE.SKU_ID GROUP BY ADE.CLIENT_ID, ADE.SITE_ID, ADE.DATARECEPCAO, ADE.SKU_ID, ADE.TAG_ID, ACE.CLASSIFICACAO, ADE.CLASSIFICACAO, ACE.SEG_ESC





cloudadmin
cl0ud@dmiN





select sql_id, sql_fulltext from gv$sql where sql_text = 'UPDATE ACNT_CONTRACT SET IS_READY = :B3 WHERE ID = :B2 AND IS_READY = :B1';

UPDATE ACNT_CONTRACT SET IS_READY = :B3 WHERE ID = :B2 AND IS_READY = :B1


select sql_id, sql_fulltext from gv$sql where sql_text like 'SELECT ADDRESS_LINE_1, ADDRESS_LINE_2, ADDRESS_LINE_3, ADDRESS_LINE_4, ADDRESS_ZIP, ADD_DATE_01, ADD_DATE_02, ADD_INFO_01,% ADD_INFO_02, ADD_INFO_03, ADD_INFO_04, AFFILIATED_WITH, AFFILIATION_TYPE, AMND_DATE, AMND_OFFICER, AMND_PREV, AMND_STATE, BIRTH_DATE, BIRTH_NAM, BIRTH_PLACE, BRANCH, CCAT, CITIZENSHIP, CITY, CLIENT_NUMBER, CLT, COMPANY_DEPARTMENT, COMPANY_NAM, COUNTRY, DATE_EXPIRE, DATE_OPEN, DELIVERY_TYPE, ENABLE_AFFILIATION, E_MAIL, FATHER_S_NAM, FAX, FAX_H, FIRST_NAM, F_I, GENDER, ID, IS_READY, ITN, LANGUAGE, LAST_NAM, MARITAL_STATUS, MOTHER_S_NAM, PCAT, PHONE, PHONE_H, PHONE_M, PROFESSION, REG_DETAILS, REG_NUMBER, REG_NUMBER_TYPE, SALUTATION_SUFFIX, SERVICE_GROUP, SHORT_NAME, SOCIAL_NUMBER,% STATE, TAX_POSITION, TITLE, TRADE_NAM, TR_COMPANY_NAM, TR_FIRST_NAM, TR_LAST_NAM, TR_TITLE,%';

099tpzxddh4qy
77yz2y56nk60q 

select 'dbms_rowid.rowid_create (1,' ||  current_obj# ||',' || CURRENT_FILE# ||',' || CURRENT_BLOCK# ||',' || CURRENT_ROW# ||')' row_id, current_obj#, event,machine, sql_id, to_char(SQL_EXEC_START,'HH24:MI:SS') BT, blocking_session, 
time_waited/1000 time_waited_ms 
From dba_hist_active_sess_history 
Where sample_time between to_date('2022-01-24 13:00:00','YYYY-MM-DD HH24:MI:SS') and sysdate --to_date('2022-01-24 13:00:00','YYYY-MM-DD HH24:MI:SS') 
and sql_id in ('099tpzxddh4qy','77yz2y56nk60q') 
and event like 'enq:%TX%'; 

prdway4as2c.prd.emis.local




select dbms_rowid.rowid_create (1,95786,22,160181,9) from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95786,22,160181,9) from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95786,22,160181,9) from dual;
select dbms_rowid.rowid_create (1,95786,22,160181,9) from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95786,22,160181,9) from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95750,23,71427,9)  from dual;
select dbms_rowid.rowid_create (1,95786,22,160181,9) from dual;
select dbms_rowid.rowid_create (1,95786,22,160181,9) from dual;
select dbms_rowid.rowid_create (1,95786,22,160181,9) from dual;
select dbms_rowid.rowid_create (1,95786,22,160181,9) from dual;
select dbms_rowid.rowid_create (1,95786,22,160181,9) from dual;

32 rows selected.

select owner, object_name, object_type from dba_objects where object_id = 95750;
select owner, object_name, object_type from dba_objects where object_id = 95786;
95786

select * from OWS.ACNT_CONTRACT where rowid = 'AAAXYqAAWAAAnG1AAJ';
select * from OWS.CLIENT where rowid = 'AAAXYGAAXAAARcDAAJ';

select * from OWS.CLIENT where rowid = 'AAAkwEAAWAAAV2fAAR';




SQL> alter database add logfile thread 2 group 21 ('+DATAC2','+RECOC2') size 200M reuse;
SQL> alter database add logfile thread 2 group 22 ('+DATAC2','+RECOC2') size 200M reuse;
SQL> alter database add logfile thread 2 group 23 ('+DATAC2','+RECOC2') size 200M reuse;

SQL> ALTER DATABASE ENABLE PUBLIC THREAD 2; 

SQL> alter system set cluster_database=true scope=spfile;

SQL> shutdown immediate;

srvctl add database -db DEVMETA4 -oraclehome  /u01/app/oracle/product/12.2.0.1/devmeta4 -spfile '+DATAC2/DEVMETA4STB/PARAMETERFILE/spfile.461.1091441763' -dbtype RAC
srvctl add instance -db DEVMETA4 -instance DEVMETA41 -n lpexadev01-101
srvctl add instance -db DEVMETA4 -instance DEVMETA42 -n lpexadev02-101
srvctl status database -db DEVMETA4
srvctl start instance -db DEVMETA4 -instance DEVMETA41
srvctl start instance -db DEVMETA4 -instance DEVMETA42



SELECT Database,
Month_Date,
round(sum(decode(metric_column, 'spaceUsed', maximum))/1024/1024, 3) Used_Size_Tb,
round(sum(decode(metric_column, 'spaceAllocated', maximum))/1024/1024, 3) Allocated_Size_Tb
FROM
(
SELECT target_name Database, trunc(rollup_timestamp, 'MONTH') Month_Date, key_value TB, metric_column, round(max(maximum),0) maximum
FROM mgmt$metric_daily
WHERE target_type = 'rac_database'
and metric_name = 'tbspAllocation'
and metric_column in ('spaceAllocated', 'spaceUsed')
and target_name in ('VERS')
GROUP BY target_name, key_value, trunc(rollup_timestamp, 'MONTH'), metric_column
)
GROUP BY Database, Month_Date
ORDER BY Database, Month_Date
/

select object_name, last_ddl_time from dba_objects where (owner, object_name) in (select owner, table_name from dba_tables where tablespace_name='BPM01_SOAINFRA') order by last_ddl_time;



937 937 040 Albina





-- DEADLOCK

select sql_id, sql_fulltext from gv$sql where sql_fulltext like 'UPDATE DC_BANK_CARD SET BANK_CARD_SEQUENCE_NUMBER=:1 , BANK_CARD_EXPIRY_DATE=:2 , PREV_BANK_CARD_EXPIRY_DATE=:3%';
bmat1v67mk0rw

select sql_id, sql_fulltext from gv$sql where sql_fulltext like 'UPDATE DC_BANK_CARD SET BANK_CARD_SEQUENCE_NUMBER=:1 , BANK_CARD_EXPIRY_DATE=:2 , PREV_BANK_CARD_EXPIRY_DATE=:3 , BANK_CARD_PERIOD_STARTING_DATE=:4 , PREV_BK_CARD_PERIOD_START_DATE=:5 , BANK_CARD_PERIOD_DURATION=:6 , PREV_BANK_CARD_PERIOD_DURATION=:7 , BANK_CARD_PLAFOND=:8 %, PREV_BANK_CARD_PLAFOND=:9 , BANK_CARD_BALANCE=:10 , PREV_BANK_CARD_BALANCE=:11 , BANK_CARD_GLOBAL_PLAFOND=:12 , BANK_CARD_GLOBAL_BALANCE=:13 , BANK_CARD_PIN_REMAINING_TRIES=:14 , PREV_BK_CARD_PIN_REMAIN_TRIES=:15 , BANK_CARD_STATUS=:16 , BANK_CARD_STATUS_DATE=:17 , BANK_CARD_CAPTURE_STATUS=:18 , BANK_CARD_CAPTURE_REASON=:19 , BANK_CARD_CAPTURE_STATUS_DATE=:20 , POS_BK_TRANS_SEQUENCE_NUM=:21 , PREV_POS_BK_TRANS_SEQ_NUM=:22 , ATM_BK_TRANS_SEQUENCE_NUM=:23 , PREV_ATM_BK_TRANS_SEQ_NUM=:24 , BANK_CARD_LAST_TRANS_DATE=:25%';
45xsp65xbcccw

SET SQLBLANKLINES ON
select sql_id, sql_fulltext from gv$sql where sql_fulltext
like 'SELECT T1.BANK_CARD_BANK_CODE, T1.ACCOUNT_NUMBER, T1.CURRENCY_CODE, T1.ACCOUNT_AVAILABLE_BALANCE, T1.AVAILABLE_BALANCE_SIGNAL,%FROM DC_ACCOUNT T1 WHERE ( T1.BANK_CARD_BANK_CODE = :1  ) AND ( T1.ACCOUNT_NUMBER = :2  ) FOR UPDATE%';

aj8gqtmkcg0j6


col event format a30
col machine format a25
col row_id format a55

select 'dbms_rowid.rowid_create (1,' ||  current_obj# ||',' || CURRENT_FILE# ||',' || CURRENT_BLOCK# ||',' || CURRENT_ROW# ||')' row_id, current_obj#, event,machine, sql_id, to_char(SQL_EXEC_START,'HH24:MI:SS') BT, blocking_session,
time_waited/1000 time_waited_ms
From dba_hist_active_sess_history
Where sample_time between to_date('2022-03-10 14:00:00','YYYY-MM-DD HH24:MI:SS') and to_date('2022-03-10 14:10:00','YYYY-MM-DD HH24:MI:SS')
And  
sql_id in ('45xsp65xbcccw') 
and event like 'enq:%TX%';


select dbms_rowid.rowid_create (1,495476,1024,99530261,3) from dual;
                                                                                                  l
DBMS_ROWID.ROWID_C
------------------
AAB490AAXAALrYVAAD



select owner, object_name, object_type from dba_objects where object_id = 495476;


OWNER           OBJECT_NAME                    OBJECT_TYPE
--------------- ------------------------------ -----------------------
EPMSPROD        DC_BANK_CARD                   TABLE PARTITION


select * from EPMSPROD.DC_BANK_CARD where ROWID  = 'AAB490AAXAALrYVAAD';




select 'dbms_rowid.rowid_create (1,' ||  current_obj# ||',' || CURRENT_FILE# ||',' || CURRENT_BLOCK# ||',' || CURRENT_ROW# ||')' row_id, current_obj#, event,machine, sql_id, to_char(SQL_EXEC_START,'HH24:MI:SS') BT, blocking_session,
time_waited/1000 time_waited_ms
From dba_hist_active_sess_history
Where sample_time between to_date('2022-03-10 14:00:00','YYYY-MM-DD HH24:MI:SS') and to_date('2022-03-10 14:10:00','YYYY-MM-DD HH24:MI:SS')
And  
sql_id in ('aj8gqtmkcg0j6') 
and event like 'enq:%TX%';


                                   
select  dbms_rowid.rowid_create (1,100315,1024,1393631,56)  from dual;

DBMS_ROWID.ROWID_C
------------------
AAAYfbAAAAAFUPfAA4


col owner format a15
col object_name format a30
select owner, object_name, object_type from dba_objects where object_id = 100315;

OWNER           OBJECT_NAME                    OBJECT_TYPE
--------------- ------------------------------ -----------------------
EPMSPROD        DC_ACCOUNT                     TABLE



select * from EPMSPROD.DC_ACCOUNT where ROWID = 'AAAYfbAAAAAFUPfAA4';


EBS autoconfig

lpexadev01-101 /u01/app/oracle/product/12.1/etst/appsutil

[5:11 PM] Nuno Azevedo
*outros   .ora

[5:12 PM] Nuno Azevedo
o tnsnames.ora tem um ifile

[5:12 PM] Nuno Azevedo
in/ETSTMIG1_lpexadev01-101]$ cat tnsnames.ora | tail -2IFILE=/u01/app/oracle/product/12.1/etst/network/admin/ETSTMIG1_lpexadev01-101/ETSTMIG1_lpexadev01-101_ifile.ora[oraetst@lpexadev01-101:ETSTMIG1:/u01/app/oracle/product/12.1/etst/network/adm

[5:13 PM] Nuno Azevedo
se quisermos colocar alias sql*net específicos no tnsnames.ora (por exemplo para o rman) colocamos nesse ifile

-- Adicionar variáveis ao BD.
srvctl setenv database -d ETSTMIG -T TNS_ADMIN=/u01/app/oracle/product/12.1/eprod/network/admin

srvctl add listener -l ETSTMIG -o /u01/app/oracle/product/12.1/etst -p 1610

[oraetst@lpexadev02-101:ETSTMIG2:/u01/app/oracle/product/12.1/etst/network/admin]$ cat listener.ora
ifile=/u01/app/oracle/product/12.1/etst/network/admin/ETSTMIG1_lpexadev02-101/listener.ora
ETSTMIG=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=IPC)(KEY=ETSTMIG)))) # line added by Agent
ENABLE_GLOBAL_DYNAMIC_ENDPOINT_ETSTMIG=ON # line added by Agent
VALID_NODE_CHECKING_REGISTRATION_ETSTMIG=SUBNET # line added by Agent


EBS - Não usam OMV.

-- SEED
alter session set container=;

col name for a100
select file#, name, con_id from v$datafile where CON_ID=(select SYS_CONTEXT('USERENV', 'CON_ID') NAME FROM DUAL);



select 'alter database move datafile ' || file# || ' to ''+DATAC2'';' 
from v$datafile where CON_ID=(select SYS_CONTEXT('USERENV', 'CON_ID') NAME FROM DUAL);


--TEMPFILE 
set lin 200
col name for a100
select d.file#, d.name, d.con_id from v$tempfile d 
where d.CON_ID=(select SYS_CONTEXT('USERENV', 'CON_ID') NAME FROM DUAL)
and ts# in (select ts# from v$tablespace where name in 
            (select tablespace_name from dba_tablespaces where contents='TEMPORARY'));

set lin 200 pages 999
col file_name for a60
col tablespace_name for a20
set numwidth 15
select FILE_NAME, FILE_ID, TABLESPACE_NAME, AUTOEXTENSIBLE,
BYTES/1048576 as MB, MAXBYTES/1048576 as MAX_MB
from dba_temp_files where tablespace_name='TEMP'
/


alter tablespace TEMP add tempfile '+DATAC2' size 32767M autoextend off;

alter database tempfile 7 offline;

alter database tempfile 7 drop including datafiles;

--LOG
select distinct 'alter database drop standby logfile group ' || group# || ';' from v$standby_log;

col member for a70
select GROUP#, l.THREAD# , f.member, l.BYTES/1048576
from v$log l join v$logfile f 
using(group#) order by thread#, group#;


alter database add logfile thread 1 group 11 ('+DATAC2','+RECOC2') size 1536M;
alter database add logfile thread 1 group 12 ('+DATAC2','+RECOC2') size 1536M;
alter database add logfile thread 1 group 13 ('+DATAC2','+RECOC2') size 1536M;
alter database add logfile thread 1 group 14 ('+DATAC2','+RECOC2') size 1536M;
alter database add logfile thread 1 group 15 ('+DATAC2','+RECOC2') size 1536M;
alter database add logfile thread 1 group 16 ('+DATAC2','+RECOC2') size 1536M;
alter database add logfile thread 1 group 17 ('+DATAC2','+RECOC2') size 1536M;
alter database add logfile thread 1 group 18 ('+DATAC2','+RECOC2') size 1536M;



alter database add logfile thread 2 group 21 ('+DATAC2','+RECOC2') size 1536M;
alter database add logfile thread 2 group 22 ('+DATAC2','+RECOC2') size 1536M;
alter database add logfile thread 2 group 23 ('+DATAC2','+RECOC2') size 1536M;
alter database add logfile thread 2 group 24 ('+DATAC2','+RECOC2') size 1536M;
alter database add logfile thread 2 group 25 ('+DATAC2','+RECOC2') size 1536M;
alter database add logfile thread 2 group 26 ('+DATAC2','+RECOC2') size 1536M;
alter database add logfile thread 2 group 27 ('+DATAC2','+RECOC2') size 1536M;
alter database add logfile thread 2 group 28 ('+DATAC2','+RECOC2') size 1536M;


Alter database drop logfile group 1;

Spld3rM$


RTSK1664643


[1:49 PM] Nuno Azevedo
srvctl status database -d EPMSDGV


[1:49 PM] Nuno Azevedo
srvctl stop database -d EPMSDGV

[1:50 PM] Nuno Azevedo
srvctl start database -d EPMSDGV

[1:50 PM] Nuno Azevedo
sqlplus / as sysdba

[1:50 PM] Nuno Azevedo
show pdbs

[1:50 PM] Nuno Azevedo
validar que a epmsprod está open read write

[1:50 PM] Nuno Azevedo
apagar o blackou

3xpurg4


SQL> show con_name

 CON_NAME
------------------------------
EXPGEPMS

select OWNER, DIRECTORY_NAME, DIRECTORY_PATH
from dba_directories
where directory_name = 'EXP_EXPURGA';


  PLACAS

  ETQ 1j56

  D 220115050421532
  T 211115047196805

  CUE 3J37

  D 220115050421536
  T 210915044733836

VIO 

Podem executar com uma amostra de 5 execuções para cada teste:
1 - sem índice
2 - com índice CREATE INDEX mmt_externalrequest_date_creation_id_status_id_index ON mmt_externalrequest(date_creation,id,status_id);
(drop no fim)
3 - com índice CREATE INDEX mmt_externalrequest_date_creation_id_status_id_index ON mmt_externalrequest(date_creation,status_id); e order by date_creation em vez de er.id


do
$$
declare 
  i record;
begin
  for i in 1..3 loop
      select 'GTYONLINE IN' contexto, LOCALTIMESTAMP cdate_db, 300000 trx_timeout, er.id_uuid, er.id, er.phone_origin, er.phone_destination, er.mmt_request_type_id, er.result_code, er.result_control_id, er.msg, er.date_creation, er.retries, er.origin_tag, er.process_media, er.requester_id, er.response_msg, er.response_code, er.requestid, er.lhd_node_id, er.priority, er.status_id, er.date_update, er.date_update_externalinterface, er.date_schedule
      from mmt_externalrequest er
      where status_id not in (0, 2, 99, 200, 201)
      and er.id > 0
      --and source_id = 'API_PROCESSOR'
      --and date_creation >= now() - interval '1h'
      order by er.date_creation 
      limit 100 for update skip locked;
  end loop;
end;
$$
;


select 'GTYONLINE IN' contexto, LOCALTIMESTAMP cdate_db, 300000 trx_timeout, er.id_uuid, er.id, er.phone_origin, er.phone_destination, er.mmt_request_type_id, er.result_code, er.result_control_id, er.msg, er.date_creation, er.retries, er.origin_tag, er.process_media, er.requester_id, er.response_msg, er.response_code, er.requestid, er.lhd_node_id, er.priority, er.status_id, er.date_update, er.date_update_externalinterface, er.date_schedule
from mmt_externalrequest er
where status_id = 0
and er.id > 0
and mmt_request_type_id = 2500
and date_creation >= now() - interval '1h'
order by er.id
limit 100 for update skip locked;


set lin 200 pages 999
col dg for a20
select distinct * 
from (
select substr(name,1,instr(name,'/',1,2)-1) as dg, 'DATAFILE' from v$datafile union all
select substr(name,1,instr(name,'/',1,2)-1) as dg, 'TEMPFILE' from v$tempfile union all
select substr(name,1,instr(name,'/',1,2)-1) as dg, 'CONTROLFILE' from v$controlfile union all
select substr(name,1,instr(name,'/',1,2)-1) as dg, 'CONTROLFILE' from v$controlfile union all
select substr(member,1,instr(member,'/',1,2)-1) as dg, 'LOGFILE' from v$logfile
)
order by 2;

show parameter db_unique_name;
show parameter spfile;


dropar TEMPFILE DEVMETA4 e PONTESTSTB 
alter database tempfile 1 drop including datafiles;


ETSTMIG
alter database tempfile 2 drop including datafiles;
alter database tempfile 1 drop including datafiles;


ENDEVMIG 

alter database tempfile 1 drop including datafiles;
alter database tempfile 7 drop including datafiles;


RTSK1703732 - Completada
RTSK1703780 - Completada
RTSK1703799 - Em curso


-- PDB UPTIME OPEN TIME

SET SQLBLANKLINES ON
col name for a8
col "database uptime" for a30
select name,floor(sysdate-cast(open_time as date))||'Days '||floor(((sysdate-cast(open_time as date))-floor(sysdate-cast(open_time as date)))*24)||'hours '||
round(((sysdate-cast(open_time as date)-floor(sysdate-cast(open_time as date) )*24)-floor((sysdate-cast(open_time as date)-floor(sysdate-cast(open_time as date))*24)))*60)||
'minutes' "Database Uptime" from v$containers;

select con_id,name,dbid,open_mode,open_time from v$containers;


dbca -deleteDatabase -sourcedb db1db3 -forceArchiveLogDeletion


Instalação
2 Versão e Patches
3 Configuração Base de Dados Source
4 Configuração Base de Dados Target
5 Configuração OGG
5.1 Extract
5.2 Pumps
5.4 Replicats
5.5 Manager
5.6 Globals
6 Performance
7 Monitorização
8 Análise de Logs
9 Processo de Instanciação (validar se existe documentação)
10 Administração (validar se estão documentados os procedimentos de administração e troubleshoot)
11 Segurança



HNK-5G09
RENAVAM 00212140825
GBC-2I80
RENAVAM 01069479753
GJQ-6I44
RENAVAM 01291480967

gGyjxpgK0VB6xs7k1tY4uzMWDF8k

stats extract EXTDW2, latest, reportrate min, totalsonly WEB_OWNER.*
stats extract EXTDW2, latest, reportrate min, totalsonly MOBILE_OWNER.*
stats extract EXTDW2, latest, reportrate min, totalsonly GPE_OWNER.*

stats extract PMPDW2, latest, reportrate min, totalsonly WEB_OWNER.*
stats extract PMPDW2, latest, reportrate min, totalsonly MOBILE_OWNER.*
stats extract PMPDW2, latest, reportrate min, totalsonly GPE_OWNER.*

stats replicat RDW2, latest, reportrate min, totalsonly WEB_OWNER.*
stats replicat RDW2, latest, reportrate min, totalsonly MOBILE_OWNER.*
stats replicat RDW2, latest, reportrate min, totalsonly GPE_OWNER.*




Fri Feb 25 19:44:28 2022
Move operation committed for file +DATAC2/ETSTMIG/DATAFILE/apps_ts_media.738.1097609975
WARNING: Cannot delete old file +DATAC2/ETSTNEW/DATAFILE/apps_ts_media.558.1094401787 left after datafile move
Fri Feb 25 19:44:30 2022
Errors in file /u01/app/oraetst/diag/rdbms/etstmig/ETSTMIG1/trace/ETSTMIG1_ora_374240.trc:
ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.558.1094401787' not dropped; currently being accessed


alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.558.1094401787' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.559.1094401787' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.560.1094401787' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.561.1094401787' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.562.1094402033' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.563.1094402039' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.564.1094402041' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.565.1094402043' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.566.1094402187' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.567.1094402383' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.568.1094402391' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.569.1094402405' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.570.1094402551' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.571.1094402551' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.572.1094402697' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.573.1094402731' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.574.1094402767' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.575.1094402833' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.576.1094402939' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.577.1094402983' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.578.1094403019' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.579.1094403085' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.580.1094403169' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/custom_data_big.719.1094410885' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.581.1094403215' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.582.1094403251' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.583.1094403387' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.584.1094403441' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.585.1094403457' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.586.1094403481' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.587.1094403627' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.588.1094403683' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.589.1094403697' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.628.1094406179' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.651.1094407941' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.652.1094408077' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.622.1094405805' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.657.1094408289' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.658.1094408303' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.659.1094408305' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_tx_idx.669.1094408877' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_tx_idx.670.1094408883' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_tx_idx.629.1094406293' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.596.1094404175' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.597.1094404201' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.598.1094404203' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.599.1094404309' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.600.1094404465' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.660.1094408459' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.656.1094408285' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.711.1094410593' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.712.1094410593' not dropped; currently being accessed
alert_ETSTMIG1.log.20220302_190001:ORA-15028: ASM file '+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.713.1094410593' not dropped; currently being accessed


ASMCMD [+] > ls -lh +DATAC2/ETSTNEW/DATAFILE/apps_ts_media.713.1094410593
Type      Redund  Striped  Time             Sys  Name
DATAFILE  HIGH    COARSE   MAR 06 14:00:00  Y    apps_ts_media.713.1094410593


SQL> select * from v$datafile where name='+DATAC2/ETSTNEW/DATAFILE/apps_ts_media.713.1094410593';

no rows selected

2022-02-10 08:58:25.036 :kjzddmp():
2022-02-10 22:44:14.097 :kjzddmp():
2022-02-12 09:15:39.169 :kjzddmp():
2022-02-14 15:34:15.112 :kjzddmp():
2022-02-17 08:36:24.175 :kjzddmp():
2022-02-19 09:57:45.106 :kjzddmp():
2022-02-20 09:53:56.081 :kjzddmp():
2022-02-22 14:01:37.031 :kjzddmp():
2022-02-22 14:09:10.104 :kjzddmp():
2022-02-23 13:02:54.034 :kjzddmp():
2022-02-25 09:48:16.036 :kjzddmp():
2022-02-26 17:29:37.029 :kjzddmp():
2022-02-26 17:56:47.033 :kjzddmp():
2022-02-26 18:19:07.130 :kjzddmp():
2022-02-27 09:25:16.153 :kjzddmp():
2022-03-01 12:41:36.116 :kjzddmp():
2022-03-03 10:01:38.047 :kjzddmp():
2022-03-03 17:01:02.049 :kjzddmp():
2022-03-03 18:52:05.112 :kjzddmp():
2022-03-03 20:05:12.138 :kjzddmp():
2022-03-04 10:31:01.136 :kjzddmp():
2022-03-05 14:15:23.041 :kjzddmp():
2022-03-07 18:48:56.125 :kjzddmp():
2022-03-08 15:39:49.111 :kjzddmp():
2022-03-11 20:40:33.044 :kjzddmp():
2022-03-14 10:52:06.034 :kjzddmp():
2022-03-17 16:43:34.026 :kjzddmp():
2022-03-20 10:48:31.071 :kjzddmp():
2022-03-20 11:59:11.029 :kjzddmp():
2022-03-22 10:39:47.031 :kjzddmp():
2022-03-23 20:17:22.044 :kjzddmp():


18070543

efatura <efatura@timestamp.pt>

a3h3!ADB
nomad








create database SIRWEB
    character set WE8ISO8859P1
    national character set AL16UTF16
    controlfile reuse
    user sys identified by P0Chuman_
    user system identified by P0Chuman_
    maxlogfiles  128
    maxlogmembers 4
    maxloghistory 6300
    maxdatafiles 200
    logfile
      GROUP 1 ('+REDO1', '+REDO2') SIZE 1024M,
      GROUP 2 ('+REDO1', '+REDO2') SIZE 1024M,
      GROUP 3 ('+REDO1', '+REDO2') SIZE 1024M,
      GROUP 4 ('+REDO1', '+REDO2') SIZE 1024M,
      GROUP 5 ('+REDO1', '+REDO2') SIZE 1024M
    datafile SIZE 1G
    EXTENT MANAGEMENT LOCAL
    sysaux datafile SIZE 10G
    default temporary tablespace TEMP TEMPFILE SIZE 32767M AUTOEXTEND ON
    DEFAULT TABLESPACE USERS
    DATAFILE SIZE  500M
    undo tablespace UNDOTBS1 DATAFILE SIZE 10G AUTOEXTEND OFF
    noarchivelog;


create database HUCORE
    character set WE8ISO8859P1
    national character set AL16UTF16
    controlfile reuse
    user sys identified by P0Chuman_
    user system identified by P0Chuman_
    maxlogfiles  128
    maxlogmembers 4
    maxloghistory 6300
    maxdatafiles 1000
    logfile
      GROUP 1 ('+REDO1', '+REDO2') SIZE 1024M,
      GROUP 2 ('+REDO1', '+REDO2') SIZE 1024M,
      GROUP 3 ('+REDO1', '+REDO2') SIZE 1024M,
      GROUP 4 ('+REDO1', '+REDO2') SIZE 1024M,
      GROUP 5 ('+REDO1', '+REDO2') SIZE 1024M
    datafile SIZE 10G
    EXTENT MANAGEMENT LOCAL
    sysaux datafile SIZE 10G
    default temporary tablespace TEMP TEMPFILE SIZE 32767M AUTOEXTEND ON
    DEFAULT TABLESPACE USERS
    DATAFILE SIZE  10G
    undo tablespace UNDOTBS01 DATAFILE SIZE 32767M AUTOEXTEND OFF
    noarchivelog;

@?/rdbms/admin/catalog.sql
@?/rdbms/admin/catproc.sql



select * from NLS_DATABASE_PARAMETERS where parameter like '%CHARACTERSET%';

ERROR at line 1:
ORA-01501: CREATE DATABASE failed
ORA-00200: control file could not be created
ORA-00202: control file: '+DATA/sirweb/control01.ctl'
ORA-17502: ksfdcre:3 Failed to create file +DATA/sirweb/control01.ctl
ORA-15001: diskgroup "DATA" does not exist or is not mounted
ORA-12547: TNS:lost contact
ORA-12547: TNS:lost contact


ORA-01501: CREATE DATABASE failed
ORA-00200: control file could not be created
ORA-00202: control file: '+DATA'
ORA-17502: ksfdcre:4 Failed to create file +DATA
ORA-15001: diskgroup "DATA" does not exist or is not mounted
ORA-01017: invalid username/password; logon denied

ORA-17502: ksfdcre:4 Failed to create file ORA-15001: diskgroup ORA-01017: invalid username/password; logon denied

chmod 6751 /u01/app/oracle/product/19.0.0/dbhome_1/bin/oracle

CREATE PROFILE P_SIRWEB LIMIT
    SESSIONS_PER_USER UNLIMITED
    CPU_PER_SESSION UNLIMITED
    CPU_PER_CALL UNLIMITED;


CREATE ROLE JAVA_ADMIN;

CREATE ROLE JAVA_ADMIN;
CREATE ROLE WM_ADMIN_ROLE;
CREATE ROLE JAVAUSERPRIV;
CREATE ROLE JAVAIDPRIV;
CREATE ROLE JAVASYSPRIV;
CREATE ROLE JAVADEBUGPRIV;
CREATE ROLE EJBCLIENT;
CREATE ROLE JAVA_ADMIN;
CREATE ROLE JAVA_DEPLOY;
CREATE ROLE CTXAPP;
CREATE ROLE OLAP_DBA;
CREATE ROLE OLAP_USER;
CREATE ROLE JAVAUSERPRIV;
CREATE ROLE JAVAIDPRIV;
CREATE ROLE JAVASYSPRIV;
CREATE ROLE JAVADEBUGPRIV;
CREATE ROLE JAVA_ADMIN;
CREATE ROLE JAVA_DEPLOY;
CREATE ROLE CONSULTAR;

CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role DEVELOPER_SIRWEB;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role DEVELOPER_SIRWEB;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role DEVELOPER_SIRWEB;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role DEVELOPER_SIRWEB;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role DEVELOPER_SIRWEB;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role DEVELOPER_SIRWEB;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role MIGRACION;
CREATE role GIOSIR;
CREATE role MIGRACION;
CREATE role GIOSIR;
CREATE role MIGRACION;
CREATE role GIOSIR;
CREATE role MIGRACION;
CREATE role GIOSIR;
CREATE role MIGRACION;
CREATE role GIOSIR;
CREATE role MIGRACION;
CREATE role GIOSIR;
CREATE role MIGRACION;
CREATE role GIOSIR;
CREATE role MIGRACION;
CREATE role GIOSIR;
CREATE role MIGRACION;
CREATE role GIOSIR;
CREATE role MIGRACION;
CREATE role GIOSIR;
CREATE role USR_COLAS;
CREATE role GIOSIR;
CREATE role MIGRACION;
